<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<section class="v2206 pearl" aria-label="Silk Ribbons 2206">
  <style>
    .v2206 {
      --h: 212;
      --flow: 1.0;
      --ink: hsl(224 25% 10%);
      --muted: hsl(224 12% 42%);
      --line: hsl(224 20% 20% / 0.12);
      --bg-1: hsl(210 80% 99%);
      --bg-2: hsl(220 70% 97%);
      position: relative;
      padding: clamp(20px, 3.6vw, 44px);
      border-radius: 28px;
      color: var(--ink);
      background:
        radial-gradient(1000px 520px at var(--sx, 60%) var(--sy, 40%), hsl(var(--h) 100% 65% / 0.12), transparent 60%),
        linear-gradient(180deg, var(--bg-1), var(--bg-2));
      box-shadow:
        0 1px 0 hsl(0 0% 100% / 0.85) inset,
        0 -1px 0 hsl(0 0% 0% / 0.05) inset,
        0 34px 90px hsl(230 30% 10% / 0.18);
      overflow: hidden;
      isolation: isolate;
    }
    .v2206.onyx {
      --ink: hsl(0 0% 98%);
      --muted: hsl(220 10% 78%);
      --line: hsl(220 20% 92% / 0.15);
      --bg-1: hsl(235 35% 10%);
      --bg-2: hsl(235 35% 14%);
      background:
        radial-gradient(1100px 720px at var(--sx, 55%) var(--sy, 46%), hsl(calc(var(--h) + 20) 98% 62% / 0.18), transparent 60%),
        linear-gradient(180deg, var(--bg-1), var(--bg-2));
      box-shadow:
        0 1px 0 hsl(0 0% 100% / 0.06) inset,
        0 -1px 0 hsl(0 0% 0% / 0.45) inset,
        0 44px 120px hsl(230 70% 3% / 0.6);
    }

    .v2206::after {
      content: "";
      position: absolute; inset: -1px;
      padding: 1px; border-radius: 30px;
      background: linear-gradient(120deg, hsl(var(--h) 90% 65% / 0.35), transparent 35%, transparent 65%, hsl(calc(var(--h) + 70) 90% 65% / 0.35));
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
              mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor; mask-composite: exclude;
      pointer-events: none;
    }

    .v2206 .wrap {
      position: relative; z-index: 1;
      display: grid; gap: clamp(16px, 3vw, 24px);
      max-width: 1200px; margin: 0 auto;
    }

    .v2206 .top {
      display: grid; grid-template-columns: 1fr auto; gap: 12px; align-items: center;
    }
    .v2206 .tag {
      justify-self: start;
      display: inline-flex; align-items: center; gap: 10px;
      padding: 10px 14px; border-radius: 999px;
      border: 1px solid var(--line);
      background: linear-gradient(180deg, hsl(0 0% 100% / 0.92), hsl(0 0% 100% / 0.64));
      color: var(--ink);
      font: 800 11px/1 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      letter-spacing: 0.14em; text-transform: uppercase;
    }
    .v2206.onyx .tag { background: linear-gradient(180deg, hsl(0 0% 100% / 0.12), hsl(0 0% 100% / 0.06)); }
    .v2206 .tag::before {
      content: ""; width: 8px; height: 8px; border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, white 18%, hsl(calc(var(--h) + 60) 86% 56%) 55%, transparent 70%), hsl(calc(var(--h) + 60) 86% 56%);
      box-shadow: 0 0 12px hsl(calc(var(--h) + 60) 86% 56%);
    }

    .v2206 .controls {
      display: inline-flex; flex-wrap: wrap; gap: 8px; justify-self: end;
    }
    .v2206 .btn, .v2206 .sl {
      appearance: none; cursor: pointer;
      display: inline-flex; align-items: center; gap: 10px;
      padding: 10px 14px; border-radius: 12px;
      border: 1px solid var(--line); color: var(--ink);
      background: linear-gradient(180deg, hsl(0 0% 100% / 0.96), hsl(0 0% 100% / 0.68));
      font: 800 12px/1 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      letter-spacing: 0.04em;
      transition: transform 0.16s ease, box-shadow 0.16s ease, filter 0.16s ease;
      box-shadow: 0 10px 26px hsl(0 0% 0% / 0.08);
    }
    .v2206 .btn:hover { transform: translateY(-1px); }
    .v2206.onyx .btn, .v2206.onyx .sl { background: linear-gradient(180deg, hsl(0 0% 100% / 0.12), hsl(0 0% 100% / 0.06)); box-shadow: 0 16px 36px hsl(230 80% 2% / 0.55); }

    .v2206 input[type="range"] {
      -webkit-appearance: none; appearance: none; width: 140px; height: 10px; border-radius: 999px;
      background: linear-gradient(90deg, hsl(var(--h) 86% 58%), hsl(calc(var(--h) + 60) 86% 56%), hsl(calc(var(--h) - 60) 86% 60%));
      border: 1px solid var(--line); box-shadow: inset 0 1px 0 hsl(0 0% 100% / 0.4);
    }
    .v2206 input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none; appearance: none; width: 18px; height: 18px; border-radius: 50%;
      background: white; border: 2px solid hsl(0 0% 0% / 0.15);
      box-shadow: 0 2px 6px hsl(0 0% 0% / 0.2), 0 0 0 4px hsl(0 0% 100% / 0.35) inset;
    }
    .v2206.onyx input[type="range"]::-webkit-slider-thumb { border-color: hsl(0 0% 100% / 0.35); background: hsl(0 0% 100% / 0.96); }

    .v2206 .hero {
      display: grid; grid-template-columns: 1.1fr 1fr; gap: clamp(12px, 3vw, 22px); align-items: center;
    }
    @media (max-width: 900px) { .v2206 .hero { grid-template-columns: 1fr; } .v2206 .controls { justify-self: start; } }

    .v2206 h1 {
      margin: 6px 0 10px;
      font: 900 clamp(40px, 8.5vw, 110px)/1.02 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      letter-spacing: -0.02em;
      text-wrap: balance;
      background: linear-gradient(180deg, hsl(230 25% 8%), hsl(230 25% 8% / 0.6));
      -webkit-background-clip: text; background-clip: text; color: transparent;
    }
    .v2206.onyx h1 { background: linear-gradient(180deg, hsl(0 0% 100%), hsl(0 0% 100% / 0.6)); }

    .v2206 .sub {
      margin: 0 0 14px;
      font: 500 clamp(14px, 2.2vw, 20px)/1.65 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      color: var(--muted);
      text-wrap: pretty;
    }
    .v2206 .cta { display: flex; gap: 10px; flex-wrap: wrap; }

    .v2206 .stage {
      position: relative;
      border-radius: 20px;
      border: 1px solid var(--line);
      overflow: hidden;
      min-height: 440px;
      aspect-ratio: 4.4 / 3;
      background:
        radial-gradient(70% 100% at 50% 110%, hsl(0 0% 100% / 0.8), hsl(0 0% 100% / 0.4)),
        linear-gradient(180deg, hsl(0 0% 100% / 0.85), hsl(0 0% 100% / 0.55));
      box-shadow:
        0 1px 0 hsl(0 0% 100% / 0.8) inset,
        0 -1px 0 hsl(0 0% 0% / 0.06) inset,
        0 24px 60px hsl(0 0% 0% / 0.08);
      transform: translateZ(0);
      perspective: 1000px;
    }
    .v2206.onyx .stage {
      background:
        radial-gradient(60% 100% at 50% 110%, hsl(0 0% 100% / 0.08), hsl(0 0% 100% / 0.04)),
        linear-gradient(180deg, hsl(0 0% 100% / 0.08), hsl(0 0% 100% / 0.04));
      box-shadow:
        0 1px 0 hsl(0 0% 100% / 0.06) inset,
        0 -1px 0 hsl(0 0% 0% / 0.35) inset,
        0 28px 70px hsl(230 80% 2% / 0.5);
    }

    .v2206 svg { display: block; width: 100%; height: 100%; }

    .v2206 .glass {
      position: absolute; inset: 8% 8%;
      border-radius: 16px; border: 1px solid var(--line);
      background: linear-gradient(180deg, hsl(0 0% 100% / 0.6), hsl(0 0% 100% / 0.18));
      transform-style: preserve-3d;
      transform: rotateX(var(--tiltX, 0deg)) rotateY(var(--tiltY, 0deg));
      transition: transform 140ms ease;
      filter: drop-shadow(0 12px 28px hsl(0 0% 0% / 0.18));
    }
    .v2206.onyx .glass { background: linear-gradient(180deg, hsl(0 0% 100% / 0.08), hsl(0 0% 100% / 0.04)); filter: drop-shadow(0 18px 40px hsl(230 80% 2% / 0.42)); }

    .v2206 .spark {
      position: absolute; width: 8px; height: 8px; border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, white 18%, hsl(calc(var(--h) + 50) 86% 62%) 60%);
      filter: blur(0.2px) brightness(1.2);
      opacity: 0.75;
      animation: v2206-rise calc(9s / var(--flow)) linear infinite;
      pointer-events: none;
      mix-blend-mode: screen;
    }
    .v2206.onyx .spark { opacity: 0.85; }
    @keyframes v2206-rise {
      from { transform: translateY(20%); opacity: 0; }
      10% { opacity: 0.9; }
      to { transform: translateY(-120%); opacity: 0; }
    }

    .v2206 .notes {
      margin: 6px 0 0; padding: 0; list-style: none;
      display: grid; grid-template-columns: repeat(3, minmax(0, 1fr)); gap: 12px;
    }
    @media (max-width: 960px) { .v2206 .notes { grid-template-columns: 1fr 1fr; } }
    @media (max-width: 640px) { .v2206 .notes { grid-template-columns: 1fr; } }
    .v2206 .note {
      padding: 16px; border-radius: 14px; border: 1px solid var(--line);
      background: linear-gradient(180deg, hsl(0 0% 100% / 0.85), hsl(0 0% 100% / 0.5));
      box-shadow: 0 16px 38px hsl(0 0% 0% / 0.08);
      transition: transform 160ms ease, box-shadow 160ms ease;
      min-height: 110px; display: grid; gap: 8px; align-content: start;
    }
    .v2206 .note:hover { transform: translateY(-4px); box-shadow: 0 22px 46px hsl(0 0% 0% / 0.1); }
    .v2206.onyx .note { background: linear-gradient(180deg, hsl(0 0% 100% / 0.08), hsl(0 0% 100% / 0.04)); box-shadow: 0 18px 44px hsl(230 80% 2% / 0.42); }
    .v2206 .note .dot {
      width: 26px; height: 26px; border-radius: 8px;
      background: conic-gradient(from 180deg, hsl(var(--h) 86% 58%), hsl(calc(var(--h) + 60) 86% 56%), hsl(calc(var(--h) - 60) 86% 60%), hsl(var(--h) 86% 58%));
      box-shadow: 0 0 0 1px var(--line) inset, 0 10px 24px hsl(0 0% 0% / 0.18);
    }
    .v2206 .note .t { font: 800 16px/1.2 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; letter-spacing: 0.01em; }
    .v2206 .note p { margin: 0; color: var(--muted); font: 500 13px/1.55 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; }

    .v2206 .meta {
      display: flex; align-items: center; justify-content: space-between; margin-top: 6px;
      color: var(--muted); font: 500 12px/1.6 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    }

    .v2206.reduce, .v2206.reduce * { animation: none !important; transition: none !important; }
  </style>

  <div class="wrap">
    <div class="top">
      <span class="tag" aria-live="polite">Silk Ribbons — 2206</span>
      <div class="controls" aria-label="Appearance controls">
        <button class="btn" id="v2206-theme" type="button" aria-pressed="false" aria-label="Toggle theme">Pearl ↔ Onyx</button>
        <label class="sl" for="v2206-hue"><span>Hue</span><input id="v2206-hue" type="range" min="0" max="360" value="212" aria-label="Tune hue"></label>
        <label class="sl" for="v2206-flow"><span>Flow</span><input id="v2206-flow" type="range" min="0.6" max="1.6" step="0.02" value="1.0" aria-label="Adjust flow speed"></label>
        <label class="sl" for="v2206-count"><span>Ribbons</span><input id="v2206-count" type="range" min="3" max="12" value="7" aria-label="Number of ribbons"></label>
      </div>
    </div>

    <div class="hero">
      <div>
        <h1>Silk waves, quiet thunder.</h1>
        <p class="sub">A kinetic poster woven from light. Drag your cursor to coax the fabric; tune the hue and flow to set the mood.</p>
        <div class="cta">
          <button class="btn" id="v2206-shimmer" type="button" aria-label="Shimmer the fabric">Shimmer</button>
          <button class="btn" id="v2206-reset" type="button" aria-label="Reset">Reset</button>
        </div>
      </div>

      <div class="stage" id="v2206-stage" aria-label="Silk ribbons stage">
        <div class="glass">
          <svg id="v2206-svg" viewBox="0 0 1000 620" aria-hidden="true">
            <defs>
              <filter id="v2206-blur" x="-20%" y="-20%" width="140%" height="140%">
                <feGaussianBlur in="SourceGraphic" stdDeviation="2.6" />
              </filter>
            </defs>
          </svg>
        </div>
        <!-- Floating sparks -->
        <span class="spark" style="left: 12%; bottom: 6%; animation-delay: 0s;"></span>
        <span class="spark" style="left: 28%; bottom: 2%; animation-delay: 1.2s;"></span>
        <span class="spark" style="left: 44%; bottom: 8%; animation-delay: 2.1s;"></span>
        <span class="spark" style="left: 66%; bottom: 4%; animation-delay: 0.6s;"></span>
        <span class="spark" style="left: 82%; bottom: 10%; animation-delay: 1.8s;"></span>
      </div>
    </div>

    <ul class="notes" aria-label="Design notes">
      <li class="note">
        <span class="dot" aria-hidden="true"></span>
        <div class="t">Vector loom</div>
        <p>Ribbons are stroked Béziers in SVG, animated in real time for fluid, ultra‑sharp motion at any size.</p>
      </li>
      <li class="note">
        <span class="dot" aria-hidden="true"></span>
        <div class="t">Human touch</div>
        <p>The fabric leans with your cursor—subtle tilt and amplitude follow your hand.</p>
      </li>
      <li class="note">
        <span class="dot" aria-hidden="true"></span>
        <div class="t">Mindful motion</div>
        <p>Flow respects reduced‑motion preferences; controls adjust speed, hue, and density instantly.</p>
      </li>
    </ul>

    <div class="meta">
      <span>Generative Textile — Edition 2206</span>
      <span id="last-updated">Last updated: 2026-01-26 08:42:25 EST</span>
    </div>
  </div>

  <script>
    (function () {
      const root = document.currentScript.closest('.v2206');
      const svg = root.querySelector('#v2206-svg');
      const stage = root.querySelector('#v2206-stage');
      const hue = root.querySelector('#v2206-hue');
      const flow = root.querySelector('#v2206-flow');
      const count = root.querySelector('#v2206-count');
      const themeBtn = root.querySelector('#v2206-theme');
      const shimmerBtn = root.querySelector('#v2206-shimmer');
      const resetBtn = root.querySelector('#v2206-reset');
      const updated = root.querySelector('#last-updated');

      // Preferences
      const reduce = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (reduce) root.classList.add('reduce');

      const preferDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      if (preferDark) root.classList.replace('pearl', 'onyx');

      // Timestamp
      try {
        const now = new Date();
        const opts = { year: 'numeric', month: 'short', day: '2-digit', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false, timeZoneName: 'short' };
        updated.textContent = 'Last updated: ' + now.toLocaleString(undefined, opts);
      } catch {
        updated.textContent = 'Last updated: ' + new Date().toISOString();
      }

      // Theme toggle
      const setThemeA11y = () => {
        const onyx = root.classList.contains('onyx');
        themeBtn.setAttribute('aria-pressed', String(onyx));
        themeBtn.textContent = onyx ? 'Onyx ↔ Pearl' : 'Pearl ↔ Onyx';
      };
      setThemeA11y();
      themeBtn.addEventListener('click', () => {
        root.classList.toggle('onyx');
        setThemeA11y();
      });

      // CSS vars
      const setHue = v => root.style.setProperty('--h', String(v));
      const setFlow = v => root.style.setProperty('--flow', String(v));
      setHue(hue.value);
      setFlow(flow.value);

      hue.addEventListener('input', e => { setHue(e.target.value); rebuild(); });
      flow.addEventListener('input', e => { setFlow(e.target.value); });

      // Geometry + ribbons
      let W = 1000, H = 620;
      let ribbons = [];
      let animId = null;
      let t = 0;
      let amplitudeBoost = 1.0;
      let pointerTilt = { x: 0, y: 0 };

      const rand = (a, b) => Math.random() * (b - a) + a;
      const clamp = (n, a, b) => Math.max(a, Math.min(b, n));

      function clearSVG() {
        while (svg.lastChild) svg.removeChild(svg.lastChild);
        const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
        defs.innerHTML = '<filter id="v2206-blur" x="-20%" y="-20%" width="140%" height="140%"><feGaussianBlur in="SourceGraphic" stdDeviation="2.6"/></filter>';
        svg.appendChild(defs);
      }

      function makeGradient(id, h, s1, s2, l1, l2) {
        const g = document.createElementNS('http://www.w3.org/2000/svg', 'linearGradient');
        g.setAttribute('id', id);
        g.setAttribute('gradientUnits', 'userSpaceOnUse');
        g.setAttribute('x1', '0'); g.setAttribute('y1', '0'); g.setAttribute('x2', String(W)); g.setAttribute('y2', '0');
        const stop = (o, c) => {
          const st = document.createElementNS('http://www.w3.org/2000/svg', 'stop');
          st.setAttribute('offset', o);
          st.setAttribute('stop-color', c);
          return st;
        };
        const c1 = `hsl(${h} ${s1}% ${l1}%)`;
        const c2 = `hsl(${(h + 40) % 360} ${s2}% ${l2}%)`;
        g.appendChild(stop('0%', c1));
        g.appendChild(stop('50%', `hsl(${(h + 20) % 360} ${(s1 + s2) / 2}% ${(l1 + l2) / 2}%)`));
        g.appendChild(stop('100%', c2));
        return g;
      }

      function buildPath(points) {
        if (!points.length) return '';
        const [x0, y0] = points[0];
        let d = `M ${x0.toFixed(2)} ${y0.toFixed(2)}`;
        for (let i = 1; i < points.length; i++) {
          const [x, y] = points[i];
          d += ` L ${x.toFixed(2)} ${y.toFixed(2)}`;
        }
        return d;
      }

      function rebuild() {
        clearSVG();
        ribbons = [];
        const n = parseInt(count.value, 10);
        const baseHue = parseFloat(getComputedStyle(root).getPropertyValue('--h')) || 212;
        const defs = svg.querySelector('defs');
        // Create gradients + paths
        for (let i = 0; i < n; i++) {
          const gradId = `g${i}-${Math.floor(Math.random()*1e6)}`;
          const h = (baseHue + i * (28 / Math.max(1, (n - 1))) + rand(-6, 6) + 360) % 360;
          defs.appendChild(makeGradient(gradId, h, 86, 80, 60, 56));

          const p = document.createElementNS('http://www.w3.org/2000/svg', 'path');
          p.setAttribute('fill', 'none');
          p.setAttribute('stroke', `url(#${gradId})`);
          const thickness = 16 + (i / Math.max(1, n - 1)) * 24 + rand(-2, 4);
          p.setAttribute('stroke-width', thickness.toFixed(2));
          p.setAttribute('stroke-linecap', 'round');
          p.setAttribute('stroke-linejoin', 'round');
          p.setAttribute('filter', 'url(#v2206-blur)');
          svg.appendChild(p);

          ribbons.push({
            el: p,
            baseY: H * (0.18 + 0.64 * (i / Math.max(1, n - 1))),
            amp: 18 + i * 4 + rand(-2, 6),
            k: 2 * Math.PI / W * (1.2 + i * 0.08),
            phase: rand(0, Math.PI * 2),
            thickness
          });
        }
        render(0, true);
      }

      function render(dt, force) {
        const speed = parseFloat(getComputedStyle(root).getPropertyValue('--flow')) || 1;
        if (!force) t += dt * 0.001 * 0.8 * speed;
        const ptsCount = 64;
        const step = W / (ptsCount - 1);

        for (let i = 0; i < ribbons.length; i++) {
          const r = ribbons[i];
          const points = [];
          const phase = r.phase + t * (0.8 + i * 0.05);
          const amp = r.amp * amplitudeBoost * (0.8 + Math.abs(pointerTilt.x) * 0.6);
          for (let j = 0; j < ptsCount; j++) {
            const x = j * step;
            const y =
              r.baseY +
              Math.sin(x * r.k + phase) * amp * 0.9 +
              Math.cos(x * r.k * 0.5 + phase * 0.7) * amp * 0.3;
            points.push([x, y]);
          }
          r.el.setAttribute('d', buildPath(points));
          // Slight color drift by shifting gradient reference along X (not live animatable in CSS here).
        }
      }

      // Animation loop
      let last = performance.now();
      function loop(now) {
        const dt = now - last; last = now;
        if (!reduce) render(dt, false);
        animId = requestAnimationFrame(loop);
      }

      // Interactions
      let rect = root.getBoundingClientRect();
      const measure = () => { rect = root.getBoundingClientRect(); };
      window.addEventListener('resize', () => {
        measure();
        // maintain viewBox, but recompute baseY/amp proportional to new size
        const vb = svg.viewBox.baseVal;
        W = vb.width; H = vb.height; // keep consistent
        rebuild();
      }, { passive: true });

      root.addEventListener('pointermove', (e) => {
        const x = clamp((e.clientX - rect.left) / rect.width, 0, 1);
        const y = clamp((e.clientY - rect.top) / rect.height, 0, 1);
        root.style.setProperty('--sx', (x * 100) + '%');
        root.style.setProperty('--sy', (y * 100) + '%');
        const rx = (0.5 - y) * 10;
        const ry = (x - 0.5) * 10;
        pointerTilt.x = ry / 10;
        pointerTilt.y = rx / 10;
        if (!reduce) {
          root.style.setProperty('--tiltX', rx.toFixed(2) + 'deg');
          root.style.setProperty('--tiltY', ry.toFixed(2) + 'deg');
        }
        amplitudeBoost = 0.9 + Math.hypot(x - 0.5, y - 0.5) * 0.8;
      });

      root.addEventListener('pointerleave', () => {
        root.style.setProperty('--tiltX', '0deg');
        root.style.setProperty('--tiltY', '0deg');
        root.style.setProperty('--sx', '60%');
        root.style.setProperty('--sy', '40%');
        amplitudeBoost = 1.0;
        pointerTilt = { x: 0, y: 0 };
      });

      // Shimmer pulse
      shimmerBtn.addEventListener('click', () => {
        if (reduce) return;
        let t0 = performance.now();
        const dur = 680;
        const a0 = amplitudeBoost;
        const loopPulse = (now) => {
          const p = Math.min(1, (now - t0) / dur);
          const e = p < 0.5 ? p / 0.5 : 1 - (p - 0.5) / 0.5; // triangle ease
          amplitudeBoost = a0 + e * 0.8;
          if (p < 1) requestAnimationFrame(loopPulse);
          else amplitudeBoost = a0;
        };
        requestAnimationFrame(loopPulse);
      });

      // Reset
      resetBtn.addEventListener('click', () => {
        hue.value = 212; setHue(212);
        flow.value = 1.0; setFlow(1.0);
        count.value = 7;
        amplitudeBoost = 1.0;
        root.style.setProperty('--tiltX', '0deg');
        root.style.setProperty('--tiltY', '0deg');
        rebuild();
      });

      count.addEventListener('input', rebuild);

      // Init
      rebuild();
      if (!reduce) {
        animId = requestAnimationFrame((n) => { last = n; loop(n); });
      }

      // Clean up if removed
      const obs = new MutationObserver(() => {
        if (!document.body.contains(root) && animId) cancelAnimationFrame(animId);
      });
      obs.observe(document.body, { childList: true, subtree: true });
    })();
  </script>
</section>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


