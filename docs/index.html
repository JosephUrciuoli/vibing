<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<div id="vibe876" class="lumen-garden">
  <style>
    /* LUMEN GARDEN — kinetic poster, scoped to #vibe876 */
    #vibe876 {
      --h: 24; /* base hue for palette */
      --a1: hsl(var(--h) 90% 55%);
      --a2: hsl(calc(var(--h) + 40) 80% 58%);
      --a3: hsl(calc(var(--h) + 80) 75% 60%);
      --paper: #fffaf7;
      --paper-2: #fff6ef;
      --ink: #161616;
      --muted: #6c6c70;
      --line: rgba(0,0,0,.10);
      --glass: rgba(255,255,255,.6);
      --shadow: 0 30px 70px rgba(0,0,0,.15);
      --fade: .14; /* trails opacity (higher = shorter trails) */
      --grain-opacity: .055;
      color: var(--ink);
      font: 500 15px/1.5 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      -webkit-font-smoothing: antialiased;
      letter-spacing: -0.01em;
    }
    #vibe876.noir {
      --paper: #0c0e10;
      --paper-2: #0a0c0f;
      --ink: #f5f7fb;
      --muted: #a8b0bc;
      --glass: rgba(18,20,26,.6);
      --line: rgba(255,255,255,.14);
      --grain-opacity: .08;
      --shadow: 0 30px 90px rgba(0,0,0,.6);
    }

    #vibe876 .frame {
      position: relative;
      display: grid;
      grid-template-columns: 80px 1fr;
      gap: 18px;
      min-height: clamp(620px, 70vh, 980px);
      border-radius: 36px;
      padding: 18px;
      border: 1px solid var(--line);
      background:
        radial-gradient(1200px 900px at 110% -10%, color-mix(in oklab, var(--a2) 18%, transparent), transparent 65%),
        radial-gradient(1200px 900px at -10% 120%, color-mix(in oklab, var(--a3) 16%, transparent), transparent 64%),
        linear-gradient(180deg, var(--paper), var(--paper-2));
      overflow: hidden;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.04), var(--shadow);
      isolation: isolate;
    }
    #vibe876 .frame::before {
      content: "";
      position: absolute; inset: -15%;
      background: conic-gradient(from 180deg at 50% 50%,
        color-mix(in oklab, var(--a1) 7%, transparent),
        transparent 22%,
        color-mix(in oklab, var(--a2) 6%, transparent) 33%,
        transparent 66%,
        color-mix(in oklab, var(--a3) 7%, transparent) 77%,
        transparent 100%);
      filter: blur(60px) saturate(120%);
      opacity: .55;
      z-index: 0;
      pointer-events: none;
      transform: translateZ(0);
    }
    #vibe876 .grain {
      position: absolute; inset: 0; z-index: 0; pointer-events: none;
      background:
        linear-gradient(180deg, rgba(255,255,255,.06), transparent 40%),
        url("data:image/svg+xml,%3Csvg viewBox='0 0 96 96' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='f'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.75' numOctaves='2' stitchTiles='stitch'/%3E%3CfeColorMatrix type='saturate' values='0'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23f)' opacity='0.35'/%3E%3C/svg%3E");
      mix-blend-mode: overlay;
      opacity: var(--grain-opacity);
    }

    /* Side mast — vertical title */
    #vibe876 .mast {
      position: relative; z-index: 2;
      display: grid; align-content: space-between;
      border-radius: 24px;
      border: 1px solid var(--line);
      background: var(--glass);
      backdrop-filter: blur(14px) saturate(160%);
      padding: 14px 10px;
      box-shadow: 0 20px 50px rgba(0,0,0,.10), inset 0 1px 0 rgba(255,255,255,.4);
    }
    #vibe876 .brand {
      writing-mode: vertical-rl;
      text-orientation: mixed;
      display: grid; gap: 10px; align-items: center; justify-items: center;
    }
    #vibe876 .logo {
      width: 42px; height: 42px; border-radius: 12px;
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.8), rgba(255,255,255,0) 50%),
        conic-gradient(var(--a1), var(--a2), var(--a3), var(--a1));
      animation: spin 18s linear infinite;
      box-shadow: inset 0 3px 12px rgba(255,255,255,.65), 0 10px 28px color-mix(in oklab, var(--a2) 28%, transparent);
    }
    @keyframes spin { to { transform: rotate(360deg); } }
    #vibe876 .title {
      font: 900 clamp(22px, 4.4vw, 42px)/0.95 ui-sans-serif, system-ui, -apple-system;
      letter-spacing: -0.06em;
      color: var(--ink);
      background: linear-gradient(180deg, var(--a1), var(--a2), var(--a3));
      -webkit-background-clip: text; background-clip: text; color: transparent;
      text-shadow: 0 1px 0 rgba(255,255,255,.25);
    }
    #vibe876 .tag {
      writing-mode: initial;
      font-size: 11px; color: var(--muted);
      transform: rotate(180deg); /* because vertical-rl stacks bottom-to-top */
      opacity: .9;
    }

    /* Canvas stage + overlay */
    #vibe876 .stage {
      position: relative; z-index: 1;
      border-radius: 28px;
      border: 1px solid var(--line);
      overflow: hidden;
      min-height: clamp(520px, 62vh, 860px);
      background:
        radial-gradient(140% 120% at 50% 0%, rgba(255,255,255,.45), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.35), transparent 30%);
      box-shadow: inset 0 -1px 0 rgba(255,255,255,.05);
      transition: transform .28s ease, box-shadow .28s ease;
    }
    #vibe876.noir .stage {
      background:
        radial-gradient(140% 120% at 50% 100%, rgba(255,255,255,.06), transparent 65%),
        linear-gradient(180deg, rgba(255,255,255,.06), transparent 35%);
    }
    #vibe876 canvas {
      position: absolute; inset: 0; width: 100%; height: 100%;
    }
    #vibe876 .poster-copy {
      position: absolute; inset: 14px; display: grid; align-content: space-between; pointer-events: none;
      color: var(--muted);
    }
    #vibe876 .headline {
      justify-self: start;
      font: 800 clamp(28px, 7vw, 86px)/0.98 ui-sans-serif, system-ui, -apple-system;
      letter-spacing: -0.05em;
      background: linear-gradient(90deg, var(--a1), var(--a2), var(--a3));
      -webkit-background-clip: text; background-clip: text; color: transparent;
      filter: drop-shadow(0 1px 0 rgba(255,255,255,.3));
      opacity: .92;
    }
    #vibe876 .sub {
      font-size: 12px; color: var(--muted); opacity: .95;
    }

    /* Dock controls */
    #vibe876 .dock {
      position: absolute; right: 14px; top: 14px; z-index: 3;
      display: grid; grid-auto-flow: column; gap: 8px; align-items: center;
    }
    #vibe876 .chip, #vibe876 .knob, #vibe876 .toggle {
      -webkit-tap-highlight-color: transparent;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: var(--glass);
      backdrop-filter: blur(12px) saturate(160%);
      color: var(--ink);
      box-shadow: 0 10px 26px rgba(0,0,0,.10);
      display: inline-grid; align-items: center; gap: 8px;
      font-weight: 800; font-size: 12px;
      padding: 8px 12px;
    }
    #vibe876 .chip { cursor: pointer; }
    #vibe876 .chip:hover { transform: translateY(-1px); box-shadow: 0 16px 34px rgba(0,0,0,.16); }
    #vibe876 .knob { grid-auto-flow: column; }
    #vibe876 input[type="range"] {
      appearance: none; width: min(32vw, 220px); height: 6px; border-radius: 999px; cursor: pointer; outline: none;
      background: linear-gradient(90deg, var(--a1), var(--a2));
    }
    #vibe876 input[type="range"]::-webkit-slider-thumb,
    #vibe876 input[type="range"]::-moz-range-thumb {
      -webkit-appearance: none; width: 18px; height: 18px; border-radius: 50%;
      background: radial-gradient(circle at 35% 35%, #fff, #e9edf8);
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    }
    #vibe876 .switch {
      width: 46px; height: 26px; border-radius: 999px; border: 1px solid var(--line);
      background: var(--glass); position: relative; cursor: pointer; display: inline-block;
    }
    #vibe876 .switch::after {
      content: ""; position: absolute; top: 2px; left: 2px; width: 22px; height: 22px; border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff, #e9edf8);
      transition: transform .22s ease; box-shadow: 0 2px 8px rgba(0,0,0,.25);
    }
    #vibe876 .switch[data-on="true"]::after { transform: translateX(20px); }
    #vibe876 .legend {
      position: absolute; left: 14px; bottom: 14px; z-index: 3;
      display: grid; gap: 6px; color: var(--muted); font-size: 12px;
      background: var(--glass); border: 1px solid var(--line); border-radius: 12px; padding: 8px 10px;
      backdrop-filter: blur(10px) saturate(150%);
    }
    #vibe876 .pulse {
      width: 8px; height: 8px; border-radius: 50%; display: inline-block;
      background: radial-gradient(circle at 30% 30%, #fff, color-mix(in oklab, var(--a1) 45%, transparent));
      border: 1px solid rgba(0,0,0,0.06);
      box-shadow: 0 3px 8px color-mix(in oklab, var(--a1) 35%, transparent);
      animation: pulse 3s ease-in-out infinite;
      vertical-align: -1px;
    }
    @keyframes pulse { 0%,100% { transform: scale(1); opacity: .9; } 50% { transform: scale(1.25); opacity: 1; } }

    /* Focus styles */
    #vibe876 :is(button, input, .stage):focus-visible {
      outline: 2px solid color-mix(in oklab, var(--a2) 52%, var(--a1));
      outline-offset: 2px; border-radius: 14px;
    }

    @media (max-width: 860px) {
      #vibe876 .frame { grid-template-columns: 1fr; }
      #vibe876 .mast { grid-auto-flow: column; grid-auto-columns: 1fr; padding: 10px 12px; }
      #vibe876 .brand { writing-mode: initial; transform: none; grid-auto-flow: column; }
      #vibe876 .tag { transform: none; }
      #vibe876 .stage { min-height: 600px; }
      #vibe876 .dock { left: 14px; right: auto; grid-auto-flow: row; }
      #vibe876 input[type="range"] { width: min(60vw, 320px); }
    }
    @media (prefers-reduced-motion: reduce) {
      #vibe876 .logo { animation: none !important; }
      #vibe876 .pulse { animation: none !important; }
      #vibe876 .stage { transition: none !important; }
    }
  </style>

  <div class="frame">
    <span class="grain" aria-hidden="true"></span>

    <aside class="mast">
      <div class="brand">
        <span class="logo" aria-hidden="true"></span>
        <div class="title">Lumen Garden</div>
        <div class="tag">A kinetic poster in perpetual bloom.</div>
      </div>
      <div class="tag">Drag to steer wind. Click to scatter petals.</div>
    </aside>

    <section class="stage" id="stage" tabindex="0" aria-label="Lumen Garden canvas">
      <canvas id="garden" aria-hidden="true"></canvas>

      <div class="poster-copy" aria-hidden="true">
        <div class="headline">breathe in color</div>
        <div class="sub">live print — generative ink on digital paper</div>
      </div>

      <div class="dock">
        <button class="chip" id="theme" aria-pressed="false" title="Toggle day/night">Theme</button>
        <button class="chip" id="palette" title="Shuffle colors">Palette</button>
        <label class="knob" for="bloom">
          Bloom
          <input id="bloom" type="range" min="120" max="1600" step="10" value="620" />
        </label>
        <label class="knob" for="wind">
          Wind
          <input id="wind" type="range" min="0.2" max="3.2" step="0.01" value="1.15" />
        </label>
        <div class="toggle">
          Trails
          <span id="trails" class="switch" data-on="true" role="switch" aria-checked="true" tabindex="0"></span>
        </div>
        <button class="chip" id="pause" title="Pause/Play">Pause</button>
        <button class="chip" id="clear" title="Clear canvas">Clear</button>
      </div>

      <div class="legend">
        <div><span class="pulse" aria-hidden="true"></span> Space to pause, P to palette, C to clear</div>
        <div><span id="last-updated">Last updated: 2025-11-25 14:15:37 EST</span></div>
      </div>
    </section>
  </div>

  <script>
    (function () {
      const root = document.getElementById('vibe876');
      const cvs = root.querySelector('#garden');
      const ctx = cvs.getContext('2d', { alpha: true });
      const stage = root.querySelector('#stage');

      const bloom = root.querySelector('#bloom');
      const wind = root.querySelector('#wind');
      const trails = root.querySelector('#trails');
      const pauseBtn = root.querySelector('#pause');
      const clearBtn = root.querySelector('#clear');
      const themeBtn = root.querySelector('#theme');
      const paletteBtn = root.querySelector('#palette');
      const lastUpdated = root.querySelector('#last-updated');

      // Time label
      function tickTime() {
        const d = new Date();
        try {
          lastUpdated.textContent = d.toLocaleString(undefined, {
            year: 'numeric', month: 'short', day: '2-digit',
            hour: '2-digit', minute: '2-digit', second: '2-digit', timeZoneName: 'short'
          });
        } catch { lastUpdated.textContent = d.toString(); }
      }
      tickTime();
      const timeIv = setInterval(tickTime, 1000);

      // Theme
      const THEME_KEY = 'garden-theme';
      if (localStorage.getItem(THEME_KEY) === 'noir') {
        root.classList.add('noir');
        themeBtn.setAttribute('aria-pressed', 'true');
      }
      themeBtn.addEventListener('click', () => {
        const on = root.classList.toggle('noir');
        themeBtn.setAttribute('aria-pressed', on ? 'true' : 'false');
        localStorage.setItem(THEME_KEY, on ? 'noir' : 'day');
        resize(true);
      });

      // Palette
      function shuffleHue() {
        const h = Math.floor(Math.random() * 360);
        root.style.setProperty('--h', h);
      }
      paletteBtn.addEventListener('click', shuffleHue);
      if (!localStorage.getItem('garden-first')) { shuffleHue(); localStorage.setItem('garden-first', '1'); }

      // Trails
      function setTrails(on) {
        trails.dataset.on = on ? 'true' : 'false';
        trails.setAttribute('aria-checked', on ? 'true' : 'false');
        root.style.setProperty('--fade', on ? '.14' : '.9');
      }
      trails.addEventListener('click', () => setTrails(trails.dataset.on !== 'true'));
      trails.addEventListener('keydown', (e) => {
        if (e.key === ' ' || e.key === 'Enter') { setTrails(trails.dataset.on !== 'true'); e.preventDefault(); }
      });
      setTrails(true);

      // Canvas + field
      let DPR = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
      let W = 0, H = 0;
      let petals = [];
      let paused = false;
      let last = 0;
      const windTarget = { x: 0, y: 0, active: false };

      function resize(hard = false) {
        const r = cvs.getBoundingClientRect();
        W = Math.floor(r.width * DPR);
        H = Math.floor(r.height * DPR);
        cvs.width = W; cvs.height = H;
        if (hard) {
          petals = [];
          seed();
          wipe(true);
        } else {
          wipe(false);
        }
      }
      window.addEventListener('resize', () => resize(false));

      function wipe(hard) {
        const noir = root.classList.contains('noir');
        ctx.globalCompositeOperation = 'source-over';
        ctx.fillStyle = noir ? '#0c0e10' : '#fffaf7';
        ctx.fillRect(0, 0, W, H);
        if (hard) backdrop();
      }

      function backdrop() {
        const noir = root.classList.contains('noir');
        const g = ctx.createRadialGradient(W/2, H/2, 10, W/2, H/2, Math.max(W,H)*0.7);
        const cs = getComputedStyle(root);
        const a1 = cs.getPropertyValue('--a1').trim();
        const a2 = cs.getPropertyValue('--a2').trim();
        const a3 = cs.getPropertyValue('--a3').trim();
        function hsla(c, a) { return c.replace('hsl','hsla').replace(')',','+a+')'); }
        g.addColorStop(0, noir ? 'rgba(255,255,255,.03)' : 'rgba(0,0,0,.03)');
        g.addColorStop(.25, hsla(a1, noir ? .08 : .10));
        g.addColorStop(.6, hsla(a2, noir ? .07 : .08));
        g.addColorStop(1, 'rgba(0,0,0,0)');
        ctx.save();
        ctx.globalCompositeOperation = 'lighter';
        ctx.fillStyle = g;
        ctx.fillRect(0,0,W,H);
        ctx.restore();
      }

      function seed() {
        const n = parseInt(bloom.value, 10) || 600;
        petals.length = 0;
        for (let i = 0; i < n; i++) {
          petals.push(makePetal());
        }
      }
      function makePetal(x = Math.random() * W, y = Math.random() * H, burst=false) {
        const cs = getComputedStyle(root);
        const baseH = parseFloat(cs.getPropertyValue('--h')) || 24;
        const hueJitter = (Math.random() * 90) - 45;
        return {
          x, y,
          vx: 0, vy: 0,
          life: burst ? 0.8 + Math.random()*0.6 : 1.8 + Math.random()*1.2,
          size: burst ? (1 + Math.random()*2) * DPR : (0.6 + Math.random()*1.6) * DPR,
          hueOff: hueJitter,
          twist: Math.random() * Math.PI * 2
        };
      }

      // Interaction
      stage.addEventListener('pointermove', (e) => {
        const r = stage.getBoundingClientRect();
        windTarget.x = (e.clientX - r.left) * DPR;
        windTarget.y = (e.clientY - r.top) * DPR;
        windTarget.active = true;
      });
      stage.addEventListener('pointerleave', () => { windTarget.active = false; });
      stage.addEventListener('click', (e) => {
        const r = stage.getBoundingClientRect();
        const cx = (e.clientX - r.left) * DPR;
        const cy = (e.clientY - r.top) * DPR;
        for (let i = 0; i < 220; i++) {
          const a = Math.random() * Math.PI * 2;
          const d = 40 + Math.random()*140;
          const p = makePetal(cx + Math.cos(a)*6, cy + Math.sin(a)*6, true);
          p.vx = Math.cos(a) * d;
          p.vy = Math.sin(a) * d;
          petals.push(p);
        }
      });

      // Pause / Clear
      function setPaused(p) {
        paused = p;
        pauseBtn.textContent = p ? 'Play' : 'Pause';
      }
      pauseBtn.addEventListener('click', () => setPaused(!paused));
      clearBtn.addEventListener('click', () => { wipe(true); backdrop(); });

      // Keyboard
      stage.addEventListener('keydown', (e) => {
        if (e.key === ' ') { setPaused(!paused); e.preventDefault(); }
        if (e.key.toLowerCase() === 'p') { shuffleHue(); }
        if (e.key.toLowerCase() === 'c') { wipe(true); backdrop(); }
      });

      // Animation loop
      function frame(ms) {
        const dt = Math.min(50, (ms - last) || 16) / 1000;
        last = ms;

        // Fade for trails
        const fade = parseFloat(getComputedStyle(root).getPropertyValue('--fade')) || 0.14;
        const noir = root.classList.contains('noir');
        ctx.globalCompositeOperation = 'source-over';
        ctx.fillStyle = noir ? `rgba(12,14,16,${fade})` : `rgba(255,250,247,${fade})`;
        ctx.fillRect(0, 0, W, H);

        if (!paused) {
          const cs = getComputedStyle(root);
          const baseH = parseFloat(cs.getPropertyValue('--h')) || 24;
          const flow = parseFloat(wind.value) || 1;

          for (let i = petals.length - 1; i >= 0; i--) {
            const p = petals[i];

            // Vector field (soft curl)
            const sx = (p.x / W - 0.5), sy = (p.y / H - 0.5);
            const t = ms * 0.00025;
            const angle =
              Math.sin((sy * 6.0 + t) + Math.cos((sx * 5.0 - t) * 0.9)) * Math.PI +
              Math.cos((sx * 6.2 - t) + Math.sin((sy * 5.1 + t) * 1.1));

            // Wind toward pointer
            let wx = 0, wy = 0;
            if (windTarget.active) {
              const dx = windTarget.x - p.x;
              const dy = windTarget.y - p.y;
              const d = Math.max(8, Math.hypot(dx, dy));
              const wmag = Math.min(140, 900 / d);
              wx = (dx / d) * wmag;
              wy = (dy / d) * wmag;
            }

            // Integrate velocity
            const spd = (20 + 60 * Math.abs(Math.sin(p.twist + t))) * flow;
            p.vx += Math.cos(angle) * spd * dt + wx * 0.4 * dt;
            p.vy += Math.sin(angle) * spd * dt + wy * 0.4 * dt;

            // Drag
            p.vx *= 0.94;
            p.vy *= 0.94;

            const px = p.x, py = p.y;
            p.x += p.vx * dt;
            p.y += p.vy * dt;

            // Wrap edges softly
            if (p.x < -10) p.x = W + 10;
            if (p.x > W + 10) p.x = -10;
            if (p.y < -10) p.y = H + 10;
            if (p.y > H + 10) p.y = -10;

            // Draw ribbon segment
            const hue = (baseH + p.hueOff + Math.sin((p.x + p.y) * 0.001 + t) * 18) % 360;
            ctx.lineWidth = p.size;
            ctx.lineCap = 'round';
            ctx.strokeStyle = `hsla(${hue}, 90%, ${noir ? 70 : 46}%, ${noir ? 0.75 : 0.62})`;
            ctx.beginPath();
            ctx.moveTo(px, py);
            ctx.lineTo(p.x, p.y);
            ctx.stroke();

            // Glow bud
            const g = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, 12 * DPR);
            g.addColorStop(0, `hsla(${hue},95%,70%,.9)`);
            g.addColorStop(1, `hsla(${hue},85%,60%,0)`);
            ctx.fillStyle = g;
            ctx.beginPath();
            ctx.arc(p.x, p.y, 0.6 * p.size + 0.6, 0, Math.PI * 2);
            ctx.fill();

            // Age & recycle
            p.life -= dt * (0.24 + flow * 0.06);
            if (p.life <= 0) {
              petals[i] = makePetal();
            }
          }
        }

        requestAnimationFrame(frame);
      }

      // React to controls
      bloom.addEventListener('input', () => seed());
      wind.addEventListener('input', () => { /* handled in loop */ });

      // Init
      resize(true);
      seed();
      backdrop();
      requestAnimationFrame(frame);

      // Cleanup
      window.addEventListener('beforeunload', () => clearInterval(timeIv));
    })();
  </script>
</div>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


