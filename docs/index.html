<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<section class="aero-441" data-mode="day" style="--mx:50%;--my:50%">
  <style>
    .aero-441{
      --ink:#0a1222;
      --muted:rgba(10,18,34,.62);
      --bg1:#f6fbff;
      --bg2:#fff6f4;
      --edge:rgba(0,0,0,.12);
      --glass:rgba(255,255,255,.55);
      --p1:#6ea8ff; --p2:#7ee8c6; --p3:#ff78b9;
      position:relative;
      display:grid;
      gap:clamp(16px,2.6vw,28px);
      padding:clamp(18px,2.8vw,40px);
      border-radius:32px;
      border:1px solid var(--edge);
      background:
        radial-gradient(1300px 900px at var(--mx) var(--my), rgba(0,0,0,.06), transparent 55%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
      box-shadow: 0 32px 100px rgba(0,0,0,.18), inset 0 1px 0 rgba(255,255,255,.9);
      color:var(--ink);
      min-height: clamp(560px, 72vh, 980px);
      isolation:isolate;
      overflow:hidden;
      font-family: ui-sans-serif, -apple-system, Inter, Segoe UI, Roboto, "Helvetica Neue", Arial;
    }
    .aero-441::before{
      content:"";
      position:absolute; inset:-30%;
      background:
        conic-gradient(from 0deg at 70% 30%, rgba(110,168,255,.22), rgba(126,232,198,.22), rgba(255,120,185,.18), transparent 70%);
      filter: blur(70px) saturate(1.05);
      mix-blend-mode: screen; opacity:.55; pointer-events:none;
      animation: spin-441 48s linear infinite;
    }
    .aero-441::after{
      content:"";
      position:absolute; inset:0;
      background:
        radial-gradient(900px 700px at var(--mx) var(--my), rgba(255,255,255,.5), transparent 60%),
        linear-gradient(transparent 65%, rgba(0,0,0,.06));
      mask: radial-gradient(140% 120% at 50% 40%, #000, transparent);
      pointer-events:none;
      mix-blend-mode:soft-light;
    }
    @keyframes spin-441 { to { transform: rotate(1turn); } }

    /* Night */
    .aero-441[data-mode="night"]{
      --ink:#eaf2ff;
      --muted:rgba(234,242,255,.7);
      --bg1:#070b14; --bg2:#121c2c;
      --edge:rgba(255,255,255,.14);
      --glass:rgba(255,255,255,.08);
      box-shadow: 0 48px 140px rgba(0,0,0,.6), inset 0 1px 0 rgba(255,255,255,.06);
      background:
        radial-gradient(1200px 800px at var(--mx) var(--my), rgba(255,255,255,.1), transparent 55%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
    }

    .header-441{ display:grid; justify-items:center; text-align:center; gap:12px; position:relative; z-index:2; }
    .crest-441{
      display:inline-flex; align-items:center; gap:10px;
      padding:8px 14px; border-radius:999px;
      border:1px solid var(--edge);
      background:var(--glass);
      color:var(--muted);
      font-weight:850; font-size:11px; letter-spacing:.28em; text-transform:uppercase;
      backdrop-filter: blur(8px);
    }
    .title-441{
      margin:2px 0 0;
      font-weight:1000; letter-spacing:-.035em; line-height:.86;
      font-size: clamp(52px, 10vw, 122px);
      background: linear-gradient(90deg, var(--p1), var(--p2), var(--p3));
      -webkit-background-clip:text; background-clip:text; color:transparent;
      text-shadow: 0 6px 40px rgba(255,255,255,.08);
      transition: transform .25s ease;
    }
    .subtitle-441{
      margin:0; max-width: 72ch; color:var(--muted);
      font-size: clamp(14px, 2vw, 18px);
    }

    .controls-441{
      display:flex; flex-wrap:wrap; justify-content:center; gap:10px; margin-top:6px;
    }
    .btn-441, .chip-441{
      appearance:none; cursor:pointer; user-select:none;
      border-radius:16px; padding:12px 16px;
      font-weight:850; letter-spacing:.2px;
      border:1px solid rgba(0,0,0,.14);
      background: linear-gradient(180deg, rgba(255,255,255,.96), rgba(255,255,255,.76));
      color:#0b1320;
      box-shadow: 0 14px 28px rgba(0,0,0,.18), inset 0 1px 0 rgba(255,255,255,.8);
      transition: transform .18s ease, box-shadow .18s ease, filter .18s ease, background .18s ease, color .18s ease;
    }
    .btn-441:hover, .chip-441:hover{ transform: translateY(-1px); box-shadow: 0 20px 44px rgba(0,0,0,.22), inset 0 1px 0 rgba(255,255,255,.85); }
    .btn-441:active, .chip-441:active{ transform: translateY(0); }
    .ghost-441{ background: var(--glass); color: var(--ink); border-color: var(--edge); box-shadow: inset 0 1px 0 rgba(255,255,255,.12); backdrop-filter: blur(8px); }
    .outline-441{ background: transparent; color: var(--ink); border-color: var(--edge); box-shadow:none; }
    .aero-441[data-mode="night"] .btn-441, .aero-441[data-mode="night"] .chip-441{ color:#0b1320; }
    .aero-441[data-mode="night"] .ghost-441{ background: rgba(255,255,255,.08); color: var(--ink); }

    .knob-441{
      display:flex; align-items:center; gap:10px;
      padding:10px 14px; border-radius:14px; border:1px solid var(--edge);
      background:var(--glass); backdrop-filter: blur(8px);
      color:var(--ink); font-weight:800;
    }
    .knob-441 input[type="range"]{
      -webkit-appearance:none; appearance:none; width:160px; height:8px; border-radius:999px; background: rgba(0,0,0,.1); outline:none;
    }
    .knob-441 input[type="range"]::-webkit-slider-thumb{
      -webkit-appearance:none; appearance:none; width:18px; height:18px; border-radius:50%;
      background: linear-gradient(180deg, var(--p2), var(--p3)); border:1px solid rgba(0,0,0,.22); box-shadow: 0 4px 10px rgba(0,0,0,.24); cursor:pointer;
    }
    .aero-441[data-mode="night"] .knob-441{ background: rgba(255,255,255,.06); }

    .meta-441{
      display:flex; flex-wrap:wrap; gap:12px; align-items:center; justify-content:center;
      margin-top:2px; color:var(--muted); font-size:12px;
    }
    .live-441{ display:inline-flex; align-items:center; gap:8px; }
    .dot-441{
      width:8px; height:8px; border-radius:50%; background: var(--p3);
      box-shadow: 0 0 0 0 rgba(255,119,184,.6);
      animation: pulse-441 2s ease-out infinite;
    }
    @keyframes pulse-441 { 0%{ box-shadow: 0 0 0 0 rgba(255,119,184,.6);} 70%{ box-shadow: 0 0 0 10px rgba(255,119,184,0);} 100%{ box-shadow: 0 0 0 0 rgba(255,119,184,0);} }

    .viewport-441{
      position:relative; z-index:1;
      border-radius:24px; overflow:hidden;
      border:1px solid var(--edge);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.4), 0 32px 100px rgba(0,0,0,.25);
      min-height: 480px; display:grid; place-items:center; background: transparent;
    }
    canvas#scene-441{ width:100%; height:100%; display:block; }
    .grain-441{
      position:absolute; inset:0; pointer-events:none;
      background:
        radial-gradient(60px 60px at 20% 30%, rgba(255,255,255,.08), transparent 40%),
        radial-gradient(80px 80px at 80% 70%, rgba(0,0,0,.06), transparent 50%),
        repeating-linear-gradient(45deg, rgba(0,0,0,.04) 0 2px, transparent 2px 10px);
      mix-blend-mode: soft-light;
    }
    .hint-441{
      position:absolute; right:12px; bottom:12px;
      padding:8px 10px; border-radius:12px; border:1px solid var(--edge);
      background: var(--glass); color: var(--ink); font-size:12px; backdrop-filter: blur(6px);
      pointer-events:none;
    }

    .badges-441{
      position:absolute; left:12px; bottom:12px; display:flex; gap:8px; pointer-events:none;
    }
    .badge-441{
      padding:6px 10px; border-radius:10px; border:1px solid var(--edge);
      background: var(--glass); backdrop-filter: blur(6px);
      font-size:11px; font-weight:700; color:var(--ink);
    }
    .aero-441[data-mode="night"] .hint-441,
    .aero-441[data-mode="night"] .badge-441{ background: rgba(255,255,255,.06); }

    @media (max-width: 900px){
      .title-441{ font-size: clamp(44px, 11vw, 76px); }
      .viewport-441{ min-height: 440px; }
      .knob-441 input[type="range"]{ width:120px; }
    }
    @media (prefers-reduced-motion: reduce){
      .aero-441::before{ animation:none !important; }
    }
  </style>

  <div class="header-441" aria-live="polite">
    <div class="crest-441">Edition 441 • Aurora Atlas</div>
    <h1 class="title-441" id="hero-441" aria-label="Aurora Studio">Aurora Studio</h1>
    <p class="subtitle-441">A living canvas of light. Steer the glow, tune the current, let color drift like weather.</p>

    <div class="controls-441" role="group" aria-label="Controls">
      <button class="btn-441" id="theme-441" aria-pressed="false" title="Toggle day/night">Nightfall</button>
      <button class="btn-441 ghost-441" id="run-441" aria-pressed="true" title="Pause/Resume">Pause</button>
      <button class="btn-441 outline-441" id="mode-441" title="Cycle motion">Mode: Drift</button>
      <div class="knob-441" title="Flow intensity">
        <span>Intensity</span>
        <input type="range" id="intensity-441" min="0.2" max="2.2" step="0.1" value="1.2" />
      </div>
      <button class="chip-441 ghost-441" id="rand-441" title="Randomize palette">Randomize</button>
      <button class="chip-441 outline-441" id="save-441" title="Save snapshot">Save PNG</button>
    </div>

    <div class="meta-441">
      <span class="live-441"><span class="dot-441" aria-hidden="true"></span>Live</span>
      <span id="clock-441"></span>
      <span id="last-updated">Last updated: 2025-11-05 12:17:21 EST</span>
    </div>
  </div>

  <div class="viewport-441" id="view-441" aria-label="Interactive aurora canvas">
    <canvas id="scene-441"></canvas>
    <div class="grain-441"></div>
    <div class="badges-441">
      <div class="badge-441">GPU-free</div>
      <div class="badge-441">Vector-free</div>
    </div>
    <div class="hint-441" aria-hidden="true">Move = steer • Space = pause • N/M/R/S = shortcuts</div>
  </div>

  <script>
    (function(){
      const root = document.currentScript.closest('.aero-441');
      const title = root.querySelector('#hero-441');
      const canvas = root.querySelector('#scene-441');
      const view = root.querySelector('#view-441');
      const ctx = canvas.getContext('2d', { alpha:false });

      const btnTheme = root.querySelector('#theme-441');
      const btnRun = root.querySelector('#run-441');
      const btnMode = root.querySelector('#mode-441');
      const btnRand = root.querySelector('#rand-441');
      const btnSave = root.querySelector('#save-441');
      const slider = root.querySelector('#intensity-441');
      const clock = root.querySelector('#clock-441');
      const updated = root.querySelector('#last-updated');

      // Timestamp
      try{
        const now = new Date();
        updated.textContent = 'Updated ' + now.toLocaleString([], { weekday:'short', month:'short', day:'2-digit', hour:'2-digit', minute:'2-digit' });
      }catch(e){}

      // Live clock
      function tickClock(){
        try{
          const d = new Date();
          clock.textContent = d.toLocaleTimeString([], { hour:'2-digit', minute:'2-digit', second:'2-digit' }) + ' • ' + d.toLocaleDateString([], { month:'short', day:'2-digit' });
        }catch(e){}
      }
      tickClock(); const clk = setInterval(tickClock, 1000);

      // Size
      let W=0, H=0, DPR=1;
      function fit(){
        const r = view.getBoundingClientRect();
        DPR = Math.min(2, window.devicePixelRatio || 1);
        W = Math.max(2, Math.floor(r.width));
        H = Math.max(2, Math.floor(r.height));
        canvas.width = W * DPR;
        canvas.height = H * DPR;
        ctx.setTransform(DPR,0,0,DPR,0,0);
      }
      fit();
      let resizeTO;
      window.addEventListener('resize', ()=>{ clearTimeout(resizeTO); resizeTO=setTimeout(()=>{fit();}, 80); });

      // Palette helpers
      function setVar(name, val){ root.style.setProperty(name, val); }
      function css(name){ return getComputedStyle(root).getPropertyValue(name).trim(); }
      function randHSL(h, s, l){ return `hsl(${h} ${s}% ${l}%)`; }
      function randomPalette(){
        const h = Math.floor(Math.random()*360);
        setVar('--p1', randHSL(h, 70, 56));
        setVar('--p2', randHSL((h+60)%360, 70, 58));
        setVar('--p3', randHSL((h+300)%360, 70, 60));
      }

      // State
      const state = {
        running:true,
        mode:0, // 0 Drift, 1 Tide, 2 Spiral
        t:0,
        seed: Math.random()*1000,
        mx: W/2, my: H/2, hasPointer:false,
        intensity: parseFloat(slider.value),
        orbs:[]
      };

      // Orbs
      function resetOrbs(){
        const N = 22;
        state.orbs.length = 0;
        for(let i=0;i<N;i++){
          const r = Math.random()*Math.min(W,H) * 0.08 + Math.min(W,H)*0.06;
          state.orbs.push({
            x: Math.random()*W,
            y: Math.random()*H,
            r,
            hue: [css('--p1'), css('--p2'), css('--p3')][i%3],
            vx: (Math.random()*2-1)*0.6,
            vy: (Math.random()*2-1)*0.6,
            phase: Math.random()*Math.PI*2
          });
        }
      }
      resetOrbs();

      // Pointer
      root.addEventListener('pointermove', (e)=>{
        const R = root.getBoundingClientRect();
        const x = e.clientX - R.left;
        const y = e.clientY - R.top;
        state.mx = x; state.my = y; state.hasPointer = true;
        const xp = (x/R.width)*100, yp = (y/R.height)*100;
        root.style.setProperty('--mx', xp + '%');
        root.style.setProperty('--my', yp + '%');
        const dx = (xp-50)/50, dy = (yp-50)/50;
        title.style.transform = `translate(${dx*6}px, ${dy*4}px)`;
      }, {passive:true});
      root.addEventListener('pointerleave', ()=>{ state.hasPointer=false; title.style.transform='translate(0,0)'; });

      // Background gradient based on theme
      function drawBack(){
        const g = ctx.createLinearGradient(0,0,0,H);
        if(root.getAttribute('data-mode')==='night'){
          g.addColorStop(0, '#0a0f1f');
          g.addColorStop(1, '#121c2c');
        }else{
          g.addColorStop(0, '#f6fbff');
          g.addColorStop(1, '#fff6f4');
        }
        ctx.fillStyle = g;
        ctx.fillRect(0,0,W,H);
      }

      function flow(x,y,t){
        // Smooth pseudo-flow without heavy noise
        const s = 0.002 + state.mode*0.0007;
        const a = Math.sin((x+state.seed)*s + t*0.002) + Math.cos((y-state.seed)*s*1.3 + t*0.0016);
        const b = Math.cos((y+state.seed)*s*0.9 + t*0.0012) - Math.sin((x-state.seed)*s*1.1 + t*0.0022);
        return {ax:a, ay:b};
      }

      function drawAurora(){
        ctx.globalCompositeOperation = 'source-over';
        drawBack();
        ctx.globalCompositeOperation = 'lighter';

        for(const o of state.orbs){
          const f = flow(o.x, o.y, state.t);
          const pullX = state.hasPointer ? (state.mx - o.x) : 0;
          const pullY = state.hasPointer ? (state.my - o.y) : 0;
          const pull = state.hasPointer ? 0.0007 * state.intensity : 0;

          // motion
          const sp = 0.35 * state.intensity;
          if(state.mode===0){ // Drift
            o.vx += f.ax*0.02*state.intensity + pull*pullX;
            o.vy += f.ay*0.02*state.intensity + pull*pullY;
          }else if(state.mode===1){ // Tide
            o.vx += Math.sin(o.phase + state.t*0.004)*0.04*state.intensity + pull*pullX;
            o.vy += Math.cos(o.phase + state.t*0.004)*0.04*state.intensity + pull*pullY;
          }else{ // Spiral
            const cx = W*0.5, cy = H*0.48;
            const dx = o.x - cx, dy = o.y - cy;
            const inv = 1/Math.max(40, Math.hypot(dx,dy));
            o.vx += (-dy*inv + f.ax*0.06)*state.intensity + pull*pullX;
            o.vy += ( dx*inv + f.ay*0.06)*state.intensity + pull*pullY;
          }
          o.x += o.vx*sp; o.y += o.vy*sp;
          o.vx *= 0.96; o.vy *= 0.96;
          o.phase += 0.01;

          // wrap
          if(o.x < -o.r) o.x = W + o.r;
          if(o.x > W + o.r) o.x = -o.r;
          if(o.y < -o.r) o.y = H + o.r;
          if(o.y > H + o.r) o.y = -o.r;

          const rad = o.r * (0.8 + 0.2*Math.sin(o.phase));
          const g = ctx.createRadialGradient(o.x, o.y, 0, o.x, o.y, rad);
          const col = o.hue;
          const alpha = root.getAttribute('data-mode')==='night' ? 0.15 : 0.18;
          g.addColorStop(0, col.replace(')', ` / ${0.55*alpha*5})`).replace('hsl', 'hsl'));
          g.addColorStop(0.55, col.replace(')', ` / ${0.28*alpha*5})`).replace('hsl', 'hsl'));
          g.addColorStop(1, 'rgba(0,0,0,0)');
          ctx.fillStyle = g;
          ctx.beginPath();
          ctx.arc(o.x, o.y, rad, 0, Math.PI*2);
          ctx.fill();
        }

        // Soft center halo
        ctx.globalCompositeOperation = 'overlay';
        const halo = ctx.createRadialGradient(W*0.52, H*0.48, 0, W*0.52, H*0.48, Math.min(W,H)*0.6);
        halo.addColorStop(0, 'rgba(255,255,255,0.12)');
        halo.addColorStop(1, 'rgba(255,255,255,0)');
        ctx.fillStyle = halo;
        ctx.fillRect(0,0,W,H);

        ctx.globalCompositeOperation = 'source-over';
      }

      let raf;
      function frame(){
        state.t += 1;
        drawAurora();
        if(state.running) raf = requestAnimationFrame(frame);
      }

      // Controls
      btnTheme.addEventListener('click', ()=>{
        const night = root.getAttribute('data-mode')==='night';
        if(night){
          root.setAttribute('data-mode','day');
          btnTheme.textContent = 'Nightfall';
          btnTheme.setAttribute('aria-pressed','false');
        }else{
          root.setAttribute('data-mode','night');
          btnTheme.textContent = 'Daybreak';
          btnTheme.setAttribute('aria-pressed','true');
        }
      });

      btnRun.addEventListener('click', ()=>{
        state.running = !state.running;
        btnRun.textContent = state.running ? 'Pause' : 'Resume';
        btnRun.setAttribute('aria-pressed', String(state.running));
        if(state.running){ cancelAnimationFrame(raf); frame(); } else cancelAnimationFrame(raf);
      });

      btnMode.addEventListener('click', ()=>{
        state.mode = (state.mode + 1) % 3;
        const names = ['Drift','Tide','Spiral'];
        btnMode.textContent = 'Mode: ' + names[state.mode];
      });

      slider.addEventListener('input', ()=>{ state.intensity = parseFloat(slider.value); });

      btnRand.addEventListener('click', ()=>{
        randomPalette();
        resetOrbs();
      });

      btnSave.addEventListener('click', ()=>{
        try{
          const url = canvas.toDataURL('image/png');
          const a = document.createElement('a');
          a.href = url; a.download = 'aurora-studio.png';
          document.body.appendChild(a); a.click(); a.remove();
        }catch(e){}
      });

      // Keyboard
      window.addEventListener('keydown', (e)=>{
        const k = e.key.toLowerCase();
        if(e.code === 'Space'){ e.preventDefault(); btnRun.click(); }
        else if(k === 'n'){ btnTheme.click(); }
        else if(k === 'm'){ btnMode.click(); }
        else if(k === 'r'){ btnRand.click(); }
        else if(k === 's'){ btnSave.click(); }
      });

      // Start
      const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if(reduce){ state.intensity = 0.6; slider.value = '0.6'; }
      fit(); frame();
      document.addEventListener('visibilitychange', ()=>{ if(document.hidden) cancelAnimationFrame(raf); else if(state.running) frame(); });
    })();
  </script>
</section>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


