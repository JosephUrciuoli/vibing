<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<div id="field" data-palette="aurora" data-paused="false" data-bloom="false" aria-label="Kite Field — a living canvas of light">
  <style>
    /* Tokens */
    #field{
      --ink:#0e1324; --muted:color-mix(in srgb, var(--ink) 60%, transparent);
      --bg0:#0f1324; --bg1:#141a33; --bg2:#10182c;
      --a:#78ffe3; --b:#93a3ff; --c:#ffb7a2; --halo:#ffffff44;
      position:relative; min-height:720px; border-radius:28px; overflow:hidden; color:#eef3ff;
      font-family: ui-sans-serif, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      background:
        radial-gradient(120% 100% at 10% 0%, color-mix(in srgb, var(--a) 20%, transparent), transparent 60%),
        radial-gradient(120% 120% at 90% 100%, color-mix(in srgb, var(--b) 18%, transparent), transparent 62%),
        radial-gradient(100% 100% at 50% 50%, color-mix(in srgb, var(--c) 10%, transparent), transparent 70%),
        linear-gradient(180deg, var(--bg0), var(--bg1) 50%, var(--bg2));
      box-shadow: 0 28px 90px rgba(10,20,40,.22) inset;
      isolation:isolate;
    }
    /* Palettes */
    #field[data-palette="aurora"]{ --a:#78ffe3; --b:#7fa2ff; --c:#ffb0d3; --bg0:#0a1220; --bg1:#0d1728; --bg2:#0c1524 }
    #field[data-palette="sunset"]{ --a:#ffb36b; --b:#ff6e9b; --c:#ffd46e; --bg0:#1b0f10; --bg1:#241316; --bg2:#201015 }
    #field[data-palette="garden"]{ --a:#9af6a0; --b:#73d6ff; --c:#e0ff93; --bg0:#0f1712; --bg1:#121c15; --bg2:#101a14 }
    #field[data-palette="mono"]{ --a:#9aa8ff; --b:#aec0ff; --c:#dfe6ff; --bg0:#0b0d13; --bg1:#0f121a; --bg2:#0e1118 }

    /* Grain + glow veil */
    #field::before, #field::after{content:""; position:absolute; inset:0; pointer-events:none}
    #field::before{
      opacity:.05; mix-blend-mode:soft-light; filter:blur(.3px);
      background:
        repeating-linear-gradient(0deg, #000 0 1px, transparent 1px 3px),
        repeating-linear-gradient(90deg, #000 0 1px, transparent 1px 4px);
    }
    #field::after{
      background: radial-gradient(360px 360px at var(--mx,50%) var(--my,50%), color-mix(in srgb, var(--a) 25%, transparent), transparent 60%);
      opacity:.9; mix-blend-mode:soft-light; transition: opacity .25s ease;
    }

    /* Top chrome */
    #field .chrome{ position:relative; z-index:4; display:flex; align-items:center; gap:14px; padding:16px clamp(16px,3vmin,28px) }
    #field .brand{
      display:inline-flex; align-items:center; gap:10px; white-space:nowrap;
      padding:10px 14px; border-radius:14px; border:1px solid #ffffff1f;
      background: color-mix(in srgb, var(--bg1) 70%, transparent);
      box-shadow: inset 0 0 0 1px #ffffff0d, 0 6px 20px #00000033;
      font-weight:800; letter-spacing:.04em; font-size:12px; text-transform:uppercase;
    }
    #field .brand .mark{
      width:14px; height:14px; border-radius:4px;
      background: conic-gradient(from 0deg, var(--a), var(--b), var(--c), var(--a));
      animation: spin 10s linear infinite;
      box-shadow: 0 0 12px color-mix(in srgb, var(--a) 40%, transparent);
    }
    @keyframes spin{ to{ transform: rotate(1turn) } }

    #field .controls{ margin-left:auto; display:flex; flex-wrap:wrap; align-items:center; gap:10px }
    #field .chip{
      position:relative; appearance:none; cursor:pointer;
      border:1px solid #ffffff24; border-radius:12px; overflow:hidden;
      padding:8px 12px; font-size:12px; color:#eef3ff;
      background: color-mix(in srgb, var(--bg0) 60%, var(--a) 6%);
      transition: transform .14s ease, box-shadow .22s ease, background .22s ease, color .22s ease;
      box-shadow: 0 2px 0 rgba(0,0,0,.08), 0 8px 16px rgba(0,0,0,.12);
    }
    #field .chip:hover{ transform: translateY(-1px); box-shadow: 0 10px 28px rgba(0,0,0,.18) }
    #field .chip.alt{ background: color-mix(in srgb, var(--bg0) 60%, var(--b) 8%) }
    #field .chip.alt2{ background: color-mix(in srgb, var(--bg0) 60%, var(--c) 8%) }
    #field .chip.out{ background: color-mix(in srgb, var(--bg0) 86%, transparent) }
    #field .chip[aria-pressed="true"]{ outline:2px solid color-mix(in srgb, var(--a) 40%, transparent) }

    #field .ripple{ position:absolute; width:10px; height:10px; border-radius:50%;
      background: color-mix(in srgb, #fff 40%, var(--a)); opacity:.35;
      transform: translate(-50%,-50%) scale(1); animation: rr .65s ease-out forwards; pointer-events:none }
    @keyframes rr{ to{ opacity:0; transform:translate(-50%,-50%) scale(16)} }

    /* Stage + canvas */
    #field .stage{ position:relative; z-index:1; min-height:600px; display:grid; place-items:center; padding: clamp(10px, 4vmin, 36px) }
    #field .canvas{
      position:absolute; inset:12px; border-radius:24px; width:calc(100% - 24px); height:calc(100% - 24px);
      background: linear-gradient(180deg, color-mix(in srgb, var(--bg1) 85%, transparent), transparent 70%);
      border:1px solid #ffffff1a;
      box-shadow: inset 0 0 80px #00000066, 0 14px 48px rgba(0,0,0,.36);
    }
    #field[data-bloom="true"] .canvas{ filter: blur(1.2px) saturate(130%) brightness(1.04) }

    /* Centerpiece copy */
    #field .hero{
      position:relative; z-index:3; text-align:center; max-width:min(760px, 90%); margin:auto;
      padding:18px 20px; backdrop-filter: blur(8px) saturate(120%); -webkit-backdrop-filter: blur(8px) saturate(120%);
      border-radius:18px; border:1px solid #ffffff24;
      background: color-mix(in srgb, var(--bg0) 18%, transparent);
      box-shadow: 0 10px 28px rgba(0,0,0,.25);
    }
    #field .hero h1{
      margin:0 0 10px; line-height:1.08; font-size: clamp(28px, 6vw, 56px); font-weight:900;
      background: linear-gradient(90deg, #fff, color-mix(in srgb, #fff 84%, var(--a)));
      -webkit-background-clip:text; background-clip:text; color:transparent;
      letter-spacing:.01em;
    }
    #field .hero p{ margin:0; font-size: clamp(14px, 2.4vw, 16px); color: color-mix(in srgb, #ffffff 82%, var(--muted)) }

    /* Time dial */
    #field .dial{
      position:absolute; right:20px; bottom:20px; z-index:4; width:84px; height:84px;
      display:grid; place-items:center;
      border-radius:16px; border:1px solid #ffffff1f; background: color-mix(in srgb, var(--bg0) 18%, transparent);
      box-shadow: 0 10px 28px rgba(0,0,0,.28); backdrop-filter: blur(8px) saturate(120%);
    }
    #field .dial svg{ width:64px; height:64px; transform: rotate(-90deg) }
    #field .dial .t{ position:absolute; font-weight:800; font-size:12px; color:#d8e2ff }

    /* Footer */
    #field .meta{
      position:relative; z-index:4; margin: 18px auto 18px;
      display:flex; align-items:center; justify-content:center; gap:12px; flex-wrap:wrap;
      color:#dbe4ff; font-size:12px;
    }
    #field .pill{ padding:7px 12px; border-radius:999px; border:1px solid #ffffff24;
      background: color-mix(in srgb, var(--bg0) 70%, transparent) }

    /* Motion preferences */
    @media (prefers-reduced-motion: reduce){
      #field::after{ opacity:.5 }
      #field .brand .mark{ animation:none }
      #field .canvas{ filter:none !important }
    }
  </style>

  <div class="chrome">
    <div class="brand" aria-label="Kite Field">
      <span class="mark" aria-hidden="true"></span>
      Kite Field
    </div>
    <div class="controls" aria-label="Palette and motion">
      <button class="chip out" data-palette="aurora">Aurora</button>
      <button class="chip alt" data-palette="sunset">Sunset</button>
      <button class="chip alt2" data-palette="garden">Garden</button>
      <button class="chip" data-palette="mono">Mono</button>
      <button class="chip auto" type="button" aria-pressed="false" title="Auto-cycle palettes">Auto</button>
      <button class="chip bloom" type="button" aria-pressed="false" title="Toggle glow">Bloom</button>
      <button class="chip pause" type="button" aria-pressed="false">Pause</button>
    </div>
  </div>

  <div class="stage" role="region" aria-live="polite">
    <canvas class="canvas" width="1280" height="800" role="img" aria-label="Light particles flowing in a field"></canvas>

    <div class="hero">
      <h1>Light that remembers where it’s been.</h1>
      <p>Move your pointer to bend the stream. Switch palettes. Let it drift. A quiet instrument for the eyes.</p>
    </div>

    <div class="dial" aria-label="Time dial">
      <svg viewBox="0 0 100 100" role="img" aria-label="Minute progress ring">
        <defs>
          <linearGradient id="ring" x1="0%" y1="0%" x2="100%" y2="100%">
            <stop offset="0%" stop-color="var(--a)" stop-opacity=".95"/>
            <stop offset="100%" stop-color="var(--b)" stop-opacity=".95"/>
          </linearGradient>
        </defs>
        <circle cx="50" cy="50" r="42" fill="none" stroke="#ffffff18" stroke-width="6"/>
        <circle class="prog" cx="50" cy="50" r="42" fill="none" stroke="url(#ring)" stroke-width="6" stroke-linecap="round" stroke-dasharray="264" stroke-dashoffset="264"/>
      </svg>
      <span class="t" aria-hidden="true">00</span>
    </div>
  </div>

  <div class="meta">
    <span class="pill" aria-label="Iteration number">Iteration 1276</span>
    <span id="last-updated">Last updated: 2025-12-14 03:23:24 EST</span>
  </div>

  <script>
    (function(){
      const root = document.getElementById('field');
      const cvs = root.querySelector('.canvas');
      const ctx = cvs.getContext('2d', { alpha: true });
      const autoBtn = root.querySelector('.chip.auto');
      const pauseBtn = root.querySelector('.chip.pause');
      const bloomBtn = root.querySelector('.chip.bloom');
      const paletteBtns = root.querySelectorAll('.chip[data-palette]');
      const dial = root.querySelector('.dial');
      const ring = root.querySelector('.dial .prog');
      const dialText = root.querySelector('.dial .t');
      const lu = root.querySelector('#last-updated');

      // Last updated
      try{
        lu.textContent = 'Last updated: ' + new Date().toLocaleString(undefined, { dateStyle:'medium', timeStyle:'short' });
      }catch{
        lu.textContent = 'Last updated: ' + new Date().toString();
      }

      // Palettes for particles
      const palettes = {
        aurora: ['#7fffe8','#94a6ff','#ffb0d9','#7fd5ff'],
        sunset: ['#ffb36b','#ff6e9b','#ffd46e','#ff8ea1'],
        garden: ['#9af6a0','#73d6ff','#e0ff93','#7fe9c7'],
        mono:   ['#dfe6ff','#b7c4ff','#a6b4ff','#ffffff']
      };
      function currentPalette(){
        const p = root.getAttribute('data-palette') || 'aurora';
        return palettes[p] || palettes.aurora;
      }

      // Resize canvas
      const DPR = Math.max(1, Math.min(2, window.devicePixelRatio || 1.25));
      function size(){
        const r = cvs.getBoundingClientRect();
        cvs.width = Math.floor(r.width * DPR);
        cvs.height = Math.floor(r.height * DPR);
        ctx.setTransform(DPR, 0, 0, DPR, 0, 0);
        // Reset trail base
        ctx.globalCompositeOperation = 'source-over';
        ctx.fillStyle = '#00000000';
        ctx.fillRect(0,0,r.width,r.height);
      }
      size();
      new ResizeObserver(size).observe(cvs);

      // Particles
      let particles = [];
      let N = 280;
      function spawn(n=N){
        const r = cvs.getBoundingClientRect();
        particles.length = 0;
        const cols = currentPalette();
        for(let i=0;i<n;i++){
          particles.push({
            x: Math.random()*r.width,
            y: Math.random()*r.height,
            vx: 0, vy: 0,
            s: 0.6 + Math.random()*1.4,
            hue: cols[i % cols.length]
          });
        }
      }
      spawn();

      // Field + pointer
      const stage = root.querySelector('.stage');
      let mx = null, my = null;
      function move(e){
        const r = stage.getBoundingClientRect();
        mx = (e.clientX - r.left);
        my = (e.clientY - r.top);
        const cx = Math.max(0, Math.min(1, mx / r.width));
        const cy = Math.max(0, Math.min(1, my / r.height));
        root.style.setProperty('--mx', (cx*100).toFixed(2)+'%');
        root.style.setProperty('--my', (cy*100).toFixed(2)+'%');
      }
      function leave(){ mx = my = null; root.style.setProperty('--mx','50%'); root.style.setProperty('--my','50%') }
      stage.addEventListener('pointermove', move, {passive:true});
      stage.addEventListener('pointerleave', leave, {passive:true});

      // Animation
      let t = 0, raf = null, paused = false;
      const reduce = window.matchMedia('(prefers-reduced-motion: reduce)');
      function flowAx(x, y, time){
        return Math.sin((y*0.007) + time*0.8) + Math.cos((x*0.006) - time*0.5);
      }
      function flowAy(x, y, time){
        return Math.cos((x*0.007) + time*0.6) - Math.sin((y*0.005) - time*0.4);
      }

      function tick(){
        const r = cvs.getBoundingClientRect();
        if(!paused){
          t += 0.016;
          // Fade with low alpha for trails
          ctx.globalCompositeOperation = 'source-over';
          ctx.fillStyle = 'rgba(0,0,0,0.06)';
          ctx.fillRect(0,0,r.width, r.height);

          ctx.globalCompositeOperation = 'lighter';
          for(const p of particles){
            // Flow
            const ax = flowAx(p.x, p.y, t);
            const ay = flowAy(p.x, p.y, t);

            // Pointer attractor
            if(mx!==null && my!==null){
              const dx = mx - p.x;
              const dy = my - p.y;
              const dist = Math.hypot(dx,dy) + 0.0001;
              const pull = Math.min(0.08, 18/(dist*dist));
              p.vx += dx/dist * pull;
              p.vy += dy/dist * pull;
            }

            p.vx += ax * 0.02;
            p.vy += ay * 0.02;

            // Damping
            p.vx *= 0.985;
            p.vy *= 0.985;

            // Integrate
            p.x += p.vx;
            p.y += p.vy;

            // Wrap
            if(p.x < -10) p.x = r.width+10;
            if(p.x > r.width+10) p.x = -10;
            if(p.y < -10) p.y = r.height+10;
            if(p.y > r.height+10) p.y = -10;

            // Draw
            const rad = p.s;
            const grd = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, 18);
            grd.addColorStop(0, p.hue + 'dd');
            grd.addColorStop(1, '#00000000');
            ctx.fillStyle = grd;
            ctx.beginPath();
            ctx.arc(p.x, p.y, 18, 0, Math.PI*2);
            ctx.fill();

            ctx.fillStyle = p.hue + 'e6';
            ctx.beginPath();
            ctx.arc(p.x, p.y, rad, 0, Math.PI*2);
            ctx.fill();
          }
        }
        raf = requestAnimationFrame(tick);
      }

      function setPaused(state){
        paused = !!state;
        root.setAttribute('data-paused', paused ? 'true' : 'false');
        pauseBtn.setAttribute('aria-pressed', String(paused));
        pauseBtn.textContent = paused ? 'Resume' : 'Pause';
      }

      // Dial update
      function updateDial(){
        const d = new Date();
        const sec = d.getSeconds() + d.getMilliseconds()/1000;
        const frac = sec / 60;
        const len = 2*Math.PI*42; // ~263.89
        ring.style.strokeDasharray = String(len);
        ring.style.strokeDashoffset = String(len * (1-frac));
        dialText.textContent = d.getMinutes().toString().padStart(2,'0');
      }
      setInterval(updateDial, 1000);
      updateDial();

      // Palette switching + ripple
      function ripple(btn, e){
        const span = document.createElement('span');
        span.className = 'ripple';
        const b = btn.getBoundingClientRect();
        span.style.left = (e.clientX - b.left) + 'px';
        span.style.top = (e.clientY - b.top) + 'px';
        btn.appendChild(span);
        setTimeout(()=> span.remove(), 700);
      }
      paletteBtns.forEach(btn=>{
        btn.addEventListener('click', (e)=>{
          ripple(btn, e);
          const p = btn.getAttribute('data-palette');
          root.setAttribute('data-palette', p);
          paletteBtns.forEach(b=> b.removeAttribute('aria-pressed'));
          btn.setAttribute('aria-pressed','true');
          spawn(particles.length);
        });
      });

      // Auto cycle
      const themeOrder = ['aurora','sunset','garden','mono'];
      let autoTimer = null;
      function setAuto(on){
        autoBtn.setAttribute('aria-pressed', String(on));
        if(on){
          autoBtn.textContent = 'Auto • On';
          autoTimer = setInterval(()=>{
            const cur = root.getAttribute('data-palette');
            const i = themeOrder.indexOf(cur);
            const next = themeOrder[(i+1) % themeOrder.length];
            root.setAttribute('data-palette', next);
            spawn(particles.length);
          }, 6000);
        }else{
          autoBtn.textContent = 'Auto';
          if(autoTimer){ clearInterval(autoTimer); autoTimer=null; }
        }
      }
      autoBtn.addEventListener('click', (e)=>{ ripple(autoBtn, e); setAuto(!autoTimer) });

      // Pause + Bloom
      pauseBtn.addEventListener('click', (e)=>{ ripple(pauseBtn, e); setPaused(!paused) });
      bloomBtn.addEventListener('click', (e)=>{
        ripple(bloomBtn, e);
        const on = root.getAttribute('data-bloom') !== 'true';
        root.setAttribute('data-bloom', on ? 'true' : 'false');
        bloomBtn.setAttribute('aria-pressed', String(on));
      });

      // Keyboard
      window.addEventListener('keydown', (e)=>{
        if(e.code==='Space'){ e.preventDefault(); setPaused(!paused); }
        if(e.key==='b' || e.key==='B'){ const on = root.getAttribute('data-bloom')!=='true'; root.setAttribute('data-bloom', on?'true':'false'); bloomBtn.setAttribute('aria-pressed', String(on)); }
      });

      // Respect reduced motion
      function applyReduce(){
        if(reduce.matches){
          setPaused(true);
        }else{
          setPaused(false);
        }
      }
      reduce.addEventListener?.('change', applyReduce);
      applyReduce();

      // Start
      tick();

      // Cleanup
      window.addEventListener('beforeunload', ()=>{
        if(raf) cancelAnimationFrame(raf);
        if(autoTimer) clearInterval(autoTimer);
      }, {once:true});
    })();
  </script>
</div>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


