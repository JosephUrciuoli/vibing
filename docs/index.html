<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<style>
  .prism-814 {
    --h: 208;
    --ink: hsl(224 25% 12%);
    --muted: hsl(224 10% 40%);
    --panel: hsl(0 0% 100% / .78);
    --edge: hsl(220 25% 86% / .6);
    --ax: 0deg; /* tilt X */
    --ay: 0deg; /* tilt Y */
    position: relative;
    border-radius: 28px;
    padding: clamp(22px, 5.2vw, 64px);
    color: var(--ink);
    overflow: hidden;
    isolation: isolate;
    background:
      radial-gradient(1000px 700px at -10% 0%, hsl(calc(var(--h) + 80) 90% 95% / .6), transparent 60%),
      radial-gradient(900px 700px at 110% 120%, hsl(calc(var(--h) + 190) 90% 94% / .55), transparent 62%),
      conic-gradient(from 230deg, hsl(calc(var(--h) + 0) 70% 98%), hsl(calc(var(--h) + 60) 70% 98%), hsl(calc(var(--h) + 120) 70% 98%), hsl(calc(var(--h) + 0) 70% 98%));
    box-shadow: 0 24px 70px hsl(220 40% 20% / .12), inset 0 0 0 1px var(--edge);
  }
  .prism-814::after {
    content: "";
    position: absolute; inset: -20%;
    background:
      radial-gradient(60% 60% at 30% 20%, hsl(0 0% 100% / .25), transparent 60%),
      repeating-linear-gradient(135deg, hsl(0 0% 100% / .05) 0 2px, transparent 2px 4px);
    mix-blend-mode: soft-light;
    opacity: .35;
    pointer-events: none;
    z-index: 0;
  }
  .prism-814[data-theme="night"] {
    --ink: hsl(0 0% 98%);
    --muted: hsl(210 15% 82%);
    --panel: hsl(218 27% 14% / .78);
    --edge: hsl(0 0% 100% / .08);
    background:
      radial-gradient(900px 700px at 0% -10%, hsl(calc(var(--h) + 220) 70% 20% / .55), transparent 60%),
      radial-gradient(800px 700px at 120% 110%, hsl(calc(var(--h) + 260) 70% 18% / .55), transparent 62%),
      linear-gradient(180deg, hsl(226 35% 9%), hsl(232 35% 8%));
    box-shadow: 0 28px 80px hsl(220 50% 8% / .5), inset 0 0 0 1px var(--edge);
  }
  .prism-814[data-theme="night"]::after { opacity: .18; mix-blend-mode: screen; }

  .prism-814 .top {
    position: relative; z-index: 2;
    display: grid; grid-template-columns: 1fr auto; gap: clamp(12px, 2.8vw, 28px); align-items: start;
    margin-bottom: clamp(16px, 3.6vw, 42px);
  }
  .prism-814 .brand {
    display: grid; gap: 8px;
  }
  .prism-814 .brand h1 {
    margin: 0;
    font: 900 clamp(32px, 7.2vw, 92px)/.98 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
    letter-spacing: -0.02em;
    background:
      linear-gradient(90deg, var(--ink), var(--ink)) padding-box,
      linear-gradient(120deg, hsl(var(--h) 90% 55%), hsl(calc(var(--h) + 90) 90% 58%), hsl(calc(var(--h) + 180) 90% 60%)) text;
    -webkit-background-clip: padding-box, text; background-clip: padding-box, text;
    color: transparent; -webkit-text-fill-color: transparent;
    position: relative;
  }
  .prism-814 .brand h1::after {
    content: "";
    position: absolute; left: 0; bottom: .1em; height: 10%;
    width: 100%;
    background: linear-gradient(90deg, transparent, hsl(0 0% 100% / .5), transparent);
    filter: blur(6px);
    opacity: .4;
    pointer-events: none;
  }
  .prism-814 .brand p {
    margin: 0;
    font: 500 clamp(13px, 1.6vw, 18px)/1.55 ui-sans-serif, system-ui, Segoe UI, Roboto, Arial;
    color: var(--muted);
  }

  .prism-814 .controls {
    display: grid; grid-auto-flow: column; gap: 10px; align-items: center;
  }
  .prism-814 .pill {
    appearance: none; border: 0; cursor: pointer;
    font: 800 12px/1 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    padding: 11px 14px; border-radius: 999px; color: var(--ink);
    background: linear-gradient(180deg, var(--panel), hsl(0 0% 100% / .6));
    border: 1px solid var(--edge);
    box-shadow: 0 10px 20px hsl(220 30% 20% / .12), inset 0 1px 0 hsl(0 0% 100% / .6);
    transform: translateZ(0);
    transition: transform 160ms ease, box-shadow 160ms ease, background 160ms ease;
    position: relative; overflow: hidden;
  }
  .prism-814 .pill:hover { transform: translateY(-2px); box-shadow: 0 16px 30px hsl(220 30% 20% / .18); }
  .prism-814 .pill .ink {
    position: absolute; inset: 0; border-radius: inherit; pointer-events: none;
    background: radial-gradient(180px 180px at var(--mx,50%) var(--my,50%), hsl(0 0% 100% / .35), transparent 65%);
    opacity: 0; transition: opacity 160ms ease;
  }
  .prism-814 .pill:hover .ink { opacity: 1; }
  .prism-814[data-theme="night"] .pill {
    background: linear-gradient(180deg, hsl(0 0% 100% / .10), hsl(0 0% 100% / .06));
    color: hsl(0 0% 98%);
    box-shadow: 0 10px 22px hsl(220 30% 6% / .45), inset 0 1px 0 hsl(0 0% 100% / .15);
  }

  .prism-814 .knob {
    display: inline-grid; grid-auto-flow: column; gap: 10px; align-items: center;
    padding: 8px 12px; border-radius: 999px;
    background: linear-gradient(180deg, var(--panel), hsl(0 0% 100% / .56));
    border: 1px solid var(--edge);
    box-shadow: inset 0 1px 0 hsl(0 0% 100% / .6);
    color: var(--ink);
  }
  .prism-814 input[type="range"] {
    -webkit-appearance: none; appearance: none; width: 140px; height: 28px; background: transparent;
  }
  .prism-814 input[type="range"]::-webkit-slider-runnable-track {
    height: 8px; border-radius: 999px;
    background: linear-gradient(90deg, hsl(var(--h) 90% 55%), hsl(calc(var(--h) + 90) 90% 58%));
    box-shadow: inset 0 1px 0 hsl(0 0% 100% / .5);
  }
  .prism-814 input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none; appearance: none; width: 18px; height: 18px; margin-top: -5px; border-radius: 50%;
    background: white; border: 1px solid var(--edge);
    box-shadow: 0 4px 10px hsl(220 30% 20% / .2);
  }
  .prism-814 input[type="range"]::-moz-range-track {
    height: 8px; border-radius: 999px;
    background: linear-gradient(90deg, hsl(var(--h) 90% 55%), hsl(calc(var(--h) + 90) 90% 58%));
  }
  .prism-814 input[type="range"]::-moz-range-thumb {
    width: 18px; height: 18px; border-radius: 50%; background: white; border: 1px solid var(--edge);
  }

  .prism-814 .poster-wrap {
    position: relative; z-index: 1;
    perspective: 1400px;
  }
  .prism-814 .poster {
    position: relative;
    border-radius: 24px;
    padding: clamp(28px, 6vw, 60px);
    min-height: clamp(260px, 44vw, 520px);
    display: grid; place-items: center;
    background: var(--panel);
    border: 1px solid var(--edge);
    box-shadow:
      0 40px 80px hsl(220 40% 20% / .14),
      inset 0 1px 0 hsl(0 0% 100% / .65);
    transform-style: preserve-3d;
    transform: rotateX(var(--ax)) rotateY(var(--ay));
    overflow: hidden;
  }
  .prism-814 .kaleido {
    position: absolute; inset: -2px; z-index: 0; border-radius: 24px;
    filter: saturate(120%) contrast(105%) blur(.2px);
    pointer-events: none;
  }
  .prism-814 .shine {
    position: absolute; inset: -10%;
    background:
      radial-gradient(80% 80% at 20% 10%, hsl(var(--h) 100% 70% / .35), transparent 60%),
      radial-gradient(80% 80% at 80% 90%, hsl(calc(var(--h)+90) 100% 70% / .30), transparent 60%),
      radial-gradient(120% 120% at 50% 50%, hsl(calc(var(--h)+180) 100% 70% / .15), transparent 70%);
    mix-blend-mode: soft-light;
    filter: blur(40px);
    pointer-events: none;
    z-index: 0;
  }
  .prism-814 .lines {
    position: absolute; inset: 0; pointer-events: none; z-index: 1; opacity: .18;
    background:
      linear-gradient(0deg, transparent 49%, hsl(0 0% 0% / .8) 50%, transparent 51%),
      linear-gradient(90deg, transparent 49%, hsl(0 0% 0% / .8) 50%, transparent 51%);
    background-size: 28px 28px;
    mix-blend-mode: overlay;
  }
  .prism-814[data-theme="night"] .lines { opacity: .12; }

  .prism-814 .centerpiece {
    position: relative; z-index: 2; text-align: center; max-width: 28ch;
  }
  .prism-814 .centerpiece .big {
    font: 900 clamp(24px, 5.8vw, 64px)/1 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    letter-spacing: -0.02em;
    margin: 0 0 8px 0;
    background: linear-gradient(90deg, var(--ink), var(--ink)) text;
    -webkit-background-clip: text; background-clip: text; color: transparent; -webkit-text-fill-color: transparent;
  }
  .prism-814 .centerpiece .swap {
    font: 500 clamp(13px, 1.6vw, 18px)/1.6 ui-sans-serif, system-ui, Segoe UI, Roboto, Arial;
    color: var(--muted);
    opacity: .95;
    transition: opacity 300ms ease, transform 300ms ease;
  }
  .prism-814 .swap.fade { opacity: 0; transform: translateY(6px); }

  .prism-814 .marquee {
    position: relative; z-index: 2;
    margin-top: clamp(10px, 2.4vw, 18px);
    mask-image: linear-gradient(90deg, transparent, black 8%, black 92%, transparent);
    -webkit-mask-image: linear-gradient(90deg, transparent, black 8%, black 92%, transparent);
    overflow: hidden;
    border-radius: 12px;
    border: 1px solid var(--edge);
    background: linear-gradient(180deg, hsl(0 0% 100% / .7), hsl(0 0% 100% / .45));
  }
  .prism-814[data-theme="night"] .marquee {
    background: linear-gradient(180deg, hsl(0 0% 100% / .12), hsl(0 0% 100% / .08));
  }
  .prism-814 .marquee .row {
    display: flex; gap: 18px; white-space: nowrap; padding: 10px 14px;
    animation: scroll814 28s linear infinite;
    font: 700 12px/1 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    color: var(--ink);
  }
  .prism-814[data-reduced="true"] .marquee .row { animation-play-state: paused; }
  @keyframes scroll814 { to { transform: translateX(-50%); } }

  .prism-814 .foot {
    position: relative; z-index: 2;
    margin-top: clamp(16px, 3.2vw, 26px);
    display: flex; justify-content: space-between; align-items: center; gap: 12px;
    color: var(--muted);
    font: 500 12px/1.4 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
  }
  .prism-814 .hint {
    font: 700 11px/1 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    background: hsl(0 0% 100% / .55);
    border: 1px solid var(--edge);
    padding: 6px 8px; border-radius: 8px; color: var(--ink);
  }
  .prism-814[data-theme="night"] .hint { background: hsl(0 0% 100% / .12); color: hsl(0 0% 98%); }
</style>

<div class="prism-814" id="p814" role="region" aria-label="PRISM Poster 814" data-theme="dawn" data-reduced="false">
  <div class="top">
    <div class="brand">
      <h1>PRISM · 814</h1>
      <p>A kinetic poster you can tune. Soft light, bold type, living color.</p>
    </div>
    <div class="controls" role="group" aria-label="Controls">
      <button class="pill" id="theme814" type="button" aria-pressed="false">
        <span class="ink" aria-hidden="true"></span>Night / Dawn
      </button>
      <button class="pill" id="shuffle814" type="button" aria-pressed="false">
        <span class="ink" aria-hidden="true"></span>Random hue
      </button>
      <span class="knob" aria-label="Hue adjustment">
        <span style="font:600 12px ui-sans-serif;">Hue</span>
        <input id="hue814" type="range" min="0" max="359" value="208" aria-label="Hue slider">
      </span>
      <span class="knob" aria-label="Intensity adjustment">
        <span style="font:600 12px ui-sans-serif;">Intensity</span>
        <input id="int814" type="range" min="0" max="100" value="55" aria-label="Intensity slider">
      </span>
      <button class="pill" id="motion814" type="button" aria-pressed="false">
        <span class="ink" aria-hidden="true"></span>Pause motion
      </button>
    </div>
  </div>

  <div class="poster-wrap">
    <div class="poster" id="poster814" aria-live="polite">
      <canvas class="kaleido" id="field814" aria-hidden="true"></canvas>
      <div class="shine" aria-hidden="true"></div>
      <div class="lines" aria-hidden="true"></div>
      <div class="centerpiece">
        <p class="big" id="big814">Design in motion.</p>
        <p class="swap" id="swap814">Tilt and color-shift to make it yours.</p>
      </div>
      <div class="marquee" aria-hidden="true">
        <div class="row" id="mq814">
          <!-- content injected -->
        </div>
      </div>
    </div>
  </div>

  <div class="foot">
    <span class="hint" aria-hidden="true">Tip: move your cursor to tilt · double-click poster to reshuffle</span>
    <span id="last-updated">Last updated: 2025-11-22 17:16:25 EST</span>
  </div>
</div>

<script>
  (function () {
    const root = document.getElementById('p814');
    const poster = document.getElementById('poster814');
    const canvas = document.getElementById('field814');
    const ctx = canvas.getContext('2d');
    const themeBtn = document.getElementById('theme814');
    const shuffleBtn = document.getElementById('shuffle814');
    const hueRange = document.getElementById('hue814');
    const intRange = document.getElementById('int814');
    const motionBtn = document.getElementById('motion814');
    const big = document.getElementById('big814');
    const swap = document.getElementById('swap814');
    const mq = document.getElementById('mq814');
    const last = document.getElementById('last-updated');

    // Timestamp
    try {
      const now = new Date();
      const opts = { year: 'numeric', month: 'short', day: '2-digit', hour: '2-digit', minute: '2-digit' };
      last.textContent = 'Last updated: ' + now.toLocaleString(undefined, opts);
    } catch { last.textContent = 'Last updated: just now'; }

    // Marquee content
    const tags = ['Kinetic', 'Tactile', 'Lightweight', 'No libraries', 'System fonts', 'Gradient craft', 'Accessible', 'Playable', 'Layered', 'Glass edge', 'Parallax', 'Color stories'];
    function buildMarquee() {
      const seq = [...tags, ...tags];
      mq.innerHTML = seq.map(t => `<span>◆ ${t}</span>`).join(' &nbsp; &nbsp; ');
    }
    buildMarquee();

    // Quotes cycle
    const lines = [
      ['Design in motion.', 'Let curiosity set the pace.'],
      ['Quiet energy.', 'Power in the subtleties.'],
      ['Make it feel right.', 'Form, light, and timing.'],
      ['Play, then refine.', 'Iteration is momentum.']
    ];
    let idx = 0;
    function cycleLines() {
      idx = (idx + 1) % lines.length;
      swap.classList.add('fade');
      setTimeout(() => {
        big.textContent = lines[idx][0];
        swap.textContent = lines[idx][1];
        swap.classList.remove('fade');
      }, 260);
    }
    let cycleTimer = setInterval(cycleLines, 4200);

    // Controls
    function inkPos(e) {
      const b = e.currentTarget.getBoundingClientRect();
      e.currentTarget.style.setProperty('--mx', ((e.clientX - b.left) / b.width) * 100 + '%');
      e.currentTarget.style.setProperty('--my', ((e.clientY - b.top) / b.height) * 100 + '%');
    }
    [themeBtn, shuffleBtn, motionBtn].forEach(btn => btn.addEventListener('pointermove', inkPos, { passive: true }));

    themeBtn.addEventListener('click', () => {
      const night = root.getAttribute('data-theme') === 'night';
      root.setAttribute('data-theme', night ? 'dawn' : 'night');
      themeBtn.setAttribute('aria-pressed', String(!night));
      drawStatic(); // refresh contrast on pause
    });

    let hue = parseFloat(getComputedStyle(root).getPropertyValue('--h')) || 208;
    hueRange.addEventListener('input', e => {
      hue = parseFloat(e.target.value);
      root.style.setProperty('--h', hue);
    });
    shuffleBtn.addEventListener('click', () => {
      hue = Math.floor(Math.random() * 360);
      root.style.setProperty('--h', hue);
      hueRange.value = hue;
    });

    // Motion / reduced
    const setReduced = (state) => root.setAttribute('data-reduced', state ? 'true' : 'false');
    const media = window.matchMedia('(prefers-reduced-motion: reduce)');
    setReduced(media.matches);
    media.addEventListener?.('change', (e) => setReduced(e.matches));

    motionBtn.addEventListener('click', () => {
      const now = root.getAttribute('data-reduced') === 'true';
      setReduced(!now);
      motionBtn.setAttribute('aria-pressed', String(!now));
      if (!now) { // we just paused
        drawStatic();
        clearAnimation();
      } else {
        start();
      }
    });

    // Tilt
    function tilt(e) {
      const r = poster.getBoundingClientRect();
      const px = (e.clientX - r.left) / r.width - 0.5;
      const py = (e.clientY - r.top) / r.height - 0.5;
      const max = 9;
      root.style.setProperty('--ay', (px * max).toFixed(2) + 'deg');
      root.style.setProperty('--ax', (-py * max).toFixed(2) + 'deg');
      cx = e.clientX * dpr;
      cy = e.clientY * dpr;
    }
    poster.addEventListener('pointermove', tilt, { passive: true });
    poster.addEventListener('mouseleave', () => {
      root.style.setProperty('--ay', '0deg');
      root.style.setProperty('--ax', '0deg');
    });
    poster.addEventListener('dblclick', () => shuffleBtn.click());

    // Canvas Kaleidoscope
    let w = 0, h = 0, dpr = Math.max(1, window.devicePixelRatio || 1);
    let cx = 0, cy = 0;
    let raf = null;
    let shards = [];
    let density = 0.55; // 0..1
    intRange.addEventListener('input', e => {
      density = Math.max(0, Math.min(1, e.target.value / 100));
      makeShards();
    });

    function fit() {
      const b = canvas.parentElement.getBoundingClientRect();
      w = Math.max(1, Math.floor(b.width));
      h = Math.max(1, Math.floor(b.height));
      canvas.width = Math.floor(w * dpr);
      canvas.height = Math.floor(h * dpr);
      canvas.style.width = w + 'px';
      canvas.style.height = h + 'px';
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
      cx = w * dpr * 0.5;
      cy = h * dpr * 0.5;
    }

    function makeShards() {
      const baseCount = 60;
      const extra = Math.round(density * 120);
      const count = baseCount + extra;
      shards = [];
      const R = Math.min(w, h) * 0.6;
      for (let i = 0; i < count; i++) {
        const a = Math.random() * Math.PI * 2;
        const r = (0.25 + Math.random() * 0.75) * R;
        const phi = (Math.random() * 0.2 + 0.05) * Math.PI; // wedge width
        const speed = (0.0006 + density * 0.002) * (Math.random() < 0.5 ? 1 : -1) * (0.6 + Math.random() * 0.8);
        const hueVar = (Math.random() * 120) - 60;
        const sat = 80 + Math.random() * 15;
        const lig = 50 + Math.random() * 12;
        shards.push({ a, r, phi, speed, hueVar, sat, lig });
      }
    }

    function draw(t) {
      if (root.getAttribute('data-reduced') === 'true') return;
      ctx.clearRect(0, 0, w, h);
      ctx.globalCompositeOperation = 'lighter';
      const baseHue = parseFloat(getComputedStyle(root).getPropertyValue('--h')) || hue;
      const night = root.getAttribute('data-theme') === 'night';

      for (let i = 0; i < shards.length; i++) {
        const s = shards[i];
        s.a += s.speed;
        const jitter = Math.sin((t || 0) * 0.0003 + i) * 0.08;
        const a1 = s.a + jitter;
        const a2 = a1 + s.phi;
        const r1 = s.r;
        const r2 = s.r * (0.55 + Math.sin((t || 0) * 0.0004 + i) * 0.08);

        const cx0 = w / 2, cy0 = h / 2;

        const x1 = cx0 + Math.cos(a1) * r1;
        const y1 = cy0 + Math.sin(a1) * r1;
        const x2 = cx0 + Math.cos(a2) * r1;
        const y2 = cy0 + Math.sin(a2) * r1;
        const x3 = cx0 + Math.cos((a1 + a2) / 2) * r2;
        const y3 = cy0 + Math.sin((a1 + a2) / 2) * r2;

        const hh = (baseHue + s.hueVar + (i * 0.6)) % 360;
        const alpha = night ? 0.10 : 0.12;

        const grad = ctx.createLinearGradient(x1, y1, x2, y2);
        grad.addColorStop(0, `hsla(${(hh + 20) % 360}, ${s.sat}%, ${s.lig}%, ${alpha})`);
        grad.addColorStop(1, `hsla(${(hh - 20 + 360) % 360}, ${s.sat}%, ${Math.max(40, s.lig - 10)}%, ${alpha * 0.9})`);
        ctx.fillStyle = grad;

        ctx.beginPath();
        ctx.moveTo(x1, y1);
        ctx.lineTo(x2, y2);
        ctx.lineTo(x3, y3);
        ctx.closePath();
        ctx.fill();
      }
      ctx.globalCompositeOperation = 'source-over';

      raf = requestAnimationFrame(draw);
    }

    function drawStatic() {
      ctx.clearRect(0, 0, w, h);
      const snap = performance.now();
      draw(snap); // draw once using current time state (guarded above)
    }

    function start() {
      clearAnimation();
      raf = requestAnimationFrame(draw);
    }
    function clearAnimation() {
      if (raf) cancelAnimationFrame(raf);
      raf = null;
    }

    function boot() {
      fit();
      makeShards();
      if (root.getAttribute('data-reduced') === 'true') {
        drawStatic();
      } else {
        start();
      }
    }

    // Initialize
    boot();
    window.addEventListener('resize', () => {
      fit();
      makeShards();
      if (root.getAttribute('data-reduced') === 'true') drawStatic();
    });

    // Clean up timers on unload
    window.addEventListener('beforeunload', () => {
      clearInterval(cycleTimer);
      clearAnimation();
    });
  })();
</script>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


