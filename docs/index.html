<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<style>
  .atelier2143 {
    --mx: 50%;
    --my: 50%;
    --ink: #0c1324;
    --muted: rgba(12,19,36,0.66);
    --chrome: rgba(255,255,255,0.75);
    --glass: rgba(255,255,255,0.55);
    --ring: rgba(12,19,36,0.12);
    --glow: 0 20px 80px rgba(0,0,0,0.18);
    --bg1: #f8fbff;
    --bg2: #eef5ff;
    --accent: #2e6cff;
    position: relative;
    min-height: 720px;
    padding: clamp(18px, 3.6vw, 44px);
    border-radius: 28px;
    color: var(--ink);
    background:
      radial-gradient(900px 700px at var(--mx) var(--my), rgba(127,168,255,0.25), transparent 60%),
      linear-gradient(180deg, var(--bg1), var(--bg2));
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.75), var(--glow);
    overflow: hidden;
    isolation: isolate;
  }
  .atelier2143[data-theme="dusk"] {
    --ink: #eaf2ff;
    --muted: rgba(234,242,255,0.72);
    --chrome: rgba(255,255,255,0.18);
    --glass: rgba(255,255,255,0.08);
    --ring: rgba(255,255,255,0.22);
    --bg1: #070b1a;
    --bg2: #0a1330;
    --accent: #9cd3ff;
    --glow: 0 28px 90px rgba(0,0,0,0.55);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.08), var(--glow);
    background:
      radial-gradient(1000px 800px at var(--mx) var(--my), rgba(120,180,255,0.18), transparent 62%),
      linear-gradient(180deg, var(--bg1), var(--bg2));
  }
  .atelier2143::before {
    content: "";
    position: absolute; inset: -20%;
    background:
      radial-gradient(120% 120% at 80% 10%, rgba(255,255,255,0.10), transparent 60%),
      radial-gradient(120% 140% at 10% 90%, rgba(255,255,255,0.10), transparent 60%),
      conic-gradient(from 0deg at 50% 50%, transparent 0 10%, rgba(255,255,255,0.05) 10% 12%, transparent 12% 24%, rgba(255,255,255,0.05) 24% 26%, transparent 26% 100%);
    mix-blend-mode: overlay;
    pointer-events: none;
  }

  .atelier2143 .chrome {
    position: relative;
    z-index: 2;
    max-width: 1140px;
    margin: 0 auto;
  }

  .atelier2143 .mast {
    display: flex; align-items: center; justify-content: space-between; gap: 12px;
    margin-bottom: clamp(10px, 2.8vw, 18px);
  }
  .atelier2143 .ed {
    display: inline-flex; align-items: center; gap: 10px;
    padding: 10px 14px; border-radius: 999px;
    background: linear-gradient(180deg, var(--chrome), rgba(255,255,255,0.45));
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.7), 0 10px 26px rgba(0,0,0,0.08);
    border: 1px solid var(--ring);
    color: var(--ink);
    font: 800 11px/1 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    letter-spacing: 0.14em; text-transform: uppercase;
  }
  .atelier2143[data-theme="dusk"] .ed { color: var(--ink); background: linear-gradient(180deg, var(--chrome), rgba(255,255,255,0.10)); }
  .atelier2143 .ed::before {
    content: "";
    width: 9px; height: 9px; border-radius: 50%;
    background: conic-gradient(from 0deg, #7bd1ff, #b28bff, #ffd07f, #7bd1ff);
    filter: saturate(1.2) drop-shadow(0 0 10px rgba(140,160,255,0.7));
  }

  .atelier2143 .controls { display: flex; flex-wrap: wrap; gap: 10px 12px; }
  .atelier2143 .chip {
    appearance: none; cursor: pointer; border: none;
    padding: 12px 14px; border-radius: 14px;
    background: linear-gradient(180deg, rgba(255,255,255,0.92), rgba(255,255,255,0.72));
    color: #0b1224;
    font: 800 12px/1 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    letter-spacing: 0.10em; text-transform: uppercase;
    border: 1px solid rgba(0,0,0,0.08);
    box-shadow: 0 12px 26px rgba(0,0,0,0.18), inset 0 1px 0 rgba(255,255,255,0.9);
    transition: transform 140ms ease, box-shadow 220ms ease, filter 200ms ease, background 200ms ease;
  }
  .atelier2143[data-theme="dusk"] .chip { color: #0b1224; }
  .atelier2143 .chip:hover { transform: translateY(-1px); box-shadow: 0 16px 30px rgba(0,0,0,0.24), inset 0 1px 0 #fff; }
  .atelier2143 .chip:active { transform: translateY(0); filter: saturate(1.06); }
  .atelier2143 .chip.ghost { background: linear-gradient(180deg, rgba(255,255,255,0.70), rgba(255,255,255,0.48)); }

  .atelier2143 .title {
    margin: 4px 0;
    font: 900 clamp(42px, 8vw, 120px)/0.92 ui-sans-serif, system-ui, -apple-system, "SF Pro Display", "Segoe UI", Roboto, Arial;
    letter-spacing: -0.02em;
    background: linear-gradient(92deg, #0b1328 0%, #1e5aff 35%, #b28bff 65%, #ffb86b 100%);
    -webkit-background-clip: text; background-clip: text; color: transparent;
    text-wrap: balance;
    filter: drop-shadow(0 12px 34px rgba(0,0,0,0.22));
  }
  .atelier2143[data-theme="dusk"] .title {
    background: linear-gradient(92deg, #ffffff 0%, #9bd8ff 35%, #b28bff 65%, #ffd07f 100%);
  }

  .atelier2143 .sub {
    font: 500 clamp(14px, 2.2vw, 20px)/1.7 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    color: var(--muted);
    max-width: 70ch;
    margin-bottom: clamp(12px, 2.8vw, 18px);
  }

  .atelier2143 .field {
    position: relative;
    border-radius: 22px;
    overflow: hidden;
    background: linear-gradient(180deg, var(--glass), rgba(255,255,255,0.22));
    border: 1px solid var(--ring);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.55), 0 18px 50px rgba(0,0,0,0.18);
    backdrop-filter: blur(14px) saturate(140%);
    -webkit-backdrop-filter: blur(14px) saturate(140%);
  }
  .atelier2143 .stage {
    position: relative;
    width: 100%;
    max-width: 980px;
    margin: 0 auto;
    aspect-ratio: 16 / 9;
  }
  .atelier2143 canvas {
    position: absolute; inset: 0; width: 100%; height: 100%;
    display: block;
  }
  .atelier2143 .halo {
    position: absolute; inset: 0; pointer-events: none;
    background:
      radial-gradient(600px 400px at var(--mx) var(--my), rgba(255,255,255,0.35), transparent 60%),
      radial-gradient(1000px 800px at 20% 120%, rgba(255,255,255,0.12), transparent 60%);
    mix-blend-mode: overlay;
  }
  .atelier2143[data-theme="dusk"] .halo {
    background:
      radial-gradient(700px 500px at var(--mx) var(--my), rgba(115,155,255,0.30), transparent 60%),
      radial-gradient(900px 700px at 80% -20%, rgba(255,200,170,0.08), transparent 60%);
  }

  .atelier2143 .hint {
    position: absolute; left: 50%; bottom: 12px; transform: translateX(-50%);
    z-index: 3;
    display: inline-flex; align-items: center; gap: 8px;
    padding: 8px 12px; border-radius: 999px;
    color: var(--muted);
    border: 1px dashed var(--ring);
    background: linear-gradient(180deg, rgba(255,255,255,0.35), rgba(255,255,255,0.20));
    font: 700 12px/1 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.55);
  }

  .atelier2143 .legend {
    display: flex; align-items: center; justify-content: space-between; gap: 12px;
    margin-top: 14px;
    color: var(--muted);
    font: 400 12px/1.6 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  }
  .atelier2143 .pill {
    display: inline-flex; align-items: center; gap: 8px;
    padding: 8px 12px; border-radius: 999px;
    border: 1px solid var(--ring);
    background: linear-gradient(180deg, rgba(255,255,255,0.78), rgba(255,255,255,0.44));
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
    color: #0b1224;
  }
  .atelier2143[data-theme="dusk"] .pill { background: linear-gradient(180deg, rgba(255,255,255,0.22), rgba(255,255,255,0.12)); color: var(--ink); }

  @media (max-width: 640px) {
    .atelier2143 .title { line-height: 0.96; }
  }
  @media (prefers-reduced-motion: reduce) {
    .atelier2143 .chip, .atelier2143 .ed { transition: none; }
  }
</style>

<div class="atelier2143" data-theme="bloom" aria-label="Generative meadow — a kinetic field of color and motion">
  <div class="chrome">
    <div class="mast">
      <span class="ed">Edition 2143</span>
      <div class="controls">
        <button class="chip" id="toggleTheme" type="button" aria-pressed="false" title="Toggle theme">Dusk</button>
        <button class="chip" id="toggleMotion" type="button" aria-pressed="true" title="Pause motion">Pause</button>
        <button class="chip ghost" id="remix" type="button" title="Remix the meadow">Remix</button>
      </div>
    </div>

    <h1 class="title">The Meadow, Alive</h1>
    <p class="sub" id="tagline">Brush the air with your cursor. Color collects like pollen; paths remember where you’ve been.</p>

    <div class="field">
      <div class="stage" id="stage" role="img" aria-label="Animated canvas of drifting, luminous strokes">
        <canvas id="meadow"></canvas>
        <div class="halo"></div>
        <span class="hint">Move • Tilt • Breathe</span>
      </div>
    </div>

    <div class="legend">
      <span class="pill">Mode • <strong id="modeLabel">Bloom</strong></span>
      <span class="pill"><span id="last-updated">Last updated: 2026-01-23 10:24:00 EST</span></span>
    </div>
  </div>
</div>

<script>
(function(){
  const root = document.currentScript.closest('.atelier2143');
  const canvas = root.querySelector('#meadow');
  const stage = root.querySelector('#stage');
  const themeBtn = root.querySelector('#toggleTheme');
  const motionBtn = root.querySelector('#toggleMotion');
  const remixBtn = root.querySelector('#remix');
  const modeLabel = root.querySelector('#modeLabel');
  const tagline = root.querySelector('#tagline');
  const updated = root.querySelector('#last-updated');

  // Timestamp
  try {
    const d = new Date();
    const fmt = new Intl.DateTimeFormat(undefined, { year:'numeric', month:'short', day:'2-digit', hour:'2-digit', minute:'2-digit' });
    updated.textContent = 'Updated ' + fmt.format(d);
  } catch(e) {
    updated.textContent = 'Updated ' + new Date().toLocaleString();
  }

  // Copy variants
  const lines = [
    'Brush the air with your cursor. Color collects like pollen; paths remember where you’ve been.',
    'Small motions, long echoes. The field leans toward your attention.',
    'Let the wind decide. You only suggest.',
    'Quiet velocities; bright intention.',
    'A meadow of memory, refreshed by your touch.'
  ];

  // Canvas setup
  const ctx = canvas.getContext('2d');
  let W = 0, H = 0, DPR = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
  function resize(){
    const rect = stage.getBoundingClientRect();
    W = Math.max(320, Math.floor(rect.width));
    H = Math.max(240, Math.floor(rect.height));
    DPR = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
    canvas.width = Math.floor(W * DPR);
    canvas.height = Math.floor(H * DPR);
    canvas.style.width = W + 'px';
    canvas.style.height = H + 'px';
    ctx.setTransform(DPR, 0, 0, DPR, 0, 0);
    paintBase(true);
  }

  // Theme palettes
  const palettes = [
    ['#2e6cff', '#6f9bff', '#b28bff', '#ffa17b'],
    ['#12c2e9', '#c471ed', '#f64f59', '#ffd07f'],
    ['#7bd1ff', '#6ee8ff', '#8fd3fe', '#b28bff'],
    ['#00d2ff', '#3a7bd5', '#8bd3ff', '#ffd07f'],
    ['#9be15d', '#00e3ae', '#7bd1ff', '#ffb86b']
  ];
  let palette = palettes[Math.floor(Math.random()*palettes.length)];

  // Particles
  const MAX = 140;
  let seeds = [];
  let t = Math.random() * 1000;
  let running = true;
  const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  if (prefersReduced) {
    running = false;
    motionBtn.textContent = 'Play';
    motionBtn.setAttribute('aria-pressed', 'false');
    root.setAttribute('data-paused', 'true');
  }

  // Pointer
  const pointer = { x: 0.5, y: 0.5, active: false };
  function setPointer(ev){
    const rect = stage.getBoundingClientRect();
    const x = Math.max(0, Math.min(1, (ev.clientX - rect.left)/rect.width));
    const y = Math.max(0, Math.min(1, (ev.clientY - rect.top)/rect.height));
    pointer.x = x; pointer.y = y; pointer.active = true;
    root.style.setProperty('--mx', Math.round(x*100)+'%');
    root.style.setProperty('--my', Math.round(y*100)+'%');
  }
  function endPointer(){
    pointer.active = false;
  }
  root.addEventListener('mousemove', setPointer);
  root.addEventListener('mouseleave', endPointer);
  root.addEventListener('touchmove', (ev)=>{ const t=ev.touches[0]; if(!t) return; setPointer(t); }, {passive:true});
  root.addEventListener('touchend', endPointer);

  // Helpers
  const rand = (a,b)=> a + Math.random()*(b-a);
  const choice = arr => arr[Math.floor(Math.random()*arr.length)];
  const clamp = (n,a,b)=> Math.max(a, Math.min(b, n));

  function paintBase(clearAll=false){
    if (clearAll) {
      ctx.clearRect(0,0,W,H);
    }
    // Veil to gently fade trails
    const isDusk = root.getAttribute('data-theme') === 'dusk';
    ctx.globalCompositeOperation = 'source-over';
    ctx.fillStyle = isDusk ? 'rgba(10, 15, 36, 0.08)' : 'rgba(255,255,255,0.08)';
    ctx.fillRect(0,0,W,H);
  }

  function seedSystem(){
    seeds = [];
    for(let i=0;i<MAX;i++){
      const speed = rand(0.2, 1.2);
      const size = rand(2, 5);
      const hue = choice(palette);
      seeds.push({
        x: rand(0, W), y: rand(0, H),
        vx: rand(-0.5, 0.5), vy: rand(-0.5, 0.5),
        speed, size, hue,
        life: rand(0.5, 1.0)
      });
    }
    paintBase(true);
  }

  function flowAngle(x, y, time){
    // Gentle pseudo-noise field
    const f = 0.0026, f2 = 0.0019;
    const a = Math.sin((x * f) + time*0.6) + Math.cos((y * f2) - time*0.4);
    return a;
  }

  function tick(dt){
    t += dt;
    const px = pointer.x * W, py = pointer.y * H;
    const pull = pointer.active ? 18 : 0;

    // Trail veil
    paintBase(false);

    ctx.globalCompositeOperation = 'lighter';
    for (let i=0;i<seeds.length;i++){
      const s = seeds[i];

      const angle = flowAngle(s.x, s.y, t);
      const ax = Math.cos(angle) * s.speed;
      const ay = Math.sin(angle) * s.speed;

      // Pointer influence
      const dx = px - s.x;
      const dy = py - s.y;
      const dist = Math.hypot(dx, dy) + 0.0001;
      const ux = dx / dist;
      const uy = dy / dist;
      const att = pull * (1 / (1 + dist*0.02));

      s.vx += ax * 0.08 + ux * att * 0.02;
      s.vy += ay * 0.08 + uy * att * 0.02;

      // Viscosity
      s.vx *= 0.98; s.vy *= 0.98;

      const ox = s.x, oy = s.y;
      s.x += s.vx; s.y += s.vy;

      // Wrap edges softly
      if (s.x < -20) s.x = W + 20;
      if (s.x > W + 20) s.x = -20;
      if (s.y < -20) s.y = H + 20;
      if (s.y > H + 20) s.y = -20;

      // Stroke as a luminous petal
      ctx.lineCap = 'round';
      ctx.lineJoin = 'round';
      ctx.strokeStyle = s.hue;
      ctx.globalAlpha = clamp(0.25 * s.life, 0.08, 0.45);
      ctx.lineWidth = s.size;
      ctx.beginPath();
      ctx.moveTo(ox, oy);
      ctx.lineTo(s.x, s.y);
      ctx.stroke();

      // Age
      s.life += (Math.random() - 0.5) * 0.02;
      s.life = clamp(s.life, 0.4, 1.1);

      // Occasional sparkle dot
      if (Math.random() < 0.007){
        ctx.globalAlpha = 0.35;
        ctx.fillStyle = s.hue;
        ctx.beginPath();
        ctx.arc(s.x, s.y, s.size*0.6, 0, Math.PI*2);
        ctx.fill();
      }
    }
    ctx.globalAlpha = 1.0;
    ctx.globalCompositeOperation = 'source-over';
  }

  // Theme toggle
  themeBtn.addEventListener('click', ()=>{
    const toDusk = root.getAttribute('data-theme') !== 'dusk';
    root.setAttribute('data-theme', toDusk ? 'dusk' : 'bloom');
    themeBtn.textContent = toDusk ? 'Bloom' : 'Dusk';
    themeBtn.setAttribute('aria-pressed', toDusk ? 'true' : 'false');
    modeLabel.textContent = toDusk ? 'Dusk' : 'Bloom';
    paintBase(true);
  });

  // Motion control
  motionBtn.addEventListener('click', ()=>{
    running = !running;
    motionBtn.textContent = running ? 'Pause' : 'Play';
    motionBtn.setAttribute('aria-pressed', running ? 'true' : 'false');
    if (running) last = performance.now(), requestAnimationFrame(loop);
  });

  // Remix palette and copy
  remixBtn.addEventListener('click', ()=>{
    palette = choice(palettes);
    tagline.textContent = choice(lines);
    seedSystem();
  });

  // Keyboard shortcuts
  stage.tabIndex = 0;
  stage.addEventListener('keydown', (e)=>{
    if (e.code === 'Space') { e.preventDefault(); motionBtn.click(); }
    if (e.key && e.key.toLowerCase() === 't') { e.preventDefault(); themeBtn.click(); }
    if (e.key && e.key.toLowerCase() === 'r') { e.preventDefault(); remixBtn.click(); }
  });

  // Resize observer
  const ro = new ResizeObserver(resize);
  ro.observe(stage);

  // Loop
  let last = performance.now();
  function loop(now){
    if (!running) return;
    const dt = Math.min(0.05, (now - last) / 1000); last = now;
    tick(dt);
    requestAnimationFrame(loop);
  }

  // Init
  resize();
  seedSystem();
  if (!prefersReduced) requestAnimationFrame(loop);
})();
</script>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


