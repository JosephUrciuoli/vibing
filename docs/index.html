<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<section class="orbital" data-mode="night" style="--x:50%;--y:50%;">
  <style>
    .orbital{
      --ink: #e9f1ff;
      --muted: rgba(233,241,255,.75);
      --edge: rgba(255,255,255,.14);
      --glow1: #79c7ff;
      --glow2: #a58bff;
      --glow3: #ff9fd6;
      --bg1: #070a14;
      --bg2: #0a1230;
      position: relative;
      display: grid;
      gap: clamp(18px, 3.6vw, 40px);
      padding: clamp(20px, 5vw, 46px);
      border-radius: 34px;
      color: var(--ink);
      background:
        radial-gradient(900px 600px at var(--x) var(--y), rgba(255,255,255,.08), transparent 60%),
        linear-gradient(130deg, var(--bg1), var(--bg2));
      border: 1px solid var(--edge);
      box-shadow: 0 34px 96px rgba(0,0,0,.6), inset 0 1px 0 rgba(255,255,255,.05);
      font-family: ui-sans-serif, -apple-system, Segoe UI, Inter, Roboto, "Helvetica Neue", Arial;
      isolation: isolate;
      overflow: hidden;
    }
    .orbital[data-mode="day"]{
      --ink: #0f1728;
      --muted: rgba(15,23,40,.75);
      --edge: rgba(0,0,0,.14);
      --glow1: #ff7a6e;
      --glow2: #ffb84b;
      --glow3: #2dd4a7;
      --bg1: #fff7ef;
      --bg2: #eaf1ff;
      background:
        radial-gradient(1000px 680px at var(--x) var(--y), rgba(0,0,0,.07), transparent 60%),
        linear-gradient(130deg, var(--bg1), var(--bg2));
      box-shadow: 0 26px 74px rgba(0,0,0,.22), inset 0 1px 0 rgba(255,255,255,.9);
    }

    .orbital::before,
    .orbital::after{
      content:"";
      position:absolute; inset:-35%;
      pointer-events:none;
    }
    .orbital::before{
      background:
        conic-gradient(from 120deg at 55% 45%, rgba(121,199,255,.25), rgba(165,139,255,.25), rgba(255,159,214,.22), transparent 80%);
      filter: blur(44px) saturate(1.1);
      mix-blend-mode: screen;
      animation: swirl 26s linear infinite;
      opacity:.55;
    }
    .orbital[data-mode="day"]::before{
      mix-blend-mode: multiply; opacity:.35; filter: blur(30px) saturate(1.15);
    }
    .orbital::after{
      background:
        radial-gradient(700px 520px at var(--x) var(--y), rgba(255,255,255,.12), transparent 60%);
      transition: background .25s ease;
    }
    @keyframes swirl{ to { transform: rotate(1turn); } }

    .shell{
      position: relative; z-index: 2;
      display: grid; grid-template-columns: 1.1fr 1fr; align-items: center;
      gap: clamp(18px, 4vw, 40px);
    }
    @media (max-width: 880px){ .shell{ grid-template-columns: 1fr; } }

    .copy{ display:grid; gap: 14px; align-content:start; }
    .chip{
      display:inline-flex; align-items:center; gap:8px;
      padding: 8px 12px; border-radius: 999px;
      font-size: 12px; letter-spacing:.26em; text-transform: uppercase;
      color: var(--muted);
      border: 1px solid var(--edge);
      background: rgba(255,255,255,.06);
      backdrop-filter: blur(6px);
    }
    .orbital[data-mode="day"] .chip{
      background: rgba(0,0,0,.06); backdrop-filter: blur(4px);
    }

    .hero{
      margin: 2px 0 4px;
      font-weight: 900; letter-spacing: -0.02em; line-height: .95;
      font-size: clamp(38px, 6.8vw, 84px);
      background: linear-gradient(90deg, var(--glow1), var(--glow2), var(--glow3));
      -webkit-background-clip: text; background-clip: text; color: transparent;
    }
    .sub{
      margin: 0; color: var(--muted);
      font-size: clamp(14px, 2.4vw, 18px);
      max-width: 54ch;
    }

    .controls{ display:flex; flex-wrap:wrap; gap: 10px; margin-top: 10px; }
    .pill{
      appearance: none; cursor: pointer; user-select:none;
      border-radius: 16px; padding: 12px 16px; font-weight: 800; letter-spacing:.2px;
      border: 1px solid rgba(255,255,255,.22);
      background: linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.7));
      color: #0c1220;
      box-shadow: 0 10px 22px rgba(0,0,0,.26), inset 0 1px 0 rgba(255,255,255,.65);
      transition: transform .18s ease, box-shadow .18s ease, filter .18s ease;
    }
    .pill:hover{ transform: translateY(-1px); box-shadow: 0 18px 36px rgba(0,0,0,.32), inset 0 1px 0 rgba(255,255,255,.75); }
    .pill:active{ transform: translateY(0); }
    .pill.ghost{
      background: rgba(255,255,255,.08); color: var(--ink);
      border-color: rgba(255,255,255,.22); box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
    }
    .orbital[data-mode="day"] .pill.ghost{
      background: rgba(0,0,0,.06); color: #0f1728; border-color: rgba(0,0,0,.14);
    }
    .pill.outline{ background: transparent; color: var(--ink); border-color: rgba(255,255,255,.28); box-shadow:none; }
    .orbital[data-mode="day"] .pill.outline{ border-color: rgba(0,0,0,.22); }
    .pill.minimal{ background: linear-gradient(180deg, rgba(255,255,255,.2), rgba(255,255,255,.08)); color: var(--ink); }

    .meta{
      display:flex; flex-wrap: wrap; gap: 12px; align-items:center;
      margin-top: 8px; color: var(--muted); font-size: 12px;
    }
    #clock{ font-variant-numeric: tabular-nums; opacity:.9; }

    .stage{
      position: relative; border-radius: 24px;
      min-height: clamp(300px, 48vw, 600px);
      padding: clamp(8px, 1.8vw, 14px);
      background:
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)),
        repeating-linear-gradient(90deg, rgba(255,255,255,.04) 0 1px, transparent 1px 42px),
        repeating-linear-gradient(0deg, rgba(255,255,255,.03) 0 1px, transparent 1px 42px);
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: 0 18px 44px rgba(0,0,0,.36);
      overflow: hidden; transform-style: preserve-3d; perspective: 900px;
    }
    .orbital[data-mode="day"] .stage{
      background:
        linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.65)),
        repeating-linear-gradient(90deg, rgba(0,0,0,.06) 0 1px, transparent 1px 42px),
        repeating-linear-gradient(0deg, rgba(0,0,0,.05) 0 1px, transparent 1px 42px);
      border-color: rgba(0,0,0,.1);
      box-shadow: 0 12px 28px rgba(0,0,0,.2);
    }

    canvas#sky{ position:absolute; inset:0; width:100%; height:100%; display:block; }

    .halo{
      position:absolute; inset: 7% 7%;
      border-radius: 50%;
      border: 1px dashed rgba(255,255,255,.18);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
      pointer-events:none;
      animation: slowspin 22s linear infinite;
    }
    .orbital[data-mode="day"] .halo{ border-color: rgba(0,0,0,.16); box-shadow: inset 0 0 0 1px rgba(0,0,0,.06); }
    @keyframes slowspin{ to { transform: rotate(360deg); } }

    @media (prefers-reduced-motion: reduce){
      .orbital::before, .halo{ animation: none !important; }
    }
  </style>

  <div class="shell">
    <div class="copy">
      <div class="chip">Edition 435 • Lumen Orrery</div>
      <h1 class="hero">Time, in Orbits</h1>
      <p class="sub">A pocket sky for your cursor. Planets glide, shadows bend, and trails remember where you’ve been.</p>
      <div class="controls">
        <button class="pill" id="modeBtn" aria-pressed="false">Switch to Day</button>
        <button class="pill ghost" id="motionBtn" aria-pressed="true">Pause</button>
        <button class="pill outline" id="pulseBtn">Pulse</button>
        <button class="pill minimal" id="randomBtn">Randomize</button>
      </div>
      <div class="meta">
        <span id="clock" aria-live="polite" aria-label="Current time"></span>
        <span id="last-updated">Last updated: 2025-11-05 06:16:09 EST</span>
      </div>
    </div>

    <div class="stage" id="stage" aria-label="Generative orbital field">
      <canvas id="sky"></canvas>
      <div class="halo" aria-hidden="true"></div>
    </div>
  </div>

  <script>
    (function(){
      const root = document.currentScript.closest('.orbital');
      const stage = root.querySelector('#stage');
      const canvas = root.querySelector('#sky');
      const ctx = canvas.getContext('2d', { alpha: true });
      const modeBtn = root.querySelector('#modeBtn');
      const motionBtn = root.querySelector('#motionBtn');
      const pulseBtn = root.querySelector('#pulseBtn');
      const randomBtn = root.querySelector('#randomBtn');
      const clockEl = root.querySelector('#clock');
      const updated = root.querySelector('#last-updated');

      // Last updated + clock
      try {
        const d = new Date();
        updated.textContent = 'Updated ' + d.toLocaleString([], { weekday:'short', month:'short', day:'2-digit', hour:'2-digit', minute:'2-digit' });
      } catch(e){}
      function tickClock(){
        try{
          const d = new Date();
          clockEl.textContent = d.toLocaleTimeString([], { hour:'2-digit', minute:'2-digit', second:'2-digit' }) + ' • ' + d.toLocaleDateString([], { month:'short', day:'2-digit' });
        }catch(e){}
      }
      tickClock();
      const clockTimer = setInterval(tickClock, 1000);

      // Pointer spotlight
      function updateLight(e){
        const r = root.getBoundingClientRect();
        const x = ((e.clientX - r.left) / r.width) * 100;
        const y = ((e.clientY - r.top) / r.height) * 100;
        root.style.setProperty('--x', x + '%');
        root.style.setProperty('--y', y + '%');
      }
      root.addEventListener('pointermove', updateLight, {passive:true});

      // Tilt stage
      let rect;
      function updateRect(){ rect = stage.getBoundingClientRect(); }
      updateRect();
      window.addEventListener('resize', updateRect, {passive:true});
      stage.addEventListener('pointermove', (e)=>{
        if(!rect) return;
        const nx = (e.clientX - rect.left)/rect.width - 0.5;
        const ny = (e.clientY - rect.top)/rect.height - 0.5;
        const rx = (-ny)*8, ry = nx*10;
        stage.style.transform = 'rotateX('+rx+'deg) rotateY('+ry+'deg)';
      }, {passive:true});
      stage.addEventListener('pointerleave', ()=>{ stage.style.transform = 'rotateX(0) rotateY(0)'; });

      // Canvas sizing
      function sizeCanvas(){
        const r = stage.getBoundingClientRect();
        const ratio = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
        canvas.width = Math.floor(r.width * ratio);
        canvas.height = Math.floor(r.height * ratio);
        draw(true);
      }
      window.addEventListener('resize', sizeCanvas, {passive:true});
      sizeCanvas();

      // Orrery system
      const state = {
        t: 0,
        running: true,
        seed: Math.random() * 1000,
        comet: null
      };

      function isDay(){ return root.getAttribute('data-mode') === 'day'; }

      function palette(){
        if (isDay()){
          return [
            {h: 8, s: 92, l: 58},
            {h: 38, s: 92, l: 58},
            {h: 155, s: 64, l: 46},
            {h: 210, s: 72, l: 50}
          ];
        } else {
          return [
            {h: 205, s: 90, l: 64},
            {h: 255, s: 86, l: 66},
            {h: 315, s: 88, l: 70},
            {h: 185, s: 82, l: 58}
          ];
        }
      }

      const pointer = { x: 0, y: 0, active: false };
      stage.addEventListener('pointermove', (e)=>{
        const r = canvas.getBoundingClientRect();
        const ratio = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
        pointer.x = (e.clientX - r.left) * ratio;
        pointer.y = (e.clientY - r.top) * ratio;
        pointer.active = true;
      }, {passive:true});
      stage.addEventListener('pointerleave', ()=>{ pointer.active = false; });

      // Build orbits
      const bodies = [];
      function resetOrbits(){
        bodies.length = 0;
        const w = canvas.width, h = canvas.height;
        const c = Math.min(w, h);
        const count = 9;
        for (let i=0;i<count;i++){
          bodies.push({
            a: c*(0.08 + i*0.06) * (0.9 + Math.random()*0.2), // semi-major
            b: c*(0.06 + i*0.05) * (0.9 + Math.random()*0.2), // semi-minor
            tilt: (Math.random()*Math.PI*2),
            speed: 0.003 + i*0.0009 + Math.random()*0.0006,
            angle: Math.random() * Math.PI*2,
            r: 2 + i*0.7 + Math.random()*1.8,
            hueIdx: i % 4
          });
        }
      }
      resetOrbits();

      // Comet
      function launchComet(){
        const w = canvas.width, h = canvas.height;
        state.comet = {
          x: Math.random() > 0.5 ? -50 : w+50,
          y: Math.random()*h*0.8 + h*0.1,
          vx: (Math.random()>0.5?1:-1)*(1.5 + Math.random()*2.2),
          vy: (-0.6 + Math.random()*1.2),
          life: 0,
          max: 600 + Math.random()*600
        };
      }

      // Drawing
      let raf;
      function draw(staticOnly){
        if(!ctx) return;
        const w = canvas.width, h = canvas.height;

        // fade trails
        ctx.globalCompositeOperation = 'source-over';
        ctx.globalAlpha = isDay() ? 0.18 : 0.12;
        ctx.fillStyle = isDay() ? 'rgba(255,255,255,1)' : 'rgba(0,0,0,1)';
        ctx.fillRect(0,0,w,h);

        // starfield for night
        if(!isDay()){
          ctx.save();
          ctx.globalAlpha = 0.6;
          ctx.fillStyle = 'rgba(255,255,255,0.6)';
          for (let i=0;i<36;i++){
            const sx = (i*997 % w), sy = (i*631 % h);
            const r = ((i*37)%3)+0.8;
            ctx.beginPath(); ctx.arc(sx, sy, r, 0, Math.PI*2); ctx.fill();
          }
          ctx.restore();
        }

        const pal = palette();
        const cx = w/2, cy = h/2;
        state.t += 1;

        // central sun/moon
        ctx.save();
        const coreR = Math.max(6, Math.min(w,h)*0.03);
        const coreGrad = ctx.createRadialGradient(cx, cy, 0, cx, cy, coreR*6);
        if (isDay()){
          coreGrad.addColorStop(0, 'rgba(255,230,180,0.85)');
          coreGrad.addColorStop(1, 'rgba(255,255,255,0)');
        } else {
          coreGrad.addColorStop(0, 'rgba(120,180,255,0.35)');
          coreGrad.addColorStop(1, 'rgba(0,0,0,0)');
        }
        ctx.fillStyle = coreGrad; ctx.globalAlpha = 1; ctx.fillRect(0,0,w,h);
        ctx.beginPath();
        ctx.fillStyle = isDay() ? 'rgba(255,210,120,0.95)' : 'rgba(180,210,255,0.95)';
        ctx.shadowBlur = isDay()? 16: 18;
        ctx.shadowColor = isDay()? 'rgba(255,190,130,0.8)':'rgba(140,190,255,0.8)';
        ctx.arc(cx, cy, coreR, 0, Math.PI*2); ctx.fill();
        ctx.restore();

        // orbits + planets
        for (let i=0;i<bodies.length;i++){
          const b = bodies[i];
          b.angle += state.running ? b.speed : 0;
          const s = Math.sin(b.tilt), c = Math.cos(b.tilt);
          // position on ellipse rotated by tilt
          let px = b.a * Math.cos(b.angle);
          let py = b.b * Math.sin(b.angle);
          let x = cx + px * c - py * s;
          let y = cy + px * s + py * c;

          // pointer lens
          if(pointer.active){
            const dx = x - pointer.x, dy = y - pointer.y;
            const dist = Math.hypot(dx, dy) + 0.001;
            const lens = Math.min(18, 1600/(dist)); // pull strength
            x += dx/dist * lens * (isDay()?0.5:0.8);
            y += dy/dist * lens * (isDay()?0.5:0.8);
          } else {
            // micro drift
            x += Math.sin((state.t+i)*0.01) * 0.2;
            y += Math.cos((state.t-i)*0.011) * 0.2;
          }

          // orbit path
          ctx.save();
          ctx.globalAlpha = isDay()? 0.18 : 0.22;
          ctx.strokeStyle = isDay()? 'rgba(0,0,0,0.35)' : 'rgba(255,255,255,0.35)';
          ctx.lineWidth = 1 * (window.devicePixelRatio||1);
          ctx.setLineDash([6,6]);
          ctx.beginPath();
          // draw ellipse outline
          ctx.ellipse(cx, cy, b.a, b.b, b.tilt, 0, Math.PI*2);
          ctx.stroke();
          ctx.setLineDash([]);
          ctx.restore();

          // planet
          const hue = pal[b.hueIdx];
          const r = Math.max(1.2, b.r * (1 + 0.05*Math.sin(state.t*0.03 + i)));
          ctx.save();
          ctx.globalAlpha = 1;
          ctx.shadowBlur = 14;
          ctx.shadowColor = 'hsla('+hue.h+','+hue.s+'%,'+(hue.l+10)+'%,0.7)';
          const grd = ctx.createRadialGradient(x, y, 0, x, y, r*4);
          grd.addColorStop(0, 'hsla('+hue.h+','+hue.s+'%,'+Math.min(90,hue.l+20)+'%,0.95)');
          grd.addColorStop(1, 'hsla('+((hue.h+25)%360)+','+Math.min(98,hue.s+8)+'%,'+Math.max(30,hue.l-18)+'%,0.0)');
          ctx.fillStyle = grd;
          ctx.beginPath(); ctx.arc(x, y, r, 0, Math.PI*2); ctx.fill();

          // tiny ring accent
          ctx.globalAlpha = 0.6;
          ctx.strokeStyle = 'hsla('+hue.h+','+Math.min(95,hue.s+5)+'%,'+Math.min(85,hue.l+8)+'%,0.8)';
          ctx.lineWidth = 0.8*(window.devicePixelRatio||1);
          ctx.beginPath(); ctx.arc(x, y, r*1.9, 0, Math.PI*2); ctx.stroke();
          ctx.restore();
        }

        // comet
        if (state.comet){
          const c = state.comet;
          c.x += c.vx; c.y += c.vy; c.life++;
          ctx.save();
          const tail = 80;
          const angle = Math.atan2(c.vy, c.vx);
          const tx = Math.cos(angle), ty = Math.sin(angle);
          for (let i=0;i<tail;i++){
            const alpha = (1 - i/tail) * 0.4;
            ctx.globalAlpha = alpha;
            const lx = c.x - tx*i*3, ly = c.y - ty*i*3;
            ctx.fillStyle = isDay()? 'rgba(255,180,120,0.9)' : 'rgba(160,210,255,0.9)';
            ctx.beginPath(); ctx.arc(lx, ly, Math.max(0.5, 2 - i*0.02), 0, Math.PI*2); ctx.fill();
          }
          ctx.restore();
          if (c.life > c.max || c.x < -120 || c.x > canvas.width+120) state.comet = null;
        }

        if (!staticOnly && state.running) raf = requestAnimationFrame(draw);
      }

      // Controls
      modeBtn.addEventListener('click', ()=>{
        const day = isDay();
        if (day){
          root.setAttribute('data-mode', 'night');
          modeBtn.textContent = 'Switch to Day';
          modeBtn.setAttribute('aria-pressed', 'false');
        } else {
          root.setAttribute('data-mode', 'day');
          modeBtn.textContent = 'Switch to Night';
          modeBtn.setAttribute('aria-pressed', 'true');
        }
        draw(true);
      });

      motionBtn.addEventListener('click', ()=>{
        state.running = !state.running;
        motionBtn.textContent = state.running ? 'Pause' : 'Resume';
        motionBtn.setAttribute('aria-pressed', String(state.running));
        if (state.running) draw(); else cancelAnimationFrame(raf);
      });

      pulseBtn.addEventListener('click', ()=>{
        for (let i=0;i<bodies.length;i++){
          bodies[i].angle += Math.random()*0.7 + 0.3;
        }
        if (!state.comet) launchComet();
        draw(true);
      });

      randomBtn.addEventListener('click', ()=>{
        state.seed = Math.random() * 1000;
        resetOrbits();
        draw(true);
      });

      // Click to launch a comet toward pointer
      stage.addEventListener('pointerdown', (e)=>{
        const r = canvas.getBoundingClientRect();
        const ratio = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
        const tx = (e.clientX - r.left) * ratio;
        const ty = (e.clientY - r.top) * ratio;
        const startSide = Math.random() > 0.5 ? -80 : canvas.width+80;
        const angle = Math.atan2(ty - (canvas.height*0.5), tx - startSide);
        state.comet = { x: startSide, y: canvas.height*0.5, vx: Math.cos(angle)*3.2, vy: Math.sin(angle)*2.2, life:0, max: 900 };
        draw(true);
      });

      // Start
      draw(true);
      if (state.running) raf = requestAnimationFrame(draw);

      // Cleanup on detach
      document.addEventListener('visibilitychange', ()=>{ if (document.hidden) cancelAnimationFrame(raf); else if (state.running) draw(); });
    })();
  </script>
</section>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


