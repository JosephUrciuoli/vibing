<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<section class="vibe712" data-theme="bloom" aria-label="Iteration 712 — Prism Garden">
  <style>
    .vibe712 {
      --ink: #0d1220;
      --muted: #5b6274;
      --line: color-mix(in oklab, var(--ink) 12%, transparent);
      --bg-1: #f8fbff;
      --bg-2: #ffffff;
      --acc-1: #7ae7f3;
      --acc-2: #a89bff;
      --panel: color-mix(in oklab, #ffffff 82%, transparent);
      --glow: rgba(24, 43, 84, 0.35);
      --tiltX: 0deg;
      --tiltY: 0deg;
      --shiftX: 0px;
      --shiftY: 0px;
      --speed: 1.00;
      color-scheme: light;
      position: relative;
      isolation: isolate;
      padding: clamp(22px, 5vw, 56px);
      border-radius: 28px;
      border: 1px solid var(--line);
      background:
        radial-gradient(160% 140% at 20% 10%, color-mix(in oklab, var(--acc-1) 12%, transparent), transparent 40%),
        radial-gradient(160% 160% at 80% 120%, color-mix(in oklab, var(--acc-2) 12%, transparent), transparent 50%),
        linear-gradient(180deg, var(--bg-1), var(--bg-2));
      box-shadow: 0 34px 90px rgba(16, 24, 48, 0.14), inset 0 1px 0 rgba(255,255,255,0.9);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color: var(--ink);
      overflow: hidden;
    }

    .vibe712::before {
      content: "";
      position: absolute; inset: -20% -10% -30% -10%;
      background:
        radial-gradient(50% 40% at 15% 80%, color-mix(in oklab, var(--acc-1) 26%, transparent), transparent 70%),
        radial-gradient(50% 40% at 85% 20%, color-mix(in oklab, var(--acc-2) 26%, transparent), transparent 70%);
      filter: blur(70px);
      opacity: 0.65;
      pointer-events: none;
      z-index: 0;
    }

    .vibe712 .grain {
      position: absolute; inset: 0; pointer-events: none; z-index: 0;
      background:
        repeating-linear-gradient(0deg, rgba(0,0,0,0.016) 0 1px, transparent 1px 2px),
        repeating-linear-gradient(90deg, rgba(0,0,0,0.013) 0 1px, transparent 1px 2px);
      mix-blend-mode: multiply; opacity: 0.4;
      mask: radial-gradient(140% 140% at 60% 30%, #000 70%, transparent);
    }

    /* Themes */
    .vibe712[data-theme="bloom"] {
      --bg-1: #f7fbff; --bg-2: #ffffff;
      --acc-1: #7af0ff; --acc-2: #b49aff;
      --ink: #0d1220; --muted: #5b6274; color-scheme: light;
    }
    .vibe712[data-theme="dusk"] {
      --bg-1: #0f1020; --bg-2: #17182a;
      --acc-1: #ff8585; --acc-2: #9fa8ff;
      --ink: #eef0ff; --muted: #cbd2e6; color-scheme: dark;
      box-shadow: 0 34px 100px rgba(0,0,0,0.45), inset 0 1px 0 rgba(255,255,255,0.06);
    }
    .vibe712[data-theme="noir"] {
      --bg-1: #111; --bg-2: #161616;
      --acc-1: #7af0ff; --acc-2: #fff07a;
      --ink: #f6f6f6; --muted: #cfcfcf; color-scheme: dark;
      box-shadow: 0 34px 100px rgba(0,0,0,0.5), inset 0 1px 0 rgba(255,255,255,0.05);
    }

    /* Layout */
    .vibe712 .grid {
      position: relative; z-index: 1;
      display: grid; grid-template-columns: 1.05fr 1fr; gap: clamp(16px, 4.5vw, 44px);
      align-items: start;
    }
    @media (max-width: 980px) { .vibe712 .grid { grid-template-columns: 1fr; } }

    /* Badge + Type */
    .vibe712 .badge {
      display: inline-flex; align-items: center; gap: 10px;
      padding: 8px 12px; border-radius: 999px; border: 1px solid var(--line);
      background: var(--panel); backdrop-filter: blur(6px);
      font-weight: 900; font-size: 12px; letter-spacing: 0.28px;
      color: color-mix(in oklab, var(--ink) 86%, var(--muted));
      box-shadow: 0 10px 24px rgba(0,0,0,0.08);
    }
    .vibe712 .pip {
      width: 10px; height: 10px; border-radius: 50%;
      background:
        conic-gradient(from 180deg, var(--acc-1), var(--acc-2), var(--acc-1));
      box-shadow: 0 0 0 4px color-mix(in oklab, var(--acc-2) 22%, transparent),
                  0 0 18px color-mix(in oklab, var(--acc-1) 36%, transparent);
    }
    .vibe712 h1 {
      margin: 12px 0 6px;
      font-family: ui-serif, "Iowan Old Style", Georgia, "Times New Roman", serif;
      font-size: clamp(40px, 7.4vw, 96px);
      line-height: 0.96; letter-spacing: -0.025em; font-weight: 800;
      background: linear-gradient(90deg,
        color-mix(in oklab, var(--ink) 92%, var(--acc-2)),
        color-mix(in oklab, var(--acc-1) 46%, var(--acc-2) 10%));
      -webkit-background-clip: text; background-clip: text; color: transparent;
      text-wrap: balance;
    }
    .vibe712 .sub {
      margin: 8px 0 18px;
      font-size: clamp(14px, 2.2vw, 18px);
      color: var(--muted);
      max-width: 66ch;
      text-wrap: pretty;
    }

    /* Controls */
    .vibe712 .controls { display: flex; flex-wrap: wrap; gap: 12px; align-items: center; margin-top: 8px; }
    .vibe712 .seg-group {
      display: inline-flex; border-radius: 14px; overflow: hidden; border: 1px solid var(--line);
      background: color-mix(in oklab, rgba(255,255,255,0.82) 70%, transparent);
    }
    .vibe712 .seg {
      appearance: none; border: 0; background: transparent; color: var(--ink);
      padding: 10px 14px; font-weight: 900; letter-spacing: 0.25px; cursor: pointer;
      transition: background 160ms ease, color 160ms ease;
    }
    .vibe712 .seg.active { background: color-mix(in oklab, var(--acc-2) 18%, transparent); color: var(--ink); }
    .vibe712 .knob {
      display: inline-flex; align-items: center; gap: 10px; padding: 8px 12px; border-radius: 999px;
      border: 1px solid var(--line);
      background: var(--panel);
      font-weight: 900; letter-spacing: 0.25px;
    }
    .vibe712 .range {
      appearance: none; width: 180px; height: 6px; border-radius: 999px;
      background: color-mix(in oklab, var(--muted) 28%, transparent); outline: none;
    }
    .vibe712 .range::-webkit-slider-thumb {
      appearance: none; width: 18px; height: 18px; border-radius: 50%;
      background: linear-gradient(135deg, var(--acc-2), var(--acc-1));
      box-shadow: 0 0 0 3px color-mix(in oklab, var(--acc-2) 18%, transparent);
      border: 0; cursor: pointer;
    }
    .vibe712 .btn {
      display: inline-flex; align-items: center; gap: 10px; cursor: pointer;
      padding: 12px 16px; border-radius: 14px; border: 1px solid var(--line);
      background: var(--panel); color: var(--ink); font-weight: 900; letter-spacing: 0.2px;
      box-shadow: 0 12px 26px rgba(0,0,0,0.10);
      transition: transform 160ms ease, box-shadow 220ms ease, background 240ms ease;
    }
    .vibe712 .btn:hover { transform: translateY(-2px); }
    .vibe712 .btn.soft { background: transparent; }

    /* Stage */
    .vibe712 .stage {
      position: relative;
      width: min(92vw, 680px);
      aspect-ratio: 4 / 3;
      border-radius: 24px;
      border: 1px solid var(--line);
      overflow: hidden;
      background:
        radial-gradient(120% 120% at 20% 10%, color-mix(in oklab, var(--acc-2) 9%, transparent), transparent 60%),
        radial-gradient(120% 160% at 80% 120%, color-mix(in oklab, var(--acc-1) 9%, transparent), transparent 60%),
        linear-gradient(180deg,
          color-mix(in oklab, var(--bg-1) 90%, #0b1224) 0%,
          color-mix(in oklab, var(--bg-2) 70%, #0b1224) 100%);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.7), 0 24px 60px rgba(0,0,0,0.16);
      touch-action: none;
      display: grid; place-items: center;
      transform-style: preserve-3d;
      transform: rotateX(var(--tiltY)) rotateY(calc(var(--tiltX) * -1));
      transition: transform 140ms ease-out;
    }
    .vibe712 canvas {
      width: 100%; height: 100%;
      display: block;
      filter: saturate(1.15) contrast(1.05);
    }

    /* Bokeh floats */
    .vibe712 .bokeh { position: absolute; inset: -10%; pointer-events: none; z-index: 1; }
    .vibe712 .dot {
      position: absolute; width: var(--s, 120px); height: var(--s, 120px);
      border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9), rgba(255,255,255,0.0) 70%);
      opacity: 0.16; filter: blur(2px);
      animation: float var(--t, 16s) ease-in-out infinite alternate;
      transform: translate(var(--x, 0), var(--y, 0)) translate(var(--shiftX), var(--shiftY));
      mix-blend-mode: screen;
    }
    @keyframes float {
      from { transform: translate(var(--x), var(--y)) translate(var(--shiftX), var(--shiftY)) scale(1); }
      to   { transform: translate(calc(var(--x) + 80px), calc(var(--y) - 60px)) translate(var(--shiftX), var(--shiftY)) scale(1.08); }
    }

    /* Notes */
    .vibe712 .notes {
      display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px;
      margin-top: clamp(14px, 3vw, 24px);
    }
    @media (max-width: 740px) { .vibe712 .notes { grid-template-columns: 1fr; } }
    .vibe712 .note {
      padding: 14px; border-radius: 14px; border: 1px solid var(--line);
      background: var(--panel);
      box-shadow: 0 10px 24px rgba(0,0,0,0.10);
    }
    .vibe712 .note h3 { margin: 0 0 4px; font-size: 11px; font-weight: 900; letter-spacing: 0.28px; text-transform: uppercase; color: var(--muted); }
    .vibe712 .note p { margin: 0; font-size: 13px; color: var(--ink); font-weight: 800; }

    /* Footer */
    .vibe712 .foot {
      position: relative; z-index: 1; margin-top: clamp(16px, 3.2vw, 22px);
      display: flex; flex-wrap: wrap; gap: 10px; align-items: center; justify-content: space-between;
      color: var(--muted); font-size: 12px;
    }
    .vibe712 .stamp {
      display: inline-flex; align-items: center; gap: 8px; padding: 8px 10px; border-radius: 999px;
      border: 1px solid var(--line);
      background: var(--panel);
      box-shadow: 0 6px 18px rgba(0,0,0,0.10);
    }
    .vibe712 .ping {
      width: 6px; height: 6px; border-radius: 50%;
      background: linear-gradient(135deg, var(--acc-2), var(--acc-1));
      box-shadow: 0 0 0 3px color-mix(in oklab, var(--acc-2) 22%, transparent);
    }

    /* Accessibility: reduced motion */
    @media (prefers-reduced-motion: reduce) {
      .vibe712 * { animation: none !important; transition: none !important; }
    }
  </style>

  <div class="grain" aria-hidden="true"></div>

  <div class="grid">
    <div class="left">
      <span class="badge"><span class="pip" aria-hidden="true"></span> Iteration 712 • Prism Garden</span>
      <h1>Lines that breathe. Color that listens.</h1>
      <p class="sub">An interactive generative poster. Nudge the canvas and it tilts toward you; change the palette, adjust the tempo, and let luminous curves weave themselves into a garden of light.</p>

      <div class="controls" role="group" aria-label="Controls">
        <div class="seg-group" role="tablist" aria-label="Theme">
          <button class="seg active" role="tab" aria-selected="true" data-theme="bloom">Bloom</button>
          <button class="seg" role="tab" aria-selected="false" data-theme="dusk">Dusk</button>
          <button class="seg" role="tab" aria-selected="false" data-theme="noir">Noir</button>
        </div>

        <div class="knob" title="Tempo">
          Tempo
          <input class="range" type="range" min="40" max="200" value="100" aria-label="Tempo">
        </div>

        <button class="btn" type="button" data-action="shuffle"><span class="pip" aria-hidden="true"></span> Shuffle</button>
        <button class="btn soft" type="button" data-action="trails">Trails</button>
        <button class="btn soft" type="button" data-action="clear">Clear</button>
      </div>

      <div class="notes" aria-hidden="true">
        <div class="note"><h3>Strokes</h3><p class="stroke-count">4 active</p></div>
        <div class="note"><h3>Tempo</h3><p class="tempo-val">1.00×</p></div>
        <div class="note"><h3>Mode</h3><p class="mode-val">Clean</p></div>
      </div>
    </div>

    <div class="right">
      <div class="stage" role="application" aria-label="Generative canvas" tabindex="0">
        <canvas class="canvas" aria-hidden="true"></canvas>
        <div class="bokeh" aria-hidden="true">
          <span class="dot" style="--x:10%; --y:20%; --s:140px; --t:18s;"></span>
          <span class="dot" style="--x:70%; --y:10%; --s:120px; --t:16s;"></span>
          <span class="dot" style="--x:30%; --y:70%; --s:160px; --t:20s;"></span>
          <span class="dot" style="--x:80%; --y:60%; --s:100px; --t:14s;"></span>
          <span class="dot" style="--x:45%; --y:35%; --s:180px; --t:22s;"></span>
          <span class="dot" style="--x:15%; --y:80%; --s:110px; --t:15s;"></span>
        </div>
      </div>
    </div>
  </div>

  <div class="foot">
    <span class="stamp"><span class="ping" aria-hidden="true"></span><span id="last-updated">Last updated: 2025-11-18 01:27:20 EST</span></span>
    <span class="stamp"><span class="ping" aria-hidden="true"></span><span class="now">Local time — --:--:--</span></span>
  </div>

  <script>
    (function () {
      const root = document.querySelector('.vibe712');
      const stage = root.querySelector('.stage');
      const canvas = root.querySelector('.canvas');
      const ctx = canvas.getContext('2d', { alpha: true });
      const segs = root.querySelectorAll('.seg');
      const range = root.querySelector('.range');
      const shuffleBtn = root.querySelector('[data-action="shuffle"]');
      const trailsBtn = root.querySelector('[data-action="trails"]');
      const clearBtn = root.querySelector('[data-action="clear"]');
      const strokeCountEl = root.querySelector('.stroke-count');
      const tempoEl = root.querySelector('.tempo-val');
      const modeEl = root.querySelector('.mode-val');
      const updated = root.querySelector('#last-updated');
      const nowEl = root.querySelector('.now');

      const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      const palettes = {
        bloom: ['#ff7a7a', '#ffd27b', '#9cffd0', '#6ee7f9', '#9b8cff'],
        dusk:  ['#ff9a8b', '#fbc2eb', '#a18cd1', '#9bd3ff', '#ffe29f'],
        noir:  ['#c3f0ff', '#ffffff', '#a9b0ff', '#90f3ff', '#ffe29f']
      };

      let activeTheme = root.dataset.theme || 'bloom';
      let palette = palettes[activeTheme].slice();
      let speed = 1.0;
      let trails = false;
      let curves = [];
      let w = 0, h = 0, dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
      let animId = 0;
      let tBase = 0;

      function setTheme(theme) {
        activeTheme = theme;
        root.dataset.theme = theme;
        segs.forEach(b => {
          const on = b.dataset.theme === theme;
          b.classList.toggle('active', on);
          b.setAttribute('aria-selected', on ? 'true' : 'false');
        });
        palette = palettes[theme].slice();
        // Quick backdrop refresh by clearing
        clearCanvas(true);
      }
      segs.forEach(b => b.addEventListener('click', () => setTheme(b.dataset.theme)));
      try {
        const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
        if (!root.dataset.theme) setTheme(prefersDark ? 'dusk' : 'bloom'); else setTheme(root.dataset.theme);
      } catch { setTheme(root.dataset.theme || 'bloom'); }

      function onTempo() {
        const v = Number(range.value); // 40..200
        speed = v / 100;
        root.style.setProperty('--speed', speed.toFixed(2));
        if (tempoEl) tempoEl.textContent = speed.toFixed(2) + '×';
      }
      range.addEventListener('input', onTempo);
      onTempo();

      function resize() {
        const r = stage.getBoundingClientRect();
        w = Math.max(1, Math.floor(r.width));
        h = Math.max(1, Math.floor(r.height));
        const cw = Math.floor(w * dpr), ch = Math.floor(h * dpr);
        canvas.width = cw; canvas.height = ch;
        canvas.style.width = w + 'px'; canvas.style.height = h + 'px';
        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
        clearCanvas(true);
      }
      window.addEventListener('resize', resize, { passive: true });
      resize();

      function rand(min, max) { return Math.random() * (max - min) + min; }
      function pick(arr) { return arr[Math.floor(Math.random() * arr.length)]; }

      function makeCurves(n = 4) {
        curves = [];
        for (let i = 0; i < n; i++) {
          const fx = Math.floor(rand(1, 7));
          const fy = Math.floor(rand(1, 7));
          const phase = rand(0, Math.PI * 2);
          const thickness = rand(0.6, 2.6);
          const hue = pick(palette);
          curves.push({ fx, fy, phase, thickness, hue, wobble: rand(0.2, 1.0) });
        }
        if (strokeCountEl) strokeCountEl.textContent = `${curves.length} active`;
      }

      function shuffle() {
        makeCurves(Math.floor(rand(3, 7)));
        clearCanvas(true);
      }

      function clearCanvas(hard = false) {
        if (hard) {
          ctx.clearRect(0, 0, w, h);
          // Lay down a subtle veil when trails are enabled to make additive glow bloom
          if (trails) {
            ctx.fillStyle = 'rgba(0,0,0,0.15)';
            ctx.fillRect(0, 0, w, h);
          }
        } else {
          ctx.clearRect(0, 0, w, h);
        }
      }

      function draw(ts) {
        if (!tBase) tBase = ts;
        const t = (ts - tBase) / 1000;

        if (trails) {
          ctx.save();
          ctx.globalCompositeOperation = 'source-over';
          ctx.fillStyle = 'rgba(0, 0, 0, 0.06)';
          ctx.fillRect(0, 0, w, h);
          ctx.restore();
        } else {
          ctx.clearRect(0, 0, w, h);
        }

        ctx.save();
        ctx.globalCompositeOperation = 'lighter';

        const cx = w / 2, cy = h / 2;
        const r = Math.min(w, h) * 0.34;
        const steps = 420;

        for (let i = 0; i < curves.length; i++) {
          const c = curves[i];
          const pulse = 1 + Math.sin((t * 0.8 * speed + c.phase) * c.wobble) * 0.06;
          const rx = r * pulse;
          const ry = r * (0.86 + Math.sin(t * 0.6 * speed + i) * 0.08);

          ctx.beginPath();
          for (let s = 0; s <= steps; s++) {
            const p = (s / steps) * Math.PI * 2;
            const x = cx + rx * Math.sin(c.fx * p + c.phase + t * 0.8 * speed);
            const y = cy + ry * Math.sin(c.fy * p + t * 1.0 * speed);
            if (s === 0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
          }
          const alpha = trails ? 0.08 : 0.22;
          ctx.strokeStyle = hexToRgba(c.hue, alpha);
          ctx.lineWidth = c.thickness + (trails ? 0.4 : 0);
          ctx.stroke();
        }

        ctx.restore();
        animId = requestAnimationFrame(draw);
      }

      function hexToRgba(hex, a) {
        const h = hex.replace('#', '');
        const bigint = parseInt(h.length === 3 ? h.split('').map(x => x + x).join('') : h, 16);
        const r = (bigint >> 16) & 255;
        const g = (bigint >> 8) & 255;
        const b = bigint & 255;
        return `rgba(${r}, ${g}, ${b}, ${a})`;
      }

      shuffleBtn.addEventListener('click', shuffle);
      trailsBtn.addEventListener('click', () => {
        trails = !trails;
        root.classList.toggle('trails', trails);
        if (modeEl) modeEl.textContent = trails ? 'Trails' : 'Clean';
        clearCanvas(true);
      });
      clearBtn.addEventListener('click', () => {
        clearCanvas(true);
      });

      // Pointer tilt and color-focus
      function onMove(e) {
        const r = stage.getBoundingClientRect();
        const cx = (e.clientX ?? (e.touches && e.touches[0].clientX)) - r.left;
        const cy = (e.clientY ?? (e.touches && e.touches[0].clientY)) - r.top;
        const nx = Math.max(0, Math.min(r.width, cx)) / r.width;
        const ny = Math.max(0, Math.min(r.height, cy)) / r.height;
        root.style.setProperty('--tiltX', ((nx - 0.5) * 18).toFixed(2) + 'deg');
        root.style.setProperty('--tiltY', ((0.5 - ny) * 18).toFixed(2) + 'deg');
        root.style.setProperty('--shiftX', ((nx - 0.5) * 24).toFixed(2) + 'px');
        root.style.setProperty('--shiftY', ((ny - 0.5) * 24).toFixed(2) + 'px');
      }
      stage.addEventListener('pointermove', onMove, { passive: true });
      stage.addEventListener('touchmove', onMove, { passive: true });

      // Keyboard: shuffle on Enter/Space
      stage.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); shuffle(); }
      });

      // Start
      makeCurves(4);
      if (!reduce) {
        animId = requestAnimationFrame(draw);
      } else {
        // Static render for reduced motion
        clearCanvas(true);
        for (let i = 0; i < 6; i++) shuffle();
        clearCanvas(true);
        draw(0);
        cancelAnimationFrame(animId);
      }

      // Time + updated stamp
      function tick(){
        const now = new Date();
        const hh = now.getHours().toString().padStart(2,'0');
        const mm = now.getMinutes().toString().padStart(2,'0');
        const ss = now.getSeconds().toString().padStart(2,'0');
        if (nowEl) nowEl.textContent = `Local time — ${hh}:${mm}:${ss}`;
      }
      setInterval(tick, 1000); tick();
      try {
        const fmt = new Intl.DateTimeFormat(undefined, {
          year:'numeric', month:'short', day:'2-digit',
          hour:'2-digit', minute:'2-digit', second:'2-digit',
          hour12:false, timeZoneName:'short'
        }).format(new Date());
        updated.textContent = 'Last updated: ' + fmt;
      } catch {
        updated.textContent = 'Last updated: ' + new Date().toLocaleString();
      }

      // Cleanup on unload
      window.addEventListener('beforeunload', () => cancelAnimationFrame(animId));
    })();
  </script>
</section>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


