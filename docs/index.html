<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<div id="vibe986" data-theme="nebula" role="region" aria-label="Woven Light — generative ribbon field">
  <style>
    /* Tokens */
    #vibe986{
      --bg0:#090d15; --bg1:#0f1726;
      --ink:#e9f3ff;
      --muted: color-mix(in oklab, var(--ink) 70%, transparent);
      --p1:#7af5ff; --p2:#8e7bff; --p3:#ff79c6; --p4:#21ffc6;
      --edge: rgba(255,255,255,0.10);
      --glass: rgba(255,255,255,0.06);
      --mx:.5; --my:.5;
      --spd:1.00;
      --grain: 0.035;
      position:relative;
      isolation:isolate;
      border-radius: 28px;
      min-height: 640px;
      padding: clamp(18px, 3.4vw, 28px);
      color: var(--ink);
      font-family: ui-sans-serif, -apple-system, Inter, "SF Pro", Segoe UI, Roboto, "Noto Sans", Arial, sans-serif;
      background:
        radial-gradient(1200px 900px at calc(var(--mx)*100%) calc(var(--my)*100%),
          color-mix(in oklab, var(--p2) 16%, transparent), transparent 64%),
        radial-gradient(900px 700px at calc(100% - var(--mx)*100%) calc(100% - var(--my)*100%),
          color-mix(in oklab, var(--p4) 12%, transparent), transparent 66%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      box-shadow:
        0 1px 0 rgba(255,255,255,0.06) inset,
        0 0 0 1px var(--edge) inset,
        0 30px 90px rgba(2,6,12,0.45);
      overflow:hidden;
    }

    /* Palettes */
    #vibe986[data-theme="nebula"]{ --bg0:#091321; --bg1:#0e1c2f; --p1:#7af5ff; --p2:#8e7bff; --p3:#ff79c6; --p4:#21ffc6; }
    #vibe986[data-theme="pearl"] { --bg0:#151415; --bg1:#1d1b1a; --p1:#ffe4b3; --p2:#ffc9de; --p3:#a1fff1; --p4:#ffd97a; --ink:#f7f5f2; }
    #vibe986[data-theme="flora"] { --bg0:#08130e; --bg1:#0f2118; --p1:#b6ff9b; --p2:#5affc3; --p3:#9ad1ff; --p4:#7bf2b6; }
    #vibe986[data-theme="noir"]  { --bg0:#0a0a0b; --bg1:#131417; --p1:#ffffff; --p2:#dcdcdc; --p3:#bdbdbd; --p4:#9a9a9a; }

    /* Ambient halo + grain */
    #vibe986 .halo{
      position:absolute; inset:-20%;
      pointer-events:none; z-index:0;
      background:
        radial-gradient(40% 40% at calc(var(--mx)*100%) calc(var(--my)*100%),
          color-mix(in oklab, var(--p1) 14%, transparent), transparent 60%),
        radial-gradient(28% 28% at calc(100% - var(--mx)*100%) calc(100% - var(--my)*100%),
          color-mix(in oklab, var(--p3) 10%, transparent), transparent 62%);
      filter: blur(70px) saturate(120%);
      mix-blend-mode: screen;
      animation: v986-drift 26s linear infinite;
    }
    @keyframes v986-drift { to{ transform: rotate(360deg);} }
    #vibe986 .grain{
      position:absolute; inset:0; pointer-events:none; z-index:0;
      background-image: url("data:image/svg+xml,%3Csvg width='100' height='100' viewBox='0 0 100 100' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100' height='100' filter='url(%23n)' opacity='0.06'/%3E%3C/svg%3E");
      opacity: calc(var(--grain));
      mix-blend-mode: overlay;
    }

    /* Shell */
    #vibe986 .shell{
      position:relative; z-index:2;
      max-width: 1180px; margin:8px auto;
      padding: clamp(16px, 2.6vw, 28px);
      border-radius: 22px;
      background: linear-gradient(180deg, color-mix(in oklab, var(--glass) 70%, transparent), color-mix(in oklab, var(--glass) 30%, transparent));
      border: 1px solid var(--edge);
      backdrop-filter: blur(14px) saturate(120%);
      box-shadow: 0 16px 60px rgba(0,0,0,0.3);
      display:grid; grid-template-columns: 1.15fr 1fr; gap: clamp(12px, 2.2vw, 24px);
    }
    #vibe986 .top{ grid-column:1/-1; display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;}
    #vibe986 .brand{ display:flex; align-items:center; gap:12px; color:var(--muted); font-size:12px; letter-spacing:.18em; text-transform:uppercase; font-weight:900; }
    #vibe986 .brand .sig{
      width:12px; height:12px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #fff, var(--p1));
      box-shadow:0 0 14px color-mix(in oklab, var(--p1) 70%, transparent);
      flex:none;
    }

    #vibe986 .stage{ grid-column:1/2; position:relative; min-height: 420px; display:grid; place-items:center; }
    #vibe986 .loom{
      width: min(92%, 720px); height: min(62vh, 520px);
      border-radius: 18px;
      border: 1px solid var(--edge);
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      box-shadow: 0 24px 80px rgba(0,0,0,0.45), 0 1px 0 rgba(255,255,255,0.06) inset;
      overflow:hidden;
    }
    #vibe986 .stage .hint{
      position:absolute; bottom:10px; left:14px;
      padding:6px 10px; font-size:12px; color:var(--muted);
      background: rgba(0,0,0,0.18); border: 1px solid var(--edge); border-radius:10px; backdrop-filter: blur(4px);
    }

    /* Typo */
    #vibe986 h1{
      margin: 8px 0 6px;
      font-weight: 900; letter-spacing: -0.02em; line-height:.9;
      font-size: clamp(44px, 8.6vw, 108px);
      color: transparent;
      background: linear-gradient(90deg, var(--p1), var(--p2), var(--p3));
      -webkit-background-clip: text; background-clip: text;
      transform: translate(calc((var(--mx)-.5)*8px), calc((var(--my)-.5)*-6px));
      transition: transform 120ms ease;
    }
    #vibe986 .lede{
      color:var(--muted);
      font-size: clamp(14px, 1.9vw, 18px);
      line-height:1.7; text-wrap: balance; max-width: 60ch;
      margin: 6px 0 14px;
    }
    #vibe986 blockquote{
      margin:12px 0 0; padding-left:14px; border-left:2px solid var(--edge);
      color:var(--muted);
    }

    /* Controls */
    #vibe986 .controls{ display:flex; align-items:center; gap:10px; flex-wrap:wrap; }
    #vibe986 button, #vibe986 .toggle, #vibe986 .slider{
      appearance:none; border:1px solid var(--edge);
      background: linear-gradient(180deg, rgba(255,255,255,0.09), rgba(255,255,255,0.03));
      color:var(--ink); border-radius: 12px; padding:8px 12px; font-weight:800; cursor:pointer;
      box-shadow:0 2px 0 rgba(0,0,0,0.08);
      transition: transform 140ms ease, box-shadow 200ms ease, background 240ms ease;
    }
    #vibe986 button:hover{ transform: translateY(-1px); box-shadow:0 10px 22px rgba(2,6,12,0.35); }
    #vibe986 .toggle{ display:inline-flex; align-items:center; gap:10px; color:var(--muted); user-select:none; }
    #vibe986 .toggle input{ appearance:none; width:38px; height:22px; border-radius:999px; background: rgba(255,255,255,0.14); position:relative; }
    #vibe986 .toggle input::after{
      content:""; position:absolute; top:3px; left:3px; width:16px; height:16px; border-radius:50%; background:#fff; box-shadow:0 2px 6px rgba(0,0,0,0.25);
      transition: transform 180ms ease;
    }
    #vibe986 .toggle input:checked{ background: linear-gradient(90deg, var(--p1), var(--p2)); }
    #vibe986 .toggle input:checked::after{ transform: translateX(16px); }

    #vibe986 .slider{ display:inline-flex; align-items:center; gap:10px; color:var(--muted); }
    #vibe986 .slider input[type="range"]{ width:160px; height:18px; background:transparent; -webkit-appearance:none; }
    #vibe986 .slider input[type="range"]::-webkit-slider-runnable-track{
      height:6px; border-radius:999px; background: linear-gradient(90deg, var(--p1), var(--p2)); opacity:.75;
    }
    #vibe986 .slider input[type="range"]::-webkit-slider-thumb{
      -webkit-appearance:none; width:18px; height:18px; border-radius:50%; background:#fff; border:1px solid var(--edge); margin-top:-6px;
      box-shadow:0 2px 6px rgba(0,0,0,0.25);
    }
    #vibe986 .slider input[type="range"]::-moz-range-track{
      height:6px; border-radius:999px; background: linear-gradient(90deg, var(--p1), var(--p2)); opacity:.75;
    }
    #vibe986 .slider input[type="range"]::-moz-range-thumb{
      width:18px; height:18px; border-radius:50%; background:#fff; border:1px solid var(--edge); box-shadow:0 2px 6px rgba(0,0,0,0.25);
    }

    /* Meta */
    #vibe986 .meta{
      grid-column:1/-1; display:flex; align-items:center; justify-content:space-between; gap:10px;
      color:var(--muted); font-size:12px; margin-top:8px;
    }

    /* Small screens */
    @media (max-width: 980px){
      #vibe986 .shell{ grid-template-columns: 1fr; }
      #vibe986 .stage{ order:2; }
      #vibe986 .copy{ order:1; }
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      #vibe986 .halo{ animation: none !important; }
    }
  </style>

  <div class="halo" aria-hidden="true"></div>
  <div class="grain" aria-hidden="true"></div>

  <section class="shell" tabindex="0">
    <div class="top">
      <div class="brand">
        <span class="sig" aria-hidden="true"></span>
        <span>Edition 986 • Woven Light</span>
      </div>
      <div class="controls">
        <button id="palette" title="Cycle palette (P)">Palette</button>
        <label class="toggle" title="Glow (G)">
          Glow
          <input type="checkbox" id="glow" checked>
        </label>
        <label class="toggle" title="Warp field (W)">
          Warp
          <input type="checkbox" id="warp" checked>
        </label>
        <label class="slider" title="Flow speed (+ / -)">
          Flow
          <input type="range" id="flow" min="0.2" max="2.0" step="0.01" value="1.00">
        </label>
        <label class="slider" title="Density ([ / ])">
          Density
          <input type="range" id="density" min="60" max="260" step="1" value="160">
        </label>
      </div>
    </div>

    <div class="stage" role="img" aria-label="Silken light ribbons flowing in a responsive field.">
      <canvas class="loom" aria-hidden="true"></canvas>
      <div class="hint">Move your pointer. Press P to change palette.</div>
    </div>

    <div class="copy">
      <h1>Weave the air.</h1>
      <p class="lede">A field of light-threads listens to your movement and drifts with time. Ribbons braid and unbraid—calm, curious, alive.</p>
      <blockquote>“Simplicity is complexity resolved.” — Brâncuși</blockquote>
    </div>

    <div class="meta">
      <span id="last-updated">Last updated: 2025-11-30 17:17:04 EST</span>
      <span class="keys">Shortcuts: P palette • G glow • W warp • +/- flow • [ ] density • Move pointer</span>
    </div>
  </section>

  <script>
    (function(){
      const root = document.getElementById('vibe986');
      const canvas = root.querySelector('.loom');
      const paletteBtn = root.querySelector('#palette');
      const glowToggle = root.querySelector('#glow');
      const warpToggle = root.querySelector('#warp');
      const flow = root.querySelector('#flow');
      const density = root.querySelector('#density');
      const last = root.querySelector('#last-updated');
      const shell = root.querySelector('.shell');

      // Timestamp
      try{
        const d = new Date();
        const fmt = new Intl.DateTimeFormat([], { year:'numeric', month:'short', day:'2-digit', hour:'2-digit', minute:'2-digit' });
        last.textContent = 'Last updated: ' + fmt.format(d);
      }catch{
        last.textContent = 'Last updated: just now';
      }

      // Themes
      const themes = ['nebula','pearl','flora','noir'];
      function cycleTheme(){
        const cur = root.getAttribute('data-theme') || themes[0];
        const i = themes.indexOf(cur);
        const next = themes[(i+1) % themes.length];
        root.setAttribute('data-theme', next);
        refreshColors();
      }
      paletteBtn.addEventListener('click', cycleTheme);

      // Canvas setup
      let ctx, DPR=1, W=0, H=0, RAF=null, REDUCE=false;
      let PARTICLES=[], MAX=Number(density.value)||160;
      let SPEED=Number(flow.value)||1.0;
      let glow=true, warp=true;
      let t0=performance.now(), mx=.5, my=.5, tx=.5, ty=.5, rect;

      function updateRect(){ rect = root.getBoundingClientRect(); }
      updateRect(); addEventListener('resize', updateRect, {passive:true});

      function size(){
        DPR = Math.max(1, Math.min(3, window.devicePixelRatio || 1));
        const w = canvas.clientWidth;
        const h = canvas.clientHeight;
        canvas.width = Math.floor(w * DPR);
        canvas.height = Math.floor(h * DPR);
        W = canvas.width; H = canvas.height;
        ctx = canvas.getContext('2d');
        ctx.setTransform(DPR,0,0,DPR,0,0);
        clearCanvas(true);
      }

      function clearCanvas(hard){
        ctx.save();
        ctx.globalCompositeOperation = 'source-over';
        ctx.globalAlpha = hard ? 1 : 0.12;
        ctx.fillStyle = 'rgba(0,0,0,0.35)';
        ctx.fillRect(0,0,canvas.clientWidth,canvas.clientHeight);
        ctx.restore();
      }

      function colors(){
        const cs = getComputedStyle(root);
        return [cs.getPropertyValue('--p1').trim(), cs.getPropertyValue('--p2').trim(), cs.getPropertyValue('--p3').trim(), cs.getPropertyValue('--p4').trim()];
      }
      let PALETTE = colors();
      function refreshColors(){ PALETTE = colors(); }

      function seed(n){
        PARTICLES.length = 0;
        for(let i=0;i<n;i++){
          const x = Math.random()*canvas.clientWidth;
          const y = Math.random()*canvas.clientHeight;
          const c = PALETTE[i % PALETTE.length] || '#fff';
          PARTICLES.push({x,y,px:x,py:y,h:Math.random()*6.283, c});
        }
        clearCanvas(true);
      }

      function field(x,y,t){
        const nx = x / canvas.clientWidth - 0.5;
        const ny = y / canvas.clientHeight - 0.5;
        // Pointer influence
        const cx = tx - 0.5, cy = ty - 0.5;
        const r2 = Math.max(0.0001, (nx-cx)**2 + (ny-cy)**2);
        const pull = 0.12 / r2;
        // Flow waves
        const k1 = 1.8, k2 = 1.3;
        const a = Math.sin((nx*3 + t*0.4)*k1) + Math.cos((ny*3 - t*0.5)*k2);
        const b = Math.cos((nx*2.2 - ny*1.7) + t*0.3);
        // Warp swirl
        const w = warp ? Math.atan2(ny-cy, nx-cx) : 0;
        return a*0.9 + b*0.6 + w*0.35 + pull*0.02;
      }

      function step(now){
        const dt = (now - (t0||now)) / 1000; t0 = now;
        // pointer easing
        const ease = 0.12;
        mx += (tx - mx) * ease;
        my += (ty - my) * ease;
        root.style.setProperty('--mx', mx.toFixed(4));
        root.style.setProperty('--my', my.toFixed(4));

        // fade
        if(!REDUCE) clearCanvas(false);

        // draw particles
        ctx.save();
        ctx.globalCompositeOperation = glow ? 'lighter' : 'source-over';
        ctx.lineCap = 'round';
        for(let i=0;i<PARTICLES.length;i++){
          const p = PARTICLES[i];
          const ang = field(p.x, p.y, now*0.001);
          const v = SPEED * (REDUCE ? 0.3 : 1.0);
          const vx = Math.cos(ang)*v;
          const vy = Math.sin(ang)*v;

          p.px = p.x; p.py = p.y;
          p.x += vx * 1.6; p.y += vy * 1.6;

          // wrap
          const cw = canvas.clientWidth, ch = canvas.clientHeight;
          if(p.x < -2) { p.x = cw+2; p.px = p.x; }
          if(p.x > cw+2){ p.x = -2; p.px = p.x; }
          if(p.y < -2) { p.y = ch+2; p.py = p.y; }
          if(p.y > ch+2){ p.y = -2; p.py = p.y; }

          ctx.strokeStyle = p.c;
          ctx.globalAlpha = glow ? 0.15 : 0.55;
          ctx.lineWidth = glow ? 1.1 : 0.8;
          if(glow){
            ctx.shadowColor = p.c;
            ctx.shadowBlur = 8;
          }else{
            ctx.shadowBlur = 0;
          }
          ctx.beginPath();
          ctx.moveTo(p.px, p.py);
          ctx.lineTo(p.x, p.y);
          ctx.stroke();
        }
        ctx.restore();

        RAF = requestAnimationFrame(step);
      }

      // Interactions
      function onPointer(e){
        tx = Math.max(0, Math.min(1, (e.clientX - rect.left)/rect.width));
        ty = Math.max(0, Math.min(1, (e.clientY - rect.top)/rect.height));
      }
      root.addEventListener('pointermove', onPointer);
      root.addEventListener('pointerleave', ()=>{ tx=.5; ty=.5; });

      // Toggles & sliders
      function setSpeed(v){
        SPEED = Math.max(0.2, Math.min(2.0, Number(v)||1));
        root.style.setProperty('--spd', SPEED.toFixed(2));
      }
      glowToggle.addEventListener('change', e=> glow = e.target.checked);
      warpToggle.addEventListener('change', e=> warp = e.target.checked);
      flow.addEventListener('input', e=> setSpeed(e.target.value));
      density.addEventListener('change', e=>{
        MAX = Math.round(Math.max(60, Math.min(260, Number(e.target.value)||160)));
        seed(MAX);
      });

      // Keyboard
      shell.addEventListener('keydown', (e)=>{
        const k = e.key.toLowerCase();
        if(k==='p'){ e.preventDefault(); cycleTheme(); }
        if(k==='g'){ e.preventDefault(); glowToggle.checked = !glowToggle.checked; glow = glowToggle.checked; }
        if(k==='w'){ e.preventDefault(); warpToggle.checked = !warpToggle.checked; warp = warpToggle.checked; }
        if(k==='+' || k==='='){ e.preventDefault(); flow.value = Math.min(2.0, Number(flow.value)+0.05).toFixed(2); setSpeed(flow.value); }
        if(k==='-' || k==='_'){ e.preventDefault(); flow.value = Math.max(0.2, Number(flow.value)-0.05).toFixed(2); setSpeed(flow.value); }
        if(k==='['){ e.preventDefault(); density.value = Math.max(60, Number(density.value)-10); density.dispatchEvent(new Event('change')); }
        if(k===']'){ e.preventDefault(); density.value = Math.min(260, Number(density.value)+10); density.dispatchEvent(new Event('change')); }
        if(['arrowup','arrowdown','arrowleft','arrowright'].includes(k)){
          e.preventDefault();
          if(k==='arrowup') ty -= .03;
          if(k==='arrowdown') ty += .03;
          if(k==='arrowleft') tx -= .03;
          if(k==='arrowright') tx += .03;
          tx = Math.max(0, Math.min(1, tx));
          ty = Math.max(0, Math.min(1, ty));
        }
      });

      // Reduced motion
      try{
        REDUCE = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      }catch{}
      if(REDUCE){
        warpToggle.checked = false; warp = false;
        glowToggle.checked = false; glow = false;
      }

      // Init
      size();
      refreshColors();
      seed(MAX);
      setSpeed(SPEED);
      addEventListener('resize', ()=>{ size(); seed(MAX); }, {passive:true});
      if(RAF) cancelAnimationFrame(RAF);
      RAF = requestAnimationFrame(step);
    })();
  </script>
</div>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


