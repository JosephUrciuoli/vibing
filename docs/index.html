<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<section id="vibe2161" aria-label="Nocturne Observatory">
  <style>
    /* Nocturne Observatory — scoped styles */
    #vibe2161 {
      --bg1: #0b1020;
      --bg2: #121a33;
      --ink: #e6f0ff;
      --muted: #8ca0c0;

      --c1: #7aa8ff; /* ion blue */
      --c2: #9a7dff; /* heliotrope */
      --c3: #73ffd5; /* mint aurora */
      --glow: #88c6ff;

      --ring-thick: 8px;
      --blur: 10px;

      --rx: 0deg;
      --ry: 0deg;

      position: relative;
      display: grid;
      place-items: center;
      isolation: isolate;
      min-height: 720px;
      padding: clamp(18px, 5vw, 52px);
      border-radius: 34px;
      color: var(--ink);
      overflow: hidden;
      background:
        radial-gradient(1200px 700px at var(--mx, 50%) var(--my, 30%), rgba(255,255,255,0.06), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      box-shadow: 0 60px 140px rgba(0, 0, 0, 0.55), inset 0 0 0 1px rgba(255,255,255,0.04);
    }

    /* Star shimmer film */
    #vibe2161::before {
      content: "";
      position: absolute;
      inset: -10%;
      pointer-events: none;
      background:
        radial-gradient(1000px 400px at 15% 0%, rgba(255,255,255,0.05), transparent 60%),
        radial-gradient(1200px 800px at 85% 120%, rgba(255,255,255,0.06), transparent 65%),
        repeating-linear-gradient(145deg, rgba(255,255,255,0.022), rgba(255,255,255,0.022) 2px, transparent 2px, transparent 4px);
      mix-blend-mode: soft-light;
      z-index: 0;
    }

    /* Canvas sky layer */
    #vibe2161 .sky {
      position: absolute;
      inset: 0;
      z-index: 0;
      display: block;
    }

    /* Layout */
    #vibe2161 .stack {
      position: relative;
      z-index: 2;
      display: grid;
      gap: clamp(16px, 3vw, 28px);
      width: min(1120px, 100%);
      place-items: center;
      text-align: center;
    }

    #vibe2161 .badge {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.14);
      color: var(--muted);
      font: 700 11px/1 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      background:
        linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
      box-shadow: 0 14px 30px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.18);
      backdrop-filter: blur(10px) saturate(120%);
      -webkit-backdrop-filter: blur(10px) saturate(120%);
    }
    #vibe2161 .pip {
      width: 10px; height: 10px; border-radius: 50%;
      background:
        radial-gradient(circle at 40% 40%, #fff 20%, var(--glow) 70%, transparent 72%);
      box-shadow: 0 0 0 4px rgba(136,198,255,0.2), 0 0 16px var(--glow);
    }

    #vibe2161 .title {
      margin: 0;
      font: 900 clamp(36px, 9vw, 86px)/0.92 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      letter-spacing: -0.02em;
      background: linear-gradient(180deg, #f8fbff, #a8b8ff 45%, #dffcf1);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      filter: drop-shadow(0 28px 60px rgba(0, 0, 0, 0.45));
      text-shadow: 0 0 30px color-mix(in oklab, var(--c1), transparent 70%);
    }

    #vibe2161 .lead {
      margin: 0;
      color: var(--muted);
      max-width: 64ch;
      font: 400 clamp(15px, 2.2vw, 20px)/1.9 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }

    /* Orrery */
    #vibe2161 .orrery {
      position: relative;
      width: min(820px, 94vw);
      aspect-ratio: 1;
      transform-style: preserve-3d;
      transform: rotateX(var(--rx)) rotateY(var(--ry));
      transition: transform 220ms ease, filter 240ms ease;
      filter: drop-shadow(0 28px 90px rgba(0, 0, 0, 0.55));
    }

    /* Energy halo */
    #vibe2161 .aurora {
      position: absolute;
      inset: 10%;
      border-radius: 50%;
      background:
        conic-gradient(from 0deg, color-mix(in oklab, var(--c1), transparent 55%), color-mix(in oklab, var(--c2), transparent 55%), color-mix(in oklab, var(--c3), transparent 55%), color-mix(in oklab, var(--c1), transparent 55%));
      filter: blur(36px) saturate(130%);
      opacity: 0.6;
      animation: slowSwirl 46s linear infinite;
    }
    @keyframes slowSwirl { to { transform: rotate(360deg); } }

    /* Rings (masked) */
    #vibe2161 .orbit {
      position: absolute;
      border-radius: 50%;
      inset: var(--inset, 0%);
      background:
        conic-gradient(from var(--offset, 0deg),
          color-mix(in oklab, var(--c1), transparent 60%) 0 18%,
          transparent 18% 58%,
          color-mix(in oklab, var(--c2), transparent 60%) 58% 72%,
          transparent 72% 100%);
      animation: spin var(--speed, 28s) linear infinite;
      -webkit-mask:
        radial-gradient(farthest-side, transparent calc(100% - var(--ring-thick)), #000 calc(100% - var(--ring-thick)));
              mask:
        radial-gradient(farthest-side, transparent calc(100% - var(--ring-thick)), #000 calc(100% - var(--ring-thick)));
      box-shadow:
        0 0 0 1px rgba(255,255,255,0.04) inset,
        0 16px 50px rgba(10, 40, 80, 0.25);
    }
    @keyframes spin { to { transform: rotate(360deg); } }

    /* Central star */
    #vibe2161 .star {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      pointer-events: none;
    }
    #vibe2161 .core {
      width: 17%;
      aspect-ratio: 1;
      border-radius: 50%;
      background:
        radial-gradient(circle at 35% 30%, #fff, color-mix(in oklab, var(--c3), white 15%) 40%, rgba(255,255,255,0) 70%);
      box-shadow:
        0 0 0 1px rgba(200,255,230,0.35),
        inset 0 0 40px rgba(255,255,255,0.8),
        0 30px 120px color-mix(in oklab, var(--c3), black 70%);
      animation: thrum 8s ease-in-out infinite;
    }
    @keyframes thrum { 0%,100%{ transform: scale(1) } 50%{ transform: scale(1.05) } }

    /* Orbiting bodies */
    #vibe2161 .track {
      position: absolute;
      inset: 0;
      animation: spin var(--speed, 24s) linear infinite;
    }
    #vibe2161 .planet {
      position: absolute;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%) translateX(var(--r, 42%));
      width: var(--size, 28px);
      aspect-ratio: 1;
      border-radius: 50%;
      background:
        radial-gradient(circle at 35% 30%, #fff, var(--tone) 40%, rgba(255,255,255,0) 70%);
      box-shadow:
        0 0 0 1px color-mix(in oklab, var(--tone), black 30%),
        0 18px 60px color-mix(in oklab, var(--tone), black 70%);
      filter: saturate(125%);
    }
    #vibe2161 .planet.small { width: var(--size, 18px); }
    #vibe2161 .planet.tiny { width: var(--size, 12px); }

    /* Controls */
    #vibe2161 .controls {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      justify-content: center;
    }
    #vibe2161 .btn {
      appearance: none;
      cursor: pointer;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.16);
      padding: 12px 16px;
      color: var(--ink);
      background:
        linear-gradient(180deg, rgba(255,255,255,0.12), rgba(255,255,255,0.06)) padding-box,
        linear-gradient(180deg, rgba(255,255,255,0.32), rgba(255,255,255,0.08)) border-box;
      font: 700 12px/1 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      letter-spacing: .04em;
      transition: transform 160ms ease, filter 200ms ease, box-shadow 220ms ease, background 160ms ease;
      box-shadow: 0 14px 32px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.22);
      backdrop-filter: blur(6px) saturate(120%);
      -webkit-backdrop-filter: blur(6px) saturate(120%);
    }
    #vibe2161 .btn:hover { transform: translateY(-1px); filter: saturate(110%); }
    #vibe2161 .btn:active { transform: translateY(0); }
    #vibe2161 .btn.alt { border-color: rgba(255,255,255,0.22); }

    /* Meta */
    #vibe2161 .meta {
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      gap: 12px;
      width: min(860px, 100%);
      color: var(--muted);
      font: 400 12px/1.6 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    @media (max-width: 720px) {
      #vibe2161 .meta { grid-template-columns: 1fr; justify-items: center; text-align: center; }
    }
    #vibe2161 .meta .hint { opacity: 0.9; }

    /* Pause state */
    #vibe2161[data-paused="true"] .aurora,
    #vibe2161[data-paused="true"] .core,
    #vibe2161[data-paused="true"] .track,
    #vibe2161[data-paused="true"] .orbit { animation-play-state: paused; }

    /* Motion sensitivity */
    @media (prefers-reduced-motion: reduce) {
      #vibe2161 .aurora,
      #vibe2161 .core,
      #vibe2161 .track,
      #vibe2161 .orbit { animation: none !important; }
    }

    /* Focus visibility */
    #vibe2161 .btn:focus-visible {
      outline: 2px solid color-mix(in oklab, var(--c2), white 10%);
      outline-offset: 2px;
    }
  </style>

  <canvas class="sky" aria-hidden="true"></canvas>

  <div class="stack" role="region" aria-live="polite">
    <div class="badge"><span class="pip" aria-hidden="true"></span> Edition 2161 · Nocturne</div>
    <h1 class="title">Nocturne Observatory</h1>
    <p class="lead">A quiet machine for stargazing. Tilt the cosmos. Tune the glow. Let the night hum.</p>

    <div class="orrery" data-tilt>
      <div class="aurora" aria-hidden="true"></div>

      <!-- Glowing rings -->
      <div class="orbit" style="--inset: 2%; --speed: 42s; --offset: 12deg;"></div>
      <div class="orbit" style="--inset: 14%; --speed: 28s; --offset: -30deg;"></div>
      <div class="orbit" style="--inset: 28%; --speed: 22s; --offset: 70deg;"></div>

      <!-- Moving bodies -->
      <div class="track" style="--speed: 24s;">
        <div class="planet" style="--r: 35%; --size: 22px; --tone: var(--c1);" aria-hidden="true"></div>
      </div>
      <div class="track" style="--speed: 36s;">
        <div class="planet small" style="--r: 43%; --size: 16px; --tone: var(--c2);" aria-hidden="true"></div>
      </div>
      <div class="track" style="--speed: 18s;">
        <div class="planet tiny" style="--r: 26%; --size: 10px; --tone: var(--c3);" aria-hidden="true"></div>
      </div>

      <div class="star">
        <div class="core" aria-hidden="true"></div>
      </div>
    </div>

    <div class="controls">
      <button class="btn" data-action="palette" aria-label="Cycle nocturne palettes">Change palette</button>
      <button class="btn alt" data-action="intensity" aria-label="Toggle motion intensity">Mood: Drift</button>
      <button class="btn alt" data-action="pause" aria-label="Pause or resume motion">Pause sky</button>
      <button class="btn alt" data-action="regenerate" aria-label="Regenerate starfield">Regenerate stars</button>
    </div>

    <div class="meta">
      <span class="hint">Tip: Move the pointer (or tilt your device) to incline the orrery and brighten the nebula.</span>
      <span id="last-updated">Last updated: 2026-01-24 06:16:28 EST</span>
    </div>
  </div>

  <script>
    (function () {
      const root = document.getElementById('vibe2161');
      const sky = root.querySelector('.sky');
      const ctx = sky.getContext('2d');
      const orrery = root.querySelector('.orrery');
      const last = root.querySelector('#last-updated');
      const paletteBtn = root.querySelector('[data-action="palette"]');
      const pauseBtn = root.querySelector('[data-action="pause"]');
      const intensityBtn = root.querySelector('[data-action="intensity"]');
      const regenBtn = root.querySelector('[data-action="regenerate"]');

      // Timestamp
      try {
        last.textContent = 'Last updated: ' + new Date().toLocaleString(undefined, {
          year: 'numeric', month: 'short', day: '2-digit',
          hour: '2-digit', minute: '2-digit', second: '2-digit'
        });
      } catch { last.textContent = 'Last updated: ' + new Date().toString(); }

      // Themes — deep night palettes
      const themes = [
        { bg1:'#0b1020', bg2:'#121a33', ink:'#e6f0ff', muted:'#8ca0c0', c1:'#7aa8ff', c2:'#9a7dff', c3:'#73ffd5', glow:'#88c6ff' }, // indigo vacuum
        { bg1:'#051b1a', bg2:'#0b2230', ink:'#e7fff7', muted:'#8dd8c9', c1:'#6ef2bf', c2:'#7aa8ff', c3:'#ffc06b', glow:'#6ef2bf' }, // aurora mint
        { bg1:'#12090f', bg2:'#220b17', ink:'#ffeae1', muted:'#ffb9a8', c1:'#ff7b77', c2:'#ffd36a', c3:'#7de3ff', glow:'#ffb88a' }, // solar ember
        { bg1:'#0b0d1c', bg2:'#1a1130', ink:'#f1eaff', muted:'#bda6ff', c1:'#b499ff', c2:'#7ecbff', c3:'#ff9dd6', glow:'#ccb6ff' }  // lunar lilac
      ];
      let t = Math.floor(Math.random() * themes.length);

      function applyTheme(th) {
        for (const k of Object.keys(th)) root.style.setProperty(`--${k}`, th[k]);
      }
      applyTheme(themes[t]);

      paletteBtn.addEventListener('click', () => {
        t = (t + 1) % themes.length;
        applyTheme(themes[t]);
        paletteBtn.blur();
        initStars(true);
      });

      // Canvas starfield
      let W = 1, H = 1, DPR = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
      let running = true, vivid = false, raf = 0, tick = 0;

      const stars = [];
      const comets = [];
      const COLORS = () => [
        getComputedStyle(root).getPropertyValue('--c1').trim(),
        getComputedStyle(root).getPropertyValue('--c2').trim(),
        getComputedStyle(root).getPropertyValue('--c3').trim()
      ];

      function resize() {
        const rect = root.getBoundingClientRect();
        W = Math.max(1, Math.floor(rect.width));
        H = Math.max(1, Math.floor(rect.height));
        sky.width = W * DPR;
        sky.height = H * DPR;
        sky.style.width = W + 'px';
        sky.style.height = H + 'px';
        ctx.setTransform(DPR, 0, 0, DPR, 0, 0);
        initStars();
      }

      function initStars(soft = false) {
        const count = Math.round((W * H) / 1400);
        if (!soft) stars.length = 0;
        if (soft) {
          // smooth transition: keep some stars
          while (stars.length > count) stars.pop();
        }
        const cols = COLORS();
        for (let i = stars.length; i < count; i++) {
          stars.push({
            x: Math.random() * W,
            y: Math.random() * H,
            r: Math.random() * 1.5 + 0.3,
            tw: 0.003 + Math.random() * 0.007,
            ph: Math.random() * Math.PI * 2,
            a: 0.2 + Math.random() * 0.7,
            color: cols[i % cols.length]
          });
        }
      }

      function spawnComet() {
        const side = Math.random() < 0.5 ? 'left' : 'right';
        const y = Math.random() * H * 0.7 + H * 0.1;
        const vx = side === 'left' ? (2 + Math.random() * 3) : (-2 - Math.random() * 3);
        const len = 40 + Math.random() * 80;
        comets.push({ x: side === 'left' ? -40 : W + 40, y, vx, vy: -0.6 + Math.random()*1.2, life: 1, len });
      }

      let cometTimer = 0, cometFreq = 480; // frames

      function draw() {
        tick += 1;
        const tNow = tick * (vivid ? 1.1 : 1);
        ctx.clearRect(0, 0, W, H);

        // Slight vignette glow
        const g = ctx.createRadialGradient(W*0.5, H*0.35, Math.min(W,H)*0.25, W*0.5, H*0.5, Math.max(W,H));
        g.addColorStop(0, 'rgba(255,255,255,0.05)');
        g.addColorStop(1, 'rgba(255,255,255,0)');
        ctx.fillStyle = g;
        ctx.fillRect(0, 0, W, H);

        // Stars
        ctx.globalCompositeOperation = 'lighter';
        for (let i = 0; i < stars.length; i++) {
          const s = stars[i];
          const tw = (Math.sin(tNow * (s.tw * (vivid ? 1.6 : 1)) + s.ph) + 1) * 0.5;
          ctx.globalAlpha = Math.min(1, s.a * (0.55 + tw * 0.9));
          ctx.fillStyle = s.color;
          ctx.beginPath();
          ctx.arc(s.x, s.y, s.r * (0.7 + tw * 0.6), 0, Math.PI * 2);
          ctx.fill();
        }

        // Comets
        cometTimer++;
        if (cometTimer > (vivid ? cometFreq * 0.7 : cometFreq) && Math.random() > 0.6) {
          cometTimer = 0;
          spawnComet();
        }
        ctx.globalAlpha = 1;
        comets.forEach((c) => {
          c.x += c.vx * (vivid ? 1.3 : 1);
          c.y += c.vy;
          c.life *= 0.985;
          const trail = ctx.createLinearGradient(c.x, c.y, c.x - c.vx * c.len, c.y - c.vy * c.len);
          trail.addColorStop(0, 'rgba(255,255,255,' + (0.6 * c.life) + ')');
          trail.addColorStop(1, 'rgba(255,255,255,0)');
          ctx.strokeStyle = trail;
          ctx.lineWidth = 2;
          ctx.beginPath();
          ctx.moveTo(c.x, c.y);
          ctx.lineTo(c.x - c.vx * c.len, c.y - c.vy * c.len);
          ctx.stroke();
        });
        // Remove faded comets
        for (let i = comets.length - 1; i >= 0; i--) if (comets[i].life < 0.05) comets.splice(i, 1);

        ctx.globalCompositeOperation = 'source-over';

        if (running) raf = requestAnimationFrame(draw);
      }

      // Motion control
      function start() {
        if (running) return;
        running = true;
        raf = requestAnimationFrame(draw);
        root.setAttribute('data-paused', 'false');
        pauseBtn.textContent = 'Pause sky';
      }
      function stop() {
        running = false;
        cancelAnimationFrame(raf);
        root.setAttribute('data-paused', 'true');
        pauseBtn.textContent = 'Resume sky';
      }
      function togglePause() { running ? stop() : start(); }

      pauseBtn.addEventListener('click', () => { togglePause(); pauseBtn.blur(); });

      intensityBtn.addEventListener('click', () => {
        vivid = !vivid;
        root.style.setProperty('--ring-thick', vivid ? '10px' : '8px');
        intensityBtn.textContent = vivid ? 'Mood: Pulse' : 'Mood: Drift';
        intensityBtn.blur();
      });

      regenBtn.addEventListener('click', () => { initStars(false); regenBtn.blur(); });

      // Pointer spotlight & tilt
      function setSpot(eX, eY) {
        const rect = root.getBoundingClientRect();
        const px = (eX - rect.left) / rect.width;
        const py = (eY - rect.top) / rect.height;
        root.style.setProperty('--mx', Math.round(px * 100) + '%');
        root.style.setProperty('--my', Math.round(py * 100) + '%');
      }

      root.addEventListener('pointermove', (e) => {
        setSpot(e.clientX, e.clientY);

        const s = orrery.getBoundingClientRect();
        const cx = e.clientX - s.left - s.width/2;
        const cy = e.clientY - s.top - s.height/2;
        const tx = Math.max(-10, Math.min(10, -cy / (s.height/2) * 8));
        const ty = Math.max(-10, Math.min(10,  cx / (s.width/2) * 8));
        root.style.setProperty('--rx', tx.toFixed(2) + 'deg');
        root.style.setProperty('--ry', ty.toFixed(2) + 'deg');
      }, { passive: true });

      root.addEventListener('pointerleave', () => {
        root.style.setProperty('--rx', '0deg');
        root.style.setProperty('--ry', '0deg');
      });

      // Device tilt gentle spotlight
      window.addEventListener('deviceorientation', (e) => {
        const gx = Math.max(-30, Math.min(30, e.gamma || 0));
        const gy = Math.max(-30, Math.min(30, e.beta || 0));
        const rect = root.getBoundingClientRect();
        const cx = rect.left + rect.width / 2;
        const cy = rect.top + rect.height / 2;
        setSpot(cx + gx * 2, cy + gy * 2);
      }, { passive: true });

      // Resize + PRM
      const ro = new ResizeObserver(resize);
      ro.observe(root);
      resize();

      const prm = window.matchMedia('(prefers-reduced-motion: reduce)');
      function applyPRM() {
        if (prm.matches) stop();
        else start();
      }
      prm.addEventListener?.('change', applyPRM);
      applyPRM();
    })();
  </script>
</section>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


