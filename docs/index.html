<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<section class="vx1661" aria-label="Orbit Atelier">
  <style>
    .vx1661{
      --bg0:#060811;
      --bg1:#0b1023;
      --ink:#ecf1ff;
      --muted:#aab3d0;
      --accent:#83e4ff;
      --ring:#6ba6ff;
      --planetA:#9bf6ff;
      --planetB:#8ed1ff;
      --planetC:#c0b5ff;
      --radius:28px;
      --mx:50%;
      --my:50%;
      --tiltX:0deg;
      --tiltY:0deg;
      position:relative;
      padding:30px;
      border-radius:var(--radius);
      color:var(--ink);
      background:
        radial-gradient(900px 700px at var(--mx) var(--my), rgba(131,228,255,.12), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      border:1px solid rgba(255,255,255,.06);
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,.06),
        0 28px 70px rgba(0,0,0,.40);
      overflow:hidden;
      font:500 16px/1.6 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto;
      letter-spacing:.01em;
      isolate:isolate;
    }
    .vx1661::before{
      content:"";
      position:absolute; inset:-40%;
      background:conic-gradient(from 0deg,
        color-mix(in srgb, var(--ring) 21%, transparent),
        color-mix(in srgb, var(--planetA) 18%, transparent),
        color-mix(in srgb, var(--planetB) 16%, transparent),
        color-mix(in srgb, var(--planetC) 14%, transparent),
        color-mix(in srgb, var(--ring) 21%, transparent));
      filter:blur(90px) saturate(1.1);
      opacity:.75; mix-blend-mode:overlay;
      animation:vx1661_sweep 80s linear infinite;
      pointer-events:none;
    }
    @keyframes vx1661_sweep{ to{ transform:rotate(360deg) } }

    /* Star canvas */
    .vx1661 .sky{ position:absolute; inset:0; z-index:0; overflow:hidden; }
    .vx1661 .stars{ position:absolute; inset:0; width:100%; height:100%; display:block; opacity:.9; }

    /* Glass panel */
    .vx1661 .panel{
      position:relative; z-index:1; max-width:1120px; margin:0 auto;
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.1);
      border-radius:22px;
      backdrop-filter:blur(12px) saturate(140%);
      -webkit-backdrop-filter:blur(12px) saturate(140%);
      box-shadow:inset 0 1px 0 rgba(255,255,255,.08), 0 18px 60px rgba(0,0,0,.28);
      overflow:hidden;
    }

    .vx1661 .top{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      padding:16px 16px 8px;
    }
    .vx1661 .brand{ display:flex; align-items:center; gap:12px }
    .vx1661 .glyph{
      width:42px; height:42px; border-radius:12px; position:relative; overflow:hidden;
      background:
        radial-gradient(65% 65% at 32% 28%, rgba(255,255,255,.5), rgba(255,255,255,0) 60%),
        linear-gradient(135deg, var(--planetA), var(--ring));
      box-shadow:inset 0 1px 0 rgba(255,255,255,.6), 0 14px 26px rgba(107,166,255,.25);
    }
    .vx1661 .glyph::after{
      content:""; position:absolute; inset:7px; border-radius:9px;
      background:linear-gradient(180deg, rgba(255,255,255,.38), rgba(255,255,255,0));
      mix-blend-mode:screen;
    }
    .vx1661 .chip{
      display:inline-flex; align-items:center; gap:8px;
      padding:8px 12px; border-radius:999px; font-weight:800; font-size:13px;
      color:var(--ink); background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.16);
      box-shadow:0 6px 20px rgba(0,0,0,.20);
      cursor:pointer; user-select:none;
      transition:transform .18s ease, background .18s ease, box-shadow .18s ease;
    }
    .vx1661 .chip:hover{ transform:translateY(-2px); background:rgba(255,255,255,.12) }
    .vx1661 .ico{ width:18px; height:18px; opacity:.95 }

    .vx1661 h1{
      margin:6px 16px 0;
      font:900 clamp(32px, 9.2vw, 82px)/1.02 ui-serif, "Times New Roman", Georgia, serif;
      letter-spacing:-.02em;
      background:linear-gradient(90deg, #fff, color-mix(in srgb, var(--planetA) 70%, #fff));
      -webkit-background-clip:text; background-clip:text; color:transparent;
      text-shadow:0 10px 50px rgba(155,246,255,.22);
    }
    .vx1661 .lede{
      margin:6px 16px 16px; color:var(--muted); font-size:clamp(14px, 2.2vw, 18px)
    }

    /* Orrery stage */
    .vx1661 .orrery{
      position:relative; margin:14px 16px; border-radius:18px;
      height:420px; border:1px solid rgba(255,255,255,.12);
      background:
        radial-gradient(700px 500px at var(--mx) var(--my), rgba(99,166,255,.12), transparent 60%),
        linear-gradient(180deg, rgba(6,12,22,.65), rgba(4,9,16,.9));
      box-shadow:inset 0 1px 0 rgba(255,255,255,.08), 0 18px 40px rgba(0,0,0,.25);
      overflow:hidden;
      perspective:1000px;
    }
    .vx1661 .model{
      position:absolute; inset:0; transform-style:preserve-3d;
      transform:rotateX(var(--tiltY)) rotateY(var(--tiltX));
      transition:transform .25s ease;
    }
    .vx1661 .orbit{
      position:absolute; left:50%; top:50%;
      transform:translate(-50%,-50%);
      border-radius:50%;
      --w: 200px; width:var(--w); height:var(--w);
      animation:vx1661_orbit var(--d, 18s) linear infinite;
      will-change:transform;
    }
    .vx1661 .track{
      position:absolute; inset:0; border-radius:50%;
      background:
        radial-gradient(60% 60% at 50% 50%, rgba(255,255,255,.04), transparent 60%);
      border:1px dashed rgba(255,255,255,.16);
      box-shadow:inset 0 0 40px rgba(131,228,255,.05);
      mask:radial-gradient(circle, transparent 61%, #000 62%);
    }
    .vx1661 .planet{
      position:absolute; left:50%; top:-10px; transform:translateX(-50%);
      width:var(--p,12px); height:var(--p,12px); border-radius:50%;
      background:
        radial-gradient(circle at 30% 30%, #fff, rgba(255,255,255,0) 60%),
        var(--c, var(--planetA));
      box-shadow:
        0 0 0 1px rgba(255,255,255,.25) inset,
        0 10px 24px rgba(131,228,255,.35);
      filter:saturate(1.15);
      border:0;
      cursor:pointer;
      transition:transform .15s ease, box-shadow .2s ease;
    }
    .vx1661 .planet:hover{ transform:translateX(-50%) scale(1.15); box-shadow:0 14px 30px rgba(131,228,255,.45) }
    .vx1661 .planet:focus-visible{
      outline:2px solid var(--accent);
      outline-offset:2px;
    }
    .vx1661 .pulse{
      position:absolute; left:50%; top:50%; width:10px; height:10px; border-radius:50%;
      border:2px solid color-mix(in srgb, var(--accent) 80%, #fff);
      transform:translate(-50%,-50%);
      animation:vx1661_pulse .9s cubic-bezier(.2,.8,.2,1) forwards;
      pointer-events:none;
      filter:drop-shadow(0 0 14px rgba(131,228,255,.45));
    }
    @keyframes vx1661_pulse{
      to{ transform:translate(-50%,-50%) scale(18); opacity:0; border-color: color-mix(in srgb, var(--ring) 60%, transparent)}
    }
    @keyframes vx1661_orbit{ to{ transform:translate(-50%,-50%) rotate(360deg) } }

    /* CTAs */
    .vx1661 .cta{ display:flex; gap:10px; flex-wrap:wrap; padding:0 16px 14px }
    .vx1661 .btn{
      display:inline-grid; place-items:center; padding:12px 16px; border-radius:14px; font-weight:900; letter-spacing:.01em;
      border:0; cursor:pointer; user-select:none; color:#041018;
      background:linear-gradient(90deg, var(--planetA), var(--ring));
      box-shadow:0 14px 26px rgba(107,166,255,.28);
      transition:transform .18s ease, filter .18s ease;
    }
    .vx1661 .btn.ghost{
      color:var(--ink); background:transparent; border:1px solid rgba(255,255,255,.16);
      box-shadow:0 8px 18px rgba(0,0,0,.18);
    }
    .vx1661 .btn:hover{ transform:translateY(-2px); filter:brightness(1.06) saturate(1.05) }
    .vx1661 .btn:focus-visible{ outline:2px solid var(--accent); outline-offset:3px }

    /* Notes */
    .vx1661 .notes{ display:grid; grid-template-columns:repeat(3,minmax(0,1fr)); gap:12px; padding:0 16px 18px }
    .vx1661 .card{
      padding:16px; border-radius:16px; background:linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.14);
      box-shadow:0 10px 24px rgba(0,0,0,.22), inset 0 1px 0 rgba(255,255,255,.06);
      transition:transform .2s ease, box-shadow .2s ease;
    }
    .vx1661 .card:hover{ transform:translateY(-4px); box-shadow:0 18px 36px rgba(0,0,0,.28) }
    .vx1661 .card h3{ margin:6px 0 4px; font:800 18px/1.2 ui-sans-serif, system-ui; letter-spacing:-.01em }
    .vx1661 .card p{ margin:0; color:var(--muted); font-size:14px }

    /* Meta */
    .vx1661 .meta{
      display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap;
      color:var(--muted); font-size:12px; padding:0 16px 16px 16px;
    }
    .vx1661 .hint{ display:inline-flex; align-items:center; gap:8px; opacity:.95 }
    .vx1661 .spark{
      width:8px; height:8px; border-radius:50%;
      background:radial-gradient(circle at 40% 40%, #fff, rgba(255,255,255,.2) 60%), var(--planetA);
      box-shadow:0 0 10px var(--planetA), 0 0 20px var(--ring);
      animation:vx1661_breathe 3s ease-in-out infinite;
    }
    @keyframes vx1661_breathe{ 0%,100%{ transform:scale(1); opacity:.95 } 50%{ transform:scale(1.25); opacity:.6 } }

    /* Motion toggle pauses */
    .vx1661.still *, .vx1661.still::before{ animation-play-state:paused !important; transition:none !important }

    @media (prefers-reduced-motion: reduce){
      .vx1661 *, .vx1661::before{ animation:none !important; transition:none !important }
    }
    @media (max-width: 920px){
      .vx1661 .notes{ grid-template-columns:1fr }
      .vx1661 .orrery{ height:360px }
      .vx1661 .top{ flex-direction:column; align-items:flex-start; gap:8px }
    }
  </style>

  <div class="sky"><canvas id="vx1661-stars" class="stars" aria-hidden="true"></canvas></div>

  <div class="panel">
    <div class="top">
      <div class="brand">
        <div class="glyph" aria-hidden="true"></div>
        <div class="chip" aria-label="Edition">Edition 1661 — Orbit Atelier</div>
      </div>
      <div class="toggles" style="display:flex; gap:8px; flex-wrap:wrap">
        <button class="chip" id="vx1661-theme" aria-label="Change theme">
          <svg class="ico" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M12 3v3M12 18v3M3 12h3M18 12h3" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
          </svg>
          Theme: Night
        </button>
        <button class="chip" id="vx1661-motion" aria-pressed="false" aria-label="Toggle motion">
          <svg class="ico" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M4 12c3-6 13-6 16 0" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/>
          </svg>
          Motion: On
        </button>
      </div>
    </div>

    <h1>Orbit Atelier</h1>
    <p class="lede">Time, light, and circles — a small machine for wonder.</p>

    <div class="orrery" id="vx1661-orrery" aria-label="Interactive orrery">
      <div class="model" id="vx1661-model" aria-hidden="false"></div>
    </div>

    <div class="cta">
      <button class="btn" id="vx1661-add">Add a satellite</button>
      <button class="btn ghost" id="vx1661-reset">Reset</button>
    </div>

    <div class="notes">
      <article class="card">
        <h3>Hushed drama</h3>
        <p>Soft light, slow motion, deliberate contrast. No shouting — just presence.</p>
      </article>
      <article class="card">
        <h3>True to touch</h3>
        <p>Tilt with your cursor, tap planets to chime, add bodies to the sky.</p>
      </article>
      <article class="card">
        <h3>Respect for stillness</h3>
        <p>Prefer quiet? Motion pauses on request and honors reduced‑motion settings.</p>
      </article>
    </div>

    <div class="meta">
      <span class="hint"><span class="spark" aria-hidden="true"></span>Drag to tilt the model. Click a planet to hear a note.</span>
      <span id="last-updated">Last updated: 2026-01-01 01:30:54 EST</span>
    </div>
  </div>

  <script>
    (function(){
      const root = document.currentScript.closest('.vx1661');
      const starsCanvas = root.querySelector('#vx1661-stars');
      const orrery = root.querySelector('#vx1661-orrery');
      const model = root.querySelector('#vx1661-model');
      const addBtn = root.querySelector('#vx1661-add');
      const resetBtn = root.querySelector('#vx1661-reset');
      const themeBtn = root.querySelector('#vx1661-theme');
      const motionBtn = root.querySelector('#vx1661-motion');
      const lu = root.querySelector('#last-updated');

      // Timestamp
      try{
        const now = new Date();
        const tz = Intl.DateTimeFormat().resolvedOptions().timeZone || 'local';
        lu.textContent = 'Last updated: ' + now.toLocaleString([], {year:'numeric', month:'2-digit', day:'2-digit', hour:'2-digit', minute:'2-digit', second:'2-digit'}) + ' ' + tz;
      }catch(e){ lu.textContent = 'Last updated: just now'; }

      // Themes
      const themes = [
        {name:'Night',  ink:'#ecf1ff', muted:'#aab3d0', accent:'#83e4ff', bg0:'#060811', bg1:'#0b1023', ring:'#6ba6ff', A:'#9bf6ff', B:'#8ed1ff', C:'#c0b5ff'},
        {name:'Dawn',   ink:'#fff7f3', muted:'#e3cfc7', accent:'#ffb38a', bg0:'#1a0e0a', bg1:'#2b1610', ring:'#ff9a7f', A:'#ffd3c2', B:'#ff9a7f', C:'#ffe1d4'},
        {name:'Mint',   ink:'#ecfff7', muted:'#b9d7c9', accent:'#7fffd3', bg0:'#07140f', bg1:'#0a1d17', ring:'#6ee7c5', A:'#a7f3d0', B:'#86efac', C:'#bbf7d0'},
        {name:'Nebula', ink:'#eef0ff', muted:'#b7bee8', accent:'#a78bfa', bg0:'#0a0a1c', bg1:'#121430', ring:'#93c5fd', A:'#60a5fa', B:'#a78bfa', C:'#c4b5fd'},
        {name:'Pebble', ink:'#0b0f14', muted:'#4b5563', accent:'#0ea5e9', bg0:'#f2f6fb', bg1:'#e7eef6', ring:'#5ea6ff', A:'#6ee7ff', B:'#93c5fd', C:'#a7f3d0'}
      ];
      let ti = 0;
      function applyTheme(t){
        root.style.setProperty('--ink', t.ink);
        root.style.setProperty('--muted', t.muted);
        root.style.setProperty('--accent', t.accent);
        root.style.setProperty('--bg0', t.bg0);
        root.style.setProperty('--bg1', t.bg1);
        root.style.setProperty('--ring', t.ring);
        root.style.setProperty('--planetA', t.A);
        root.style.setProperty('--planetB', t.B);
        root.style.setProperty('--planetC', t.C);
        themeBtn.innerHTML = '<svg class="ico" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M12 3v3M12 18v3M3 12h3M18 12h3" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/></svg>Theme: ' + t.name;
        themeBtn.animate([{transform:'translateY(-2px)'},{transform:'translateY(0)'}], {duration:180, easing:'ease-out'});
      }
      applyTheme(themes[ti]);
      themeBtn.addEventListener('click', ()=>{
        ti = (ti + 1) % themes.length;
        applyTheme(themes[ti]);
      });

      // Motion toggle
      function setMotion(on){
        root.classList.toggle('still', !on);
        motionBtn.setAttribute('aria-pressed', String(!on));
        motionBtn.innerHTML = '<svg class="ico" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M4 12c3-6 13-6 16 0" stroke="currentColor" stroke-width="1.8" stroke-linecap="round"/></svg>Motion: ' + (on ? 'On' : 'Off');
      }
      motionBtn.addEventListener('click', ()=>{
        const isStill = root.classList.toggle('still');
        setMotion(!isStill);
      });
      // Respect reduced motion
      try{
        if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches){
          setMotion(false);
        }
      }catch{}

      // Pointer glow + tilt
      let targetX = 0.5, targetY = 0.5, mx = 0.5, my = 0.5, raf;
      function onPointer(e){
        const r = root.getBoundingClientRect();
        targetX = (e.clientX - r.left) / r.width;
        targetY = (e.clientY - r.top) / r.height;
        if(!raf) raf = requestAnimationFrame(tick);
      }
      function tick(){
        mx += (targetX - mx) * 0.12;
        my += (targetY - my) * 0.12;
        root.style.setProperty('--mx', (mx*100) + '%');
        root.style.setProperty('--my', (my*100) + '%');
        // Orrery tilt
        const tx = (mx - 0.5) * 16;
        const ty = (0.5 - my) * 10;
        root.style.setProperty('--tiltX', tx.toFixed(2) + 'deg');
        root.style.setProperty('--tiltY', ty.toFixed(2) + 'deg');
        if(Math.abs(targetX - mx) + Math.abs(targetY - my) > 0.001) { raf = requestAnimationFrame(tick); }
        else { cancelAnimationFrame(raf); raf = null; }
      }
      root.addEventListener('pointermove', onPointer, {passive:true});
      root.addEventListener('pointerleave', ()=>{ targetX=0.5; targetY=0.5; if(!raf) raf=requestAnimationFrame(tick); });

      // Orrery builder
      const orbits = [];
      function ringColor(i){
        return [ 'var(--planetA)', 'var(--planetB)', 'var(--planetC)', 'var(--ring)' ][i % 4];
      }
      function createOrbit(ratio, duration, dir=1, size=12){
        const orbit = document.createElement('div');
        orbit.className = 'orbit';
        orbit.dataset.ratio = ratio.toString();
        orbit.style.setProperty('--d', Math.max(6, duration) + 's');
        orbit.style.animationDirection = dir < 0 ? 'reverse' : 'normal';

        const track = document.createElement('div');
        track.className = 'track';
        orbit.appendChild(track);

        const planet = document.createElement('button');
        planet.className = 'planet';
        planet.type = 'button';
        planet.style.setProperty('--p', size + 'px');
        planet.style.setProperty('--c', ringColor(orbits.length));
        planet.setAttribute('aria-label', 'Planet tone ' + (orbits.length + 1));
        orbit.appendChild(planet);

        model.appendChild(orbit);
        orbits.push({el:orbit, planet});

        // Pulse + chime
        planet.addEventListener('click', (e)=>{
          pulse(planet);
          chime(220 + Math.random()*880);
        });
      }
      function layoutOrbits(){
        const r = orrery.getBoundingClientRect();
        const d = Math.min(r.width, r.height) - 40;
        orbits.forEach(({el})=>{
          const ratio = parseFloat(el.dataset.ratio || '0.5');
          const w = Math.max(80, Math.min(d, d * ratio));
          el.style.setProperty('--w', w + 'px');
        });
      }
      function resetOrbits(){
        orbits.splice(0).forEach(o=>o.el.remove());
        // Baseline set
        createOrbit(0.32, 9, 1, 12);
        createOrbit(0.50, 16, -1, 14);
        createOrbit(0.68, 26, 1, 10);
        createOrbit(0.86, 40, -1, 16);
        layoutOrbits();
      }
      function addOrbit(){
        const r = Math.min(0.92, 0.28 + Math.random()*0.68);
        const d = 8 + Math.random()*36;
        const dir = Math.random() < 0.5 ? -1 : 1;
        const size = 9 + Math.round(Math.random()*10);
        createOrbit(r, d, dir, size);
        layoutOrbits();
      }
      function pulse(planet){
        const p = document.createElement('span');
        p.className = 'pulse';
        planet.appendChild(p);
        p.addEventListener('animationend', ()=> p.remove());
      }
      // Simple chime with WebAudio (only on user gesture)
      let audioCtx;
      function chime(freq){
        try{
          audioCtx = audioCtx || new (window.AudioContext || window.webkitAudioContext)();
          const o = audioCtx.createOscillator();
          const g = audioCtx.createGain();
          o.type = 'sine'; o.frequency.value = freq;
          g.gain.value = 0.0001;
          o.connect(g); g.connect(audioCtx.destination);
          o.start();
          const now = audioCtx.currentTime;
          g.gain.exponentialRampToValueAtTime(0.2, now + 0.01);
          g.gain.exponentialRampToValueAtTime(0.00001, now + 0.35);
          o.stop(now + 0.36);
        }catch(e){}
      }

      resetBtn.addEventListener('click', resetOrbits);
      addBtn.addEventListener('click', addOrbit);

      // Keyboard tilt (optional)
      root.addEventListener('keydown', (e)=>{
        if(!['ArrowLeft','ArrowRight','ArrowUp','ArrowDown'].includes(e.key)) return;
        e.preventDefault();
        const dx = (parseFloat(getComputedStyle(root).getPropertyValue('--tiltX')) || 0);
        const dy = (parseFloat(getComputedStyle(root).getPropertyValue('--tiltY')) || 0);
        const step = 2;
        let nx = dx, ny = dy;
        if(e.key==='ArrowLeft') nx = dx - step;
        if(e.key==='ArrowRight') nx = dx + step;
        if(e.key==='ArrowUp') ny = dy + step;
        if(e.key==='ArrowDown') ny = dy - step;
        root.style.setProperty('--tiltX', nx + 'deg');
        root.style.setProperty('--tiltY', ny + 'deg');
      });

      // Starfield
      let stars = [], sRAF;
      function resizeStars(){
        const dpr = Math.min(window.devicePixelRatio || 1, 2);
        starsCanvas.width = starsCanvas.clientWidth * dpr;
        starsCanvas.height = starsCanvas.clientHeight * dpr;
        const area = starsCanvas.width * starsCanvas.height;
        const count = Math.max(120, Math.min(450, Math.floor(area / 18000)));
        stars = [];
        for(let i=0;i<count;i++){
          stars.push({
            x: Math.random()*starsCanvas.width,
            y: Math.random()*starsCanvas.height,
            r: Math.random()*1.8 + 0.4,
            p: Math.random()*Math.PI*2,
            s: 0.6 + Math.random()*0.8
          });
        }
      }
      function drawStars(t){
        const ctx = starsCanvas.getContext('2d');
        if(!ctx) return;
        const w = starsCanvas.width, h = starsCanvas.height;
        ctx.clearRect(0,0,w,h);
        // Parallax from tilt
        const tx = (parseFloat(getComputedStyle(root).getPropertyValue('--tiltX')) || 0)/16;
        const ty = (parseFloat(getComputedStyle(root).getPropertyValue('--tiltY')) || 0)/10;
        const px = tx * 8, py = ty * 10;
        for(const st of stars){
          const tw = (Math.sin(t*0.001*st.s + st.p)*0.5 + 0.5);
          const a = 0.15 + tw*0.65;
          ctx.fillStyle = 'rgba(255,255,255,'+a.toFixed(3)+')';
          ctx.beginPath();
          ctx.arc(st.x + px, st.y + py, st.r, 0, Math.PI*2);
          ctx.fill();
        }
      }
      function starLoop(t){
        if(!root.classList.contains('still')) drawStars(t||0);
        sRAF = requestAnimationFrame(starLoop);
      }
      resizeStars(); starLoop(0);
      window.addEventListener('resize', ()=>{ resizeStars(); });

      // Initialize
      resetOrbits();
    })();
  </script>
</section>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


