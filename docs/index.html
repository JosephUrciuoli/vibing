<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<section class="vibe-498" data-theme="neon" data-motion="on" aria-label="Vibe 498 — Aurora Loom">
  <style>
    .vibe-498 {
      --radius: 28px;
      --ink: #eaf2ff;
      --muted: #a8b7d4;
      --bg0: #0a0614;
      --bg1: #14112a;
      --a1: #7bffea;
      --a2: #a06bff;
      --a3: #ff69b4;
      --glow: 0 30px 90px rgba(0,0,0,.45);
      --tiltX: 0deg;
      --tiltY: 0deg;
      --amp: 3; /* 1..6 */
      --speed: 1; /* 0.5..2 */
      --grain: rgba(255,255,255,.05);

      position: relative;
      padding: clamp(22px, 5.2vw, 64px);
      border-radius: var(--radius);
      color: var(--ink);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Helvetica, Arial;
      background:
        radial-gradient(140% 100% at 80% -10%, color-mix(in oklab, var(--a2), transparent 90%), transparent 60%),
        radial-gradient(140% 100% at 0% 110%, color-mix(in oklab, var(--a1), transparent 92%), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      box-shadow: 0 30px 90px rgba(0,0,0,.38), inset 0 1px 0 rgba(255,255,255,.05);
      overflow: hidden;
      isolation: isolate;
    }
    .vibe-498 * { box-sizing: border-box; }

    /* grain + soft bloom */
    .vibe-498::before,
    .vibe-498::after {
      content:"";
      position:absolute; inset:-1px; pointer-events:none; border-radius: inherit;
    }
    .vibe-498::before {
      background:
        repeating-linear-gradient(90deg, var(--grain) 0 1px, transparent 1px 24px),
        repeating-linear-gradient(0deg, var(--grain) 0 1px, transparent 1px 24px);
      mix-blend-mode: overlay;
      opacity:.28;
      animation: v498-grid 22s ease-in-out infinite;
    }
    .vibe-498::after {
      background: radial-gradient(60% 80% at 20% 0%, rgba(255,255,255,.10), transparent 60%);
      mix-blend-mode: screen;
      opacity:.45;
      animation: v498-sheen 14s ease-in-out infinite alternate;
    }
    @keyframes v498-grid { 0%,100% { transform: translateY(-4px);} 50% { transform: translateY(4px);} }
    @keyframes v498-sheen { 0% { transform: translateX(0);} 100% { transform: translateX(2%);} }

    .vibe-498 .wrap { position: relative; z-index: 2; max-width: 1200px; margin: 0 auto; }

    .vibe-498 .badge {
      display:inline-flex; gap:10px; align-items:center;
      padding:8px 12px; border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,.08));
      border:1px solid rgba(255,255,255,.18);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.35), 0 12px 28px rgba(0,0,0,.28);
      backdrop-filter: blur(6px);
      font-weight:900; letter-spacing:.2px;
    }
    .vibe-498 .badge i {
      width:10px; height:10px; border-radius:50%; display:inline-block;
      background: radial-gradient(circle at 30% 30%, #fff, var(--a1));
      box-shadow: 0 0 0 6px color-mix(in oklab, var(--a1), transparent 80%);
    }

    .vibe-498 h1 {
      margin: 18px 0 6px;
      font-size: clamp(42px, 9vw, 120px);
      line-height: .86;
      letter-spacing: -1.2px;
      background: linear-gradient(90deg, color-mix(in oklab, var(--ink), var(--a2) 30%), var(--ink));
      -webkit-background-clip: text; background-clip: text; color: transparent;
      text-wrap: balance;
      text-shadow: 0 8px 28px rgba(0,0,0,.22);
    }
    .vibe-498 .lede {
      margin: 0 0 clamp(14px, 2.2vw, 24px);
      max-width: 74ch; color: var(--muted);
      font-size: clamp(14px, 2.1vw, 18px);
    }

    /* Aurora Loom */
    .vibe-498 .loom {
      position: relative;
      margin-top: clamp(10px, 3.6vw, 28px);
      height: min(64vmin, 560px);
      border-radius: 24px;
      overflow: hidden;
      box-shadow: inset 0 1px 0 rgba(255,255,255,.10), 0 26px 64px rgba(0,0,0,.35);
      background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
      border: 1px solid rgba(255,255,255,.14);
    }
    .vibe-498 .stage {
      position:absolute; inset:0; perspective: 1100px;
      transform-style: preserve-3d;
      transform: rotateX(var(--tiltX)) rotateY(var(--tiltY));
      transition: transform .25s ease;
    }
    .vibe-498 .orb {
      position:absolute; inset: -20% -10% auto -10%;
      height: 120%; border-radius: 50%;
      background:
        radial-gradient(60% 60% at 40% 40%, color-mix(in oklab, var(--a1), white 10%), transparent 60%),
        radial-gradient(60% 60% at 60% 60%, color-mix(in oklab, var(--a2), white 10%), transparent 60%);
      filter: blur(30px) saturate(120%);
      opacity:.55; mix-blend-mode: screen;
      transform: translateZ(-120px);
    }
    .vibe-498 .strand {
      position:absolute;
      left:-15%; width:130%;
      height: clamp(120px, 18vmin, 220px);
      border-radius: 999px;
      background:
        linear-gradient(90deg, color-mix(in oklab, var(--a1), white 10%), color-mix(in oklab, var(--a2), white 8%)),
        radial-gradient(100% 120% at 30% 0%, rgba(255,255,255,.25), transparent 60%);
      box-shadow:
        0 30px 60px color-mix(in oklab, var(--a2), transparent 70%),
        0 12px 24px rgba(0,0,0,.20);
      filter: saturate(125%) contrast(105%);
      mix-blend-mode: screen;
      opacity:.9;
      will-change: transform, opacity, filter;
    }
    .vibe-498 .strand:nth-child(odd) { filter: saturate(140%) brightness(1.05); }
    .vibe-498 .glints {
      position:absolute; inset:0; pointer-events:none; mix-blend-mode: screen;
    }
    .vibe-498 .glints span {
      position:absolute; width: clamp(6px, 1.4vmin, 10px); height: clamp(6px, 1.4vmin, 10px);
      border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #fff, color-mix(in oklab, var(--a3), white 15%));
      filter: blur(0.5px);
      opacity:.7;
      animation: v498-glint 12s ease-in-out infinite;
    }
    @keyframes v498-glint {
      0% { transform: translateY(4%); opacity:.4; }
      50% { transform: translateY(-6%); opacity:.9;}
      100% { transform: translateY(4%); opacity:.4; }
    }

    /* Plate */
    .vibe-498 .plate {
      position:absolute; right: clamp(12px, 2vw, 18px); bottom: clamp(12px, 2vw, 18px);
      padding: 12px 14px; border-radius: 14px;
      background: linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.06));
      border: 1px solid rgba(255,255,255,.18);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.28), 0 10px 24px rgba(0,0,0,.28);
      color: var(--ink); max-width: 56ch;
      backdrop-filter: blur(6px);
    }
    .vibe-498 .plate .t {
      font-weight: 800; letter-spacing:.2px; font-size: 13px; color: var(--muted);
      text-transform: uppercase;
    }
    .vibe-498 .plate .q {
      margin-top: 4px; font-size: clamp(14px, 2vw, 18px);
    }

    /* Controls */
    .vibe-498 .panel {
      margin-top: 24px; display:flex; flex-wrap:wrap; align-items:center; gap: 10px 12px;
    }
    .vibe-498 .chips { display:flex; flex-wrap: wrap; gap: 8px; }
    .vibe-498 .chip, .vibe-498 .switch, .vibe-498 .action, .vibe-498 .knob {
      appearance:none; cursor:pointer;
      border:1px solid rgba(255,255,255,.16);
      background: linear-gradient(180deg, rgba(255,255,255,.16), rgba(255,255,255,.08));
      color: var(--ink); font-weight:900; letter-spacing:.2px;
      padding: 8px 12px; border-radius: 12px;
      transition: transform .16s ease, filter .16s ease, background .2s ease, box-shadow .2s ease;
      box-shadow: 0 10px 24px rgba(0,0,0,.25), inset 0 1px 0 rgba(255,255,255,.22);
      backdrop-filter: blur(4px);
    }
    .vibe-498 .chip { border-radius: 999px; }
    .vibe-498 .chip:hover, .vibe-498 .switch:hover, .vibe-498 .action:hover { transform: translateY(-1px); filter: saturate(112%); }
    .vibe-498 .chip[aria-pressed="true"] {
      background: linear-gradient(180deg, rgba(255,255,255,.28), rgba(255,255,255,.12));
      box-shadow: 0 14px 32px color-mix(in oklab, var(--a1), transparent 80%), inset 0 0 0 2px color-mix(in oklab, var(--a1), transparent 60%);
    }
    .vibe-498 .knob { display:inline-flex; align-items:center; gap:10px; }
    .vibe-498 input[type="range"] {
      -webkit-appearance: none; width: 200px; height: 8px; border-radius: 999px; outline:none;
      background: linear-gradient(90deg, var(--a1), var(--a2));
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.16);
    }
    .vibe-498 input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none; width: 18px; height: 18px; border-radius: 50%;
      background: #ffffff; border: 1px solid rgba(0,0,0,.28);
      box-shadow: 0 6px 16px rgba(0,0,0,.25), 0 0 0 6px color-mix(in oklab, var(--a1), transparent 70%) inset;
    }

    .vibe-498 .foot {
      display:flex; flex-wrap:wrap; align-items:center; justify-content:space-between;
      margin-top: 16px; color: var(--muted); font-size: 13px;
    }

    /* Themes */
    .vibe-498[data-theme="glacier"] {
      --ink:#0e1a2c; --muted:#41506c;
      --bg0:#eaf6ff; --bg1:#d9ecff;
      --a1:#55d7ff; --a2:#8fd0ff; --a3:#b7f3ff;
      --grain: rgba(0,30,60,.06);
      box-shadow: 0 28px 84px rgba(10,25,60,.20), inset 0 1px 0 rgba(255,255,255,.8);
    }
    .vibe-498[data-theme="sakura"] {
      --ink:#2d0f1a; --muted:#7a3a52;
      --bg0:#fff3f6; --bg1:#ffe4ef;
      --a1:#ff9bc1; --a2:#ffa8d6; --a3:#ffd2e8;
      --grain: rgba(120,0,60,.06);
      box-shadow: 0 28px 84px rgba(120,0,60,.16), inset 0 1px 0 rgba(255,255,255,.8);
    }
    .vibe-498[data-theme="desert"] {
      --ink:#20140a; --muted:#6b5647;
      --bg0:#fff3df; --bg1:#ffe2bc;
      --a1:#ffbf69; --a2:#ff8f5a; --a3:#ffd59e;
      --grain: rgba(120,72,0,.08);
      box-shadow: 0 28px 84px rgba(120,72,0,.20), inset 0 1px 0 rgba(255,255,255,.85);
    }
    .vibe-498[data-theme="neon"] {
      --ink:#eaf2ff; --muted:#a8b7d4;
      --bg0:#0a0614; --bg1:#14112a;
      --a1:#7bffea; --a2:#a06bff; --a3:#ff69b4;
      --grain: rgba(255,255,255,.06);
      box-shadow: 0 30px 90px rgba(0,0,0,.40), inset 0 1px 0 rgba(255,255,255,.06);
    }

    /* Motion respect */
    .vibe-498[data-motion="off"] .strand,
    .vibe-498[data-motion="off"] .glints span,
    .vibe-498[data-motion="off"]::before,
    .vibe-498[data-motion="off"]::after { animation: none !important; }
    @media (prefers-reduced-motion: reduce) {
      .vibe-498 { --speed: 0; }
      .vibe-498 .strand,
      .vibe-498 .glints span,
      .vibe-498::before,
      .vibe-498::after { animation: none !important; }
    }
  </style>

  <div class="wrap">
    <div class="badge"><i></i> Iteration 498 — Aurora Loom</div>
    <h1>Aurora Loom</h1>
    <p class="lede">Light, woven into motion. Touch to tilt, tune the swell, and let the color breathe.</p>

    <div class="loom" role="img" aria-label="Layered aurora ribbons drifting in depth">
      <div class="stage" id="stage">
        <div class="orb" aria-hidden="true"></div>

        <!-- Strands -->
        <div class="strand" style="--i:0"></div>
        <div class="strand" style="--i:1"></div>
        <div class="strand" style="--i:2"></div>
        <div class="strand" style="--i:3"></div>
        <div class="strand" style="--i:4"></div>
        <div class="strand" style="--i:5"></div>
        <div class="strand" style="--i:6"></div>
        <div class="strand" style="--i:7"></div>
        <div class="strand" style="--i:8"></div>
        <div class="strand" style="--i:9"></div>

        <!-- Glints -->
        <div class="glints" aria-hidden="true">
          <span style="left:12%; top:20%; animation-delay:-2s;"></span>
          <span style="left:24%; top:60%; animation-delay:-6s;"></span>
          <span style="left:44%; top:30%; animation-delay:-10s;"></span>
          <span style="left:68%; top:18%; animation-delay:-4s;"></span>
          <span style="left:78%; top:58%; animation-delay:-8s;"></span>
          <span style="left:88%; top:36%; animation-delay:-12s;"></span>
          <span style="left:10%; top:80%; animation-delay:-14s;"></span>
          <span style="left:52%; top:74%; animation-delay:-16s;"></span>
          <span style="left:30%; top:42%; animation-delay:-18s;"></span>
          <span style="left:70%; top:82%; animation-delay:-20s;"></span>
        </div>

        <div class="plate" aria-live="polite">
          <div class="t" id="plate-title">Mood — Neon Night</div>
          <div class="q" id="plate-quote">“Make it sing.”</div>
        </div>
      </div>
    </div>

    <div class="panel" role="group" aria-label="Controls">
      <div class="chips" aria-label="Theme">
        <button class="chip" data-theme="glacier" aria-pressed="false">Glacier</button>
        <button class="chip" data-theme="sakura" aria-pressed="false">Sakura</button>
        <button class="chip" data-theme="desert" aria-pressed="false">Desert</button>
        <button class="chip" data-theme="neon" aria-pressed="true">Neon</button>
      </div>
      <label class="knob" for="swell">Swell
        <input id="swell" type="range" min="1" max="6" step="1" value="3" aria-label="Aurora swell">
      </label>
      <button class="switch" id="motion" aria-pressed="true">Mode: Alive</button>
      <button class="action" id="shuffle">Shuffle</button>
    </div>

    <div class="foot">
      <small>Woven color. Quiet joy.</small>
      <span id="last-updated">Last updated: 2025-11-08 03:20:52 EST</span>
    </div>
  </div>

  <script>
    (function(){
      const root = document.currentScript.closest('.vibe-498');
      const stage = root.querySelector('#stage');
      const strands = Array.from(root.querySelectorAll('.strand'));
      const chips = root.querySelectorAll('.chip');
      const swell = root.querySelector('#swell');
      const motionBtn = root.querySelector('#motion');
      const shuffleBtn = root.querySelector('#shuffle');
      const plateTitle = root.querySelector('#plate-title');
      const plateQuote = root.querySelector('#plate-quote');
      const last = root.querySelector('#last-updated');

      // quotes per theme
      const themes = {
        glacier: { title: 'Mood — Glacier', quote: '“Clarity is a kind of kindness.”' },
        sakura:  { title: 'Mood — Sakura',  quote: '“Softly does not mean weak.”' },
        desert:  { title: 'Mood — Desert',  quote: '“Stillness stores its own heat.”' },
        neon:    { title: 'Mood — Neon Night', quote: '“Make it sing.”' }
      };

      // tilt
      function pointerToTilt(e) {
        const r = stage.getBoundingClientRect();
        const nx = (e.clientX - r.left) / Math.max(1, r.width);
        const ny = (e.clientY - r.top) / Math.max(1, r.height);
        const rx = (0.5 - ny) * 10;
        const ry = (nx - 0.5) * 12;
        root.style.setProperty('--tiltX', rx.toFixed(2) + 'deg');
        root.style.setProperty('--tiltY', ry.toFixed(2) + 'deg');
      }
      root.addEventListener('pointermove', pointerToTilt);
      root.addEventListener('pointerleave', ()=>{
        root.style.setProperty('--tiltX', '0deg');
        root.style.setProperty('--tiltY', '0deg');
      });

      // animation
      let raf;
      function animate() {
        const t = performance.now() / 1000;
        const A = (+swell.value || 3) * 8 + 4; // px amplitude
        const baseGap = (stage.clientHeight || 400) / (strands.length + 2);
        const speed = 0.6 + ((+swell.value || 3) / 6) * 0.8;

        strands.forEach((el, i) => {
          const centerOffset = i - (strands.length - 1) / 2;
          const baseY = centerOffset * baseGap;
          const wave = Math.sin(t * speed + i * 0.65) * A;
          const z = Math.cos(t * 0.35 + i * 0.4) * 120;
          const rot = Math.sin(t * 0.25 + i * 0.8) * 6;
          const skew = Math.cos(t * 0.28 + i * 0.5) * 8;
          const o = 0.65 + 0.35 * (1 - Math.abs(centerOffset) / ((strands.length - 1) / 2));
          el.style.opacity = o.toFixed(2);
          el.style.transform = `translateY(${(baseY + wave).toFixed(1)}px) rotateZ(${rot.toFixed(2)}deg) skewX(${skew.toFixed(2)}deg) translateZ(${z.toFixed(1)}px)`;
          el.style.filter = `saturate(${120 + Math.sin(t * 0.4 + i) * 25}%)`;
          // slight hue shift by sliding gradient
          const gradShift = (50 + Math.sin(t * 0.3 + i) * 50).toFixed(0);
          el.style.backgroundImage =
            `linear-gradient(${gradShift}deg, color-mix(in oklab, var(--a1), white 10%), color-mix(in oklab, var(--a2), white 8%)),` +
            `radial-gradient(100% 120% at 30% 0%, rgba(255,255,255,.25), transparent 60%)`;
        });

        raf = requestAnimationFrame(animate);
      }

      // theme apply
      function applyTheme(theme) {
        root.setAttribute('data-theme', theme);
        chips.forEach(c => c.setAttribute('aria-pressed', c.dataset.theme === theme ? 'true' : 'false'));
        const t = themes[theme] || themes.neon;
        plateTitle.textContent = t.title;
        plateQuote.textContent = t.quote;
        // little bounce
        plateTitle.style.transform = 'translateY(-2px) scale(1.01)';
        setTimeout(()=> plateTitle.style.transform = '', 160);
      }
      chips.forEach(btn => btn.addEventListener('click', () => applyTheme(btn.dataset.theme)));

      // motion toggle
      function setMotion(on) {
        root.setAttribute('data-motion', on ? 'on' : 'off');
        motionBtn.textContent = 'Mode: ' + (on ? 'Alive' : 'Calm');
        motionBtn.setAttribute('aria-pressed', on ? 'true' : 'false');
        if (on) {
          cancelAnimationFrame(raf);
          raf = requestAnimationFrame(animate);
        } else {
          cancelAnimationFrame(raf);
          // settle strands into a pleasing static wave
          const baseGap = (stage.clientHeight || 400) / (strands.length + 2);
          strands.forEach((el, i) => {
            const centerOffset = i - (strands.length - 1) / 2;
            const baseY = centerOffset * baseGap;
            const wave = Math.sin(i * 0.65) * ((+swell.value || 3) * 8 + 4);
            const z = Math.cos(i * 0.4) * 80;
            el.style.transform = `translateY(${(baseY + wave).toFixed(1)}px) rotateZ(2deg) skewX(4deg) translateZ(${z.toFixed(1)}px)`;
          });
        }
      }
      motionBtn.addEventListener('click', () => setMotion(root.getAttribute('data-motion') !== 'on'));

      // swell slider updates speed/amplitude implicitly
      swell.addEventListener('input', ()=>{
        root.style.setProperty('--amp', swell.value);
        root.style.setProperty('--speed', (0.6 + (swell.value/6)*0.8).toFixed(2));
      });

      // shuffle
      shuffleBtn.addEventListener('click', ()=>{
        const keys = Object.keys(themes);
        const next = keys[Math.floor(Math.random()*keys.length)];
        applyTheme(next);
        const b = Math.floor(1 + Math.random()*6);
        swell.value = b;
        swell.dispatchEvent(new Event('input', {bubbles:true}));
        const on = Math.random() > .4;
        setMotion(on);
      });

      // init
      const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      applyTheme(root.getAttribute('data-theme') || 'neon');
      swell.dispatchEvent(new Event('input', {bubbles:true}));
      setMotion(!prefersReduced);

      // update last updated
      try {
        const fmt = new Intl.DateTimeFormat(undefined, { dateStyle:'medium', timeStyle:'short' });
        last.textContent = 'Last updated: ' + fmt.format(new Date());
      } catch(e) {
        last.textContent = 'Last updated: ' + new Date().toLocaleString();
      }

      // clean up
      root.addEventListener('DOMNodeRemoved', ()=> cancelAnimationFrame(raf), { once: true });
    })();
  </script>
</section>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


