<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<style>
  .k820 {
    --ink: hsl(220 15% 10%);
    --muted: hsl(220 8% 42%);
    --bg1: hsl(220 60% 99%);
    --bg2: hsl(200 70% 95%);
    --edge: hsl(220 12% 20% / .12);
    --p1: 200 100% 55%;
    --p2: 280 90% 56%;
    --p3: 20 95% 55%;
    position: relative;
    border-radius: 30px;
    padding: clamp(20px, 4vw, 44px);
    color: var(--ink);
    overflow: hidden;
    background:
      radial-gradient(1200px 800px at -20% 120%, hsl(var(--p1) / .08), transparent 60%),
      radial-gradient(1200px 800px at 120% -20%, hsl(var(--p2) / .08), transparent 60%),
      linear-gradient(180deg, var(--bg1), var(--bg2));
    box-shadow:
      0 70px 180px hsl(220 40% 20% / .18),
      inset 0 0 0 1px var(--edge);
    isolation: isolate;
  }
  .k820[data-theme="dark"]{
    --ink: hsl(0 0% 98%);
    --muted: hsl(0 0% 80%);
    --bg1: hsl(230 45% 8%);
    --bg2: hsl(258 45% 12%);
    --edge: hsl(0 0% 100% / .16);
    box-shadow:
      0 80px 180px hsl(240 70% 4% / .55),
      inset 0 0 0 1px var(--edge);
  }
  .k820::after{
    content:"";
    position:absolute; inset:-25%;
    background: conic-gradient(from 180deg at 50% 50%, hsl(0 0% 100% / .06), transparent 20%, hsl(0 0% 100% / .08) 40%, transparent 66%, hsl(0 0% 100% / .06) 85%, transparent);
    filter: blur(16px);
    mix-blend-mode: soft-light;
    pointer-events:none;
  }

  /* Top bar */
  .k820-top{ display:grid; grid-template-columns: 1fr auto; gap: clamp(10px, 2vw, 24px); align-items:center; position:relative; z-index:4; }
  .k820-brand{ display:grid; gap: 8px; }
  .k820-brand h1{
    margin:0;
    font: 900 clamp(28px, 8vw, 92px)/.9 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    letter-spacing:-0.02em;
    background:
      linear-gradient(90deg, hsl(0 0% 100% / .9), hsl(0 0% 100% / .7)) padding-box,
      linear-gradient(120deg, hsl(var(--p1)), hsl(var(--p2)), hsl(var(--p3))) text;
    -webkit-background-clip: padding-box, text; background-clip: padding-box, text;
    color: transparent; -webkit-text-fill-color: transparent;
  }
  .k820-brand p{
    margin:0; color: var(--muted);
    font: 600 clamp(12px, 1.6vw, 18px)/1.6 ui-sans-serif, system-ui;
  }

  .k820-ctrls{ display:grid; grid-auto-flow:column; gap: 10px; justify-content:end; align-items:center; }
  .k820 .pill{
    appearance:none; border:0; cursor:pointer; position:relative;
    display:inline-grid; grid-auto-flow:column; gap:8px; align-items:center;
    padding: 11px 14px;
    border-radius: 999px;
    color: var(--ink);
    background: linear-gradient(180deg, hsl(0 0% 100% / .55), hsl(0 0% 100% / .25));
    border:1px solid var(--edge);
    box-shadow: 0 16px 30px hsl(220 50% 20% / .12), inset 0 1px 0 hsl(0 0% 100% / .35);
    font: 800 12px/1 ui-sans-serif, system-ui;
    transition: transform .18s ease, box-shadow .18s ease, background .18s ease;
  }
  .k820[data-theme="dark"] .pill{
    background: linear-gradient(180deg, hsl(0 0% 100% / .06), hsl(0 0% 0% / .06));
    box-shadow: 0 16px 30px hsl(240 70% 4% / .45), inset 0 1px 0 hsl(0 0% 100% / .12);
  }
  .k820 .pill:hover{ transform: translateY(-2px); }
  .k820 .pill .ink{
    position:absolute; inset:0; border-radius:inherit; pointer-events:none;
    background: radial-gradient(180px 180px at var(--mx,50%) var(--my,50%), hsl(0 0% 100% / .22), transparent 60%);
    opacity:0; transition: opacity .16s ease;
  }
  .k820 .pill:hover .ink{ opacity:1; }

  .k820 .knob{
    display:inline-grid; grid-template-columns:auto 1fr; gap:10px; align-items:center;
    padding: 8px 12px; border-radius: 14px;
    background: linear-gradient(180deg, hsl(0 0% 100% / .5), hsl(0 0% 100% / .25));
    border:1px solid var(--edge);
    box-shadow: inset 0 1px 0 hsl(0 0% 100% / .35);
    color: var(--ink);
    font: 700 12px/1 ui-sans-serif, system-ui;
  }
  .k820 input[type="range"]{ -webkit-appearance:none; appearance:none; width: 140px; height: 28px; background: transparent; }
  .k820 input[type="range"]::-webkit-slider-runnable-track{
    height:8px; border-radius:999px; background: linear-gradient(90deg, hsl(var(--p1)), hsl(var(--p2)), hsl(var(--p3)));
    box-shadow: inset 0 1px 0 hsl(0 0% 100% / .5);
  }
  .k820 input[type="range"]::-webkit-slider-thumb{
    -webkit-appearance:none; appearance:none; width:18px; height:18px; border-radius:50%;
    background:white; border:1px solid var(--edge); margin-top:-5px;
    box-shadow: 0 6px 14px hsl(240 30% 6% / .35);
  }
  .k820 input[type="range"]::-moz-range-track{ height:8px; border-radius:999px; background: linear-gradient(90deg, hsl(var(--p1)), hsl(var(--p2)), hsl(var(--p3))); }
  .k820 input[type="range"]::-moz-range-thumb{ width:18px; height:18px; border-radius:50%; background:white; border:1px solid var(--edge); }

  /* Scene */
  .k820-scene{
    position: relative; z-index:1;
    min-height: min(78vh, 720px);
    border-radius: 26px;
    overflow:hidden;
    background:
      radial-gradient(1200px 800px at 50% -20%, hsl(var(--p1) / .10), transparent 60%),
      radial-gradient(800px 600px at 120% 120%, hsl(var(--p3) / .10), transparent 60%),
      linear-gradient(180deg, hsl(0 0% 100% / .45), hsl(0 0% 100% / .15));
    border: 1px solid var(--edge);
    box-shadow: inset 0 1px 0 hsl(0 0% 100% / .14), 0 40px 140px hsl(240 60% 4% / .25);
  }
  .k820[data-theme="dark"] .k820-scene{
    background:
      radial-gradient(1200px 800px at 0% 0%, hsl(var(--p1) / .15), transparent 60%),
      radial-gradient(800px 600px at 100% 100%, hsl(var(--p2) / .15), transparent 60%),
      linear-gradient(180deg, hsl(0 0% 0% / .3), hsl(0 0% 0% / .2));
  }

  /* Aurora field */
  .k820-field{ position:absolute; inset:0; filter: saturate(120%); }
  .blob{
    position:absolute; width: 38vmax; aspect-ratio: 1 / 1;
    background: radial-gradient(circle at 40% 40%, hsl(var(--h) / .9), hsl(var(--h) / .0) 60%);
    filter: blur(60px);
    mix-blend-mode: screen;
    transform: translate3d(var(--x,0px), var(--y,0px), 0) scale(var(--s,1));
    will-change: transform;
  }
  .k820[data-theme="dark"] .blob{ filter: blur(72px) brightness(1.1); }

  /* Star dust */
  .grain{ position:absolute; inset:-10%; background: repeating-radial-gradient(circle at 30% 40%, hsl(0 0% 100% / .02) 0 2px, transparent 2px 6px); pointer-events:none; mix-blend-mode: soft-light; filter: blur(.7px); }

  /* Lens follows pointer */
  .lens{
    position:absolute; width: clamp(160px, 22vmin, 240px); height: clamp(160px, 22vmin, 240px);
    border-radius: 50%;
    border: 1px solid hsl(0 0% 100% / .35);
    background: radial-gradient(closest-side, hsl(0 0% 100% / .08), transparent 70%);
    backdrop-filter: blur(2px) contrast(110%) saturate(115%);
    box-shadow: 0 10px 40px hsl(240 50% 6% / .35), inset 0 1px 0 hsl(0 0% 100% / .45);
    transform: translate(-50%, -50%);
    pointer-events:none;
    opacity: .0;
    transition: opacity .25s ease;
    z-index: 3;
  }

  /* Center copy */
  .k820-card{
    position: relative; z-index: 4;
    display:grid; gap: clamp(8px, 2vw, 16px); text-align:center;
    margin: clamp(16px, 4vw, 34px);
    padding: clamp(18px, 3vw, 28px) clamp(18px, 3.2vw, 34px);
    border:1px solid var(--edge);
    border-radius: 18px;
    background: linear-gradient(180deg, hsl(0 0% 100% / .65), hsl(0 0% 100% / .25));
    box-shadow: 0 24px 60px hsl(240 60% 4% / .28), inset 0 1px 0 hsl(0 0% 100% / .25);
  }
  .k820[data-theme="dark"] .k820-card{
    background: linear-gradient(180deg, hsl(0 0% 0% / .35), hsl(0 0% 0% / .20));
    box-shadow: 0 24px 60px hsl(240 60% 4% / .45), inset 0 1px 0 hsl(0 0% 100% / .10);
  }
  .k820-card h2{
    margin:0;
    font: 900 clamp(22px, 6vw, 56px)/1.02 ui-sans-serif, system-ui, -apple-system;
    letter-spacing:-0.01em;
    background: linear-gradient(90deg, hsl(var(--p1)), hsl(var(--p2)), hsl(var(--p3)));
    -webkit-background-clip: text; background-clip: text; color: transparent; -webkit-text-fill-color: transparent;
  }
  .k820-card p{ margin:0; color: var(--muted); font: 600 clamp(13px, 1.6vw, 18px)/1.6 ui-sans-serif, system-ui; }
  .k820-actions{ display:flex; gap:10px; justify-content:center; flex-wrap:wrap; }

  /* Ripples */
  .ripple{
    position:absolute; border: 2px solid hsl(var(--h, var(--p2)) / .35);
    border-radius:50%; pointer-events:none; mix-blend-mode: overlay; z-index:2;
    left:var(--rx); top:var(--ry); width:2px; height:2px; transform: translate(-50%, -50%);
    animation: ring 1200ms ease-out forwards;
  }
  @keyframes ring{
    from{ opacity:.45; transform: translate(-50%,-50%) scale(1); }
    to{ opacity:0; transform: translate(-50%,-50%) scale(180); }
  }

  /* Footer */
  .k820-foot{
    position: relative; z-index: 4;
    margin-top: clamp(18px, 3.2vw, 28px);
    display:flex; justify-content:space-between; align-items:center; gap:12px;
    color: var(--muted); font: 500 12px/1.4 ui-sans-serif, system-ui;
  }
  .hint{
    font: 700 11px/1 ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    background: hsl(0 0% 100% / .10);
    border: 1px solid var(--edge);
    padding: 6px 8px; border-radius: 8px; color: var(--ink);
  }
  .k820[data-theme="dark"] .hint{ background: hsl(0 0% 0% / .12); }

  /* Tiny badge */
  .live{
    display:inline-grid; grid-auto-flow:column; gap:6px; align-items:center;
    padding:6px 10px; border-radius:999px; background:hsl(0 0% 100% / .16); border:1px solid var(--edge);
    box-shadow: inset 0 1px 0 hsl(0 0% 100% / .25);
    font: 800 11px/1 ui-sans-serif, system-ui; color: var(--ink);
  }

  /* Tooltips */
  .k820 .pill[data-tip]::after{
    content: attr(data-tip);
    position:absolute; bottom: calc(100% + 8px); left:50%; transform: translate(-50%, 4px);
    background: hsl(0 0% 0% / .8); color: white; padding:6px 8px; border-radius:6px;
    font: 700 10px/1 ui-sans-serif; opacity:0; pointer-events:none; white-space:nowrap;
    transition: opacity .18s ease, transform .18s ease;
  }
  .k820 .pill:hover::after{ opacity:1; transform: translate(-50%, 0); }
</style>

<div class="k820" id="k820" data-theme="dark" aria-live="polite">
  <div class="k820-top">
    <div class="k820-brand">
      <h1>AURORA · 820</h1>
      <p>Compose living color. Drag the light. Bloom the field.</p>
    </div>
    <div class="k820-ctrls" role="group" aria-label="Controls">
      <span class="live" aria-hidden="true">
        <svg width="12" height="12" viewBox="0 0 12 12" aria-hidden="true"><circle cx="6" cy="6" r="5" fill="hsl(var(--p1))"/></svg>
        LIVE
      </span>
      <button class="pill" id="k820-theme" type="button" data-tip="Toggle theme"><span class="ink" aria-hidden="true"></span>Day / Night</button>
      <button class="pill" id="k820-pal" type="button" data-tip="Cycle palettes"><span class="ink" aria-hidden="true"></span>Palette</button>
      <span class="knob" aria-label="Tempo">
        <span>Tempo</span>
        <input id="k820-tempo" type="range" min="0" max="100" value="54" aria-label="Animation tempo">
      </span>
      <button class="pill" id="k820-prism" type="button" aria-pressed="false" data-tip="Prismatic drift"><span class="ink" aria-hidden="true"></span>Prism</button>
      <button class="pill" id="k820-freeze" type="button" aria-pressed="false" data-tip="Pause / Resume"><span class="ink" aria-hidden="true"></span>Freeze</button>
    </div>
  </div>

  <div class="k820-scene" id="k820-scene">
    <div class="k820-field" id="k820-field" aria-hidden="true">
      <div class="blob" style="--h: var(--p1);"></div>
      <div class="blob" style="--h: var(--p2);"></div>
      <div class="blob" style="--h: var(--p3);"></div>
      <div class="blob" style="--h: var(--p1);"></div>
      <div class="blob" style="--h: var(--p2);"></div>
      <div class="blob" style="--h: var(--p3);"></div>
    </div>
    <div class="grain" aria-hidden="true"></div>
    <div class="lens" id="k820-lens" aria-hidden="true"></div>

    <div class="k820-card">
      <h2>“Bend the aurora.”</h2>
      <p>Move your cursor to steer a glass lens. Tap Bloom to send rings of color.</p>
      <div class="k820-actions">
        <button class="pill" id="k820-bloom"><span class="ink" aria-hidden="true"></span>Bloom</button>
        <button class="pill" id="k820-soft"><span class="ink" aria-hidden="true"></span>Soften</button>
        <button class="pill" id="k820-crisp"><span class="ink" aria-hidden="true"></span>Crisp</button>
        <button class="pill" id="k820-rand"><span class="ink" aria-hidden="true"></span>Randomize</button>
      </div>
    </div>
  </div>

  <div class="k820-foot">
    <span class="hint" aria-hidden="true">Tip: Prism hue-rotates the light. Use Tempo to calm or energize the flow.</span>
    <span id="last-updated">Last updated: 2025-11-23 01:25:49 EST</span>
  </div>
</div>

<script>
(function(){
  const root = document.getElementById('k820');
  const scene = document.getElementById('k820-scene');
  const field = document.getElementById('k820-field');
  const blobs = Array.from(field.querySelectorAll('.blob'));
  const lens = document.getElementById('k820-lens');
  const tempo = document.getElementById('k820-tempo');
  const updated = document.getElementById('last-updated');

  const btnTheme = document.getElementById('k820-theme');
  const btnPal = document.getElementById('k820-pal');
  const btnPrism = document.getElementById('k820-prism');
  const btnFreeze = document.getElementById('k820-freeze');
  const btnBloom = document.getElementById('k820-bloom');
  const btnSoft = document.getElementById('k820-soft');
  const btnCrisp = document.getElementById('k820-crisp');
  const btnRand = document.getElementById('k820-rand');

  // Timestamp
  try{
    const now = new Date();
    const opts = { year:'numeric', month:'short', day:'2-digit', hour:'2-digit', minute:'2-digit' };
    updated.textContent = 'Last updated: ' + now.toLocaleString(undefined, opts);
  }catch{ updated.textContent = 'Last updated: just now'; }

  // Button ink hover
  function ink(e){
    const b = e.currentTarget.getBoundingClientRect();
    e.currentTarget.style.setProperty('--mx', ((e.clientX - b.left)/b.width)*100 + '%');
    e.currentTarget.style.setProperty('--my', ((e.clientY - b.top)/b.height)*100 + '%');
  }
  document.querySelectorAll('.k820 .pill').forEach(b => b.addEventListener('pointermove', ink, { passive:true }));

  // Palettes
  const palettes = [
    { name:'Polar', p1:[200,100,55], p2:[280,90,56], p3:[20,95,55], bg1:'hsl(210 60% 98%)', bg2:'hsl(200 65% 94%)' },
    { name:'Sunrise', p1:[18,95,58], p2:[330,85,62], p3:[50,92,56], bg1:'hsl(24 70% 96%)', bg2:'hsl(330 55% 95%)' },
    { name:'Ultraviolet', p1:[260,95,62], p2:[300,88,60], p3:[190,88,56], bg1:'hsl(258 50% 95%)', bg2:'hsl(240 55% 92%)' },
    { name:'Forest', p1:[150,70,45], p2:[170,70,50], p3:[200,80,56], bg1:'hsl(145 40% 96%)', bg2:'hsl(180 40% 94%)' },
    { name:'Coral Sea', p1:[190,95,54], p2:[210,90,60], p3:[12,90,58], bg1:'hsl(195 60% 97%)', bg2:'hsl(210 60% 94%)' }
  ];
  let palIndex = 0;
  function setPalette(p){
    root.style.setProperty('--p1', `${p.p1[0]} ${p.p1[1]}% ${p.p1[2]}%`);
    root.style.setProperty('--p2', `${p.p2[0]} ${p.p2[1]}% ${p.p2[2]}%`);
    root.style.setProperty('--p3', `${p.p3[0]} ${p.p3[1]}% ${p.p3[2]}%`);
    if(root.getAttribute('data-theme') !== 'dark'){
      root.style.setProperty('--bg1', p.bg1);
      root.style.setProperty('--bg2', p.bg2);
    }
  }
  setPalette(palettes[palIndex]);

  // Blob motion setup
  const rng = (min, max) => min + Math.random() * (max - min);
  const cfg = blobs.map((el, i) => ({
    el,
    ax: rng(0.25, 0.5) * (i % 2 ? 1 : -1),
    ay: rng(0.2, 0.45) * (i % 2 ? -1 : 1),
    sx: rng(0.25, 0.45),
    sy: rng(0.25, 0.45),
    spd: rng(0.04, 0.09) * (i % 2 ? 1 : 0.8),
    phase: rng(0, Math.PI * 2),
    scale: rng(0.85, 1.25)
  }));

  let t = 0, paused = false, prism = false;
  let last = performance.now();
  function loop(now){
    const dt = Math.min(0.033, (now - last)/1000);
    last = now;
    if (!paused){
      const mult = 0.25 + (parseInt(tempo.value,10)/100) * 1.8;
      t += dt * mult;
      const rect = scene.getBoundingClientRect();
      const cx = rect.width/2, cy = rect.height/2;

      cfg.forEach((c, i) => {
        const x = cx + Math.sin(t * c.spd + c.phase) * rect.width * c.ax;
        const y = cy + Math.cos(t * (c.spd*0.9) + c.phase) * rect.height * c.ay;
        const s = c.scale + Math.sin(t * (c.spd*1.6) + c.phase) * 0.08;
        c.el.style.setProperty('--x', (x - rect.width*0.5) + 'px');
        c.el.style.setProperty('--y', (y - rect.height*0.5) + 'px');
        c.el.style.setProperty('--s', s);
      });

      if (prism){
        const hue = (Math.sin(t*0.5) * 20);
        field.style.filter = `hue-rotate(${hue}deg) saturate(120%)`;
      } else {
        field.style.filter = 'saturate(120%)';
      }
    }
    requestAnimationFrame(loop);
  }
  requestAnimationFrame(loop);

  // Lens follow
  let lensActive = false;
  scene.addEventListener('pointerenter', ()=>{ lens.style.opacity = '1'; lensActive = true; }, { passive:true });
  scene.addEventListener('pointerleave', ()=>{ lens.style.opacity = '0'; lensActive = false; }, { passive:true });
  scene.addEventListener('pointermove', (e)=>{
    if(!lensActive) return;
    const r = scene.getBoundingClientRect();
    const x = e.clientX - r.left;
    const y = e.clientY - r.top;
    lens.style.left = x + 'px';
    lens.style.top = y + 'px';
  }, { passive:true });

  // Bloom
  function bloomAt(x, y){
    const ring = document.createElement('span');
    ring.className = 'ripple';
    ring.style.setProperty('--rx', x + 'px');
    ring.style.setProperty('--ry', y + 'px');
    // pick one of the palette hues randomly
    const hues = ['var(--p1)','var(--p2)','var(--p3)'];
    ring.style.setProperty('--h', `var(${hues[Math.floor(Math.random()*hues.length)]})`);
    scene.appendChild(ring);
    ring.addEventListener('animationend', ()=> ring.remove());
  }
  btnBloom.addEventListener('click', ()=>{
    const r = scene.getBoundingClientRect();
    bloomAt(r.width/2, r.height/2);
  });
  scene.addEventListener('pointerdown', (e)=>{
    const r = scene.getBoundingClientRect();
    bloomAt(e.clientX - r.left, e.clientY - r.top);
  });

  // Theme toggle
  btnTheme.addEventListener('click', ()=>{
    const dark = root.getAttribute('data-theme') === 'dark';
    root.setAttribute('data-theme', dark ? 'light' : 'dark');
    if (dark){ setPalette(palettes[palIndex]); }
  });

  // Palette cycle
  btnPal.addEventListener('click', ()=>{
    palIndex = (palIndex + 1) % palettes.length;
    setPalette(palettes[palIndex]);
  });

  // Prism
  btnPrism.addEventListener('click', ()=>{
    prism = !prism;
    btnPrism.setAttribute('aria-pressed', String(prism));
  });

  // Freeze
  btnFreeze.addEventListener('click', ()=>{
    paused = !paused;
    btnFreeze.setAttribute('aria-pressed', String(paused));
    btnFreeze.textContent = paused ? 'Resume' : 'Freeze';
    const ink = document.createElement('span'); ink.className = 'ink'; btnFreeze.prepend(ink);
  });

  // Soft / Crisp adjusters
  btnSoft.addEventListener('click', ()=>{
    tempo.value = Math.max(0, parseInt(tempo.value,10) - 25);
  });
  btnCrisp.addEventListener('click', ()=>{
    tempo.value = Math.min(100, parseInt(tempo.value,10) + 25);
  });

  // Randomize
  btnRand.addEventListener('click', ()=>{
    tempo.value = Math.floor(Math.random()*101);
    palIndex = Math.floor(Math.random()*palettes.length);
    setPalette(palettes[palIndex]);
    prism = Math.random() > 0.6;
    btnPrism.setAttribute('aria-pressed', String(prism));
  });

  // Reduced motion
  const media = window.matchMedia('(prefers-reduced-motion: reduce)');
  function setReduced(state){
    paused = !!state;
    btnFreeze.setAttribute('aria-pressed', String(paused));
    btnFreeze.textContent = paused ? 'Resume' : 'Freeze';
  }
  setReduced(media.matches);
  media.addEventListener?.('change', e => setReduced(e.matches));
})();
</script>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


