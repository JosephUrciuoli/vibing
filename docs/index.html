<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<section class="orion" role="region" aria-label="Quiet Orbit" data-theme="night">
  <style>
    .orion{
      --bg: #0a0d14;
      --fg: #e9f0ff;
      --muted: color-mix(in oklab, var(--fg) 70%, transparent);
      --line: color-mix(in oklab, var(--fg) 16%, transparent);
      --glass: color-mix(in oklab, #0b1220 75%, transparent);
      --a: hsl(200 90% 56%);
      --b: hsl(285 85% 62%);
      --ring: color-mix(in oklab, var(--fg) 20%, transparent);

      position: relative;
      isolation: isolate;
      border-radius: 28px;
      padding: clamp(14px, 3vw, 28px);
      color: var(--fg);
      background:
        radial-gradient(1200px 900px at var(--mx,70%) var(--my,20%), color-mix(in oklab, var(--a) 14%, transparent), transparent 60%),
        linear-gradient(180deg, #0a0d14, #0b1220 60%, #0a0f1a);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.04), 0 60px 160px rgba(0,0,0,.6);
      overflow: hidden;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans";
    }
    .orion[data-theme="day"]{
      --bg: #f6f9ff;
      --fg: #0e1220;
      --muted: color-mix(in oklab, var(--fg) 60%, transparent);
      --glass: color-mix(in oklab, #ffffff 80%, transparent);
      --ring: color-mix(in oklab, var(--fg) 18%, transparent);
      background:
        radial-gradient(1200px 900px at var(--mx,30%) var(--my,35%), color-mix(in oklab, var(--b) 16%, transparent), transparent 60%),
        linear-gradient(180deg, #f6f9ff, #eef3f9 60%, #e9eff7);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.6), 0 50px 120px rgba(14,18,32,.2);
    }
    .orion::before{
      content:"";
      position:absolute; inset:-22%;
      background:
        radial-gradient(800px 600px at 10% -10%, color-mix(in oklab, var(--a) 16%, transparent), transparent 60%),
        radial-gradient(900px 700px at 110% 10%, color-mix(in oklab, var(--b) 16%, transparent), transparent 60%);
      filter: blur(42px) saturate(120%);
      opacity:.5; pointer-events:none; z-index:0;
    }
    .orion::after{
      content:"";
      position:absolute; inset:-1px; pointer-events:none; z-index:1;
      background:
        repeating-linear-gradient(0deg, var(--line) 0 1px, transparent 1px 48px),
        repeating-linear-gradient(90deg, var(--line) 0 1px, transparent 1px 48px);
      mask: radial-gradient(140% 130% at 80% -10%, black, transparent 60%);
      opacity:.28;
    }

    /* Topbar */
    .topbar{
      position: relative; z-index:3;
      display:grid; grid-template-columns: 1fr auto 1fr; align-items:center; gap:12px;
    }
    .brand{
      display:inline-flex; align-items:center; gap:10px; font-weight:900; letter-spacing:.4px; text-transform:uppercase; font-size:12px; color: var(--muted);
    }
    .glyph{
      width:18px; height:18px; border-radius:50%;
      background: radial-gradient(circle at 35% 35%, var(--b), var(--a));
      box-shadow: 0 0 0 2px color-mix(in oklab, var(--a) 30%, transparent), 0 0 18px color-mix(in oklab, var(--b) 26%, transparent);
    }
    .theme-toggle{
      justify-self:center;
      display:inline-flex; align-items:center; gap:8px; padding:8px 12px; border-radius:999px;
      border:1px solid var(--line); background: var(--glass); color: var(--muted);
      backdrop-filter: blur(10px) saturate(120%);
      font-size:12px; cursor:pointer; user-select:none;
      box-shadow: 0 6px 18px rgba(0,0,0,.08);
    }
    .dock{
      justify-self:end; display:flex; gap:8px; align-items:center;
    }
    .btn, .ghost{
      appearance:none; border:1px solid var(--line); cursor:pointer;
      padding:10px 12px; border-radius:12px; font-weight:800; letter-spacing:.3px; font-size:12px;
      color:var(--fg); background: var(--glass);
      transition: transform .14s ease, filter .18s ease, background .18s ease;
      backdrop-filter: blur(8px) saturate(120%);
      box-shadow: 0 12px 24px rgba(0,0,0,.10);
    }
    .btn.primary{
      border:0; color:#0b0f16;
      background: linear-gradient(135deg, var(--a), var(--b));
      box-shadow: 0 14px 30px color-mix(in oklab, var(--a) 30%, transparent);
    }
    .btn:hover, .ghost:hover, .theme-toggle:hover{ transform: translateY(-1px) scale(1.01); }

    /* Hero */
    .hero{
      position: relative; z-index:2;
      margin-top: clamp(12px, 3.6vw, 24px);
      border-radius: 26px; border:1px solid var(--line); overflow:hidden;
      min-height: clamp(520px, 60vw, 820px);
      background: linear-gradient(180deg, color-mix(in oklab, var(--bg) 82%, transparent), color-mix(in oklab, var(--bg) 68%, transparent));
    }
    .sky{
      position:absolute; inset:0; width:100%; height:100%;
      display:block; filter: saturate(115%) contrast(102%);
    }

    /* Overlay content */
    .overlay{
      position:absolute; inset: clamp(16px, 3.6vw, 30px);
      border-radius: 26px; border:1px solid var(--line);
      background: var(--glass); backdrop-filter: blur(14px) saturate(130%);
      box-shadow: 0 30px 70px rgba(0,0,0,.14);
      display:grid; place-items:center;
      transform-style: preserve-3d; will-change: transform;
    }
    h1{
      margin:0;
      font-size: clamp(46px, 9.8vw, 128px);
      line-height:.88; letter-spacing:-.02em; text-align:center;
      background: linear-gradient(180deg, var(--fg), color-mix(in oklab, var(--fg) 70%, var(--b)));
      -webkit-background-clip:text; background-clip:text; color:transparent;
      text-wrap: balance;
    }
    .tag{
      margin:10px 0 14px; color: var(--muted);
      font-size: clamp(14px, 2.2vw, 20px); text-align:center;
    }
    .cta{ display:flex; gap:10px; flex-wrap:wrap; justify-content:center; }

    /* Control panel */
    .panel{
      position:absolute; left: clamp(12px, 3vw, 28px); bottom: clamp(12px, 3vw, 28px);
      display:grid; gap:10px; z-index:5; justify-items:start;
    }
    .glass{
      display:flex; align-items:center; gap:10px; padding:10px; border-radius:16px;
      border:1px solid var(--line); background: var(--glass); backdrop-filter: blur(10px) saturate(120%);
      box-shadow: 0 10px 26px rgba(0,0,0,.10);
    }
    .range{ --track: color-mix(in oklab, var(--fg) 20%, transparent); --fill: linear-gradient(90deg, var(--a), var(--b)); }
    .range input{ -webkit-appearance:none; appearance:none; width: 240px; height: 28px; background: transparent; cursor: pointer; }
    .range input::-webkit-slider-runnable-track{ height:6px; border-radius:999px; background: var(--track); border:1px solid var(--line); }
    .range input::-moz-range-track{ height:6px; border-radius:999px; background: var(--track); border:1px solid var(--line); }
    .range input::-webkit-slider-thumb{
      -webkit-appearance:none; appearance:none; width:18px; height:18px; border-radius:50%; margin-top:-6px; background: var(--fill); border:0;
      box-shadow: 0 6px 16px color-mix(in oklab, var(--a) 28%, transparent);
    }
    .range input::-moz-range-thumb{
      width:18px; height:18px; border-radius:50%; background: var(--fill); border:0;
      box-shadow: 0 6px 16px color-mix(in oklab, var(--a) 28%, transparent);
    }
    .val{
      font-variant-numeric: tabular-nums; font-weight:800; font-size:12px; color:var(--muted);
      padding:4px 8px; border-radius:999px; border:1px solid var(--line);
      background: color-mix(in oklab, var(--bg) 70%, transparent);
    }
    .chips{ display:flex; gap:8px; flex-wrap:wrap; }
    .chip{
      width:28px; height:28px; border-radius:10px; border:1px solid var(--line); cursor:pointer; position:relative;
      box-shadow: inset 0 4px 10px rgba(0,0,0,.08);
    }
    .chip[aria-checked="true"]::after{
      content:""; position:absolute; inset:-3px; border-radius:12px;
      border: 2px solid color-mix(in oklab, var(--a) 42%, var(--b));
      box-shadow: 0 0 0 2px rgba(0,0,0,.04);
    }

    /* Footer */
    .foot{
      position:relative; z-index:2; margin-top: 14px;
      display:grid; grid-template-columns: 1fr auto 1fr; align-items:center; color:var(--muted); font-size:12px;
    }
    .stamp{
      justify-self:center; display:inline-flex; align-items:center; gap:8px;
      padding:6px 10px; border-radius: 999px; border:1px solid var(--line);
      background: var(--glass); backdrop-filter: blur(6px);
    }

    /* Motion toggles */
    .orion.alive .spin{ animation: spin 22s linear infinite; }
    @keyframes spin{ to{ transform: rotate(360deg); } }
    @media (prefers-reduced-motion: reduce){
      .orion .spin{ animation: none !important; }
    }

    /* Responsive */
    @media (max-width: 940px){
      .panel{ right: clamp(12px, 3vw, 28px); left: auto; }
      .overlay{ inset: clamp(8px, 2.8vw, 18px); }
    }
  </style>

  <div class="topbar">
    <div class="brand"><span class="glyph" aria-hidden="true"></span> Quiet Orbit</div>
    <div class="theme-toggle" role="button" tabindex="0" aria-pressed="false" title="Toggle day/night">Toggle theme</div>
    <div class="dock" aria-label="Quick actions">
      <button class="btn primary play" aria-pressed="true" title="Play/Pause">Pause</button>
      <button class="ghost randomize" title="Shuffle">Shuffle</button>
    </div>
  </div>

  <div class="hero" aria-live="polite">
    <canvas class="sky" aria-hidden="true"></canvas>

    <div class="overlay" aria-label="Poster">
      <div style="position:absolute; inset:0; display:grid; place-items:center; pointer-events:none;">
        <svg class="spin" width="520" height="520" viewBox="0 0 520 520" aria-hidden="true">
          <defs>
            <linearGradient id="rg" x1="0%" y1="0%" x2="100%" y2="100%">
              <stop offset="0%" stop-color="var(--a)" />
              <stop offset="100%" stop-color="var(--b)" />
            </linearGradient>
          </defs>
          <g transform="translate(260 260)">
            <circle r="200" fill="none" stroke="url(#rg)" stroke-opacity=".35" stroke-width="2"/>
            <circle r="140" fill="none" stroke="url(#rg)" stroke-opacity=".25" stroke-width="2"/>
            <circle r="80"  fill="none" stroke="url(#rg)" stroke-opacity=".2"  stroke-width="2"/>
          </g>
        </svg>
      </div>
      <div>
        <h1>Orbital Index</h1>
        <p class="tag">A kinetic almanac of motion, light, and quiet timing.</p>
        <div class="cta">
          <button class="btn primary more">Add satellites</button>
          <button class="ghost notes">Design notes</button>
        </div>
      </div>
    </div>

    <div class="panel" aria-label="Orbit settings">
      <div class="glass range">
        <label for="count">Satellites</label>
        <input id="count" type="range" min="4" max="96" step="2" value="28" aria-valuemin="4" aria-valuemax="96" aria-valuenow="28" aria-label="Satellite count">
        <span class="val">28</span>
      </div>
      <div class="glass chips" role="radiogroup" aria-label="Palette">
        <div class="chip" role="radio" tabindex="0" aria-checked="true" data-p="neon" title="Neon" style="background:linear-gradient(135deg,hsl(200 90% 56%),hsl(285 85% 62%));"></div>
        <div class="chip" role="radio" tabindex="-1" aria-checked="false" data-p="coral" title="Coral" style="background:linear-gradient(135deg,hsl(14 90% 64%),hsl(340 80% 60%));"></div>
        <div class="chip" role="radio" tabindex="-1" aria-checked="false" data-p="lichen" title="Lichen" style="background:linear-gradient(135deg,hsl(90 50% 52%),hsl(160 70% 48%));"></div>
        <div class="chip" role="radio" tabindex="-1" aria-checked="false" data-p="iris" title="Iris" style="background:linear-gradient(135deg,hsl(250 85% 66%),hsl(200 85% 56%));"></div>
        <div class="chip" role="radio" tabindex="-1" aria-checked="false" data-p="gold" title="Gold" style="background:linear-gradient(135deg,hsl(44 92% 58%),hsl(14 90% 64%));"></div>
      </div>
    </div>
  </div>

  <div class="foot">
    <div class="quote">“Motion is meaning made visible.”</div>
    <div class="stamp">
      <span class="glyph" aria-hidden="true" style="width:10px;height:10px;box-shadow:none;"></span>
      <span id="last-updated">Last updated: 2025-11-30 02:16:28 EST</span>
    </div>
    <div class="hint">Tip: move the cursor—space toggles motion</div>
  </div>

  <script>
    (function(){
      const root = document.currentScript.closest('.orion');
      const canvas = root.querySelector('.sky');
      const ctx = canvas.getContext('2d', { alpha: true });
      const playBtn = root.querySelector('.play');
      const themeToggle = root.querySelector('.theme-toggle');
      const shuffleBtn = root.querySelector('.randomize');
      const moreBtn = root.querySelector('.more');
      const notesBtn = root.querySelector('.notes');
      const slider = root.querySelector('#count');
      const val = root.querySelector('.val');
      const chips = [...root.querySelectorAll('.chip')];
      const updated = root.querySelector('#last-updated');
      const overlay = root.querySelector('.overlay');
      const hero = root.querySelector('.hero');

      // timestamp
      function fmt(d){
        try{
          return new Intl.DateTimeFormat(undefined, { year:'numeric', month:'short', day:'2-digit', hour:'2-digit', minute:'2-digit', second:'2-digit', hour12:true }).format(d);
        }catch(e){ return d.toLocaleString(); }
      }
      updated.textContent = 'Last updated: ' + fmt(new Date());

      // palettes
      const palettes = {
        neon:   ['hsl(200 90% 56%)','hsl(285 85% 62%)'],
        coral:  ['hsl(14 90% 64%)','hsl(340 80% 60%)'],
        lichen: ['hsl(90 50% 52%)','hsl(160 70% 48%)'],
        iris:   ['hsl(250 85% 66%)','hsl(200 85% 56%)'],
        gold:   ['hsl(44 92% 58%)','hsl(14 90% 64%)']
      };
      function setPalette(name){
        const [a,b] = palettes[name] || palettes.neon;
        root.style.setProperty('--a', a);
        root.style.setProperty('--b', b);
        chips.forEach(c=>{
          const on = c.dataset.p === name;
          c.setAttribute('aria-checked', on?'true':'false');
          c.tabIndex = on? 0 : -1;
        });
      }
      chips.forEach(c=>{
        c.addEventListener('click', ()=> setPalette(c.dataset.p));
        c.addEventListener('keydown', (e)=>{
          if(e.key===' '||e.key==='Enter'){ e.preventDefault(); setPalette(c.dataset.p); }
          if(e.key==='ArrowRight'||e.key==='ArrowLeft'){
            const i = chips.findIndex(x=>x.getAttribute('aria-checked')==='true');
            const dir = e.key==='ArrowRight'?1:-1;
            const next = (i+dir+chips.length)%chips.length;
            chips[next].focus(); setPalette(chips[next].dataset.p);
          }
        });
      });
      setPalette('neon');

      // theme
      let night = true;
      function applyTheme(){ root.setAttribute('data-theme', night? 'night':'day'); }
      const toggleTheme = ()=>{ night = !night; applyTheme(); };
      themeToggle.addEventListener('click', toggleTheme);
      themeToggle.addEventListener('keydown', e=>{ if(e.key===' '||e.key==='Enter'){ e.preventDefault(); toggleTheme(); } });
      applyTheme();

      // motion
      let running = !window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      function setRunning(on){
        running = on;
        root.classList.toggle('alive', on);
        playBtn.textContent = on? 'Pause':'Play';
        playBtn.setAttribute('aria-pressed', on? 'true':'false');
        if(on) raf();
      }
      playBtn.addEventListener('click', ()=> setRunning(!running));
      setRunning(running);

      // slider
      function updVal(n){ slider.setAttribute('aria-valuenow', n); val.textContent = n; setup(+n); }
      slider.addEventListener('input', ()=>updVal(slider.value));

      // canvas sizing
      let dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
      function resize(){
        const r = canvas.getBoundingClientRect();
        canvas.width = Math.floor(r.width * dpr);
        canvas.height = Math.floor(r.height * dpr);
        ctx.setTransform(dpr,0,0,dpr,0,0);
      }
      const ro = new ResizeObserver(resize); ro.observe(canvas);
      resize();

      // pointer parallax
      const focus = { x: .5, y: .5, tx: .5, ty: .5 };
      hero.addEventListener('pointermove', (e)=>{
        const rect = hero.getBoundingClientRect();
        const nx = (e.clientX - rect.left)/rect.width;
        const ny = (e.clientY - rect.top)/rect.height;
        focus.tx = nx; focus.ty = ny;
        root.style.setProperty('--mx', (nx*100).toFixed(1)+'%');
        root.style.setProperty('--my', (ny*100).toFixed(1)+'%');
      }, {passive:true});
      hero.addEventListener('pointerleave', ()=>{ focus.tx = .5; focus.ty = .5; }, {passive:true});

      // system
      let stars = [];
      let sats = [];
      let rings = [80, 140, 200]; // base radii
      function seedStars(){
        const w = canvas.clientWidth, h = canvas.clientHeight;
        const n = Math.floor((w*h)/12000);
        stars = Array.from({length: n}, ()=>({
          x: Math.random()*w,
          y: Math.random()*h,
          z: Math.random()*1,
          s: Math.random()*1.2+0.2,
          tw: Math.random()*Math.PI*2
        }));
      }
      function setup(n){
        sats = [];
        const layers = rings.length;
        for(let i=0;i<n;i++){
          const ring = rings[i%layers];
          const dir = Math.random()<0.5? -1: 1;
          sats.push({
            r: ring + (Math.random()*8 - 4),
            a: Math.random()*Math.PI*2,
            v: (0.2 + Math.random()*0.8) * dir,
            size: 1.6 + Math.random()*2.2
          });
        }
      }
      seedStars();
      updVal(slider.value);

      // draw
      let t0 = performance.now();
      function draw(now){
        const w = canvas.clientWidth, h = canvas.clientHeight;
        ctx.clearRect(0,0,w,h);

        // background mist
        const isNight = root.dataset.theme === 'night';
        const bgGrad = ctx.createLinearGradient(0,0,0,h);
        bgGrad.addColorStop(0, isNight? 'rgba(10,13,20,0.65)':'rgba(246,249,255,0.65)');
        bgGrad.addColorStop(1, isNight? 'rgba(11,18,32,0.85)':'rgba(233,239,247,0.85)');
        ctx.fillStyle = bgGrad;
        ctx.fillRect(0,0,w,h);

        // ease focus
        focus.x += (focus.tx - focus.x) * 0.06;
        focus.y += (focus.ty - focus.y) * 0.06;

        // center with subtle parallax
        const cx = w*0.5 + (focus.x-0.5)*40;
        const cy = h*0.5 + (focus.y-0.5)*28;

        // stars
        const time = (now - t0)/1000;
        ctx.save();
        for(const st of stars){
          const tw = (Math.sin(time*1.2 + st.tw)*0.4+0.6);
          ctx.globalAlpha = 0.35*tw + 0.15;
          ctx.fillStyle = isNight? '#fff' : '#000';
          const px = st.x + (focus.x-0.5)*st.z*16;
          const py = st.y + (focus.y-0.5)*st.z*14;
          ctx.fillRect(px, py, st.s, st.s);
        }
        ctx.restore();
        ctx.globalAlpha = 1;

        // rings
        const gradA = getComputedStyle(root).getPropertyValue('--a').trim();
        const gradB = getComputedStyle(root).getPropertyValue('--b').trim();
        ctx.lineWidth = 1.5;
        for(let i=0;i<rings.length;i++){
          const r = rings[i];
          const g = ctx.createLinearGradient(cx-r, cy-r, cx+r, cy+r);
          g.addColorStop(0, gradA);
          g.addColorStop(1, gradB);
          ctx.strokeStyle = g;
          ctx.globalAlpha = 0.25 - i*0.04;
          ctx.beginPath();
          ctx.arc(cx,cy,r,0,Math.PI*2);
          ctx.stroke();
        }
        ctx.globalAlpha = 1;

        // satellites
        ctx.save();
        ctx.globalCompositeOperation = 'lighter';
        for(const s of sats){
          s.a += s.v * 0.005; // speed
          const x = cx + Math.cos(s.a)*s.r;
          const y = cy + Math.sin(s.a)*s.r;
          const rg = ctx.createRadialGradient(x,y,0, x,y, s.size*5);
          rg.addColorStop(0, gradA);
          rg.addColorStop(1, 'rgba(255,255,255,0)');
          ctx.fillStyle = rg;
          ctx.beginPath();
          ctx.arc(x,y, s.size*2.2, 0, Math.PI*2);
          ctx.fill();

          // core
          ctx.shadowColor = gradB;
          ctx.shadowBlur = 6;
          ctx.fillStyle = gradB;
          ctx.beginPath();
          ctx.arc(x,y, s.size, 0, Math.PI*2);
          ctx.fill();
          ctx.shadowBlur = 0;
        }
        ctx.restore();

        // pulse at center
        const pulse = 0.6 + Math.sin(time*1.4)*0.2;
        const core = ctx.createRadialGradient(cx,cy,0, cx,cy, rings[0]*pulse);
        core.addColorStop(0, isNight? 'rgba(255,255,255,.08)':'rgba(0,0,0,.06)');
        core.addColorStop(1, 'rgba(255,255,255,0)');
        ctx.fillStyle = core;
        ctx.beginPath();
        ctx.arc(cx, cy, rings[0]*pulse, 0, Math.PI*2);
        ctx.fill();

        // parallax tilt for overlay panel
        const rx = (focus.y - 0.5) * -10;
        const ry = (focus.x - 0.5) * 12;
        overlay.style.transform = `rotateX(${rx.toFixed(2)}deg) rotateY(${ry.toFixed(2)}deg) translateZ(40px)`;
      }

      let af;
      function raf(){
        if(!running) return;
        af = requestAnimationFrame(function step(ts){
          if(!running) return;
          draw(ts);
          af = requestAnimationFrame(step);
        });
      }
      if(running) raf();

      // resize events
      window.addEventListener('resize', ()=>{
        const newDpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
        if(newDpr !== dpr){ dpr = newDpr; }
        seedStars();
        resize();
        setup(+slider.value);
      });

      // shuffle / more
      shuffleBtn.addEventListener('click', ()=>{
        // random palette and random rings
        const i = Math.floor(Math.random()*chips.length);
        setPalette(chips[i].dataset.p);
        rings = [60 + Math.floor(Math.random()*40),
                 120 + Math.floor(Math.random()*60),
                 180 + Math.floor(Math.random()*80)].sort((a,b)=>a-b);
        setup(+slider.value);
      });
      moreBtn.addEventListener('click', ()=>{
        const n = Math.min(96, (+slider.value) + 6);
        slider.value = n; updVal(n);
      });

      notesBtn.addEventListener('click', ()=>{
        alert('Design notes: push contrast • simplify surfaces • make motion readable • color as cadence, not noise.');
      });

      // keyboard: space toggles play
      root.addEventListener('keydown', (e)=>{
        const targetOK = e.target === document.body || root.contains(e.target);
        if(e.key===' ' && targetOK){ e.preventDefault(); setRunning(!running); }
      });

      // init
      root.style.setProperty('--mx','70%'); root.style.setProperty('--my','20%');
    })();
  </script>
</section>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


