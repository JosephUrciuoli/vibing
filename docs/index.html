<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<div id="studio722" class="stringscape" data-theme="dawn" aria-label="Studio 722 Stringscape">
  <style>
    /* Studio 722 — scoped variables and base */
    #studio722 {
      --bg1: #f9f7f2;
      --bg2: #f1eee6;
      --ink: #1e2430;
      --muted: #5f6772;
      --ring: rgba(20, 24, 32, 0.08);
      --chip: rgba(255,255,255,0.65);
      --c1: #ff7a73;
      --c2: #ffcc6f;
      --c3: #3fd1b8;

      position: relative;
      isolation: isolate;
      color: var(--ink);
      border-radius: 26px;
      padding: clamp(18px, 3.6vw, 28px);
      background:
        radial-gradient(120% 120% at 20% 0%, rgba(255,255,255,0.9), transparent 50%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      border: 1px solid var(--ring);
      box-shadow:
        0 10px 30px rgba(0,0,0,0.10),
        inset 0 1px 0 rgba(255,255,255,0.65);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
      overflow: hidden;
    }
    #studio722::before {
      content: "";
      position: absolute;
      inset: 0;
      background:
        repeating-linear-gradient(90deg, rgba(255,255,255,0.06) 0 1px, transparent 1px 42px),
        linear-gradient(0deg, rgba(255,255,255,0.2), transparent 30% 70%, rgba(0,0,0,0.02));
      pointer-events: none;
      mix-blend-mode: soft-light;
      opacity: 0.6;
      z-index: 0;
    }

    /* Header */
    #studio722 .top {
      position: relative;
      z-index: 2;
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      gap: 12px;
      margin-bottom: clamp(10px, 2vw, 16px);
    }
    #studio722 .mark {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      font-size: 12px;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--muted);
      background: var(--chip);
      backdrop-filter: blur(8px);
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,0.06);
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,0.8),
        0 6px 20px rgba(0,0,0,0.06);
    }
    #studio722 .logo {
      width: 14px; height: 14px; border-radius: 50%;
      background: conic-gradient(var(--c1), var(--c2), var(--c3), var(--c1));
      box-shadow: 0 0 0 1px rgba(0,0,0,0.06) inset, 0 0 10px rgba(0,0,0,0.05);
      flex-shrink: 0;
    }
    #studio722 .modes {
      display: inline-flex; gap: 8px; padding: 4px;
      background: var(--chip);
      border: 1px solid rgba(0,0,0,0.06);
      border-radius: 999px;
      backdrop-filter: blur(8px);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.8);
    }
    #studio722 .mode {
      -webkit-tap-highlight-color: transparent;
      appearance: none;
      border: 0;
      cursor: pointer;
      padding: 8px 12px;
      border-radius: 999px;
      font-size: 13px;
      color: var(--ink);
      background:
        linear-gradient(180deg, rgba(255,255,255,0.85), rgba(255,255,255,0.55)) padding-box,
        linear-gradient(90deg, var(--c1), var(--c2), var(--c3)) border-box;
      background-clip: padding-box, border-box;
      border: 1px solid rgba(0,0,0,0.06);
      transition: transform 150ms ease, box-shadow 200ms ease, opacity 180ms ease;
    }
    #studio722 .mode:hover { transform: translateY(-1px); }
    #studio722 .mode[aria-pressed="true"] {
      box-shadow: 0 6px 20px color-mix(in oklab, var(--c2) 26%, transparent), inset 0 1px 0 rgba(255,255,255,0.9);
    }
    #studio722 .title {
      grid-column: 1 / -1;
      margin: 10px 0 0;
      line-height: 1.05;
      letter-spacing: -0.01em;
      font-weight: 700;
      font-size: clamp(28px, 5vw, 56px);
      background: linear-gradient(90deg, var(--c1), var(--c3));
      -webkit-background-clip: text; background-clip: text; color: transparent;
      filter: drop-shadow(0 8px 18px rgba(0,0,0,0.08));
    }
    #studio722 .sub {
      grid-column: 1 / -1;
      margin-top: 6px;
      color: var(--muted);
      font-size: clamp(13px, 1.6vw, 15px);
      max-width: 46ch;
    }

    /* Stage */
    #studio722 .stage {
      position: relative;
      z-index: 1;
      margin: clamp(12px, 2.8vw, 18px) 0;
      display: grid;
      place-items: center;
      min-height: 280px;
    }
    #studio722 .frame {
      position: relative;
      width: 100%;
      max-width: 980px;
      aspect-ratio: 16 / 9;
      border-radius: 22px;
      background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(255,255,255,0.6));
      border: 1px solid var(--ring);
      box-shadow:
        0 18px 40px rgba(0,0,0,0.12),
        inset 0 1px 0 rgba(255,255,255,0.9);
      overflow: hidden;
    }
    #studio722 canvas {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      display: block;
      filter: saturate(1.05) contrast(1.02);
    }
    #studio722 .hint {
      position: absolute;
      left: 14px;
      bottom: 12px;
      padding: 6px 10px;
      font-size: 12px;
      color: var(--muted);
      background: rgba(255,255,255,0.75);
      border: 1px solid rgba(0,0,0,0.06);
      border-radius: 999px;
      backdrop-filter: blur(6px);
    }

    /* Controls */
    #studio722 .controls {
      display: grid;
      grid-template-columns: 1fr 1fr auto;
      gap: 10px;
      margin-top: 14px;
      align-items: center;
    }
    @media (max-width: 760px) {
      #studio722 .controls { grid-template-columns: 1fr; }
    }
    #studio722 .ctl {
      background: var(--chip);
      border: 1px solid rgba(0,0,0,0.06);
      border-radius: 14px;
      padding: 10px 12px;
      backdrop-filter: blur(8px);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.85);
    }
    #studio722 .ctl label {
      display: flex;
      justify-content: space-between;
      gap: 10px;
      font-size: 12px;
      color: var(--muted);
      margin-bottom: 6px;
      letter-spacing: 0.04em;
      text-transform: uppercase;
    }
    #studio722 .ctl .val {
      color: var(--ink);
      font-variant-numeric: tabular-nums;
    }
    #studio722 input[type="range"] {
      width: 100%;
      -webkit-appearance: none; appearance: none;
      height: 10px; border-radius: 999px;
      background: linear-gradient(90deg, var(--c1), var(--c2), var(--c3));
      outline: none; border: 1px solid rgba(0,0,0,0.06);
    }
    #studio722 input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none; appearance: none;
      width: 18px; height: 18px; border-radius: 50%;
      background: #fff;
      border: 1px solid rgba(0,0,0,0.12);
      box-shadow: 0 2px 8px rgba(0,0,0,0.15);
      cursor: pointer;
    }
    #studio722 input[type="range"]::-moz-range-thumb {
      width: 18px; height: 18px; border: 1px solid rgba(0,0,0,0.12);
      background: #fff; border-radius: 50%; cursor: pointer;
    }
    #studio722 .play {
      -webkit-tap-highlight-color: transparent;
      appearance: none; border: 0; cursor: pointer;
      padding: 12px 16px; border-radius: 14px;
      color: var(--ink); font-weight: 600;
      background:
        linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.7)) padding-box,
        linear-gradient(90deg, var(--c1), var(--c2), var(--c3)) border-box;
      background-clip: padding-box, border-box;
      border: 1px solid rgba(0,0,0,0.06);
      box-shadow:
        0 8px 22px rgba(0,0,0,0.08),
        inset 0 1px 0 rgba(255,255,255,0.9);
      transition: transform 150ms ease, box-shadow 200ms ease;
    }
    #studio722 .play:hover { transform: translateY(-1px); }
    #studio722 .play[aria-pressed="true"] {
      box-shadow: 0 8px 26px color-mix(in oklab, var(--c3) 22%, transparent), inset 0 1px 0 rgba(255,255,255,1);
    }

    /* Footer */
    #studio722 .foot {
      display: flex; justify-content: space-between; align-items: center;
      margin-top: 14px; gap: 12px; color: var(--muted); font-size: 12px;
    }
    #studio722 .badge {
      display: inline-flex; align-items: center; gap: 8px;
    }
    #studio722 .swatch {
      width: 10px; height: 10px; border-radius: 50%;
      background: conic-gradient(var(--c1), var(--c2), var(--c3), var(--c1));
      border: 1px solid rgba(0,0,0,0.1);
      box-shadow: 0 0 10px color-mix(in oklab, var(--c2) 28%, transparent);
    }

    /* Themes */
    #studio722[data-theme="dawn"] {
      --bg1:#f9f7f2; --bg2:#f1eee6; --ink:#1e2430; --muted:#5f6772; --ring: rgba(20,24,32,0.10);
      --c1:#ff7a73; --c2:#ffcc6f; --c3:#3fd1b8;
    }
    #studio722[data-theme="dusk"] {
      --bg1:#0c1324; --bg2:#1a2138; --ink:#eef3ff; --muted:#a9b0c5; --ring: rgba(255,255,255,0.14);
      --chip: rgba(255,255,255,0.12);
      --c1:#7aa9ff; --c2:#ff7ac4; --c3:#74f0d5;
      color: var(--ink);
      background:
        radial-gradient(120% 120% at 80% -10%, rgba(255,255,255,0.12), transparent 50%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
    }
    #studio722[data-theme="mono"] {
      --bg1:#f6f6f6; --bg2:#eeeeee; --ink:#141414; --muted:#666; --ring: rgba(0,0,0,0.10);
      --c1:#111111; --c2:#777777; --c3:#cfcfcf;
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce) {
      #studio722 .mode, #studio722 .play { transition: none !important; }
    }
  </style>

  <div class="top">
    <div class="mark" aria-hidden="true"><span class="logo"></span>Studio 722 • Stringscape</div>
    <div class="modes" role="group" aria-label="Theme">
      <button class="mode" data-theme="dawn" aria-pressed="true">Dawn</button>
      <button class="mode" data-theme="dusk" aria-pressed="false">Dusk</button>
      <button class="mode" data-theme="mono" aria-pressed="false">Mono</button>
    </div>
    <h1 class="title">Let the air draw lines.</h1>
    <p class="sub">A kinetic drawing board. Move your pointer to stir the strings; tune threads and breeze to shape the flow.</p>
  </div>

  <div class="stage" role="img" aria-label="Flowing strings painting a living gradient">
    <div class="frame">
      <canvas id="strings-canvas"></canvas>
      <div class="hint">Drag to stir • Space to pause</div>
    </div>
  </div>

  <div class="controls">
    <div class="ctl">
      <label for="threads"><span>Threads</span><span class="val" id="threads-val">42</span></label>
      <input id="threads" type="range" min="10" max="120" value="42" step="1" />
    </div>
    <div class="ctl">
      <label for="breeze"><span>Breeze</span><span class="val" id="breeze-val">0.50</span></label>
      <input id="breeze" type="range" min="0" max="1" value="0.5" step="0.01" />
    </div>
    <button class="play" id="toggle" aria-pressed="true" title="Play/Pause">Pause</button>
  </div>

  <div class="foot">
    <div class="badge"><span class="swatch" aria-hidden="true"></span><span>Generative line study</span></div>
    <span id="last-updated">Last updated: 2025-11-18 11:24:56 EST</span>
  </div>

  <script>
    (function(){
      const root = document.getElementById('studio722');
      const canvas = root.querySelector('#strings-canvas');
      const ctx = canvas.getContext('2d');
      const themes = root.querySelectorAll('.mode');
      const threadsInput = root.querySelector('#threads');
      const breezeInput = root.querySelector('#breeze');
      const threadsVal = root.querySelector('#threads-val');
      const breezeVal = root.querySelector('#breeze-val');
      const toggle = root.querySelector('#toggle');
      const updated = root.querySelector('#last-updated');

      // Last updated (local, short TZ)
      try {
        const fmt = new Intl.DateTimeFormat([], {
          year:'numeric', month:'2-digit', day:'2-digit',
          hour:'2-digit', minute:'2-digit', second:'2-digit',
          timeZoneName:'short'
        });
        const parts = Object.fromEntries(fmt.formatToParts(new Date()).map(p=>[p.type,p.value]));
        updated.textContent = `Last updated: ${parts.year}-${parts.month}-${parts.day} ${parts.hour}:${parts.minute}:${parts.second} ${parts.timeZoneName||''}`.trim();
      } catch {
        updated.textContent = `Last updated: ${new Date().toLocaleString()}`;
      }

      // State
      let playing = true;
      let t = 0;
      let pointer = { x: 0.5, y: 0.5, active: false };
      let dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));

      function size() {
        const rect = canvas.parentElement.getBoundingClientRect();
        const w = Math.max(200, Math.floor(rect.width));
        const h = Math.max(160, Math.floor(rect.height));
        canvas.width = Math.floor(w * dpr);
        canvas.height = Math.floor(h * dpr);
        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
      }
      size();
      window.addEventListener('resize', size, { passive: true });

      function palette() {
        const cs = getComputedStyle(root);
        return [cs.getPropertyValue('--c1').trim(), cs.getPropertyValue('--c2').trim(), cs.getPropertyValue('--c3').trim()];
      }

      function gradient(w, h) {
        const [c1,c2,c3] = palette();
        const g = ctx.createLinearGradient(0, 0, w, 0);
        g.addColorStop(0, c1);
        g.addColorStop(0.5, c2);
        g.addColorStop(1, c3);
        return g;
      }

      function noise(n) {
        // lightweight pseudo-noise based on sine hash
        return Math.sin(n * 12.9898 + Math.cos(n * 78.233)) * 43758.5453 % 1;
      }

      function draw() {
        const w = canvas.width / dpr;
        const h = canvas.height / dpr;
        // backdrop
        ctx.clearRect(0, 0, w, h);
        const g = gradient(w, h);

        const threads = parseInt(threadsInput.value, 10);
        const breeze = parseFloat(breezeInput.value);
        const baseAmp = (h * 0.12) * (0.6 + breeze);
        const stepX = Math.max(2, w / 120);
        ctx.lineCap = 'round';

        for (let i = 0; i < threads; i++) {
          const f = i / (threads - 1 || 1);
          const phase = f * Math.PI * 2;
          const y0 = h * (0.15 + 0.7 * f);
          const amp = baseAmp * (0.25 + 0.75 * (0.5 - Math.abs(0.5 - f)));
          const freq = 0.002 + 0.004 * breeze + 0.002 * Math.sin(phase);
          // pointer influence
          const px = (pointer.x - 0.5);
          const py = (pointer.y - 0.5);
          ctx.beginPath();
          for (let x = 0; x <= w; x += stepX) {
            const n = Math.sin((x * freq) + t * (0.8 + breeze) + phase) +
                      0.5 * Math.sin((x * (freq*2.3)) - t * (0.6 + breeze*0.5) - phase) +
                      0.25 * Math.sin((x * (freq*3.7)) + t * 0.4 + i);
            const warp = (px * (x / w) + py * (1 - x / w)) * (20 + 60 * breeze);
            const y = y0 + n * amp + warp;
            if (x === 0) ctx.moveTo(x, y);
            else ctx.lineTo(x, y);
          }
          ctx.strokeStyle = g;
          ctx.globalAlpha = 0.35 + 0.45 * Math.pow(1 - Math.abs(f - 0.5) * 2, 1.5);
          ctx.lineWidth = 0.6 + 1.8 * (1 - Math.abs(f - 0.5));
          ctx.stroke();
        }
        ctx.globalAlpha = 1;
      }

      let rafId = null;
      const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      function loop() {
        if (!playing) return;
        t += 0.016;
        draw();
        rafId = requestAnimationFrame(loop);
      }

      function start() {
        if (!playing) { playing = true; toggle.setAttribute('aria-pressed','true'); toggle.textContent = 'Pause'; loop(); }
      }
      function stop() {
        playing = false;
        toggle.setAttribute('aria-pressed','false');
        toggle.textContent = 'Play';
        if (rafId) cancelAnimationFrame(rafId);
        draw();
      }

      if (prefersReduced) {
        playing = false;
        toggle.setAttribute('aria-pressed','false');
        toggle.textContent = 'Play';
        draw();
      } else {
        playing = true;
        toggle.setAttribute('aria-pressed','true');
        toggle.textContent = 'Pause';
        loop();
      }

      // Interactions
      function updatePointer(e) {
        const r = canvas.getBoundingClientRect();
        pointer.x = (e.clientX - r.left) / r.width;
        pointer.y = (e.clientY - r.top) / r.height;
        pointer.active = true;
      }
      canvas.addEventListener('pointermove', updatePointer);
      canvas.addEventListener('pointerdown', updatePointer);
      canvas.addEventListener('pointerleave', () => { pointer.active = false; });

      // Controls
      threadsInput.addEventListener('input', () => {
        threadsVal.textContent = threadsInput.value;
      });
      breezeInput.addEventListener('input', () => {
        breezeVal.textContent = parseFloat(breezeInput.value).toFixed(2);
      });

      toggle.addEventListener('click', () => {
        playing ? stop() : start();
      });

      // Keyboard
      root.tabIndex = 0;
      root.addEventListener('keydown', (e) => {
        if (e.code === 'Space') {
          e.preventDefault();
          playing ? stop() : start();
        }
        if (e.key === 'ArrowUp') { breezeInput.value = Math.min(1, parseFloat(breezeInput.value) + 0.02).toString(); breezeVal.textContent = parseFloat(breezeInput.value).toFixed(2); }
        if (e.key === 'ArrowDown') { breezeInput.value = Math.max(0, parseFloat(breezeInput.value) - 0.02).toString(); breezeVal.textContent = parseFloat(breezeInput.value).toFixed(2); }
      });

      // Theme switching
      themes.forEach(btn => {
        btn.addEventListener('click', () => {
          const theme = btn.getAttribute('data-theme');
          root.setAttribute('data-theme', theme);
          themes.forEach(b => b.setAttribute('aria-pressed', String(b === btn)));
          draw();
        });
      });

      // Initial readouts
      threadsVal.textContent = threadsInput.value;
      breezeVal.textContent = parseFloat(breezeInput.value).toFixed(2);
      draw();
    })();
  </script>
</div>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


