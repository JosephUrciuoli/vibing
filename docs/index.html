<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<section class="verse32" aria-label="Nocturne Garden — Iteration 32">
  <style>
    .verse32 {
      --ink: 220 20% 96%;
      --muted: 220 10% 78%;
      --bg-top: 224 42% 7%;
      --bg-bot: 264 50% 6%;
      --panel: 0 0% 100% / 0.06;
      --stroke: 0 0% 100% / 0.14;
      --accent1: 198 90% 60%;
      --accent2: 268 80% 62%;
      --glow: 42 95% 58%;
      --mx: 0; --my: 0;

      position: relative;
      min-height: min(86vh, 840px);
      padding: clamp(22px, 5.6vw, 60px);
      border-radius: 34px;
      color: hsl(var(--ink));
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji");
      overflow: hidden;
      background:
        radial-gradient(900px 600px at calc(70% + var(--mx)*18%) calc(-10% + var(--my)*-12%), hsl(210 90% 18% / 0.75), transparent 60%),
        radial-gradient(800px 540px at calc(18% + var(--mx)*-22%) calc(110% + var(--my)*10%), hsl(270 90% 18% / 0.75), transparent 60%),
        linear-gradient(180deg, hsl(var(--bg-top)), hsl(var(--bg-bot)));
      box-shadow: 0 40px 80px hsl(220 60% 3% / 0.6);
      backdrop-filter: saturate(110%);
      isolation: isolate;
    }

    /* Themes */
    .verse32[data-theme="dawn"] {
      --ink: 228 22% 16%;
      --muted: 228 12% 42%;
      --bg-top: 210 100% 97%;
      --bg-bot: 230 60% 94%;
      --panel: 0 0% 100% / 0.7;
      --stroke: 0 0% 0% / 0.12;
      --accent1: 198 90% 55%;
      --accent2: 42 95% 58%;
      background:
        radial-gradient(900px 600px at calc(18% + var(--mx)*-18%) -8%, hsl(198 100% 90% / 0.8), transparent 60%),
        radial-gradient(900px 600px at calc(90% + var(--mx)*14%) 108%, hsl(42 100% 88% / 0.7), transparent 60%),
        linear-gradient(180deg, hsl(var(--bg-top)), hsl(var(--bg-bot)));
    }
    .verse32[data-theme="dusk"] {
      --ink: 230 20% 96%;
      --muted: 230 10% 74%;
      --bg-top: 250 50% 12%;
      --bg-bot: 200 50% 10%;
      --panel: 0 0% 100% / 0.08;
      --stroke: 0 0% 100% / 0.14;
      --accent1: 274 85% 62%;
      --accent2: 198 90% 58%;
    }

    .verse32::after {
      /* subtle etched grid */
      content: "";
      position: absolute; inset: 0;
      pointer-events: none;
      opacity: 0.16;
      background:
        repeating-linear-gradient(90deg, transparent 0 39px, hsl(0 0% 100% / 0.08) 39px 40px),
        repeating-linear-gradient(0deg, transparent 0 39px, hsl(0 0% 100% / 0.08) 39px 40px);
      mix-blend-mode: overlay;
      mask: radial-gradient(80% 60% at 50% 40%, #000 55%, transparent 100%);
    }

    .verse32 .aura {
      position: absolute; inset: 0;
      z-index: 0;
    }
    .verse32 .aura .orb {
      position: absolute;
      width: clamp(160px, 24vw, 320px);
      aspect-ratio: 1;
      border-radius: 50%;
      filter: blur(30px);
      opacity: 0.45;
      transform:
        translate3d(calc(var(--mx)*26px), calc(var(--my)*-24px), 0)
        scale(1);
      transition: filter 300ms ease;
    }
    .verse32 .aura .o1 { top: -6%; left: -6%; background: radial-gradient(circle at 30% 30%, hsl(var(--accent1) / 0.9), transparent 60%); }
    .verse32 .aura .o2 { bottom: -8%; right: -8%; background: radial-gradient(circle at 70% 70%, hsl(var(--accent2) / 0.9), transparent 60%); }
    .verse32 .aura .o3 { top: 40%; left: 58%; background: radial-gradient(circle at 50% 50%, hsl(var(--glow) / 0.9), transparent 60%); }

    .verse32 .frame {
      position: relative; z-index: 2;
      width: min(1100px, 94%);
      margin-inline: auto;
      display: grid;
      grid-template-columns: 1.2fr 0.8fr;
      gap: clamp(18px, 6vw, 64px);
      align-items: center;
      background: linear-gradient(180deg, hsl(var(--panel)), hsl(var(--panel)));
      border: 1px solid hsl(var(--stroke));
      border-radius: 26px;
      backdrop-filter: blur(12px) saturate(130%);
      box-shadow:
        0 1px 0 hsl(0 0% 100% / 0.18) inset,
        0 24px 56px hsl(220 50% 3% / 0.35);
      transform:
        perspective(1200px)
        rotateX(calc(var(--my) * 6deg))
        rotateY(calc(var(--mx) * -6deg))
        translate3d(calc(var(--mx) * 10px), calc(var(--my) * 10px), 0);
      transition: transform 300ms cubic-bezier(.2,.8,.2,1);
    }

    .verse32 .copy { padding: clamp(14px, 2vw, 24px); }
    .verse32 .eyebrow {
      margin: 0 0 12px 0;
      font-size: 12px;
      letter-spacing: 0.2em; text-transform: uppercase;
      color: hsl(var(--muted));
    }
    .verse32 h1 {
      margin: 0 0 10px 0;
      font-size: clamp(32px, 7.8vw, 76px);
      letter-spacing: -0.02em;
      line-height: 1.02;
      background: linear-gradient(180deg, hsl(var(--ink)), hsl(var(--ink) / 0.75));
      -webkit-background-clip: text; background-clip: text; color: transparent;
    }
    .verse32 .glint {
      position: relative; display: inline-block;
    }
    .verse32 .glint::after {
      content: "";
      position: absolute; inset: 0;
      background: linear-gradient(120deg, transparent 40%, hsl(0 0% 100% / 0.6) 50%, transparent 60%);
      mix-blend-mode: overlay;
      transform: translateX(-120%) rotate(8deg);
      animation: glint 6s ease-in-out infinite;
    }
    @keyframes glint { 30% { transform: translateX(-120%) rotate(8deg); } 60% { transform: translateX(120%) rotate(8deg); } 100% { transform: translateX(120%) rotate(8deg); } }

    .verse32 .sub {
      margin: 0 0 20px 0;
      color: hsl(var(--muted));
      font-size: clamp(14px, 2.1vw, 18px);
      line-height: 1.6;
      text-wrap: balance;
    }

    .verse32 .toolbar {
      display: flex; flex-wrap: wrap; gap: 10px;
    }
    .verse32 .btn {
      appearance: none;
      border: 1px solid hsl(var(--stroke));
      background: linear-gradient(180deg, hsl(0 0% 100% / 0.9), hsl(0 0% 100% / 0.75));
      color: hsl(var(--ink));
      border-radius: 14px;
      padding: 12px 14px;
      font-weight: 600; font-size: 13px; letter-spacing: 0.2px;
      cursor: pointer;
      transition: transform 200ms cubic-bezier(.2,.8,.2,1), box-shadow 220ms, background 220ms, color 220ms, border-color 220ms;
      box-shadow: 0 8px 20px hsl(220 50% 3% / 0.2);
    }
    .verse32[data-theme="dusk"] .btn,
    .verse32:not([data-theme="dawn"]) .btn { background: hsl(0 0% 100% / 0.06); color: hsl(var(--ink)); }
    .verse32 .btn:hover { transform: translateY(-1px); }
    .verse32 .btn:active { transform: translateY(0); }
    .verse32 .btn[aria-pressed="true"] {
      border-color: transparent;
      color: #061018;
      background: linear-gradient(180deg, hsl(var(--accent1)), hsl(var(--accent2)));
      box-shadow: 0 12px 26px hsl(var(--accent2) / 0.28), 0 1px 0 hsl(0 0% 100% / 0.3) inset;
    }
    .verse32 .chips {
      display: flex; gap: 8px; margin-top: 12px; flex-wrap: wrap;
      color: hsl(var(--muted));
      font-size: 12px;
    }
    .verse32 .chip { border: 1px dashed hsl(var(--stroke)); border-radius: 999px; padding: 6px 10px; background: hsl(0 0% 100% / 0.06); }

    /* Orb module */
    .verse32 .viz { padding: clamp(10px, 2vw, 20px); display: grid; place-items: center; }
    .verse32 .orbsvg { width: min(520px, 44vw); height: auto; display: block; }
    .verse32 .ring-track { opacity: 0.2; }
    .verse32 .ring-progress { transition: stroke-dashoffset 600ms cubic-bezier(.2,.8,.2,1); }
    .verse32 .petal {
      fill: none;
      stroke: url(#v32g);
      stroke-width: 1.8;
      stroke-linecap: round;
      opacity: 0.9;
      filter: drop-shadow(0 2px 6px hsl(var(--accent1) / 0.3));
    }
    .verse32 .core { fill: hsl(0 0% 100% / 0.85); stroke: hsl(var(--stroke)); stroke-width: 1; }
    .verse32:not([data-theme="dawn"]) .core { fill: hsl(0 0% 100% / 0.06); }

    .verse32 .spin { transform-origin: 100px 100px; animation: turn32 24s linear infinite; }
    .verse32[data-theme="dawn"] .spin { animation-duration: 18s; }
    .verse32[data-theme="dusk"] .spin { animation-duration: 20s; }
    @keyframes turn32 { to { transform: rotate(360deg); } }

    /* Bottom dock */
    .verse32 .dock {
      z-index: 2;
      width: min(1100px, 94%);
      margin: 18px auto 0;
      display: flex; gap: 12px; justify-content: space-between; align-items: center;
      color: hsl(var(--muted));
      font-size: 12px;
    }
    .verse32 .meter {
      --pct: 72%;
      position: relative; flex: 1; height: 10px; border-radius: 999px;
      background: hsl(0 0% 100% / 0.08);
      border: 1px solid hsl(var(--stroke));
      overflow: hidden;
    }
    .verse32[data-theme="dawn"] .meter { background: hsl(0 0% 100% / 0.6); }
    .verse32 .meter span {
      position: absolute; inset: 0; width: var(--pct);
      background: linear-gradient(90deg, hsl(var(--accent1)), hsl(var(--accent2)));
      box-shadow: 0 0 12px hsl(var(--accent1) / 0.35);
    }

    /* Motion preferences */
    .verse32.still .spin,
    .verse32.still .glint::after { animation-play-state: paused; }
    @media (prefers-reduced-motion: reduce) {
      .verse32 .spin, .verse32 .glint::after { animation: none; }
      .verse32 .frame { transform: none !important; }
    }

    @media (max-width: 860px) {
      .verse32 .frame { grid-template-columns: 1fr; }
      .verse32 .viz { order: -1; }
      .verse32 .dock { flex-direction: column; align-items: stretch; }
    }
  </style>

  <div class="aura" aria-hidden="true">
    <div class="orb o1"></div>
    <div class="orb o2"></div>
    <div class="orb o3"></div>
  </div>

  <div class="frame" role="region" aria-label="Aether control surface">
    <div class="copy">
      <p class="eyebrow">Edition Thirty‑Two</p>
      <h1><span class="glint">Nocturne Garden</span></h1>
      <p class="sub">Quiet instruments for vivid minds. A calm stage where light breathes, time arcs, and motion answers to your touch.</p>

      <div class="toolbar" role="toolbar" aria-label="Theme and motion">
        <button class="btn" data-theme="dawn" aria-pressed="false">Dawn</button>
        <button class="btn" data-theme="dusk" aria-pressed="true">Dusk</button>
        <button class="btn" data-theme="midnight" aria-pressed="false">Midnight</button>
        <button class="btn" data-motion="toggle" aria-pressed="false" title="Toggle motion">Motion</button>
      </div>

      <div class="chips" aria-label="Principles">
        <span class="chip">Hushed contrast</span>
        <span class="chip">Measured motion</span>
        <span class="chip">Tactile light</span>
      </div>
    </div>

    <div class="viz" role="img" aria-label="Orbiting light sculpture">
      <svg class="orbsvg" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <defs>
          <linearGradient id="v32g" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="hsl(var(--accent1))"/>
            <stop offset="100%" stop-color="hsl(var(--accent2))"/>
          </linearGradient>
          <filter id="v32shadow" x="-50%" y="-50%" width="200%" height="200%">
            <feDropShadow dx="0" dy="1" stdDeviation="2" flood-color="rgba(0,0,0,.14)" flood-opacity="1"/>
          </filter>
        </defs>

        <g filter="url(#v32shadow)">
          <circle cx="100" cy="100" r="76" fill="none" stroke="hsl(0 0% 100% / 0.08)" stroke-width="2"/>
          <circle class="ring-track" cx="100" cy="100" r="70" fill="none" stroke="hsl(0 0% 100% / 0.12)" stroke-width="12" stroke-linecap="round"/>
          <circle class="ring-progress" cx="100" cy="100" r="70" fill="none" stroke="url(#v32g)" stroke-width="12" stroke-linecap="round" pathLength="1" stroke-dasharray="1" stroke-dashoffset="0.36"/>

          <g class="spin petals">
            <path class="petal" d="M100 22 C116 44, 140 68, 166 76" />
            <path class="petal" d="M100 22 C84 44, 60 68, 34 76" />
            <path class="petal" d="M178 100 C156 116, 132 140, 124 166" />
            <path class="petal" d="M22 100 C44 116, 68 140, 76 166" />
            <path class="petal" d="M100 178 C116 156, 140 132, 166 124" />
            <path class="petal" d="M100 178 C84 156, 60 132, 34 124" />
            <path class="petal" d="M178 100 C156 84, 132 60, 124 34" />
            <path class="petal" d="M22 100 C44 84, 68 60, 76 34" />
          </g>

          <g class="spin beads">
            <g transform="rotate(0 100 100)"><circle cx="100" cy="26" r="3" fill="hsl(var(--glow))"/></g>
            <g transform="rotate(45 100 100)"><circle cx="100" cy="26" r="2.2" fill="hsl(var(--accent1))"/></g>
            <g transform="rotate(90 100 100)"><circle cx="100" cy="26" r="2.8" fill="hsl(var(--accent2))"/></g>
            <g transform="rotate(135 100 100)"><circle cx="100" cy="26" r="2.4" fill="hsl(var(--accent1))"/></g>
            <g transform="rotate(180 100 100)"><circle cx="100" cy="26" r="2.9" fill="hsl(var(--accent2))"/></g>
            <g transform="rotate(225 100 100)"><circle cx="100" cy="26" r="2.1" fill="hsl(var(--accent1))"/></g>
            <g transform="rotate(270 100 100)"><circle cx="100" cy="26" r="2.6" fill="hsl(var(--accent2))"/></g>
            <g transform="rotate(315 100 100)"><circle cx="100" cy="26" r="2.3" fill="hsl(var(--glow))"/></g>
          </g>

          <circle class="core" cx="100" cy="100" r="12"/>
        </g>
      </svg>
    </div>
  </div>

  <div class="dock">
    <span id="last-updated">Last updated: 2025-10-18 02:23:30 EST</span>
    <div class="meter" aria-label="Calm level">
      <span style="width: 72%"></span>
    </div>
  </div>

  <script>
    (function () {
      const root = document.querySelector('.verse32');
      if (!root) return;

      // Initialize theme based on system preference
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
      root.setAttribute('data-theme', prefersDark ? 'dusk' : 'dawn');

      // Timestamp
      const stamp = root.querySelector('#last-updated');
      const now = new Date();
      try {
        const dt = new Intl.DateTimeFormat(undefined, { dateStyle: 'medium', timeStyle: 'short' }).format(now);
        const tz = new Intl.DateTimeFormat(undefined, { timeZoneName: 'short' }).format(now).split(' ').pop() || '';
        stamp.textContent = `Last updated: ${dt} ${tz}`;
      } catch {
        stamp.textContent = 'Last updated: ' + now.toLocaleString();
      }

      // Controls
      const themeBtns = root.querySelectorAll('.btn[data-theme]');
      const motionBtn = root.querySelector('.btn[data-motion="toggle"]');

      function setTheme(name) {
        root.setAttribute('data-theme', name);
        themeBtns.forEach(b => b.setAttribute('aria-pressed', b.dataset.theme === name ? 'true' : 'false'));
      }
      themeBtns.forEach(b => {
        b.addEventListener('click', () => setTheme(b.dataset.theme));
      });

      function toggleMotion() {
        const still = root.classList.toggle('still');
        motionBtn.setAttribute('aria-pressed', still ? 'false' : 'true');
      }
      motionBtn.addEventListener('click', toggleMotion);

      // Pointer parallax
      const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (!prefersReduced) {
        const move = (e) => {
          const r = root.getBoundingClientRect();
          const x = (e.clientX - r.left) / r.width - 0.5;
          const y = (e.clientY - r.top) / r.height - 0.5;
          root.style.setProperty('--mx', x.toFixed(3));
          root.style.setProperty('--my', y.toFixed(3));
        };
        root.addEventListener('pointermove', move);
        root.addEventListener('pointerleave', () => {
          root.style.setProperty('--mx', 0);
          root.style.setProperty('--my', 0);
        }, { passive: true });
      } else {
        root.classList.add('still');
      }

      // Breathing progress
      const prog = root.querySelector('.ring-progress');
      let raf = null, start = null;
      const base = prefersReduced ? 0.68 : 0.74;
      function frame(ts) {
        if (start == null) start = ts;
        const t = (ts - start) / 1000;
        const still = root.classList.contains('still');
        const speed = still ? 0.5 : 1.25;
        const amp = still ? 0.18 : 0.42;
        const p = prefersReduced ? base : (0.5 + amp * Math.sin(t * speed));
        const pct = Math.max(0.06, Math.min(0.96, p));
        prog.setAttribute('stroke-dashoffset', (1 - pct).toFixed(3));
        raf = requestAnimationFrame(frame);
      }
      if (!prefersReduced) {
        raf = requestAnimationFrame(frame);
        // gentle intro: start moving, then respect button state
        motionBtn.setAttribute('aria-pressed', 'true');
        setTimeout(() => { /* settle if user prefers */ }, 2400);
      } else {
        prog.setAttribute('stroke-dashoffset', (1 - base).toFixed(3));
        motionBtn.setAttribute('aria-pressed', 'false');
      }

      // Keyboard shortcuts for quick theme touring
      root.addEventListener('keydown', (e) => {
        if (!['ArrowRight','ArrowLeft'].includes(e.key)) return;
        const order = ['dawn','dusk','midnight'];
        const cur = root.getAttribute('data-theme');
        let idx = order.indexOf(cur);
        idx = e.key === 'ArrowRight' ? (idx + 1) % order.length : (idx - 1 + order.length) % order.length;
        setTheme(order[idx]);
      });

      // Cleanup
      window.addEventListener('pagehide', () => { if (raf) cancelAnimationFrame(raf); }, { once: true });
    })();
  </script>
</section>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


