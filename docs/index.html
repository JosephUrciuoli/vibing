<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<section class="vibe659" data-theme="dawn" data-motion="on" role="region" aria-label="Orrery — kinetic clockwork">
  <style>
    .vibe659 {
      --mx: 0; --my: 0;
      --r: 28px;
      --ink: 28,32,40;
      --muted: 110,115,130;
      --bg1: 42 42% 95%;
      --bg2: 210 60% 98%;
      --p1: 24 92% 58%;
      --p2: 200 90% 52%;
      --p3: 285 80% 60%;
      --halo: 48 100% 88%;
      position: relative;
      border-radius: var(--r);
      padding: clamp(18px, 3vmin, 32px);
      color: rgb(var(--ink));
      background:
        radial-gradient(120% 130% at calc(12% + 8%*var(--mx)) calc(0% + 10%*var(--my)), hsl(var(--halo)/.55), transparent 60%),
        radial-gradient(110% 120% at 82% 90%, hsl(var(--p2)/.13), transparent 60%),
        linear-gradient(180deg, hsl(var(--bg2)), hsl(var(--bg1)));
      box-shadow: inset 0 1px 0 rgba(255,255,255,.6), 0 30px 80px rgba(10,20,30,.10);
      font-family: ui-sans-serif, system-ui, -apple-system, "SF Pro Display", "Segoe UI", Inter, Roboto, Helvetica, Arial;
      overflow: clip;
      isolation: isolate;
    }
    .vibe659 .noise {
      position: absolute; inset: -12px; pointer-events: none; z-index: 0; opacity: .06; mix-blend-mode: multiply;
      background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="180" height="180"><filter id="n"><feTurbulence baseFrequency=".85" numOctaves="2" type="fractalNoise"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity=".9"/></svg>');
    }
    .vibe659 .sheen {
      position: absolute; inset: -30%; z-index: 0; pointer-events: none;
      filter: blur(40px) saturate(140%);
      opacity: .55;
      background:
        conic-gradient(from 180deg at 50% 50%, hsl(var(--p1)/.22), transparent 18%, hsl(var(--p2)/.22), transparent 48%, hsl(var(--p3)/.22), transparent 78%, hsl(var(--p1)/.22));
      animation: v659-spin 36s linear infinite;
    }
    @keyframes v659-spin { to { transform: rotate(360deg); } }

    .vibe659 .top {
      position: relative; z-index: 2;
      display: grid; grid-template-columns: 1fr auto; gap: 12px; align-items: center; margin-bottom: 12px;
    }
    .vibe659 .brand {
      display: inline-flex; align-items: center; gap: 12px;
      padding: 10px 14px; border-radius: 999px;
      color: rgba(var(--ink), .72);
      background: linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.6));
      border: 1px solid rgba(0,0,0,.06);
      box-shadow: 0 8px 24px rgba(20,20,20,.06), inset 0 1px 0 rgba(255,255,255,.9);
      letter-spacing: .16em; text-transform: uppercase; font-size: 11px; font-weight: 800;
      backdrop-filter: blur(8px) saturate(120%);
    }
    .vibe659 .pip {
      width: 10px; height: 10px; border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, hsl(var(--p2)), hsl(var(--p1)));
      box-shadow: 0 0 8px hsl(var(--p2)/.6), 0 0 18px hsl(var(--p1)/.4);
      animation: v659-pulse 2.2s ease-in-out infinite;
    }
    @keyframes v659-pulse { 0%,100%{ transform: scale(1)} 50%{ transform: scale(1.18)} }

    .vibe659 .actions { display: flex; gap: 10px; align-items: center; }
    .vibe659 .btn {
      appearance: none; cursor: pointer; user-select: none;
      border-radius: 12px; border: 1px solid rgba(0,0,0,.08);
      padding: 9px 12px; font-weight: 800; font-size: 12px; letter-spacing: .02em;
      color: rgb(var(--ink));
      background: linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.62));
      box-shadow: 0 10px 22px rgba(10,20,30,.10), inset 0 1px 0 rgba(255,255,255,.9);
      transition: transform .16s ease, box-shadow .16s ease, background .16s ease;
      backdrop-filter: blur(6px) saturate(120%);
    }
    .vibe659 .btn:hover { transform: translateY(-1px); box-shadow: 0 16px 34px rgba(10,20,30,.16); }
    .vibe659 .btn.primary {
      background:
        linear-gradient(180deg, hsl(var(--p1)/.28), hsl(var(--p2)/.28)),
        linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.62));
      color: #fff;
      text-shadow: 0 1px 0 rgba(0,0,0,.15);
      border-color: hsl(var(--p1)/.45);
      box-shadow: 0 12px 28px hsl(var(--p1)/.32), inset 0 1px 0 rgba(255,255,255,.6);
    }

    .vibe659 h1 {
      position: relative; z-index: 2;
      margin: 2px 0 0;
      font-size: clamp(34px, 7.2vw, 82px);
      font-weight: 900; letter-spacing: -0.02em; line-height: 1.02;
      color: transparent;
      background: linear-gradient(90deg, rgba(0,0,0,.8), hsl(var(--p1)) 35%, hsl(var(--p2)) 55%, hsl(var(--p3)) 75%, rgba(0,0,0,.8)) 0 50% / 220% 100% no-repeat;
      -webkit-background-clip: text; background-clip: text;
      text-wrap: balance;
    }
    .vibe659 .sub {
      margin: 10px 0 16px; color: rgba(var(--ink),.68); font-size: 14.5px; max-width: 72ch;
    }

    .vibe659 .stage {
      position: relative; z-index: 1;
      height: clamp(380px, 56vmin, 700px);
      border-radius: 24px;
      background:
        radial-gradient(140% 70% at 50% 120%, rgba(255,255,255,.75), transparent 60%),
        repeating-linear-gradient(0deg, rgba(0,0,0,.04) 0 1px, transparent 1px 28px),
        rgba(255,255,255,.6);
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: 0 30px 80px rgba(10,20,30,.12), inset 0 1px 0 rgba(255,255,255,.65);
      overflow: hidden;
      transform: perspective(1000px) rotateX(calc(var(--my)*6deg)) rotateY(calc(var(--mx)*-6deg));
      transition: transform .2s ease;
    }

    .vibe659 .dial {
      position: absolute; inset: 0; pointer-events: none;
      background:
        radial-gradient(circle at 50% 50%, transparent 42%, rgba(0,0,0,.05) 43% 44%, transparent 45%),
        repeating-conic-gradient(from 0deg, rgba(0,0,0,.06) 0 2deg, transparent 2deg 6deg);
      opacity: .45;
      mix-blend-mode: multiply;
    }

    .vibe659 svg.orrery {
      position: absolute; inset: 0; width: 100%; height: 100%;
      filter: saturate(115%) contrast(105%);
    }

    .vibe659 .grid { position: absolute; inset: 0; opacity: .12; pointer-events: none;
      background: radial-gradient(60% 60% at 50% 50%, rgba(0,0,0,.06), transparent 70%);
      mix-blend-mode: multiply;
    }

    .vibe659 .divider { height: 1px; width: 100%; margin: 14px 0; background: linear-gradient(90deg, transparent, rgba(0,0,0,.12), transparent); }

    .vibe659 .dock {
      position: relative; z-index: 2;
      display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 12px; margin-top: 10px;
      color: rgba(var(--ink),.72); font-size: 12px;
    }
    .vibe659 .controls { display: flex; flex-wrap: wrap; gap: 10px; align-items: center; }
    .vibe659 .swatch {
      width: 26px; height: 26px; border-radius: 999px;
      border: 1px solid rgba(0,0,0,.08); cursor: pointer;
      background: var(--c,#ddd);
      box-shadow: 0 10px 22px rgba(10,20,30,.10), inset 0 1px 0 rgba(255,255,255,.8);
      transition: transform .15s ease, box-shadow .15s ease;
    }
    .vibe659 .swatch:hover { transform: translateY(-2px) scale(1.05); box-shadow: 0 16px 30px rgba(10,20,30,.16), inset 0 1px 0 rgba(255,255,255,.9); }
    .vibe659 .swatch:focus-visible { outline: 2px solid hsl(var(--p1)/.6); outline-offset: 2px; }

    .vibe659 .chip {
      padding: 8px 10px; border-radius: 999px; border: 1px solid rgba(0,0,0,.08);
      background: rgba(255,255,255,.75); color: rgba(var(--ink),.72); font-weight: 700;
      box-shadow: 0 10px 22px rgba(10,20,30,.10), inset 0 1px 0 rgba(255,255,255,.9);
      backdrop-filter: blur(6px) saturate(120%);
    }
    .vibe659 label.range {
      display: inline-flex; align-items: center; gap: 10px; font-weight: 800; letter-spacing: .02em;
      padding: 8px 10px; border: 1px solid rgba(0,0,0,.08); border-radius: 12px;
      background: rgba(255,255,255,.75); box-shadow: inset 0 1px 0 rgba(255,255,255,.9);
      backdrop-filter: blur(6px);
    }
    .vibe659 input[type="range"] {
      appearance: none; width: 160px; height: 28px; background: transparent;
    }
    .vibe659 input[type="range"]::-webkit-slider-runnable-track {
      height: 6px; border-radius: 999px; background: linear-gradient(90deg, hsl(var(--p1)/.9), hsl(var(--p2)/.9));
    }
    .vibe659 input[type="range"]::-webkit-slider-thumb {
      appearance: none; width: 16px; height: 16px; border-radius: 50%;
      background: white; border: 1px solid rgba(0,0,0,.12); margin-top: -5px;
      box-shadow: 0 8px 16px rgba(10,20,30,.15);
    }
    .vibe659 input[type="range"]::-moz-range-track {
      height: 6px; border-radius: 999px; background: linear-gradient(90deg, hsl(var(--p1)/.9), hsl(var(--p2)/.9));
    }
    .vibe659 input[type="range"]::-moz-range-thumb {
      width: 16px; height: 16px; border: 1px solid rgba(0,0,0,.12); border-radius: 50%; background: white;
      box-shadow: 0 8px 16px rgba(10,20,30,.15);
    }

    /* Themes */
    .vibe659[data-theme="dawn"]    { --ink: 28,32,40;  --muted: 110,115,130; --bg1: 42 42% 95%;  --bg2: 210 60% 98%; --p1: 18 90% 56%;  --p2: 200 90% 52%; --p3: 285 80% 60%; --halo: 50 100% 88%; }
    .vibe659[data-theme="noon"]    { --ink: 18,22,28;  --muted: 104,110,124; --bg1: 210 60% 98%; --bg2: 200 60% 97%; --p1: 190 90% 46%; --p2: 220 90% 52%; --p3: 260 80% 60%; --halo: 210 100% 92%; }
    .vibe659[data-theme="dusk"]    { --ink: 245,245,248; --muted: 206,200,210; --bg1: 265 38% 16%; --bg2: 300 32% 22%; --p1: 18 100% 64%; --p2: 330 90% 66%; --p3: 260 100% 68%; --halo: 300 100% 86%; }
    .vibe659[data-theme="midnight"]{ --ink: 236,242,252; --muted: 186,194,206; --bg1: 220 18% 8%;  --bg2: 240 20% 12%; --p1: 210 100% 60%; --p2: 260 100% 64%; --p3: 190 90% 62%; --halo: 210 100% 80%; }
    .vibe659[data-theme="mono"]    { --ink: 26,26,26;   --muted: 120,120,120; --bg1: 220 8% 94%;  --bg2: 220 6% 98%;  --p1: 220 8% 40%;  --p2: 220 6% 50%;  --p3: 220 4% 60%;  --halo: 220 30% 90%; }

    /* Motion respect */
    .vibe659[data-motion="off"] .sheen { animation-play-state: paused; }
    @media (prefers-reduced-motion: reduce) {
      .vibe659, .vibe659 * { animation: none !important; transition: none !important; }
      .vibe659 { --mx: 0; --my: 0; }
    }

    @media (max-width: 820px) {
      .vibe659 .stage { height: clamp(320px, 60vmin, 560px); }
      .vibe659 label.range { width: 100%; justify-content: space-between; }
    }
  </style>

  <div class="noise" aria-hidden="true"></div>
  <div class="sheen" aria-hidden="true"></div>

  <div class="top">
    <span class="brand"><span class="pip" aria-hidden="true"></span> Iteration 659 • Orrery</span>
    <div class="actions">
      <button class="btn primary" data-action="motion" aria-pressed="true" title="Toggle motion">Pause motion</button>
      <button class="btn" data-action="theme" title="Shuffle colorway">Theme</button>
      <button class="btn" data-action="export" title="Export SVG poster">Export</button>
    </div>
  </div>

  <h1 aria-live="polite">Clockwork light. Gravity you can feel.</h1>
  <p class="sub">An interactive orrery: orbiting bodies, soft halos, and a dial that tilts as you move. Slide tempo, change the sky.</p>

  <div class="stage" role="img" aria-label="Generative orbital system with concentric rings and moving planets">
    <div class="dial" aria-hidden="true"></div>
    <svg class="orrery" viewBox="0 0 1000 1000" aria-hidden="true">
      <defs>
        <radialGradient id="v659-glow" cx="50%" cy="50%" r="50%">
          <stop offset="0%" stop-color="white" stop-opacity="0.9"/>
          <stop offset="60%" stop-color="white" stop-opacity="0.15"/>
          <stop offset="100%" stop-color="white" stop-opacity="0"/>
        </radialGradient>
        <filter id="v659-soft">
          <feGaussianBlur stdDeviation="6" result="b"/>
          <feMerge>
            <feMergeNode in="b"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
      </defs>
      <g id="v659-rings" stroke-linecap="round" stroke-linejoin="round"></g>
      <g id="v659-planets" filter="url(#v659-soft)"></g>
      <g id="v659-center"></g>
    </svg>
    <div class="grid" aria-hidden="true"></div>
  </div>

  <div class="divider" aria-hidden="true"></div>

  <div class="dock">
    <div class="controls" role="group" aria-label="Themes">
      <button class="swatch" data-theme="dawn"     style="--c:conic-gradient(#ffb371,#5ed7ff,#d2b3ff)"></button>
      <button class="swatch" data-theme="noon"     style="--c:conic-gradient(#22d3ee,#60a5fa,#a78bfa)"></button>
      <button class="swatch" data-theme="dusk"     style="--c:conic-gradient(#ff7a59,#ff6ac1,#7c6cff)"></button>
      <button class="swatch" data-theme="midnight" style="--c:conic-gradient(#60a5fa,#7c3aed,#22c1c3)"></button>
      <button class="swatch" data-theme="mono"     style="--c:conic-gradient(#cfcfcf,#9a9a9a,#e5e5e5)"></button>
      <span class="chip">Mode: clockwork</span>
      <span class="chip">Rings: 6</span>
    </div>
    <label class="range" for="tempo">
      Tempo
      <input id="tempo" type="range" min="10" max="200" value="110" aria-label="Orbital speed">
    </label>
  </div>

  <div class="divider" aria-hidden="true"></div>

  <div class="dock">
    <span id="last-updated">Last updated: 2025-11-15 14:12:23 EST</span>
    <span class="chip">Tip: drag your pointer over the dial, try Export.</span>
  </div>

  <script>
    (function () {
      const root = document.currentScript.closest('.vibe659');
      const svg = root.querySelector('svg.orrery');
      const ringsG = svg.querySelector('#v659-rings');
      const planetsG = svg.querySelector('#v659-planets');
      const centerG = svg.querySelector('#v659-center');
      const title = root.querySelector('h1');
      const tempo = root.querySelector('#tempo');

      // Last updated
      const lu = root.querySelector('#last-updated');
      const now = new Date();
      try {
        lu.textContent = 'Last updated: ' + now.toLocaleString(undefined, { dateStyle: 'medium', timeStyle: 'short' });
      } catch (e) {
        lu.textContent = 'Last updated: ' + now.toString();
      }

      // Parallax
      function onPointer(e) {
        const r = root.getBoundingClientRect();
        const x = (e.clientX - r.left) / r.width - 0.5;
        const y = (e.clientY - r.top) / r.height - 0.5;
        root.style.setProperty('--mx', x.toFixed(3));
        root.style.setProperty('--my', y.toFixed(3));
      }
      root.addEventListener('mousemove', onPointer);
      root.addEventListener('mouseleave', () => { root.style.setProperty('--mx', 0); root.style.setProperty('--my', 0); });

      // Theme palettes for planets
      const THEMES = {
        dawn:     ['#ffb371','#5ed7ff','#a78bfa','#ffd166','#60f1d1','#f0abfc'],
        noon:     ['#22d3ee','#60a5fa','#34d399','#a78bfa','#fbbf24','#67e8f9'],
        dusk:     ['#ff7a59','#ff6ac1','#7c6cff','#ffd166','#22d3ee','#f0abfc'],
        midnight: ['#60a5fa','#7c3aed','#22c1c3','#93c5fd','#c084fc','#22d3ee'],
        mono:     ['#a3a3a3','#737373','#d4d4d4','#9ca3af','#bdbdbd','#e5e7eb']
      };

      function size() {
        // Responsive viewBox stays 1000; nothing to do here yet
      }
      addEventListener('resize', size, { passive: true });

      // Build rings and planets
      let bodies = [];
      function build() {
        ringsG.innerHTML = '';
        planetsG.innerHTML = '';
        centerG.innerHTML = '';

        const palette = THEMES[root.dataset.theme] || THEMES.dawn;
        const cx = 500, cy = 500;
        const ringCount = 6;
        const base = 110;
        const radii = Array.from({length: ringCount}, (_, i) => 120 + i * 70);
        const widths = radii.map((r, i) => i === 0 ? 2.5 : 2);
        const speeds = radii.map((r, i) => (0.00015 + i * 0.00006) * (Math.random() * 0.4 + 0.8));
        const sizes  = radii.map((r, i) => 6 + i * 2);

        // Center star + glow
        const glow = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        glow.setAttribute('cx', cx); glow.setAttribute('cy', cy); glow.setAttribute('r', '80');
        glow.setAttribute('fill', 'url(#v659-glow)');
        glow.setAttribute('opacity', '0.8');
        centerG.appendChild(glow);
        const star = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        star.setAttribute('cx', cx); star.setAttribute('cy', cy); star.setAttribute('r', '6');
        star.setAttribute('fill', 'hsl(' + getComputedStyle(root).getPropertyValue('--p1') + ')');
        centerG.appendChild(star);

        // Rings
        radii.forEach((r, i) => {
          const c = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
          c.setAttribute('cx', cx); c.setAttribute('cy', cy); c.setAttribute('r', r);
          c.setAttribute('fill', 'none');
          c.setAttribute('stroke', i % 2 ? 'rgba(0,0,0,.22)' : 'rgba(0,0,0,.14)');
          c.setAttribute('stroke-width', widths[i]);
          c.setAttribute('opacity', i === 0 ? '0.5' : '0.35');
          ringsG.appendChild(c);
        });

        // Planets
        bodies = radii.map((r, i) => {
          const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
          const hue = palette[i % palette.length];
          circle.setAttribute('r', sizes[i]);
          circle.setAttribute('fill', hue);
          circle.setAttribute('stroke', 'rgba(255,255,255,.65)');
          circle.setAttribute('stroke-width', '1');
          circle.setAttribute('opacity', '0.95');
          planetsG.appendChild(circle);
          return { el: circle, r, size: sizes[i], a: Math.random() * Math.PI * 2, w: speeds[i], hue };
        });

        // A subtle comet that drifts across
        const comet = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
        comet.setAttribute('r', '3');
        comet.setAttribute('fill', palette[(palette.length-1)]);
        comet.setAttribute('opacity', '0.85');
        planetsG.appendChild(comet);
        bodies.push({ el: comet, r: 460, size: 3, a: Math.random() * Math.PI * 2, w: 0.00028, hue: palette[(palette.length-1)], eccentric: 0.2 });

      }
      build();

      // Controls
      const motionBtn = root.querySelector('[data-action="motion"]');
      function setMotion(on) {
        root.dataset.motion = on ? 'on' : 'off';
        motionBtn.setAttribute('aria-pressed', String(on));
        motionBtn.textContent = on ? 'Pause motion' : 'Resume motion';
      }
      motionBtn.addEventListener('click', () => setMotion(root.dataset.motion !== 'on'));
      if (matchMedia && matchMedia('(prefers-reduced-motion: reduce)').matches) setMotion(false);

      const themeBtn = root.querySelector('[data-action="theme"]');
      const order = ['dawn','noon','dusk','midnight','mono'];
      themeBtn.addEventListener('click', () => {
        const i = order.indexOf(root.dataset.theme);
        applyTheme(order[(i + 1) % order.length]);
      });
      root.querySelectorAll('.swatch').forEach(s => s.addEventListener('click', () => applyTheme(s.dataset.theme)));
      function applyTheme(t) {
        root.dataset.theme = t;
        build();
        title.animate([{ letterSpacing: '-0.02em' }, { letterSpacing: '0.00em' }, { letterSpacing: '-0.02em' }], { duration: 420, easing: 'cubic-bezier(.2,.8,.2,1)' });
      }

      // Export SVG
      root.querySelector('[data-action="export"]').addEventListener('click', () => {
        try {
          const clone = svg.cloneNode(true);
          const svgDoc = new XMLSerializer().serializeToString(clone);
          const blob = new Blob([svgDoc], { type: 'image/svg+xml;charset=utf-8' });
          const url = URL.createObjectURL(blob);
          const a = document.createElement('a');
          a.href = url;
          a.download = 'orrery.svg';
          a.click();
          setTimeout(() => URL.revokeObjectURL(url), 500);
        } catch (_) {}
      });

      // Animate
      let t0 = performance.now();
      function tick(ts) {
        const dt = ts - t0; t0 = ts;
        if (root.dataset.motion === 'on') {
          const speed = ((parseFloat(tempo.value) || 100) / 100);
          const cx = 500, cy = 500;
          const mx = parseFloat(getComputedStyle(root).getPropertyValue('--mx')) || 0;
          const my = parseFloat(getComputedStyle(root).getPropertyValue('--my')) || 0;

          for (let b of bodies) {
            b.a += (b.w * dt * speed);
            const e = b.eccentric || 0;
            const rX = b.r * (1 + e);
            const rY = b.r * (1 - e);
            const x = cx + Math.cos(b.a) * rX + mx * 60;
            const y = cy + Math.sin(b.a) * rY + my * 60;
            b.el.setAttribute('cx', x.toFixed(2));
            b.el.setAttribute('cy', y.toFixed(2));

            // subtle trailing highlight
            b.el.setAttribute('filter', 'url(#v659-soft)');
          }

          // Title shimmer
          title.style.backgroundPosition = ((ts * 0.04) % 220) + '% 50%';
        }
        requestAnimationFrame(tick);
      }
      requestAnimationFrame(tick);

      // Accessibility: pause if hidden
      document.addEventListener('visibilitychange', () => { if (document.hidden) setMotion(false); });
    })();
  </script>
</section>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


