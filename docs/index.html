<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<section id="vibe1791" aria-label="Aurora Atlas · Vibe 1791">
  <style>
    /* AURORA ATLAS — scoped to #vibe1791 */
    #vibe1791{
      --paper: #f6f7fb;
      --paper-2: #eaf0ff;
      --ink: #0b1320;
      --muted: #5b6a85;
      --ring: rgba(12,20,35,0.14);

      --c1: #7f9bff;
      --c2: #a7f3d0;
      --c3: #ffc3a0;
      --c4: #ffa2d5;
      --c5: #9ef0ff;

      --tilt-x: 0deg;
      --tilt-y: 0deg;

      position: relative;
      padding: clamp(22px, 5vw, 64px);
      border-radius: 32px;
      color: var(--ink);
      background:
        radial-gradient(120% 160% at 20% 0%, rgba(255,255,255,0.7), transparent 58%),
        radial-gradient(140% 140% at 100% 100%, rgba(168, 204, 255, 0.25), transparent 52%),
        conic-gradient(from 180deg at 80% 10%, rgba(255,255,255,0.6), rgba(255,255,255,0) 20% 60%, rgba(255,255,255,0.5) 85%, rgba(255,255,255,0) 100%),
        linear-gradient(180deg, #ffffff, var(--paper));
      box-shadow:
        inset 0 0 0 1px rgba(255,255,255,0.6),
        0 50px 140px rgba(15, 30, 70, 0.18);
      color-scheme: light;
      overflow: clip;
      isolation: isolate;
      perspective: 1400px;
    }

    /* Header */
    #vibe1791 .mast{
      display: grid;
      grid-template-columns: 1fr auto;
      align-items: center;
      gap: 14px;
    }
    #vibe1791 .brand{
      display: inline-grid;
      grid-auto-flow: column;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      border-radius: 18px;
      border: 1px solid var(--ring);
      background:
        linear-gradient(180deg, rgba(255,255,255,0.75), rgba(240,245,255,0.65));
      backdrop-filter: blur(8px) saturate(120%);
      box-shadow: 0 14px 40px rgba(10,20,40,0.12);
      font: 800 11px/1 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      letter-spacing: 0.16em;
      text-transform: uppercase;
      color: var(--muted);
    }
    #vibe1791 .crest{
      width: 18px; height: 18px; border-radius: 999px; position: relative; overflow: hidden;
      background: radial-gradient(65% 65% at 50% 45%, #fff, rgba(255,255,255,0.1));
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.8), 0 8px 16px rgba(25,40,80,0.2);
    }
    #vibe1791 .crest::after{
      content: ""; position: absolute; inset: -40%;
      background: conic-gradient(from 0deg, var(--c1), var(--c5), var(--c3), var(--c4), var(--c2), var(--c1));
      filter: blur(6px) saturate(120%); animation: v1791_spin 12s linear infinite;
    }
    @keyframes v1791_spin{ to{ transform: rotate(360deg);} }

    #vibe1791 .tools{ display: inline-flex; gap: 8px; flex-wrap: wrap; justify-self: end; }
    #vibe1791 .chip{
      appearance: none; cursor: pointer;
      border: 1px solid var(--ring);
      border-radius: 999px;
      padding: 10px 14px;
      background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(245,248,255,0.7));
      color: var(--ink);
      font: 800 11px/1 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      letter-spacing: 0.14em; text-transform: uppercase;
      box-shadow: 0 12px 28px rgba(10,25,60,0.10);
      transition: transform 140ms ease, box-shadow 220ms ease, border-color 220ms ease, background 220ms ease, color 220ms ease, opacity 220ms ease;
    }
    #vibe1791 .chip:hover{ transform: translateY(-1px); box-shadow: 0 16px 38px rgba(10,25,60,0.14); }
    #vibe1791 .chip[aria-pressed="true"]{
      border-color: color-mix(in srgb, var(--c1) 60%, #fff);
      color: color-mix(in srgb, var(--c1) 70%, var(--ink));
      box-shadow: 0 18px 42px color-mix(in srgb, var(--c1) 20%, transparent);
      background: linear-gradient(180deg, rgba(255,255,255,1), rgba(240,246,255,0.85));
    }

    /* Stage */
    #vibe1791 .stage{
      position: relative;
      margin-top: clamp(18px, 3.6vw, 34px);
      border-radius: 28px;
      min-height: clamp(520px, 66vh, 900px);
      border: 1px solid var(--ring);
      background:
        radial-gradient(160% 120% at 0% 100%, rgba(175,205,255,0.30), transparent 55%),
        radial-gradient(130% 120% at 100% 0%, rgba(158,240,255,0.22), transparent 54%),
        linear-gradient(180deg, #ffffff, var(--paper-2));
      box-shadow:
        inset 0 0 0 1px rgba(255,255,255,0.6),
        0 40px 110px rgba(12,25,50,0.18);
      overflow: hidden;
      transform: rotateX(var(--tilt-x)) rotateY(var(--tilt-y));
      transform-style: preserve-3d;
      isolation: isolate;
    }

    #vibe1791 canvas#aurora{
      position: absolute; inset: 0; width: 100%; height: 100%; display: block; z-index: 1;
    }

    /* gloss ring */
    #vibe1791 .halo{
      position: absolute; inset: -25%; z-index: 2; pointer-events: none;
      background: conic-gradient(from 0deg at 50% 50%,
        rgba(255,255,255,0.25),
        rgba(255,255,255,0) 12% 36%,
        rgba(255,255,255,0.3) 60%,
        rgba(255,255,255,0) 80% 100%);
      mix-blend-mode: overlay; filter: blur(28px) saturate(110%);
      animation: v1791_spin 26s linear infinite;
    }

    /* Title */
    #vibe1791 .plaque{
      position: relative; z-index: 3;
      display: grid; gap: 10px; justify-items: start;
      margin: clamp(12px, 3.2vw, 22px);
      max-width: min(880px, 94%);
      padding: clamp(18px, 3.4vw, 30px);
      border-radius: 18px;
      border: 1px solid var(--ring);
      background: linear-gradient(180deg, rgba(255,255,255,0.85), rgba(248,251,255,0.80));
      backdrop-filter: blur(8px) saturate(120%);
      box-shadow: 0 20px 46px rgba(12,25,50,0.16);
    }
    #vibe1791 h1{
      margin: 0;
      font-family: ui-serif, "Iowan Old Style", Georgia, serif;
      font-weight: 900;
      font-size: clamp(46px, 9.4vw, 122px);
      line-height: 0.86;
      letter-spacing: -0.03em;
      text-wrap: balance;
      background: linear-gradient(90deg, var(--c1), var(--c5), var(--c3), var(--c4), var(--c2), var(--c1));
      -webkit-background-clip: text; background-clip: text; color: transparent;
      background-size: 220% 100%;
      animation: v1791_shimmer 12s ease-in-out infinite;
      filter: drop-shadow(0 10px 24px color-mix(in srgb, var(--c1) 28%, transparent));
    }
    @keyframes v1791_shimmer{ 0%,100%{ background-position: 0% 50%; } 50%{ background-position: 100% 50%; } }
    #vibe1791 .lede{
      margin: 4px 0 0 0; color: var(--muted);
      font-size: clamp(14px, 2.0vw, 20px); text-wrap: balance;
    }

    /* Dock controls */
    #vibe1791 .dock{
      position: absolute; inset: 0; z-index: 4; pointer-events: none;
    }
    #vibe1791 .node{
      position: absolute; bottom: 20px;
      left: 50%; transform: translate(-50%, 0);
      pointer-events: auto;
      width: 46px; height: 46px; border-radius: 14px;
      border: 1px solid var(--ring);
      background: linear-gradient(180deg, rgba(255,255,255,0.9), rgba(245,248,255,0.8));
      color: var(--ink);
      font: 700 12px/1 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      display: grid; place-items: center;
      box-shadow: 0 12px 28px rgba(10,25,60,0.12);
      transition: transform 140ms ease, box-shadow 220ms ease, color 220ms ease, border-color 220ms ease, background 220ms ease;
      will-change: transform;
    }
    #vibe1791 .node:hover{ transform: translate(-50%, 0) translateY(-3px) scale(1.03); }
    #vibe1791 .node.on{
      border-color: color-mix(in srgb, var(--c2) 70%, #fff);
      color: color-mix(in srgb, var(--c2) 70%, var(--ink));
      box-shadow: 0 18px 36px color-mix(in srgb, var(--c2) 22%, transparent);
    }
    #vibe1791 .n1{ left: calc(50% - 160px); }
    #vibe1791 .n2{ left: calc(50% - 80px); }
    #vibe1791 .n3{ left: calc(50%); }
    #vibe1791 .n4{ left: calc(50% + 80px); }
    #vibe1791 .n5{ left: calc(50% + 160px); }

    /* Footer */
    #vibe1791 .foot{
      position: relative; z-index: 2;
      display: flex; align-items: center; justify-content: space-between; gap: 12px; flex-wrap: wrap;
      margin-top: clamp(18px, 3.0vw, 30px); padding-top: 14px;
      border-top: 1px dashed var(--ring);
      color: var(--muted); font-size: 12px;
    }

    /* Responsive */
    @media (max-width: 640px){
      #vibe1791 .n1{ left: calc(50% - 128px); }
      #vibe1791 .n2{ left: calc(50% - 64px); }
      #vibe1791 .n3{ left: calc(50%); }
      #vibe1791 .n4{ left: calc(50% + 64px); }
      #vibe1791 .n5{ left: calc(50% + 128px); }
    }
    @media (prefers-reduced-motion: reduce){
      #vibe1791 .chip, #vibe1791 .node{ transition: none; }
      #vibe1791 .halo{ animation: none; }
      #vibe1791 h1{ animation: none; }
    }
  </style>

  <div class="mast" role="group" aria-label="Header">
    <div class="brand"><span class="crest" aria-hidden="true"></span> Aurora Atlas · Vibe 1791</div>
    <div class="tools" role="group" aria-label="Controls">
      <button class="chip" data-action="palette" aria-pressed="false" title="Cycle palette">Palette</button>
      <button class="chip" data-action="density" aria-pressed="false" title="Change density">Density</button>
      <button class="chip" data-action="save" aria-pressed="false" title="Save image">Save</button>
    </div>
  </div>

  <div class="stage" role="region" aria-label="Aurora canvas">
    <canvas id="aurora"></canvas>
    <div class="halo" aria-hidden="true"></div>

    <article class="plaque" role="region" aria-label="Headline">
      <h1>Aurora Atlas</h1>
      <p class="lede">Silk-light moves across air. Drag your pointer; the sky leans and sings in color.</p>
    </article>

    <div class="dock" aria-label="Quick toggles">
      <button class="node n1 on" data-toggle="run" title="Run/Pause"><span aria-hidden="true">▶︎</span></button>
      <button class="node n2 on" data-toggle="glow" title="Glow"><span aria-hidden="true">✷</span></button>
      <button class="node n3 on" data-toggle="trails" title="Long trails"><span aria-hidden="true">∞</span></button>
      <button class="node n4 on" data-toggle="wind" title="Wind field"><span aria-hidden="true">〰</span></button>
      <button class="node n5" data-toggle="grid" title="Subtle grid"><span aria-hidden="true">╳</span></button>
    </div>
  </div>

  <div class="foot">
    <span>Light, folded into ribbons.</span>
    <span id="last-updated">Last updated: 2026-01-07 00:23:49 EST</span>
  </div>

  <script>
    (function(){
      const root = document.getElementById('vibe1791');
      const canvas = root.querySelector('#aurora');
      const ctx = canvas.getContext('2d', { alpha: true });

      // Timestamp
      try{
        const stamp = new Date().toLocaleString(undefined, {
          year: 'numeric', month: 'short', day: '2-digit',
          hour: '2-digit', minute: '2-digit', second: '2-digit'
        });
        root.querySelector('#last-updated').textContent = 'Last updated: ' + stamp;
      }catch(e){}

      // Controls
      const btnPalette = root.querySelector('.chip[data-action="palette"]');
      const btnDensity = root.querySelector('.chip[data-action="density"]');
      const btnSave    = root.querySelector('.chip[data-action="save"]');

      const dock = {
        run:   root.querySelector('.node[data-toggle="run"]'),
        glow:  root.querySelector('.node[data-toggle="glow"]'),
        trails:root.querySelector('.node[data-toggle="trails"]'),
        wind:  root.querySelector('.node[data-toggle="wind"]'),
        grid:  root.querySelector('.node[data-toggle="grid"]')
      };

      // Palettes
      const PALETTES = [
        ['#7f9bff','#a7f3d0','#ffc3a0','#ffa2d5','#9ef0ff'],
        ['#ff9bb0','#ffd56b','#a5ffe0','#9bb2ff','#ffe6f9'],
        ['#93c5fd','#d8b4fe','#fecaca','#a7f3d0','#fef3c7'],
        ['#b9fbc0','#98f5e1','#8ecae6','#cdb4db','#ffd6a5'],
        ['#b5d1ff','#a0ffe6','#ffd3ba','#ffb3de','#c9f1ff']
      ];
      let paletteIndex = 0;
      function setPalette(i){
        paletteIndex = (i + PALETTES.length) % PALETTES.length;
        const [c1,c2,c3,c4,c5] = PALETTES[paletteIndex];
        root.style.setProperty('--c1', c1);
        root.style.setProperty('--c2', c2);
        root.style.setProperty('--c3', c3);
        root.style.setProperty('--c4', c4);
        root.style.setProperty('--c5', c5);
      }
      setPalette(0);
      btnPalette.addEventListener('click', ()=>{ setPalette(paletteIndex+1); initBands(); });

      // State
      let running = true;
      let showGlow = true;
      let longTrails = true;
      let windOn = true;
      let showGrid = false;

      function toggle(el, on){ on ? el.classList.add('on') : el.classList.remove('on'); }
      dock.run.addEventListener('click', ()=>{ running = !running; toggle(dock.run, running); if(running) raf(); });
      dock.glow.addEventListener('click', ()=>{ showGlow = !showGlow; toggle(dock.glow, showGlow); });
      dock.trails.addEventListener('click', ()=>{ longTrails = !longTrails; toggle(dock.trails, longTrails); });
      dock.wind.addEventListener('click', ()=>{ windOn = !windOn; toggle(dock.wind, windOn); });
      dock.grid.addEventListener('click', ()=>{ showGrid = !showGrid; toggle(dock.grid, showGrid); drawOnce(); });

      // Density cycles
      const DENSE = [4, 6, 8, 10, 12];
      let densityIndex = 1;
      let ribbons = DENSE[densityIndex];
      btnDensity.textContent = `Density ×${ribbons}`;
      btnDensity.addEventListener('click', ()=>{
        densityIndex = (densityIndex+1)%DENSE.length;
        ribbons = DENSE[densityIndex];
        btnDensity.textContent = `Density ×${ribbons}`;
        initBands(); drawOnce();
      });

      // Save
      btnSave.addEventListener('click', ()=>{
        try{
          const t = document.createElement('canvas');
          t.width = canvas.width; t.height = canvas.height;
          const x = t.getContext('2d');
          x.fillStyle = '#ffffff';
          x.fillRect(0,0,t.width,t.height);
          x.drawImage(canvas, 0, 0);
          const a = document.createElement('a');
          const n = new Date();
          const stamp = [n.getFullYear(), (n.getMonth()+1+'').padStart(2,'0'), (n.getDate()+'').padStart(2,'0'), '_', (n.getHours()+'').padStart(2,'0'), (n.getMinutes()+'').padStart(2,'0'), (n.getSeconds()+'').padStart(2,'0')].join('');
          a.href = t.toDataURL('image/png');
          a.download = `aurora_atlas_${stamp}.png`;
          a.click();
        }catch(e){}
      });

      // Pointer tilt & influence
      const pointer = { x: 0.5, y: 0.5 };
      function updateTilt(e){
        const r = canvas.getBoundingClientRect();
        const x = Math.max(0, Math.min(1, (e.clientX - r.left)/r.width));
        const y = Math.max(0, Math.min(1, (e.clientY - r.top)/r.height));
        pointer.x = x; pointer.y = y;
        const ry = (x - 0.5) * 8;
        const rx = (0.5 - y) * 6;
        root.style.setProperty('--tilt-x', rx.toFixed(2)+'deg');
        root.style.setProperty('--tilt-y', ry.toFixed(2)+'deg');
      }
      root.addEventListener('mousemove', updateTilt);

      // Canvas sizing
      let dpr = Math.min(2, window.devicePixelRatio || 1);
      let W = 0, H = 0, CX = 0, CY = 0, MINR = 0;
      function resize(){
        dpr = Math.min(2, window.devicePixelRatio || 1);
        const r = canvas.getBoundingClientRect();
        W = Math.max(360, Math.floor(r.width));
        H = Math.max(360, Math.floor(r.height));
        canvas.width = Math.floor(W * dpr);
        canvas.height = Math.floor(H * dpr);
        ctx.setTransform(1,0,0,1,0,0);
        ctx.scale(dpr, dpr);
        CX = W*0.5; CY = H*0.5; MINR = Math.min(W,H)*0.42;
        softReset(true);
        initBands();
      }
      window.addEventListener('resize', ()=>{ cancelAnimationFrame(af||0); resize(); if(running) raf(); });

      // Bands (ribbons)
      const bands = [];
      function rnd(min,max){ return min + Math.random()*(max-min); }
      function initBands(){
        bands.length = 0;
        for(let i=0;i<ribbons;i++){
          bands.push({
            baseY: rnd(H*0.25, H*0.75),
            amp: rnd(H*0.06, H*0.16),
            freq: rnd(1.5, 3.8),
            speed: rnd(0.15, 0.55) * (Math.random()<0.5 ? -1 : 1),
            phase: Math.random()*Math.PI*2,
            thicc: rnd(8, 28),
            colorIndex: i % 5
          });
        }
      }

      function softReset(initial){
        ctx.globalCompositeOperation = 'source-over';
        ctx.globalAlpha = 1;
        ctx.fillStyle = '#ffffff';
        ctx.fillRect(0,0,W,H);
        if(!initial) drawOnce();
      }

      // Utilities
      function colorAt(i){
        const cols = PALETTES[paletteIndex];
        return cols[i % cols.length];
      }

      // Loop
      let af = null, last = performance.now(), dt = 0.016;
      function draw(now){
        const dtms = Math.min(48, now - last);
        dt = (dtms/1000) || 0.016;
        last = now;

        // Fade for trails
        const fadeAlpha = longTrails ? 0.05 : 0.12;
        ctx.globalCompositeOperation = 'source-over';
        ctx.fillStyle = `rgba(255,255,255,${fadeAlpha})`;
        ctx.fillRect(0,0,W,H);

        // Optional subtle grid
        if(showGrid){
          ctx.save();
          ctx.globalAlpha = 0.06;
          ctx.strokeStyle = '#0b1320';
          ctx.lineWidth = 1;
          const step = Math.round(Math.max(40, Math.min(80, Math.min(W,H)/12)));
          for(let x=0;x<=W;x+=step){ ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,H); ctx.stroke(); }
          for(let y=0;y<=H;y+=step){ ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(W,y); ctx.stroke(); }
          ctx.restore();
        }

        const t = performance.now()*0.001;

        // Wind field modulation
        const wind = windOn ? Math.sin(t*0.5)*0.6 : 0;

        // Draw ribbons
        for(let i=0;i<bands.length;i++){
          const b = bands[i];
          b.phase += b.speed * dt;

          // stroke style
          const col = colorAt(b.colorIndex);
          const grad = ctx.createLinearGradient(0, 0, W, 0);
          grad.addColorStop(0.0, col);
          grad.addColorStop(0.5, colorAt(b.colorIndex+1));
          grad.addColorStop(1.0, colorAt(b.colorIndex+2));

          ctx.save();
          ctx.globalCompositeOperation = showGlow ? 'screen' : 'lighter';
          ctx.strokeStyle = grad;

          let thicc = b.thicc * (1 + 0.15*Math.sin(t*0.8 + i));
          ctx.lineWidth = thicc;
          ctx.lineCap = 'round';
          ctx.lineJoin = 'round';
          ctx.globalAlpha = 0.75;

          if(showGlow){
            ctx.shadowColor = colorAt(b.colorIndex+1);
            ctx.shadowBlur = Math.max(8, thicc*0.9);
          }else{
            ctx.shadowBlur = 0;
          }

          ctx.beginPath();
          const segments = Math.max(40, Math.floor(W/18));
          for(let s=0; s<=segments; s++){
            const u = s/segments;
            const x = u*W;

            // base sinusoidal displacement with slight harmonics
            const y0 = b.baseY
              + Math.sin(u*b.freq*Math.PI*2 + b.phase) * b.amp
              + Math.sin(u*b.freq*0.5*Math.PI*2 + b.phase*0.7) * (b.amp*0.35);

            // wind curvature
            const yWind = y0 + wind * (u-0.5) * (H*0.18);

            // pointer influence (Gaussian bump)
            const dx = (u - pointer.x);
            const dy = (yWind/H - pointer.y);
            const dist2 = dx*dx + dy*dy;
            const bump = Math.exp(-dist2*24) * (H*0.2) * (windOn ? 1 : 0.5);

            const y = yWind + (pointer.y-0.5)*H*0.08 + bump;

            if(s===0) ctx.moveTo(x, y);
            else ctx.lineTo(x, y);
          }
          ctx.stroke();
          ctx.restore();
        }

        // Soft vignette to focus content
        ctx.save();
        const vg = ctx.createRadialGradient(CX, CY, Math.min(CX,CY)*0.2, CX, CY, Math.max(CX,CY)*1.1);
        vg.addColorStop(0, 'rgba(255,255,255,0)');
        vg.addColorStop(1, 'rgba(230,235,250,0.5)');
        ctx.globalCompositeOperation = 'multiply';
        ctx.fillStyle = vg;
        ctx.fillRect(0,0,W,H);
        ctx.restore();
      }

      function raf(ts){
        if(!running){ af = null; return; }
        draw(ts || performance.now());
        af = requestAnimationFrame(raf);
      }
      function drawOnce(){ draw(performance.now()); }

      function init(){
        resize();
        const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        running = !prefersReduced;
        toggle(dock.run, running);
        toggle(dock.glow, showGlow);
        toggle(dock.trails, longTrails);
        toggle(dock.wind, windOn);
        toggle(dock.grid, showGrid);
        if(running) raf(); else drawOnce();
      }
      init();

      // Rebuild bands on size changes
      new ResizeObserver(()=>{ initBands(); }).observe(canvas);
    })();
  </script>
</section>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


