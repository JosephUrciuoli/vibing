<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<div id="vibe983" data-theme="dawn" role="region" aria-label="Liminal Bloom kinetic garden">
  <style>
    /* Design tokens */
    #vibe983 {
      --bg0: #fff7f1;
      --bg1: #ffe9d2;
      --ink: #1b1d21;
      --muted: #5b606a;
      --a: #ff8a47;
      --b: #ff4170;
      --c: #7c5cff;
      --glass: rgba(255,255,255,0.6);
      --edge: rgba(20, 22, 28, 0.08);
      --ring-blur: 62px;
      --mx: 0.5;
      --my: 0.5;
      --glow: 1.0;
      --spd: 36s;
      --gridOpacity: 0;
      position: relative;
      border-radius: 28px;
      overflow: hidden;
      color: var(--ink);
      min-height: 560px;
      padding: clamp(18px, 4vw, 32px);
      font-family: ui-sans-serif, -apple-system, Segoe UI, Inter, Roboto, "SF Pro Display", "Noto Sans", Arial, sans-serif;
      background:
        radial-gradient(1200px 900px at calc(10% + (var(--mx) - .5) * 8%) -20%, color-mix(in oklab, var(--a) 26%, transparent), transparent 65%),
        radial-gradient(900px 700px at 120% 110%, color-mix(in oklab, var(--c) 22%, transparent), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      box-shadow:
        0 1px 0 rgba(255,255,255,0.85) inset,
        0 0 0 1px var(--edge) inset,
        0 28px 80px rgba(2, 6, 12, 0.12);
      isolation: isolate;
    }

    /* Palettes */
    #vibe983[data-theme="azure"]{
      --bg0: #eef9ff; --bg1: #e8f0ff;
      --ink: #0a1722; --muted: #31566b;
      --a: #36d2ff; --b: #0a84ff; --c: #00c2b8;
      --glass: rgba(255,255,255,0.7);
      --edge: rgba(6,18,26,0.09);
    }
    #vibe983[data-theme="noir"]{
      --bg0: #0b0e12; --bg1: #11161c;
      --ink: #eef2f6; --muted: rgba(238,242,246,0.75);
      --a: #9ad1ff; --b: #ff6b6b; --c: #8a7dff;
      --glass: rgba(15,19,24,0.6);
      --edge: rgba(255,255,255,0.08);
      box-shadow:
        0 1px 0 rgba(255,255,255,0.05) inset,
        0 0 0 1px var(--edge) inset,
        0 28px 80px rgba(0,0,0,0.55);
    }
    #vibe983[data-theme="orchid"]{
      --bg0: #fcf1ff; --bg1: #f8e7ff;
      --ink: #201225; --muted: #5b3c6b;
      --a: #ff9bd6; --b: #a76dff; --c: #5cf1d6;
      --glass: rgba(255,255,255,0.65);
      --edge: rgba(32,18,37,0.09);
    }

    /* Ambient layers */
    #vibe983 .sweep{
      position:absolute; inset:-12%;
      background: conic-gradient(from 180deg,
        transparent 0turn 0.08turn,
        color-mix(in oklab, var(--a) 18%, transparent) 0.08turn 0.12turn,
        transparent 0.12turn 0.45turn,
        color-mix(in oklab, var(--b) 18%, transparent) 0.45turn 0.49turn,
        transparent 0.49turn 1turn);
      filter: blur(var(--ring-blur)) saturate(115%);
      animation: vibe983-spin var(--spd) linear infinite;
      mix-blend-mode: multiply;
      pointer-events: none;
      z-index: 0;
    }
    @keyframes vibe983-spin { to { transform: rotate(360deg);} }

    #vibe983 .grain{
      position:absolute; inset:-50%;
      background-image:
        repeating-linear-gradient(0deg, rgba(0,0,0,0.03) 0 1px, transparent 1px 2px),
        repeating-linear-gradient(90deg, rgba(255,255,255,0.03) 0 1px, transparent 1px 2px);
      opacity: .35; mix-blend-mode: overlay;
      pointer-events:none; z-index:0;
      animation: vibe983-grain 1.6s steps(2) infinite;
    }
    @keyframes vibe983-grain { to{ transform: translate3d(-1%,1%,0);} }

    #vibe983 .grid{
      position:absolute; inset:0; pointer-events:none; z-index:1;
      opacity: var(--gridOpacity);
      background-image:
        linear-gradient(var(--edge) 1px, transparent 1px),
        linear-gradient(90deg, var(--edge) 1px, transparent 1px);
      background-size: 48px 48px, 48px 48px;
      transition: opacity 240ms ease;
    }
    #vibe983.show-grid { --gridOpacity: 1; }

    /* Canvas starfield */
    #vibe983 .field{
      position:absolute; inset:0; z-index:0; pointer-events:none;
      filter: saturate(110%) contrast(105%);
      mix-blend-mode: soft-light;
    }
    #vibe983[data-theme="noir"] .field{ mix-blend-mode: screen; }

    /* Frame */
    #vibe983 .frame{
      position:relative; z-index:2;
      display:grid;
      grid-template-columns: 1.1fr 1fr;
      gap: clamp(12px, 2.2vw, 22px);
      max-width: 1040px; margin: 6px auto;
      padding: clamp(16px, 2.4vw, 24px);
      background:
        linear-gradient(180deg, var(--glass), color-mix(in oklab, var(--glass) 70%, transparent));
      border: 1px solid var(--edge);
      border-radius: 20px;
      box-shadow: 0 10px 40px rgba(2,6,12,0.08);
      backdrop-filter: blur(12px) saturate(120%);
    }
    #vibe983 .bar{
      grid-column: 1 / -1;
      display:flex; align-items:center; justify-content:space-between; gap:10px; flex-wrap:wrap;
    }
    #vibe983 .chip{
      display:inline-flex; align-items:center; gap:10px;
      padding:8px 12px; border-radius:999px;
      background: linear-gradient(180deg, rgba(255,255,255,0.7), rgba(255,255,255,0.35));
      border:1px solid var(--edge);
      font-weight:800; letter-spacing:.12em; text-transform:uppercase; font-size:12px; color:var(--muted);
    }
    #vibe983 .chip::before{
      content:""; width:8px; height:8px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #fff, var(--a));
      box-shadow:0 0 12px var(--a);
      flex:none;
    }

    /* Controls */
    #vibe983 .tools{ display:flex; align-items:center; gap:8px; flex-wrap:wrap;}
    #vibe983 button, #vibe983 .toggle, #vibe983 .slider{
      appearance:none;
      border:1px solid var(--edge);
      background:#fff;
      color:var(--ink);
      padding:8px 12px; border-radius:12px;
      font-weight:700; cursor:pointer;
      box-shadow:0 2px 0 rgba(0,0,0,0.04);
      transition: transform 140ms ease, box-shadow 220ms ease, background 240ms ease;
    }
    #vibe983 [data-theme="noir"] button,
    #vibe983 [data-theme="noir"] .toggle,
    #vibe983 [data-theme="noir"] .slider { background:#0f1318; color:var(--ink);}
    #vibe983 button:hover{ transform: translateY(-1px); box-shadow:0 8px 18px rgba(2,6,12,0.12); }
    #vibe983 .toggle{
      display:inline-flex; align-items:center; gap:10px; padding:7px 10px; color:var(--muted);
      background: linear-gradient(180deg, rgba(0,0,0,0.03), rgba(255,255,255,0.55));
    }
    #vibe983 .toggle input{
      appearance:none; width:34px; height:18px; border-radius:18px; background: rgba(0,0,0,0.1);
      outline:none; position:relative; transition: background 200ms ease;
    }
    #vibe983 .toggle input::after{
      content:""; position:absolute; top:2px; left:2px; width:14px; height:14px; border-radius:50%;
      background:#fff; box-shadow:0 2px 6px rgba(0,0,0,0.15); transition: transform 200ms ease;
    }
    #vibe983 .toggle input:checked{ background: linear-gradient(90deg, var(--a), var(--b)); }
    #vibe983 .toggle input:checked::after{ transform: translateX(16px); }

    #vibe983 .slider{
      display:inline-flex; align-items:center; gap:10px; padding:6px 10px;
      color:var(--muted); background: linear-gradient(180deg, rgba(0,0,0,0.02), rgba(255,255,255,0.55));
    }
    #vibe983 .slider input[type="range"]{
      width:140px; height:18px; -webkit-appearance:none; background:transparent; outline:none;
    }
    #vibe983 .slider input[type="range"]::-webkit-slider-runnable-track{
      height:6px; border-radius:999px;
      background: linear-gradient(90deg, var(--a), var(--b));
      opacity:.6;
    }
    #vibe983 .slider input[type="range"]::-webkit-slider-thumb{
      -webkit-appearance:none; width:18px; height:18px; border-radius:50%;
      background:#fff; border:1px solid var(--edge); margin-top:-6px;
      box-shadow:0 2px 6px rgba(0,0,0,0.15);
    }
    #vibe983 .slider input[type="range"]::-moz-range-track{
      height:6px; border-radius:999px; background: linear-gradient(90deg, var(--a), var(--b)); opacity:.6;
    }
    #vibe983 .slider input[type="range"]::-moz-range-thumb{
      width:18px; height:18px; border-radius:50%; background:#fff; border:1px solid var(--edge);
      box-shadow:0 2px 6px rgba(0,0,0,0.15);
    }

    /* Copy */
    #vibe983 h1{
      grid-column: 1 / 2;
      margin: 2px 0 0;
      font-size: clamp(36px, 7.8vw, 96px);
      line-height: .92;
      letter-spacing: -0.02em;
      font-weight: 900;
      color: transparent;
      background: linear-gradient(90deg, var(--a), var(--b), var(--c));
      -webkit-background-clip:text; background-clip:text;
      transform: translate(
        calc((var(--mx) - .5) * 6px),
        calc((var(--my) - .5) * -4px)
      );
      transition: transform 120ms ease;
    }
    #vibe983 .lede{
      grid-column: 1 / 2;
      margin: 8px 0 10px;
      color: var(--muted);
      font-size: clamp(14px, 1.8vw, 18px);
      line-height: 1.6;
      max-width: 56ch;
      text-wrap: balance;
    }

    /* Orb */
    #vibe983 .orb{
      grid-column: 2 / 3; align-self:center; justify-self:center;
      position:relative; width: clamp(220px, 36vw, 460px); height: clamp(220px, 36vw, 460px);
      border-radius:50%;
      background:
        radial-gradient(120% 120% at calc(var(--mx)*100%) calc(var(--my)*100%),
          color-mix(in oklab, var(--a) 34%, transparent),
          transparent 55%),
        radial-gradient(circle at 50% 50%, #fff, #fff0 62%);
      box-shadow:
        0 0 0 1px var(--edge) inset,
        0 0 120px color-mix(in oklab, var(--b) calc(35% * var(--glow)), transparent),
        0 24px 60px rgba(2,6,12,0.12);
      overflow:hidden;
      transform:
        translate3d(
          calc((var(--mx) - .5) * 10px),
          calc((var(--my) - .5) * -10px),
          0);
      transition: transform 120ms ease;
    }
    #vibe983 .orb .iris{
      position:absolute; inset:12%;
      border-radius:50%;
      background:
        radial-gradient(60% 60% at calc(56% + (var(--mx) - .5) * 10%) calc(48% + (var(--my) - .5) * -6%), #fff, #ffffff00 62%),
        conic-gradient(from 90deg,
          color-mix(in oklab, var(--b) 60%, transparent),
          color-mix(in oklab, var(--c) 40%, transparent),
          color-mix(in oklab, var(--a) 60%, transparent),
          color-mix(in oklab, var(--b) 60%, transparent));
      filter: blur(calc(6px * var(--glow)));
      animation: vibe983-iris var(--spd) linear infinite;
      mix-blend-mode: multiply;
    }
    @keyframes vibe983-iris { to{ transform: rotate(360deg);} }

    #vibe983 .orb .halo{
      position:absolute; inset:-18%;
      border-radius:50%;
      background:
        radial-gradient(closest-side, color-mix(in oklab, var(--c) 40%, transparent), transparent 70%);
      filter: blur(calc(24px * var(--glow))) saturate(120%);
      opacity:.9;
      animation: vibe983-breathe 8s ease-in-out infinite;
    }
    @keyframes vibe983-breathe{
      0%,100%{ transform: scale(1); opacity:.9;}
      50%{ transform: scale(1.06); opacity:1;}
    }

    #vibe983 .sat{
      position:absolute; left:50%; top:50%;
      width:10px; height:10px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #fff, var(--b));
      box-shadow: 0 0 16px color-mix(in oklab, var(--b) 70%, transparent);
      transform: translate(-50%,-50%);
      will-change: transform;
    }
    #vibe983 .sat.s1{ animation: vibe983-orbit1 calc(var(--spd) * .6) linear infinite; }
    #vibe983 .sat.s2{ width:8px; height:8px; background: radial-gradient(circle at 30% 30%, #fff, var(--c)); animation: vibe983-orbit2 calc(var(--spd) * .85) linear infinite; }
    #vibe983 .sat.s3{ width:12px; height:12px; background: radial-gradient(circle at 30% 30%, #fff, var(--a)); animation: vibe983-orbit3 calc(var(--spd) * .45) linear infinite; }
    @keyframes vibe983-orbit1{
      to{ transform: translate(-50%,-50%) rotate(360deg) translateX(36%); }
    }
    @keyframes vibe983-orbit2{
      to{ transform: translate(-50%,-50%) rotate(-360deg) translateX(48%); }
    }
    @keyframes vibe983-orbit3{
      to{ transform: translate(-50%,-50%) rotate(360deg) translateX(24%); }
    }

    /* Meta */
    #vibe983 .meta{
      grid-column: 1 / -1;
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      color:var(--muted); font-size:12px; margin-top: 6px;
    }

    /* Reduced motion + calm */
    @media (prefers-reduced-motion: reduce){
      #vibe983 .sweep, #vibe983 .grain, #vibe983 .iris, #vibe983 .halo, #vibe983 .sat { animation: none !important; }
      #vibe983 h1, #vibe983 .orb { transition: none !important; }
    }
    #vibe983.calm .sweep, #vibe983.calm .iris, #vibe983.calm .halo, #vibe983.calm .sat { animation-play-state: paused !important; }
    #vibe983.calm .field { opacity: .7; }

    /* Small screens */
    @media (max-width: 820px){
      #vibe983 .frame{ grid-template-columns: 1fr; }
      #vibe983 .orb{ grid-column: 1 / -1; order: 3; }
      #vibe983 h1{ order: 1; }
      #vibe983 .lede{ order: 2; }
    }
  </style>

  <canvas class="field" aria-hidden="true"></canvas>
  <div class="sweep" aria-hidden="true"></div>
  <div class="grain" aria-hidden="true"></div>
  <div class="grid" aria-hidden="true"></div>

  <section class="frame" tabindex="0">
    <div class="bar">
      <span class="chip">Edition 983 • Liminal Bloom</span>
      <div class="tools">
        <button id="palette">Palette</button>
        <button id="grid">Grid</button>
        <label class="toggle" title="Reduce motion">
          Motion
          <input type="checkbox" id="motion">
        </label>
        <label class="slider" title="Glow">
          Glow
          <input type="range" id="glow" min="0.6" max="1.6" step="0.01" value="1.00">
        </label>
      </div>
    </div>

    <h1 aria-label="Make it breathe">Make it breathe.</h1>
    <p class="lede">A living poster—part bloom, part orbit—guided by your cursor and the passing second. Linger; it listens.</p>

    <div class="orb" role="img" aria-label="Kinetic bloom with orbiting lights">
      <div class="iris" aria-hidden="true"></div>
      <div class="halo" aria-hidden="true"></div>
      <span class="sat s1" aria-hidden="true"></span>
      <span class="sat s2" aria-hidden="true"></span>
      <span class="sat s3" aria-hidden="true"></span>
    </div>

    <div class="meta">
      <span id="last-updated">Last updated: 2025-11-30 14:13:56 EST</span>
      <span class="keys">Shortcuts: C color • G grid • Space motion • +/- glow</span>
    </div>
  </section>

  <script>
    (function(){
      const root = document.getElementById('vibe983');
      const palette = root.querySelector('#palette');
      const gridBtn = root.querySelector('#grid');
      const motionToggle = root.querySelector('#motion');
      const glow = root.querySelector('#glow');
      const field = root.querySelector('.field');
      const last = root.querySelector('#last-updated');

      // Timestamp
      try{
        const d = new Date();
        const fmt = new Intl.DateTimeFormat([], { year:'numeric', month:'short', day:'2-digit', hour:'2-digit', minute:'2-digit' });
        last.textContent = 'Last updated: ' + fmt.format(d);
      }catch{ last.textContent = 'Last updated: just now'; }

      // Themes
      const themes = ['dawn','azure','noir','orchid'];
      function cycleTheme(){
        const cur = root.getAttribute('data-theme') || themes[0];
        const idx = themes.indexOf(cur);
        const nxt = themes[(idx + 1) % themes.length];
        root.setAttribute('data-theme', nxt);
      }
      palette.addEventListener('click', cycleTheme);

      // Grid
      gridBtn.addEventListener('click', ()=> root.classList.toggle('show-grid'));

      // Motion / calm
      let calm = false;
      function setCalm(state){
        calm = state;
        if(calm){
          root.classList.add('calm');
          motionToggle.checked = true;
        }else{
          root.classList.remove('calm');
          motionToggle.checked = false;
        }
      }
      motionToggle.addEventListener('change', e=> setCalm(e.target.checked));
      if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
        setCalm(true);
      }

      // Glow control
      function setGlow(v){
        const val = Math.max(0.6, Math.min(1.6, Number(v) || 1));
        root.style.setProperty('--glow', val.toFixed(2));
      }
      glow.addEventListener('input', e => setGlow(e.target.value));
      setGlow(glow.value);

      // Pointer parallax + speed modulation
      let rect;
      function updateRect(){ rect = root.getBoundingClientRect(); }
      updateRect();
      window.addEventListener('resize', updateRect, { passive: true });

      let mx = .5, my = .5, tx = .5, ty = .5, raf = null;
      function onMove(e){
        if(!rect) updateRect();
        const x = (e.clientX - rect.left)/rect.width;
        const y = (e.clientY - rect.top)/rect.height;
        tx = Math.max(0, Math.min(1, x));
        ty = Math.max(0, Math.min(1, y));
        if(!raf) raf = requestAnimationFrame(tick);
        // spin speed varies with distance from center
        const dx = tx - .5, dy = ty - .5;
        const d = Math.min(1, Math.hypot(dx, dy) * 2);
        const seconds = 42 - d * 22; // faster toward edges
        root.style.setProperty('--spd', seconds.toFixed(2) + 's');
      }
      function tick(){
        const ease = .12;
        mx += (tx - mx) * ease;
        my += (ty - my) * ease;
        root.style.setProperty('--mx', mx.toFixed(4));
        root.style.setProperty('--my', my.toFixed(4));
        if (Math.abs(mx - tx) > 0.001 || Math.abs(my - ty) > 0.001) {
          raf = requestAnimationFrame(tick);
        } else {
          raf = null;
        }
      }
      root.addEventListener('pointermove', e=> { if(!calm) onMove(e); });
      root.addEventListener('pointerleave', ()=> {
        tx = .5; ty = .5;
        if(!raf) raf = requestAnimationFrame(tick);
      });

      // Keyboard
      root.querySelector('.frame').addEventListener('keydown', (e)=>{
        const k = e.key.toLowerCase();
        if (k === 'c'){ e.preventDefault(); cycleTheme(); }
        if (k === 'g'){ e.preventDefault(); root.classList.toggle('show-grid'); }
        if (k === ' '){ e.preventDefault(); setCalm(!calm); }
        if (k === '+' || k === '='){ e.preventDefault(); glow.value = Math.min(1.6, Number(glow.value) + 0.05).toFixed(2); setGlow(glow.value); }
        if (k === '-' || k === '_'){ e.preventDefault(); glow.value = Math.max(0.6, Number(glow.value) - 0.05).toFixed(2); setGlow(glow.value); }
        if (['arrowup','arrowdown','arrowleft','arrowright'].includes(k)){
          e.preventDefault();
          if (k==='arrowup') ty -= .03;
          if (k==='arrowdown') ty += .03;
          if (k==='arrowleft') tx -= .03;
          if (k==='arrowright') tx += .03;
          tx = Math.max(0, Math.min(1, tx));
          ty = Math.max(0, Math.min(1, ty));
          if(!raf) raf = requestAnimationFrame(tick);
        }
      });

      // Starfield
      let ctx, W, H, stars = [], anim;
      function rand(min, max){ return Math.random() * (max - min) + min; }
      function initField(){
        cancelAnimationFrame(anim);
        W = field.width = field.offsetWidth * (window.devicePixelRatio || 1);
        H = field.height = field.offsetHeight * (window.devicePixelRatio || 1);
        ctx = field.getContext('2d');
        const count = Math.round(Math.min(140, (W * H) / 38000));
        stars = [];
        for(let i=0;i<count;i++){
          stars.push({
            x: rand(0, W),
            y: rand(0, H),
            vx: rand(-0.05, 0.05),
            vy: rand(-0.05, 0.05),
            r: rand(0.4, 1.6)
          });
        }
        drawField(true);
      }
      function themeIsDark(){
        return (root.getAttribute('data-theme') === 'noir');
      }
      function drawField(initial){
        if (!ctx) return;
        ctx.clearRect(0,0,W,H);
        const light = themeIsDark();
        ctx.globalCompositeOperation = 'lighter';
        for(const s of stars){
          ctx.beginPath();
          ctx.fillStyle = light ? 'rgba(255,255,255,0.85)' : 'rgba(0,0,0,0.28)';
          ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
          ctx.fill();
        }
        // link nearby
        ctx.lineWidth = 0.6;
        ctx.strokeStyle = light ? 'rgba(154,209,255,0.22)' : 'rgba(10,132,255,0.14)';
        for(let i=0;i<stars.length;i++){
          for(let j=i+1;j<stars.length;j++){
            const a = stars[i], b = stars[j];
            const dx = a.x - b.x, dy = a.y - b.y;
            const d2 = dx*dx + dy*dy;
            if (d2 < (W*H)/350) {
              ctx.globalAlpha = 1 - d2 / ((W*H)/350);
              ctx.beginPath();
              ctx.moveTo(a.x, a.y); ctx.lineTo(b.x, b.y); ctx.stroke();
            }
          }
        }
        ctx.globalAlpha = 1;

        if (!calm) {
          for(const s of stars){
            s.x += s.vx; s.y += s.vy;
            if (s.x < -4) s.x = W+4; if (s.x > W+4) s.x = -4;
            if (s.y < -4) s.y = H+4; if (s.y > H+4) s.y = -4;
          }
        }
        anim = requestAnimationFrame(drawField);
      }
      initField();
      window.addEventListener('resize', ()=> { initField(); }, { passive:true });
      // Re-tint when theme changes
      const mo = new MutationObserver(()=>{ /* redraw to adjust line colors */ });
      mo.observe(root, { attributes:true, attributeFilter:['data-theme'] });

      // Touch bias: calm by default on touch devices
      if ('ontouchstart' in window){ setCalm(true); }
    })();
  </script>
</div>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


