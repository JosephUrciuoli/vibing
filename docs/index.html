<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<style>
  .weave2141 {
    --radius: 28px;
    --ink: #0b0f1a;
    --muted: rgba(255,255,255,0.66);
    --paper-0: rgba(255,255,255,0.12);
    --paper-1: rgba(255,255,255,0.06);
    --accent-1: #7bd1ff;
    --accent-2: #b28bff;
    --accent-3: #ff9ea2;
    --glow: rgba(255,255,255,0.35);
    --mx: 60%;
    --my: 30%;
    position: relative;
    min-height: 620px;
    border-radius: var(--radius);
    overflow: hidden;
    padding: clamp(18px, 3.2vw, 34px);
    color: #eaf2ff;
    background:
      radial-gradient(900px 600px at var(--mx) var(--my), rgba(84,110,255,0.16), transparent 65%),
      linear-gradient(180deg, #090d18 0%, #0b1222 55%, #0a0f1d 100%);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.06), 0 30px 80px rgba(0,0,0,0.45);
    isolation: isolate;
  }
  .weave2141[data-theme="bloom"] {
    --ink: #0b0f18;
    --muted: rgba(11,22,44,0.66);
    --paper-0: rgba(255,255,255,0.75);
    --paper-1: rgba(255,255,255,0.38);
    --accent-1: #ff8bb0;
    --accent-2: #6ee8ff;
    --accent-3: #ffd07f;
    --glow: rgba(255,255,255,0.65);
    color: #0b1224;
    background:
      radial-gradient(900px 600px at var(--mx) var(--my), rgba(255,190,230,0.45), transparent 60%),
      linear-gradient(180deg, #f9fbff 0%, #eef5ff 55%, #eaf2ff 100%);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.6), 0 30px 60px rgba(12,18,30,0.18);
  }

  .weave2141::after {
    content: "";
    position: absolute; inset: -20% -10% -10% -10%;
    background:
      radial-gradient(60% 90% at 70% 10%, rgba(255,255,255,0.14), transparent 60%),
      radial-gradient(40% 60% at 10% 90%, rgba(255,255,255,0.08), transparent 60%);
    mix-blend-mode: overlay;
    pointer-events: none;
  }

  .weave2141 canvas.ribbons {
    position: absolute; inset: 0;
    width: 100%; height: 100%;
    filter: saturate(120%) blur(0.15px);
    opacity: 0.85;
    mix-blend-mode: screen;
    pointer-events: none;
  }
  .weave2141[data-theme="bloom"] canvas.ribbons {
    mix-blend-mode: multiply;
    opacity: 0.7;
    filter: saturate(110%);
  }

  .weave2141 .chrome {
    position: relative;
    z-index: 2;
    max-width: 1080px;
    margin: 0 auto;
  }
  .weave2141 .mast {
    display: flex; align-items: center; justify-content: space-between; gap: 12px;
    margin-bottom: 6px;
  }
  .weave2141 .ed {
    display: inline-flex; align-items: center; gap: 10px;
    padding: 10px 12px; border-radius: 999px;
    font: 800 11px/1 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    letter-spacing: 0.14em; text-transform: uppercase;
    color: var(--muted);
    background: linear-gradient(180deg, var(--paper-0), var(--paper-1));
    border: 1px solid rgba(0,0,0,0.06);
    box-shadow: inset 0 1px 0 var(--glow);
  }
  .weave2141 .ed::before {
    content: ""; width: 8px; height: 8px; border-radius: 50%;
    background: radial-gradient(circle at 30% 30%, var(--accent-1), var(--accent-2));
    box-shadow: 0 0 18px var(--accent-2);
  }

  .weave2141 .controls { display: flex; flex-wrap: wrap; gap: 10px 12px; }
  .weave2141 .chip {
    appearance: none; cursor: pointer; border: none;
    padding: 11px 14px; border-radius: 14px;
    background: linear-gradient(180deg, rgba(255,255,255,0.90), rgba(255,255,255,0.68));
    color: var(--ink);
    font: 800 12px/1 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    letter-spacing: 0.09em; text-transform: uppercase;
    border: 1px solid rgba(0,0,0,0.08);
    box-shadow: 0 12px 26px rgba(0,0,0,0.18), inset 0 1px 0 rgba(255,255,255,0.9);
    transition: transform 140ms ease, box-shadow 200ms ease, filter 200ms ease;
  }
  .weave2141 .chip:hover { transform: translateY(-1px); box-shadow: 0 16px 30px rgba(0,0,0,0.24), inset 0 1px 0 #fff; }
  .weave2141 .chip:active { transform: translateY(0); filter: saturate(1.06); }
  .weave2141 .chip.ghost {
    background: linear-gradient(180deg, rgba(255,255,255,0.70), rgba(255,255,255,0.44));
  }

  .weave2141 .title {
    margin: 10px 0 6px;
    font: 900 clamp(36px, 9.5vw, 108px)/0.92 ui-sans-serif, system-ui, -apple-system, "SF Pro Display", "Segoe UI", Roboto, Arial;
    letter-spacing: -0.02em;
    background: linear-gradient(95deg, #ffffff 0%, var(--accent-1) 45%, var(--accent-2) 75%, var(--accent-3) 100%);
    -webkit-background-clip: text; background-clip: text; color: transparent;
    text-wrap: balance;
    filter: drop-shadow(0 12px 34px rgba(0,0,0,0.28));
  }
  .weave2141[data-theme="bloom"] .title {
    background: linear-gradient(95deg, #0a0e1c 0%, var(--accent-1) 45%, var(--accent-2) 75%, #0a0e1c 100%);
  }

  .weave2141 .sub {
    font: 500 clamp(14px, 2.2vw, 18px)/1.65 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    color: var(--muted);
    max-width: 68ch;
    margin-bottom: clamp(10px, 3.2vw, 16px);
  }

  .weave2141 .glide {
    position: relative;
    display: grid; place-items: center;
    margin: clamp(12px, 3.2vw, 22px) 0;
    border-radius: 24px;
    padding: clamp(16px, 3vw, 28px);
    background: linear-gradient(180deg, var(--paper-0), var(--paper-1));
    backdrop-filter: blur(14px) saturate(140%);
    -webkit-backdrop-filter: blur(14px) saturate(140%);
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.35), 0 16px 44px rgba(0,0,0,0.22);
    overflow: hidden;
  }
  .weave2141 .glide .hint {
    position: relative;
    z-index: 2;
    display: inline-flex; align-items: center; gap: 10px;
    padding: 8px 12px; border-radius: 999px;
    border: 1px dashed rgba(255,255,255,0.35);
    color: var(--muted);
    font: 700 12px/1 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
    background: linear-gradient(180deg, rgba(255,255,255,0.20), rgba(255,255,255,0.10));
  }

  .weave2141 .legend {
    display: flex; align-items: center; justify-content: space-between; gap: 12px;
    margin-top: 14px;
    color: var(--muted);
    font: 400 12px/1.6 ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  }
  .weave2141 .pill {
    display: inline-flex; align-items: center; gap: 8px;
    padding: 8px 12px; border-radius: 999px;
    border: 1px solid rgba(0,0,0,0.08);
    background: linear-gradient(180deg, rgba(255,255,255,0.78), rgba(255,255,255,0.44));
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.6);
  }

  @media (prefers-reduced-motion: reduce) {
    .weave2141 canvas.ribbons { display: none; }
  }
</style>

<div class="weave2141" data-theme="noir" aria-label="Woven Air — a kinetic tapestry of color and motion">
  <canvas class="ribbons" aria-hidden="true"></canvas>

  <div class="chrome">
    <div class="mast">
      <span class="ed">Edition 2141</span>
      <div class="controls">
        <button class="chip" id="themeToggle" type="button" aria-pressed="false" title="Toggle theme">Bloom</button>
        <button class="chip" id="motionToggle" type="button" aria-pressed="true" title="Pause motion">Pause</button>
        <button class="chip ghost" id="remix" type="button" title="Reseed the tapestry">Remix</button>
      </div>
    </div>

    <h1 class="title">Woven&nbsp;Air</h1>
    <p class="sub" id="tagline">Breathing color. Pull gently with your cursor; tap to wake the threads.</p>

    <div class="glide" id="loom" role="img" aria-label="Animated ribbons responding to pointer">
      <span class="hint">Move • Tilt • Glow</span>
    </div>

    <div class="legend">
      <span class="pill">Mode • <strong id="modeLabel">Noir</strong></span>
      <span class="pill"><span id="last-updated">Last updated: 2026-01-23 08:41:04 EST</span></span>
    </div>
  </div>
</div>

<script>
(function(){
  const root = document.currentScript.closest('.weave2141');
  const canvas = root.querySelector('canvas.ribbons');
  const ctx = canvas.getContext('2d', { alpha: true });
  const themeBtn = root.querySelector('#themeToggle');
  const motionBtn = root.querySelector('#motionToggle');
  const remixBtn = root.querySelector('#remix');
  const loom = root.querySelector('#loom');
  const modeLabel = root.querySelector('#modeLabel');
  const tagline = root.querySelector('#tagline');
  const updated = root.querySelector('#last-updated');

  // Updated timestamp
  (function setUpdated(){
    try {
      const d = new Date();
      const fmt = new Intl.DateTimeFormat(undefined, {
        year:'numeric', month:'short', day:'2-digit', hour:'2-digit', minute:'2-digit'
      });
      updated.textContent = 'Updated ' + fmt.format(d);
    } catch(e){
      updated.textContent = 'Updated ' + new Date().toLocaleString();
    }
  })();

  // Tagline rotations
  const lines = [
    'Breathing color. Pull gently with your cursor; tap to wake the threads.',
    'Design the pause; let the motion arrive to you.',
    'Soft gestures, bright consequences.',
    'Let light take the long way around.',
    'Clarity, with room for wonder.'
  ];

  // Canvas sizing
  let w=0,h=0,DPR=Math.min(2, window.devicePixelRatio || 1);
  function resize(){
    const r = root.getBoundingClientRect();
    w = Math.max(320, Math.floor(r.width));
    h = Math.max(400, Math.floor(r.height));
    canvas.width = Math.floor(w * DPR);
    canvas.height = Math.floor(h * DPR);
    canvas.style.width = w + 'px';
    canvas.style.height = h + 'px';
    ctx.setTransform(DPR,0,0,DPR,0,0);
    seedThreads();
    draw(16); // prime
  }
  const ro = new ResizeObserver(resize);
  ro.observe(root);

  // Threads
  let threads = [];
  function rand(a,b){ return a + Math.random()*(b-a); }
  function seedThreads(){
    const count = Math.floor(Math.max(7, Math.min(14, w/160)));
    threads = new Array(count).fill(0).map((_,i)=>({
      baseY: rand(h*0.12, h*0.88),
      amp: rand(h*0.03, h*0.10),
      freq: rand(0.0032, 0.0105),
      phase: rand(0, Math.PI*2),
      speed: rand(0.25, 0.75),
      thickness: rand(8, 34),
      hue: Math.floor(rand(0,360)),
      sway: rand(0.35, 0.85),
      sparkle: Math.random()*0.5 + 0.4
    }));
  }
  seedThreads();

  // Pointer attractor
  let pointer = { x: w*0.5, y: h*0.5, active: false };
  function setPointer(ev){
    const rect = root.getBoundingClientRect();
    const x = ev.clientX - rect.left;
    const y = ev.clientY - rect.top;
    pointer.x = Math.max(0, Math.min(w, x));
    pointer.y = Math.max(0, Math.min(h, y));
    pointer.active = true;
    root.style.setProperty('--mx', Math.round((x/rect.width)*100)+'%');
    root.style.setProperty('--my', Math.round((y/rect.height)*100)+'%');
  }
  function endPointer(){
    pointer.active = false;
  }
  root.addEventListener('mousemove', setPointer);
  root.addEventListener('mouseleave', endPointer);
  root.addEventListener('touchmove', (ev)=>{
    const t = ev.touches[0]; if (!t) return;
    setPointer(t);
  }, { passive: true });
  root.addEventListener('touchend', endPointer);

  // Motion control
  let running = true;
  const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  if (prefersReduced) {
    running = false;
    root.setAttribute('data-paused','true');
    motionBtn.textContent = 'Play';
    motionBtn.setAttribute('aria-pressed','false');
  }

  motionBtn.addEventListener('click', ()=>{
    running = !running;
    root.toggleAttribute('data-paused', !running);
    motionBtn.textContent = running ? 'Pause' : 'Play';
    motionBtn.setAttribute('aria-pressed', running ? 'true' : 'false');
    if (running) raf(performance.now());
  });

  // Theme toggle
  themeBtn.addEventListener('click', ()=>{
    const toBloom = root.getAttribute('data-theme') !== 'bloom';
    root.setAttribute('data-theme', toBloom ? 'bloom' : 'noir');
    themeBtn.textContent = toBloom ? 'Noir' : 'Bloom';
    themeBtn.setAttribute('aria-pressed', toBloom ? 'true' : 'false');
    modeLabel.textContent = toBloom ? 'Bloom' : 'Noir';
  });

  // Remix (reseeds and rotates tagline)
  remixBtn.addEventListener('click', ()=>{
    seedThreads();
    tagline.textContent = lines[Math.floor(Math.random()*lines.length)];
  });

  // Draw ribbons
  function draw(dt){
    const bloom = root.getAttribute('data-theme') === 'bloom';

    // trail fade
    ctx.globalCompositeOperation = 'source-over';
    ctx.fillStyle = bloom ? 'rgba(255,255,255,0.06)' : 'rgba(8,12,22,0.12)';
    ctx.fillRect(0,0,w,h);

    // composite for glow layers
    ctx.globalCompositeOperation = 'lighter';

    const t = performance.now() * 0.001;

    for (let i=0;i<threads.length;i++){
      const tr = threads[i];

      // primary stroke
      ctx.save();
      ctx.lineCap = 'round';
      ctx.lineJoin = 'round';
      ctx.shadowBlur = 24 * tr.sparkle;
      const light = bloom ? 50 : 65;
      const alpha = bloom ? 0.28 : 0.38;
      ctx.strokeStyle = `hsla(${(tr.hue + i*12)%360}, 85%, ${light}%, ${alpha})`;
      ctx.shadowColor = `hsla(${(tr.hue + i*12)%360}, 90%, 60%, ${alpha*0.9})`;
      ctx.lineWidth = tr.thickness;

      ctx.beginPath();
      const segs = Math.floor(Math.max(160, Math.min(280, w/3)));
      for (let s=0; s<=segs; s++){
        const x = (s/segs) * w;
        const base = tr.baseY + Math.sin(x*tr.freq + t*tr.speed + tr.phase) * tr.amp;
        let y = base + Math.sin(x*0.004 + t*0.8 + i*0.5) * (tr.amp*0.18);
        if (pointer.active){
          const dx = pointer.x - x;
          const dy = pointer.y - y;
          const r = w*0.16;
          const influence = Math.exp(-(dx*dx + dy*dy)/(r*r)) * tr.sway;
          y += dy * influence;
        }
        if (s===0) ctx.moveTo(x, y); else ctx.lineTo(x, y);
      }
      ctx.stroke();

      // inner highlight pass
      ctx.globalAlpha = 1;
      ctx.shadowBlur = 0;
      ctx.lineWidth = Math.max(2, tr.thickness * 0.45);
      ctx.strokeStyle = bloom ? 'rgba(255,255,255,0.14)' : 'rgba(255,255,255,0.10)';
      ctx.stroke();
      ctx.restore();
    }
  }

  // RAF loop
  let last = performance.now();
  function raf(now){
    if (!running) return;
    const dt = now - last; last = now;
    draw(dt);
    requestAnimationFrame(raf);
  }
  resize();
  if (!prefersReduced) requestAnimationFrame(raf); else draw(16);

  // Keyboard: space toggles motion; t toggles theme; r remix
  loom.tabIndex = 0;
  loom.addEventListener('keydown', (e)=>{
    if (e.code === 'Space') { e.preventDefault(); motionBtn.click(); }
    if (e.key && e.key.toLowerCase() === 't') { e.preventDefault(); themeBtn.click(); }
    if (e.key && e.key.toLowerCase() === 'r') { e.preventDefault(); remixBtn.click(); }
  });
})();
</script>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


