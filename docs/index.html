<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<section id="vibe" class="theme-night" aria-label="Kinetic Field Studio">
  <style>
    /* Scope everything to #vibe */
    #vibe {
      --bg: #0b0f1c;
      --panel: rgba(255,255,255,0.06);
      --ink: #eaf2ff;
      --muted: #98a6c9;
      --a1: #7cf0ff;
      --a2: #c0ff9d;
      --a3: #b9a7ff;
      --rad: 26px;
      color: var(--ink);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background:
        radial-gradient(120% 160% at 70% -20%, #162042 0%, var(--bg) 60%, #060911 100%);
      border: 1px solid rgba(255,255,255,.08);
      border-radius: var(--rad);
      padding: clamp(16px, 2.6vw, 28px);
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,.07),
        0 30px 80px -30px rgba(0,0,0,.7),
        0 14px 40px -22px rgba(0,0,0,.6);
      position: relative;
      overflow: clip;
      isolation: isolate;
    }
    /* Film grain */
    #vibe::after{
      content:""; position:absolute; inset:0; pointer-events:none; z-index:0;
      background:
        repeating-linear-gradient(0deg, rgba(255,255,255,.02) 0 1px, transparent 1px 2px),
        repeating-linear-gradient(90deg, rgba(255,255,255,.015) 0 1px, transparent 1px 2px);
      mix-blend-mode: soft-light; opacity:.25;
    }
    /* Floating aurora ribbons */
    #vibe .ribbons{
      position:absolute; inset:-30% -10% -20% -10%; z-index:0; filter: blur(80px) saturate(120%);
      background:
        radial-gradient(40% 40% at 15% 20%, color-mix(in oklab,var(--a1),white 40%) 0%, transparent 70%),
        radial-gradient(46% 46% at 80% 30%, color-mix(in oklab,var(--a2),white 35%) 0%, transparent 72%),
        radial-gradient(60% 60% at 50% 90%, color-mix(in oklab,var(--a3),white 45%) 0%, transparent 74%);
      opacity:.65;
      animation: drift 36s ease-in-out infinite alternate;
    }
    @keyframes drift{
      0%{ transform: translate3d(-1%,1%,0) scale(1); }
      50%{ transform: translate3d(1%,-1%,0) scale(1.03); }
      100%{ transform: translate3d(-1%,0,0) scale(1.01); }
    }

    /* Header */
    #vibe .header{
      position:relative; z-index:2;
      display:grid; grid-template-columns: 1fr auto; align-items:center; gap: 14px;
      margin-bottom: clamp(10px,2.2vw,16px);
    }
    #vibe .brand{
      display:inline-flex; align-items:center; gap:12px; font-weight:900; letter-spacing:.01em;
    }
    #vibe .brand svg{ width:28px; height:28px; filter: drop-shadow(0 10px 24px rgba(124,240,255,.35)); }
    #vibe .brand .sub { display:block; font-weight:700; font-size:12px; color: var(--muted); letter-spacing: .06em; }

    /* Segmented control */
    #vibe .seg{ display:inline-flex; gap:6px; padding:6px; border-radius:999px; background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12); box-shadow: inset 0 1px 0 rgba(255,255,255,.08); }
    #vibe .seg button{
      appearance:none; border:0; cursor:pointer; font-weight:800; font-size:12px; color: var(--muted);
      padding:8px 12px; border-radius:999px; background: transparent;
      transition: color .18s ease, background .18s ease, transform .12s ease, box-shadow .2s ease;
    }
    #vibe .seg button[aria-pressed="true"]{
      color: var(--ink);
      background: linear-gradient(180deg, rgba(255,255,255,.2), rgba(255,255,255,.08));
      box-shadow: 0 10px 22px -14px rgba(0,0,0,.6), inset 0 1px 0 rgba(255,255,255,.25);
    }
    #vibe .seg button:active{ transform: translateY(1px); }

    /* Stage */
    #vibe .stage{
      position:relative; z-index:1;
      border-radius: clamp(18px, 2.4vw, 22px);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border: 1px solid rgba(255,255,255,.12);
      backdrop-filter: blur(14px) saturate(140%);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.08), 0 20px 46px -28px rgba(0,0,0,.8);
      overflow:hidden;
      min-height: clamp(320px, 44vw, 520px);
      display:grid; grid-template-rows: auto 1fr auto;
    }
    #vibe .stage .copy{
      padding: clamp(12px,1.8vw,16px) clamp(14px,2vw,20px);
      display:flex; align-items: center; justify-content: space-between; gap: 12px;
    }
    #vibe h1{
      margin:0; line-height:1;
      font-size: clamp(28px, 6.6vw, 64px);
      letter-spacing: -0.01em;
      background: linear-gradient(90deg, #eaf2ff 0%, color-mix(in oklab,var(--a3),#eaf2ff 40%) 55%, var(--a1) 100%);
      -webkit-background-clip: text; background-clip: text; color: transparent;
    }
    #vibe .lead{ margin:0; color:var(--muted); font-size: clamp(12px, 2vw, 16px); line-height:1.6; text-wrap: balance; }

    /* Canvas shell */
    #vibe .canvas-wrap{ position:relative; }
    #vibe canvas{ width:100%; height:100%; display:block; background: radial-gradient(160% 140% at 50% 50%, rgba(255,255,255,.02), rgba(0,0,0,.0)); }
    #vibe .hud{
      position:absolute; inset:0; display:flex; align-items:center; justify-content:center; pointer-events:none;
    }
    #vibe .pulse-ring{
      width: 180px; height: 180px; border-radius:50%;
      border: 1px dashed rgba(255,255,255,.18);
      box-shadow: 0 0 0 0 rgba(124,240,255,.18);
      animation: pulse 6s ease-in-out infinite;
    }
    @keyframes pulse{
      0%{ transform: scale(0.92); box-shadow: 0 0 0 0 rgba(124,240,255,.18);}
      60%{ transform: scale(1.02); box-shadow: 0 0 40px 0 rgba(124,240,255,.16);}
      100%{ transform: scale(0.92); box-shadow: 0 0 0 0 rgba(124,240,255,.18);}
    }

    /* Controls */
    #vibe .controls{
      display:flex; flex-wrap:wrap; gap:10px; padding: clamp(10px,1.6vw,14px) clamp(14px,2vw,20px);
      align-items:center; justify-content: space-between; border-top: 1px solid rgba(255,255,255,.08);
      background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
    }
    #vibe .left-controls, #vibe .right-controls{ display:flex; flex-wrap:wrap; align-items:center; gap:10px; }
    #vibe .btn{
      appearance:none; border:0; cursor:pointer; font-weight:900; font-size:13px; border-radius:14px;
      padding: 10px 14px; color: #0b1220;
      background: linear-gradient(90deg, var(--a2), var(--a1));
      box-shadow: 0 14px 28px -14px color-mix(in oklab, var(--a1), black 26%), inset 0 1px 0 rgba(255,255,255,.75);
      transition: transform .12s ease, box-shadow .22s ease, opacity .2s ease;
    }
    #vibe .btn:hover{ transform: translateY(-2px); }
    #vibe .btn:active{ transform: translateY(0); }
    #vibe .ghost{
      color: var(--ink);
      background: transparent;
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.25);
    }
    #vibe .range{
      display:grid; grid-template-columns: auto 1fr auto; gap:8px; color: var(--muted); font-weight:700; font-size:12px;
      padding: 8px 10px; border-radius: 12px; background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12);
    }
    #vibe input[type="range"]{
      -webkit-appearance:none; appearance:none; width:160px; height:10px; border-radius:999px; outline:none;
      background: rgba(255,255,255,.12); border: 1px solid rgba(255,255,255,.14);
    }
    #vibe input[type="range"]::-webkit-slider-thumb{
      -webkit-appearance:none; appearance:none; width:18px; height:18px; border-radius:50%;
      background: linear-gradient(180deg,#fff,rgba(255,255,255,.7));
      border:1px solid rgba(255,255,255,.25);
      box-shadow: 0 12px 24px -12px rgba(0,0,0,.6), inset 0 1px 0 #fff;
    }
    #vibe .meta{ color: var(--muted); font-size:12px; display:flex; align-items:center; gap:10px; }

    /* Theme variants */
    #vibe.theme-dawn{
      --bg:#f5f7ff;
      --panel: rgba(255,255,255,0.8);
      --ink:#0e1325; --muted:#5a6688; --a1:#7cc3ff; --a2:#9dffd2; --a3:#a8a2ff;
      background: radial-gradient(140% 120% at 20% -20%, #e8f0ff 0%, #f8fbff 50%, #eef3ff 100%);
      border-color: rgba(16,18,24,.12);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.9), 0 28px 70px -34px rgba(24,40,80,.18), 0 12px 34px -18px rgba(24,40,80,.12);
    }
    #vibe.theme-dusk{
      --bg:#0e1428; --ink:#eaf2ff; --muted:#98a6c9; --a1:#7cf0ff; --a2:#ffd29d; --a3:#6e9bff;
      background: radial-gradient(120% 160% at 60% -20%, #1b2a57 0%, #0e1428 60%, #090e1d 100%);
    }
    #vibe.theme-night{
      /* defaults already defined */
    }

    /* Responsive */
    @media (max-width: 860px){
      #vibe .stage{ grid-template-rows: auto 1fr auto; }
      #vibe .lead{ display:none; }
    }
    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      #vibe .ribbons{ animation: none !important; }
      #vibe .pulse-ring{ animation: none !important; opacity: .7; }
      #vibe .btn:hover{ transform: none; }
    }
  </style>

  <div class="ribbons" aria-hidden="true"></div>

  <div class="header">
    <div class="brand" aria-label="Kinetic Field">
      <svg viewBox="0 0 48 48" aria-hidden="true">
        <defs>
          <linearGradient id="gem" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="#7cf0ff"/>
            <stop offset="50%" stop-color="#9dffd2"/>
            <stop offset="100%" stop-color="#b9a7ff"/>
          </linearGradient>
        </defs>
        <path d="M24 4l15 10-6 20H15L9 14 24 4z" fill="url(#gem)"/>
      </svg>
      Kinetic Field
      <span class="sub">A living poster for calm focus</span>
    </div>

    <div class="seg" role="group" aria-label="Theme">
      <button type="button" data-theme="dawn" aria-pressed="false">Dawn</button>
      <button type="button" data-theme="dusk" aria-pressed="true">Dusk</button>
      <button type="button" data-theme="night" aria-pressed="false">Night</button>
    </div>
  </div>

  <div class="stage" id="stage">
    <div class="copy">
      <h1>Flow made visible.</h1>
      <p class="lead">A field of points bends to time and touch. Nudge the lattice and watch coherence ripple back.</p>
    </div>

    <div class="canvas-wrap" aria-label="Interactive kinetic canvas">
      <canvas id="field" role="img" aria-label="Animated point field"></canvas>
      <div class="hud" aria-hidden="true"><div class="pulse-ring"></div></div>
    </div>

    <div class="controls">
      <div class="left-controls">
        <button class="btn" id="toggle">Pause</button>
        <button class="btn ghost" id="shuffle">Shuffle</button>
        <div class="range">
          <span>Density</span>
          <input type="range" id="density" min="10" max="40" value="24" step="1" aria-label="Density">
          <span id="densityVal">24</span>
        </div>
      </div>
      <div class="right-controls meta">
        <span id="mode">Mode: Weave</span>
        <span id="last-updated">Last updated: 2025-12-18 11:27:36 EST</span>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const root = document.getElementById('vibe');
      const canvas = document.getElementById('field');
      const ctx = canvas.getContext('2d');
      const toggleBtn = document.getElementById('toggle');
      const shuffleBtn = document.getElementById('shuffle');
      const density = document.getElementById('density');
      const densityVal = document.getElementById('densityVal');
      const modeEl = document.getElementById('mode');
      const last = document.getElementById('last-updated');
      const seg = root.querySelectorAll('.seg button');

      // Timestamp
      try {
        const now = new Date();
        const fmt = new Intl.DateTimeFormat(undefined, { year:'numeric', month:'short', day:'2-digit', hour:'2-digit', minute:'2-digit', second:'2-digit' });
        const tz = Intl.DateTimeFormat().resolvedOptions().timeZone || 'local';
        last.textContent = `Updated ${fmt.format(now)} â€¢ ${tz}`;
      } catch {
        last.textContent = 'Updated just now';
      }

      // Theme switching
      const THEMES = { dawn: 'theme-dawn', dusk: 'theme-dusk', night: 'theme-night' };
      function setTheme(name){
        root.classList.remove(...Object.values(THEMES));
        root.classList.add(THEMES[name] || 'theme-night');
        seg.forEach(b => b.setAttribute('aria-pressed', String(b.dataset.theme === name)));
      }
      seg.forEach(b => b.addEventListener('click', () => setTheme(b.dataset.theme)));
      // Default by hour
      const hr = new Date().getHours();
      setTheme(hr >= 6 && hr < 12 ? 'dawn' : hr >= 12 && hr < 19 ? 'dusk' : 'night');

      // Canvas sizing
      let W=0, H=0, DPR = Math.min(2, window.devicePixelRatio || 1);
      function resize(){
        const r = canvas.getBoundingClientRect();
        W = Math.max(320, Math.floor(r.width));
        H = Math.max(220, Math.floor(r.height));
        canvas.width = Math.floor(W * DPR);
        canvas.height = Math.floor(H * DPR);
        ctx.setTransform(DPR,0,0,DPR,0,0);
      }
      const ro = new ResizeObserver(resize); ro.observe(canvas);

      // Field params
      let running = true;
      let t = 0;
      let GRID = 24;
      let seed = Math.random() * 1000 | 0;
      const modes = ['Weave','Breathe','Spiral'];
      let mode = 0;
      densityVal.textContent = GRID;

      // Pointer influence
      const pointer = { x: 0, y: 0, active: false };
      canvas.addEventListener('pointermove', e => {
        const r = canvas.getBoundingClientRect();
        pointer.x = (e.clientX - r.left);
        pointer.y = (e.clientY - r.top);
        pointer.active = true;
      });
      canvas.addEventListener('pointerleave', () => pointer.active = false);

      // Controls
      toggleBtn.addEventListener('click', () => {
        running = !running;
        toggleBtn.textContent = running ? 'Pause' : 'Play';
      });
      shuffleBtn.addEventListener('click', () => {
        seed = Math.random() * 10000 | 0;
        mode = (mode + 1) % modes.length;
        modeEl.textContent = `Mode: ${modes[mode]}`;
      });
      density.addEventListener('input', () => {
        GRID = parseInt(density.value, 10);
        densityVal.textContent = GRID;
      });

      // Helpers
      const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      function rand(n){ const x = Math.sin(seed++) * 10000; return n * (x - Math.floor(x)); }
      function ease(x){ return x*(2-x); }

      function draw(){
        if(running && !reduce) t += 0.016;
        ctx.clearRect(0,0,W,H);

        // Soft vignette
        const g = ctx.createRadialGradient(W*.5, H*.55, Math.min(W,H)*.2, W*.5, H*.55, Math.max(W,H)*.8);
        g.addColorStop(0, 'rgba(255,255,255,0.04)');
        g.addColorStop(1, 'rgba(0,0,0,0.00)');
        ctx.fillStyle = g;
        ctx.fillRect(0,0,W,H);

        const cols = Math.max(10, Math.floor(W / GRID));
        const rows = Math.max(8, Math.floor(H / GRID));
        const ox = (W - (cols-1)*GRID)/2;
        const oy = (H - (rows-1)*GRID)/2;

        // Glow trail layer
        ctx.save();
        ctx.globalCompositeOperation = 'lighter';

        for(let r=0;r<rows;r++){
          for(let c=0;c<cols;c++){
            const x0 = ox + c*GRID;
            const y0 = oy + r*GRID;

            // Vector field
            let ax=0, ay=0;
            const kx = 0.9 + (seed%5)*0.03;
            const ky = 1.1 + (seed%7)*0.02;
            const tt = t * (0.7 + (seed%9)*0.03);

            if(mode===0){ // Weave
              ax = Math.sin(y0*0.03*kx + tt)*6;
              ay = Math.cos(x0*0.03*ky + tt)*6;
            } else if (mode===1){ // Breathe
              const w = Math.sin(tt*0.8) * 8;
              ax = Math.sin((x0+y0)*0.02 + tt) * (4 + w*0.2);
              ay = Math.cos((x0-y0)*0.02 - tt) * (4 + w*0.2);
            } else { // Spiral
              const dx = x0 - W/2, dy = y0 - H/2;
              const ang = Math.atan2(dy, dx) + tt*0.5;
              const rad = Math.hypot(dx, dy)*0.02;
              ax = Math.cos(ang) * (4 + rad);
              ay = Math.sin(ang) * (4 + rad);
            }

            // Pointer gravity
            if(pointer.active){
              const dx = pointer.x - x0;
              const dy = pointer.y - y0;
              const dd = Math.hypot(dx,dy) || 1;
              const inf = Math.min(1, 140/dd);
              ax += dx/dd * 10 * inf;
              ay += dy/dd * 10 * inf;
            }

            const x = x0 + ax;
            const y = y0 + ay;

            // Color shifts from theme accents
            const h1 = getComputedStyle(root).getPropertyValue('--a1').trim() || '#7cf0ff';
            const h2 = getComputedStyle(root).getPropertyValue('--a3').trim() || '#b9a7ff';

            // Draw point with shadow glow
            ctx.beginPath();
            ctx.fillStyle = c % 2 ? h1 : h2;
            ctx.globalAlpha = 0.9;
            ctx.arc(x, y, 1.8, 0, Math.PI*2);
            ctx.fill();

            // Soft halo
            ctx.beginPath();
            ctx.globalAlpha = 0.18;
            ctx.fillStyle = c % 2 ? h1 : h2;
            ctx.arc(x, y, 6.5, 0, Math.PI*2);
            ctx.fill();
            ctx.globalAlpha = 1;
          }
        }
        ctx.restore();

        // Subtle lines to imply flow
        ctx.save();
        ctx.globalAlpha = 0.05;
        ctx.strokeStyle = '#ffffff';
        for(let i=0;i<3;i++){
          const y = ease((Math.sin(t*0.6 + i)*0.5+0.5)) * H;
          ctx.beginPath();
          ctx.moveTo(0, y);
          for(let x=0;x<=W;x+=20){
            const yy = y + Math.sin(x*0.01 + t*0.8 + i)*6;
            ctx.lineTo(x, yy);
          }
          ctx.stroke();
        }
        ctx.restore();

        requestAnimationFrame(draw);
      }

      // Start
      resize();
      if(reduce){
        running = false;
        toggleBtn.textContent = 'Play';
        // draw a static scene once
        draw();
      } else {
        requestAnimationFrame(draw);
      }

      // Tilt the stage slightly
      const stage = document.getElementById('stage');
      function tilt(e){
        const r = stage.getBoundingClientRect();
        const x = (e.clientX - r.left)/r.width - 0.5;
        const y = (e.clientY - r.top)/r.height - 0.5;
        stage.style.transform = `perspective(900px) rotateX(${(-y*4).toFixed(2)}deg) rotateY(${(x*5).toFixed(2)}deg)`;
      }
      function untilt(){ stage.style.transform = 'perspective(900px)'; }
      if(!reduce){
        stage.addEventListener('mousemove', tilt);
        stage.addEventListener('mouseleave', untilt);
      }

      // Cleanup observer
      const obs = new MutationObserver(() => {
        if (!document.body.contains(root)) { obs.disconnect(); ro.disconnect(); }
      });
      obs.observe(document.body, { childList: true, subtree: true });
    }());
  </script>
</section>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


