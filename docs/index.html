<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<section class="aurora-garden" data-theme="dusk" style="--mx:50%;--my:40%;">
  <style>
    .aurora-garden {
      --ink: #eaf2ff;
      --muted: rgba(234,242,255,.78);
      --accent1: #87d1ff;
      --accent2: #a58bff;
      --accent3: #ff9fd6;
      --bg1: #0a0f1a;
      --bg2: #0c1424;
      position: relative;
      display: grid;
      grid-template-columns: 1.05fr 1fr;
      gap: clamp(18px, 3.6vw, 34px);
      align-items: center;
      border-radius: 32px;
      padding: clamp(20px, 4.5vw, 42px);
      color: var(--ink);
      background:
        radial-gradient(700px 500px at var(--mx) var(--my), rgba(255,255,255,.08), transparent 60%),
        linear-gradient(130deg, var(--bg1) 10%, var(--bg2) 60%, #0a1220 100%);
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 30px 90px rgba(0,0,0,.55), inset 0 1px 0 rgba(255,255,255,.05);
      overflow: hidden;
      font-family: ui-sans-serif, -apple-system, Segoe UI, Inter, Roboto, "Helvetica Neue", Arial;
      isolation: isolate;
      transform-style: preserve-3d;
    }
    @media (max-width: 880px){ .aurora-garden { grid-template-columns: 1fr; } }

    /* Light theme */
    .aurora-garden[data-theme="dawn"]{
      --ink: #121826;
      --muted: rgba(18,24,38,.72);
      --accent1: #ff6d7a;
      --accent2: #ffb44b;
      --accent3: #2dd4a7;
      --bg1: #fff7ef;
      --bg2: #f4f8ff;
      background:
        radial-gradient(800px 560px at var(--mx) var(--my), rgba(0,0,0,.07), transparent 60%),
        linear-gradient(130deg, var(--bg1) 10%, var(--bg2) 70%, #fffdf8 100%);
      border-color: rgba(0,0,0,.12);
      box-shadow: 0 24px 70px rgba(0,0,0,.2), inset 0 1px 0 rgba(255,255,255,.9);
    }

    /* Ambient ribbons */
    .aurora-garden::before,
    .aurora-garden::after{
      content:"";
      position:absolute;
      inset:-40%;
      pointer-events:none;
      mix-blend-mode: screen;
    }
    .aurora-garden::before{
      background:
        conic-gradient(from 120deg at 60% 40%, rgba(135,209,255,.28), rgba(165,139,255,.28), rgba(255,159,214,.24), transparent 75%);
      filter: blur(42px) saturate(1.15);
      animation: drift 26s linear infinite;
      opacity:.55;
    }
    .aurora-garden[data-theme="dawn"]::before{
      mix-blend-mode: multiply;
      opacity:.35; filter: blur(30px) saturate(1.2);
    }
    .aurora-garden::after{
      background:
        radial-gradient(600px 420px at var(--mx) var(--my), rgba(255,255,255,.13), transparent 60%);
      transition: background .3s ease;
    }
    @keyframes drift{ to { transform: rotate(1turn); } }

    /* Left column: copy */
    .garden-copy { position: relative; z-index: 2; display: grid; gap: 14px; align-content: start; }
    .badge {
      display:inline-flex; align-items:center; gap:8px;
      font-size: 12px; letter-spacing:.26em; text-transform: uppercase;
      color: var(--muted);
      padding: 8px 12px; border-radius: 999px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      backdrop-filter: blur(6px);
    }
    .aurora-garden[data-theme="dawn"] .badge{
      border-color: rgba(0,0,0,.12);
      background: rgba(0,0,0,.05);
      backdrop-filter: blur(4px);
    }
    .title {
      margin: 2px 0 4px;
      font-weight: 900; letter-spacing: -0.02em; line-height: .96;
      font-size: clamp(36px, 6.6vw, 78px);
      background: linear-gradient(90deg, var(--accent1), var(--accent2), var(--accent3));
      -webkit-background-clip:text; background-clip:text; color: transparent;
    }
    .lead { margin: 0; color: var(--muted); font-size: clamp(14px, 2.4vw, 18px); max-width: 50ch; }

    .controls { display:flex; flex-wrap: wrap; gap: 10px; margin-top: 10px; }
    .btn {
      appearance: none; cursor: pointer;
      border-radius: 14px; padding: 12px 14px; font-weight: 800; letter-spacing:.2px;
      border: 1px solid rgba(255,255,255,.22);
      background: linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.65));
      color: #0c1220;
      box-shadow: 0 12px 26px rgba(0,0,0,.28), inset 0 1px 0 rgba(255,255,255,.6);
      transition: transform .2s ease, box-shadow .2s ease, filter .2s ease;
    }
    .btn:hover{ transform: translateY(-1px); box-shadow: 0 18px 34px rgba(0,0,0,.36), inset 0 1px 0 rgba(255,255,255,.75); }
    .btn:active{ transform: translateY(0); }
    .btn.ghost{
      background: rgba(255,255,255,.08); color: var(--ink);
      border-color: rgba(255,255,255,.2); box-shadow: inset 0 1px 0 rgba(255,255,255,.08);
    }
    .aurora-garden[data-theme="dawn"] .btn.ghost{
      background: rgba(0,0,0,.06); color: #121826;
      border-color: rgba(0,0,0,.14); box-shadow: inset 0 1px 0 rgba(255,255,255,.8);
    }
    .btn.outline{ background: transparent; color: var(--ink); border-color: rgba(255,255,255,.28); box-shadow:none; }
    .aurora-garden[data-theme="dawn"] .btn.outline{ border-color: rgba(0,0,0,.22); }

    .meta { display:flex; align-items:center; gap:10px; margin-top: 8px; color: var(--muted); font-size: 12px; }

    /* Right column: Stage */
    .stage {
      position: relative; border-radius: 22px; min-height: clamp(280px, 45vw, 560px);
      padding: clamp(12px, 2vw, 18px);
      background:
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)),
        repeating-linear-gradient(90deg, rgba(255,255,255,.04) 0 1px, transparent 1px 40px),
        repeating-linear-gradient(0deg, rgba(255,255,255,.03) 0 1px, transparent 1px 40px);
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: 0 16px 40px rgba(0,0,0,.35);
      overflow:hidden; transform-style: preserve-3d; perspective: 900px;
    }
    .aurora-garden[data-theme="dawn"] .stage{
      background:
        linear-gradient(180deg, rgba(255,255,255,.88), rgba(255,255,255,.6)),
        repeating-linear-gradient(90deg, rgba(0,0,0,.06) 0 1px, transparent 1px 40px),
        repeating-linear-gradient(0deg, rgba(0,0,0,.05) 0 1px, transparent 1px 40px);
      border-color: rgba(0,0,0,.1);
      box-shadow: 0 12px 26px rgba(0,0,0,.18);
    }

    canvas#gardenCanvas{ position:absolute; inset:0; width:100%; height:100%; display:block; }

    /* Halo ring */
    .ring {
      position:absolute; inset: 6% 6%;
      border-radius: 50%;
      border: 1px dashed rgba(255,255,255,.18);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
      pointer-events: none;
      animation: slowspin 18s linear infinite;
    }
    .aurora-garden[data-theme="dawn"] .ring{ border-color: rgba(0,0,0,.16); box-shadow: inset 0 0 0 1px rgba(0,0,0,.06); }
    @keyframes slowspin{ to { transform: rotate(360deg); } }

    /* Prefers reduced motion */
    @media (prefers-reduced-motion: reduce){
      .aurora-garden::before, .ring{ animation: none !important; }
    }
  </style>

  <div class="garden-copy">
    <span class="badge">Edition 434 â€¢ Time Garden</span>
    <h1 class="title">Grow Quietly</h1>
    <p class="lead">A living poster that blooms with your pointer. Dawn to dusk, petals find their rhythm in color and light.</p>

    <div class="controls">
      <button class="btn" id="themeBtn" aria-pressed="false">Switch to Dawn</button>
      <button class="btn ghost" id="flowBtn" aria-pressed="true">Pause Flow</button>
      <button class="btn outline" id="bloomBtn">Bloom</button>
    </div>

    <div class="meta">
      <span id="last-updated">Last updated: 2025-11-05 05:20:26 EST</span>
    </div>
  </div>

  <div class="stage" id="stage" aria-label="Generative bloom field">
    <canvas id="gardenCanvas"></canvas>
    <div class="ring" aria-hidden="true"></div>
  </div>

  <script>
    (function(){
      const root = document.currentScript.closest('.aurora-garden');
      const stage = root.querySelector('#stage');
      const canvas = root.querySelector('#gardenCanvas');
      const ctx = canvas.getContext('2d', { alpha: true });
      const btnTheme = root.querySelector('#themeBtn');
      const btnFlow = root.querySelector('#flowBtn');
      const btnBloom = root.querySelector('#bloomBtn');
      const updated = root.querySelector('#last-updated');

      // Timestamp
      try {
        const d = new Date();
        updated.textContent = 'Last updated: ' + d.toLocaleString([], { weekday:'short', month:'short', day:'2-digit', hour:'2-digit', minute:'2-digit' });
      } catch(e){}

      // Spotlight tracking
      function updateSpot(e){
        const r = root.getBoundingClientRect();
        const x = ((e.clientX - r.left) / r.width) * 100;
        const y = ((e.clientY - r.top) / r.height) * 100;
        root.style.setProperty('--mx', x + '%');
        root.style.setProperty('--my', y + '%');
      }
      root.addEventListener('pointermove', updateSpot, {passive:true});

      // Tilt stage
      let rect;
      function updateRect(){ rect = stage.getBoundingClientRect(); }
      updateRect();
      window.addEventListener('resize', updateRect, {passive:true});
      stage.addEventListener('pointermove', (e)=>{
        if(!rect) return;
        const nx = (e.clientX - rect.left)/rect.width - 0.5;
        const ny = (e.clientY - rect.top)/rect.height - 0.5;
        const rx = (-ny)*7, ry = nx*9;
        stage.style.transform = 'rotateX('+rx+'deg) rotateY('+ry+'deg)';
      }, {passive:true});
      stage.addEventListener('pointerleave', ()=>{ stage.style.transform = 'rotateX(0) rotateY(0)'; });

      // Canvas sizing
      function sizeCanvas(){
        const r = stage.getBoundingClientRect();
        const ratio = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
        canvas.width = Math.floor(r.width * ratio);
        canvas.height = Math.floor(r.height * ratio);
        draw(true);
      }
      window.addEventListener('resize', sizeCanvas, {passive:true});
      sizeCanvas();

      // Garden system
      const mouse = { x: 0, y: 0, active: false };
      stage.addEventListener('pointermove', (e)=>{
        const r = canvas.getBoundingClientRect();
        const ratio = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
        mouse.x = (e.clientX - r.left) * ratio;
        mouse.y = (e.clientY - r.top) * ratio;
        mouse.active = true;
      }, {passive:true});
      stage.addEventListener('pointerleave', ()=>{ mouse.active = false; });

      let raf, t = 0, flowing = true;
      const blooms = [];

      function themeIsDawn(){ return root.getAttribute('data-theme') === 'dawn'; }

      function palette(i){
        if (themeIsDawn()){
          // warm dawns
          return [
            {h: 10, s: 92, l: 60},
            {h: 30, s: 90, l: 58},
            {h: 145, s: 64, l: 48},
            {h: 8, s: 82, l: 62}
          ][i % 4];
        } else {
          // cool dusks
          return [
            {h: 205, s: 90, l: 64},
            {h: 255, s: 86, l: 66},
            {h: 315, s: 88, l: 70},
            {h: 185, s: 82, l: 58}
          ][i % 4];
        }
      }

      function seedBloom(cx, cy, scale=1){
        const petals = Math.floor(5 + Math.random()*5);
        const hueShift = Math.floor(Math.random()*360);
        blooms.push({
          x: cx, y: cy,
          baseR: 14*scale + Math.random()*10*scale,
          petals,
          life: 0,
          maxLife: 1200 + Math.random()*1200,
          spin: (Math.random() > 0.5 ? 1 : -1) * (0.002 + Math.random()*0.006),
          sway: 0.6 + Math.random()*1.6,
          hueShift
        });
      }

      // Seed initial blooms
      function seedField(){
        blooms.length = 0;
        const cw = canvas.width, ch = canvas.height;
        const n = 22;
        for (let i=0;i<n;i++){
          const a = (i/n) * Math.PI * 2;
          const r = Math.min(cw, ch)*0.28 + Math.random()*Math.min(cw, ch)*0.12;
          const x = cw/2 + Math.cos(a) * r * 0.7;
          const y = ch/2 + Math.sin(a) * r * 0.5;
          seedBloom(x, y, 0.8 + Math.random()*0.8);
        }
        // center
        seedBloom(cw/2, ch/2, 1.4);
      }
      seedField();

      function draw(staticOnly){
        if(!ctx) return;
        const w = canvas.width, h = canvas.height;
        // soft fade wash
        ctx.globalCompositeOperation = 'source-over';
        ctx.globalAlpha = themeIsDawn() ? 0.18 : 0.14;
        ctx.fillStyle = themeIsDawn() ? 'rgba(255,255,255,1)' : 'rgba(0,0,0,1)';
        ctx.fillRect(0,0,w,h);

        // ambient glow
        const grad = ctx.createRadialGradient(w/2, h/2, Math.min(w,h)*0.05, w/2, h/2, Math.min(w,h)*0.6);
        if (themeIsDawn()){
          grad.addColorStop(0, 'rgba(255, 230, 200, 0.35)');
          grad.addColorStop(1, 'rgba(255,255,255,0)');
        } else {
          grad.addColorStop(0, 'rgba(120, 180, 255, 0.22)');
          grad.addColorStop(1, 'rgba(0,0,0,0)');
        }
        ctx.globalAlpha = 1;
        ctx.fillStyle = grad;
        ctx.fillRect(0,0,w,h);

        // stars (dusk)
        if (!themeIsDawn()){
          ctx.save();
          ctx.globalAlpha = 0.5;
          ctx.fillStyle = 'rgba(255,255,255,0.5)';
          for (let i=0;i<28;i++){
            const sx = (i*947 % w), sy = (i*613 % h);
            const r = ((i*37)%3)+1;
            ctx.beginPath(); ctx.arc(sx, sy, r, 0, Math.PI*2); ctx.fill();
          }
          ctx.restore();
        }

        t += 1;

        // draw blooms
        for (let i=0;i<blooms.length;i++){
          const b = blooms[i];
          const life01 = Math.min(1, b.life / 600);
          const R = b.baseR * (0.5 + life01*0.9) * (1 + 0.06*Math.sin(t*0.05 + i));
          const pal = palette(i);
          const hue = (pal.h + b.hueShift) % 360;

          // pointer attraction
          if (mouse.active){
            const dx = mouse.x - b.x, dy = mouse.y - b.y;
            const dist = Math.hypot(dx, dy) + 0.001;
            const pull = Math.min(0.08, 140 / (dist*dist)) * (themeIsDawn() ? 0.8 : 1);
            b.x += dx * pull;
            b.y += dy * pull;
          } else {
            // gentle drift
            b.x += Math.sin((t+i)*0.002 + i) * 0.2;
            b.y += Math.cos((t-i)*0.002 - i) * 0.15;
          }

          // stem
          ctx.save();
          ctx.globalAlpha = themeIsDawn() ? 0.25 : 0.18;
          ctx.strokeStyle = themeIsDawn() ? 'rgba(20, 120, 80, 0.5)' : 'rgba(160, 220, 255, 0.35)';
          ctx.lineWidth = 1.2 * (window.devicePixelRatio||1);
          ctx.beginPath();
          const sx = b.x + Math.sin((t+i)*0.01)*12;
          const sy = b.y + Math.cos((t+i)*0.011)*16;
          ctx.moveTo(w/2, h);
          ctx.bezierCurveTo(w/2, h*0.72, sx, sy + 60, b.x, b.y);
          ctx.stroke();
          ctx.restore();

          // petals
          const petals = b.petals;
          for (let p=0;p<petals;p++){
            const ang = (p/petals) * Math.PI*2 + t*b.spin;
            const puls = 1 + Math.sin(t*0.03 + p+i) * 0.08;
            const pr = R * puls;
            ctx.save();
            ctx.translate(b.x, b.y);
            ctx.rotate(ang);
            ctx.scale(1, 0.66 + 0.2*Math.sin(t*0.02 + p));
            const grd = ctx.createLinearGradient(0,0, pr, pr);
            const l1 = Math.max(38, pal.l - 12);
            const l2 = Math.min(80, pal.l + 12);
            grd.addColorStop(0, 'hsla(' + hue + ',' + pal.s + '%,' + l2 + '%,0.85)');
            grd.addColorStop(1, 'hsla(' + ((hue+25)%360) + ',' + Math.min(95, pal.s+10) + '%,' + l1 + '%,0.9)');
            ctx.fillStyle = grd;
            ctx.shadowBlur = 16;
            ctx.shadowColor = 'hsla(' + hue + ',90%,' + (pal.l+10) + '%,0.5)';
            ctx.beginPath();
            ctx.moveTo(0,0);
            const k = pr;
            ctx.quadraticCurveTo(pr*0.35, -k*0.6, pr, 0);
            ctx.quadraticCurveTo(pr*0.35, k*0.6, 0, 0);
            ctx.closePath();
            ctx.fill();
            ctx.restore();
          }

          // core
          ctx.save();
          ctx.globalAlpha = 0.9;
          ctx.beginPath();
          ctx.fillStyle = 'hsla(' + hue + ',' + Math.min(100, pal.s+10) + '%,' + Math.min(80, pal.l+12) + '%, 0.95)';
          ctx.shadowBlur = 10;
          ctx.shadowColor = 'hsla(' + hue + ',100%,70%,0.65)';
          ctx.arc(b.x, b.y, Math.max(1.6, R*0.16), 0, Math.PI*2);
          ctx.fill();
          ctx.restore();

          // life advance
          if (flowing) b.life += 1;
          if (b.life > b.maxLife){
            // fade out and respawn softly
            blooms.splice(i,1);
            i--;
            const nx = w/2 + (Math.random()-0.5) * w*0.6;
            const ny = h/2 + (Math.random()-0.5) * h*0.5;
            seedBloom(nx, ny, 0.8 + Math.random()*1.2);
          }
        }

        if (!staticOnly && flowing) raf = requestAnimationFrame(draw);
      }

      // Controls
      btnTheme.addEventListener('click', ()=>{
        const dawn = root.getAttribute('data-theme') === 'dawn';
        if (dawn){
          root.setAttribute('data-theme', 'dusk');
          btnTheme.textContent = 'Switch to Dawn';
          btnTheme.setAttribute('aria-pressed', 'false');
        } else {
          root.setAttribute('data-theme', 'dawn');
          btnTheme.textContent = 'Switch to Dusk';
          btnTheme.setAttribute('aria-pressed', 'true');
        }
        draw(true);
      });

      btnFlow.addEventListener('click', ()=>{
        flowing = !flowing;
        btnFlow.textContent = flowing ? 'Pause Flow' : 'Resume Flow';
        btnFlow.setAttribute('aria-pressed', String(flowing));
        if (flowing) draw(); else cancelAnimationFrame(raf);
      });

      btnBloom.addEventListener('click', ()=>{
        const w = canvas.width, h = canvas.height;
        for (let i=0;i<7;i++){
          const ang = Math.random()*Math.PI*2;
          const r = Math.min(w,h) * (0.12 + Math.random()*0.28);
          const x = w/2 + Math.cos(ang)*r*0.8;
          const y = h/2 + Math.sin(ang)*r*0.6;
          seedBloom(x, y, 0.8 + Math.random()*1.6);
        }
        draw(true);
      });

      // Click to bloom at pointer
      stage.addEventListener('pointerdown', (e)=>{
        const r = canvas.getBoundingClientRect();
        const ratio = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
        const x = (e.clientX - r.left) * ratio;
        const y = (e.clientY - r.top) * ratio;
        seedBloom(x, y, 1.2);
        draw(true);
      });

      // Start
      draw(true);
      if (flowing) raf = requestAnimationFrame(draw);
    })();
  </script>
</section>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


