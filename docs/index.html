<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<div id="vibe1581" data-scene="midnight" aria-live="polite">
  <style>
    /* Tokens */
    #vibe1581{
      --ink:#eaf2ff;
      --muted:#9bb0d4;
      --bg-1:#090d17;
      --bg-2:#0b1430;
      --bg-3:#101a3e;

      --p1:#79a8ff;
      --p2:#ff91c1;
      --p3:#73f0d4;
      --p4:#ffd36e;

      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
      color:var(--ink);
      border-radius:28px;
      padding:clamp(18px,3vw,34px);
      background:
        radial-gradient(160% 120% at 20% -10%, color-mix(in oklab, var(--p3) 18%, transparent), transparent 40%),
        radial-gradient(180% 140% at 120% 120%, color-mix(in oklab, var(--p2) 18%, transparent), transparent 40%),
        linear-gradient(180deg, var(--bg-2), var(--bg-1));
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,0.15),
        0 20px 60px rgba(0,0,0,0.35);
      position:relative; overflow:hidden; isolation:isolate;
    }

    /* Floating glass flecks */
    #vibe1581::before,
    #vibe1581::after{
      content:"";
      position:absolute; inset:-80px; pointer-events:none; z-index:0;
      background:
        radial-gradient(120px 120px at 15% 25%, color-mix(in oklab, var(--p1) 18%, transparent), transparent 60%),
        radial-gradient(160px 160px at 85% 80%, color-mix(in oklab, var(--p2) 14%, transparent), transparent 70%),
        radial-gradient(180px 180px at 65% 10%, color-mix(in oklab, var(--p3) 14%, transparent), transparent 70%);
      filter: blur(30px) saturate(120%);
      opacity:.55;
      transform: translateZ(0);
      animation: floatA 18s ease-in-out infinite;
    }
    #vibe1581::after{
      animation: floatB 24s ease-in-out infinite reverse;
      opacity:.35;
      mix-blend-mode: screen;
    }
    @keyframes floatA{
      0%,100%{ transform: translate3d(0,0,0) scale(1);}
      50%{ transform: translate3d(0,-16px,0) scale(1.03);}
    }
    @keyframes floatB{
      0%,100%{ transform: translate3d(0,0,0) scale(1);}
      50%{ transform: translate3d(0,18px,0) scale(1.04);}
    }

    /* Header */
    #vibe1581 .chrome{
      display:grid; grid-template-columns:auto 1fr auto; gap:12px; align-items:center; position:relative; z-index:2;
    }
    #vibe1581 .brand{
      display:inline-flex; align-items:center; gap:10px;
      padding:10px 14px; border-radius:14px;
      background:linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.03));
      border:1px solid rgba(255,255,255,0.12);
      backdrop-filter: blur(8px) saturate(140%);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.25);
      font-weight:900; letter-spacing:0.16em; text-transform:uppercase; font-size:11px;
      color:var(--ink);
    }
    #vibe1581 .nucleus{
      width:14px; height:14px; border-radius:50%;
      background: radial-gradient(circle at 35% 35%, #fff 0 30%, var(--p1) 60%, var(--p2) 100%);
      box-shadow: 0 0 0 6px rgba(121,168,255,0.10), 0 12px 28px rgba(0,0,0,0.28);
    }
    #vibe1581 .scenes{ justify-self:end; display:flex; flex-wrap:wrap; gap:8px; }
    #vibe1581 .chip{
      appearance:none; border:1px solid rgba(255,255,255,0.14);
      background:linear-gradient(180deg, rgba(255,255,255,0.14), rgba(255,255,255,0.06));
      color:var(--ink); padding:8px 12px; border-radius:999px; font-weight:800; font-size:11px; letter-spacing:0.10em;
      cursor:pointer; text-transform:uppercase;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.35), 0 8px 18px rgba(0,0,0,0.28);
      transition: transform 120ms ease, box-shadow 180ms ease, background 220ms ease, color 220ms ease;
    }
    #vibe1581 .chip[aria-checked="true"]{
      color:#0b0f14;
      background: linear-gradient(180deg, color-mix(in oklab, var(--p3) 85%, white), white);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.95), 0 16px 30px rgba(0,0,0,0.30);
    }

    /* Hero */
    #vibe1581 .title{
      margin: clamp(10px,2.6vw,24px) 0 6px; line-height:.86; letter-spacing:-0.02em; font-weight:1000;
      font-size: clamp(46px, 9vw, 124px);
      background: linear-gradient(90deg, var(--ink), color-mix(in oklab, var(--p1) 60%, var(--ink)));
      -webkit-background-clip:text; background-clip:text; color:transparent;
    }
    #vibe1581 .tag{ margin:0; color:var(--muted); font-size: clamp(14px,2vw,18px); }

    /* Stage */
    #vibe1581 .stage{
      position:relative; z-index:1;
      margin-top: clamp(16px, 3vw, 30px);
      height: clamp(360px, 55vw, 700px);
      border-radius: 22px;
      border:1px solid rgba(255,255,255,0.14);
      background:
        radial-gradient(120% 120% at 50% 50%, rgba(255,255,255,0.06), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.04));
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.25), 0 24px 60px rgba(0,0,0,0.35);
      overflow:hidden;
    }
    #vibe1581 canvas#rings{ position:absolute; inset:0; width:100%; height:100%; display:block; }
    #vibe1581 .hintbar{
      position:absolute; left:12px; bottom:12px; display:flex; align-items:center; gap:10px;
      color:var(--muted); font-size:12px; background:linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.04));
      border:1px solid rgba(255,255,255,0.14); border-radius:12px; padding:8px 10px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.35);
    }
    #vibe1581 .btn{
      appearance:none; border:1px solid rgba(255,255,255,0.14);
      background:linear-gradient(180deg, rgba(255,255,255,0.16), rgba(255,255,255,0.06));
      color:var(--ink); padding:8px 12px; border-radius:10px; font-weight:900; cursor:pointer;
      box-shadow: 0 10px 22px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.35);
      transition: transform 120ms ease, box-shadow 180ms ease, background 220ms ease;
    }
    #vibe1581 .btn:hover{ transform: translateY(-1px); box-shadow: 0 16px 34px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.45); }

    /* Footer */
    #vibe1581 .foot{
      margin-top:16px; display:flex; align-items:center; justify-content:space-between; gap:10px; color:var(--muted); font-size:12px; z-index:2; position:relative;
    }
    #vibe1581 #last-updated{
      font-variant-numeric: tabular-nums; font-weight:900; color:var(--ink);
      background:linear-gradient(180deg, rgba(255,255,255,0.14), rgba(255,255,255,0.06));
      border:1px solid rgba(255,255,255,0.16);
      padding:6px 10px; border-radius:10px; box-shadow: inset 0 1px 0 rgba(255,255,255,0.35);
    }

    /* Scene mappings (colors + background vibes) */
    #vibe1581[data-scene="day"]{
      --ink:#0d1117; --muted:#5f6a7d;
      --bg-1:#f7faff; --bg-2:#eef3ff; --bg-3:#e7eeff;
      --p1:#2f6df6; --p2:#ff91c1; --p3:#18d4b4; --p4:#ffb86b;
      background:
        radial-gradient(160% 120% at 15% -10%, color-mix(in oklab, var(--p1) 12%, transparent), transparent 40%),
        radial-gradient(140% 180% at 120% 120%, color-mix(in oklab, var(--p2) 12%, transparent), transparent 40%),
        linear-gradient(180deg, var(--bg-3), var(--bg-1));
    }
    #vibe1581[data-scene="dusk"]{
      --ink:#f4f7ff; --muted:#c2cbe6;
      --bg-1:#1b1221; --bg-2:#2a1634; --bg-3:#351a44;
      --p1:#b493ff; --p2:#ff8fb3; --p3:#83ffd9; --p4:#ffd06f;
    }
    #vibe1581[data-scene="sakura"]{
      --ink:#0d1016; --muted:#5e6373;
      --bg-1:#fff4f4; --bg-2:#ffe9f1; --bg-3:#ffe5f6;
      --p1:#ff6fa8; --p2:#ffb8d6; --p3:#91ffd8; --p4:#ffd979;
    }

    /* Responsive */
    @media (max-width:760px){
      #vibe1581 .chrome{ grid-template-columns: 1fr; }
      #vibe1581 .scenes{ justify-self:start; }
      #vibe1581 .title{ font-size: clamp(40px, 13vw, 96px); }
      #vibe1581 .hintbar{ left:10px; right:10px; justify-content:space-between; }
    }

    @media (prefers-reduced-motion: reduce){
      #vibe1581::before, #vibe1581::after{ animation:none; }
    }
  </style>

  <div class="chrome">
    <span class="brand"><span class="nucleus" aria-hidden="true"></span>VORTEX</span>
    <div class="scenes" role="radiogroup" aria-label="Scene">
      <button type="button" class="chip scene" data-scene="day" aria-checked="false">Day</button>
      <button type="button" class="chip scene" data-scene="dusk" aria-checked="false">Dusk</button>
      <button type="button" class="chip scene" data-scene="sakura" aria-checked="false">Sakura</button>
      <button type="button" class="chip scene" data-scene="midnight" aria-checked="true">Midnight</button>
    </div>
    <div class="note" aria-hidden="true">v1581</div>
  </div>

  <h1 class="title" role="heading" aria-level="1">Kinetic Halo</h1>
  <p class="tag">Hold and move to bend the rings. Tap a scene to recolor the sky.</p>

  <div class="stage" role="img" aria-label="Concentric rings of luminescent particles orbiting in responsive motion">
    <canvas id="rings"></canvas>
    <div class="hintbar" role="group" aria-label="Halo controls">
      <button type="button" class="btn" id="shuffle">New Constellation</button>
      <button type="button" class="btn" id="toggle">Pause</button>
      <button type="button" class="btn" id="save">Save Poster</button>
    </div>
  </div>

  <div class="foot">
    <span>“Less noise. More orbit.”</span>
    <span id="last-updated">Last updated: 2025-12-28 09:17:41 EST</span>
  </div>

  <script>
    (function(){
      const root = document.getElementById('vibe1581');

      // Last updated
      const lu = root.querySelector('#last-updated');
      try{
        const now = new Date();
        const opts = { year:'numeric', month:'short', day:'2-digit', hour:'2-digit', minute:'2-digit' };
        lu.textContent = 'Updated ' + now.toLocaleString([], opts);
      }catch(e){ lu.textContent = ''; }

      // Canvas setup
      const stage = root.querySelector('.stage');
      const canvas = root.querySelector('#rings');
      const ctx = canvas.getContext('2d', { alpha:true });
      let dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
      function fit(){
        const r = stage.getBoundingClientRect();
        canvas.width = Math.floor(r.width * dpr);
        canvas.height = Math.floor(r.height * dpr);
        canvas.style.width = r.width + 'px';
        canvas.style.height = r.height + 'px';
        ctx.setTransform(1,0,0,1,0,0);
      }
      fit();
      window.addEventListener('resize', ()=>{ dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1)); fit(); });

      // Scene palettes
      const scenes = {
        day:      ['--p1','--p2','--p3','--p4'],
        dusk:     ['--p1','--p2','--p3','--p4'],
        sakura:   ['--p1','--p2','--p3','--p4'],
        midnight: ['--p1','--p2','--p3','--p4']
      };
      const sceneButtons = Array.from(root.querySelectorAll('.scene'));
      function setScene(btn){
        sceneButtons.forEach(b=>b.setAttribute('aria-checked', String(b===btn)));
        root.setAttribute('data-scene', btn.dataset.scene);
        flash(btn);
        recolor();
      }
      sceneButtons.forEach(b=>{
        b.addEventListener('click', ()=> setScene(b));
        b.addEventListener('keydown', (e)=>{ if(e.key==='Enter'||e.key===' '){ e.preventDefault(); setScene(b); }});
      });

      function cssVar(name){
        return getComputedStyle(root).getPropertyValue(name).trim() || '#ffffff';
      }
      function recolor(){
        // Pull current CSS variables for palette
        palette = [cssVar('--p1'), cssVar('--p2'), cssVar('--p3'), cssVar('--p4')];
      }

      // Helpers
      const lerp = (a,b,t)=>a+(b-a)*t;
      const clamp = (v, a, b)=>Math.max(a, Math.min(b, v));
      function flash(el){
        el.animate([{ filter:'saturate(160%) brightness(1.05)' }, { filter:'saturate(115%) brightness(1.0)' }],
          { duration: 450, easing:'cubic-bezier(.2,.8,.2,1)' });
      }

      // Rings model
      let rings = [];
      let palette = [];
      function randomize(){
        const w = canvas.width, h = canvas.height;
        const baseR = Math.min(w,h)*0.18;
        const count = 7 + Math.floor(Math.random()*4); // 7-10 rings
        rings = [];
        for(let i=0;i<count;i++){
          const t = i/(count-1 || 1);
          const radius = baseR + t * Math.min(w,h) * (0.55 + Math.random()*0.08);
          const dots = 48 + Math.floor( lerp(0, 160, t) + Math.random()*20 );
          const dir = Math.random() < 0.5 ? -1 : 1;
          const speed = dir * (0.06 + Math.pow(1-t, 1.2) * 0.22) * (0.6 + Math.random()*0.8);
          const size = (0.6 + (1-t)*1.0) * dpr;
          const hue = i % 4; // cycle palette
          rings.push({ radius, dots, speed, base: Math.random()*Math.PI*2, size, hue });
        }
        flash(stage);
      }

      // Pointer warp
      const target = { x:0.5, y:0.5 };
      const center = { x:0.5, y:0.5 };
      function onPoint(e){
        const r = stage.getBoundingClientRect();
        const x = (e.touches ? e.touches[0].clientX : e.clientX);
        const y = (e.touches ? e.touches[0].clientY : e.clientY);
        target.x = clamp((x - r.left) / r.width, 0, 1);
        target.y = clamp((y - r.top) / r.height, 0, 1);
      }
      stage.addEventListener('pointermove', onPoint, { passive:true });
      stage.addEventListener('touchmove', onPoint, { passive:true });

      // Buttons
      const shuffleBtn = root.querySelector('#shuffle');
      const toggleBtn = root.querySelector('#toggle');
      const saveBtn = root.querySelector('#save');
      shuffleBtn.addEventListener('click', ()=>{ randomize(); });
      let running = true;
      toggleBtn.addEventListener('click', ()=>{ running=!running; toggleBtn.textContent = running ? 'Pause' : 'Play'; if(running) requestAnimationFrame(loop); });
      saveBtn.addEventListener('click', ()=>{
        try{
          const rect = canvas.getBoundingClientRect();
          const scale = 2;
          const off = document.createElement('canvas');
          off.width = Math.floor(rect.width*scale);
          off.height = Math.floor(rect.height*scale);
          const octx = off.getContext('2d');
          octx.fillStyle = '#000';
          octx.globalCompositeOperation = 'source-over';
          octx.drawImage(canvas, 0, 0, off.width, off.height);
          off.toBlob((blob)=>{
            const a = document.createElement('a');
            a.href = URL.createObjectURL(blob);
            a.download = 'vortex-1581.png';
            document.body.appendChild(a); a.click(); URL.revokeObjectURL(a.href); a.remove();
          });
          flash(saveBtn);
        }catch(e){}
      });

      // Animation
      let t = 0;
      let reduce = false; try{ reduce = matchMedia('(prefers-reduced-motion: reduce)').matches; }catch(_){}
      function hexToRgb(hex){
        let h = hex.replace('#','').trim();
        if(h.length===3){ h = h.split('').map(x=>x+x).join(''); }
        const n = parseInt(h,16);
        return [(n>>16)&255, (n>>8)&255, n&255];
      }
      function rgba(c,a){ return `rgba(${c[0]},${c[1]},${c[2]},${a})`; }

      function draw(){
        const w = canvas.width, h = canvas.height;
        const cx = w*center.x, cy = h*center.y;

        // Ease center to pointer
        center.x = lerp(center.x, target.x, 0.06);
        center.y = lerp(center.y, target.y, 0.06);

        ctx.clearRect(0,0,w,h);

        // Warp: pointer changes ellipse ratio and slight rotation
        const tiltX = (center.x - 0.5);
        const tiltY = (center.y - 0.5);
        const rot = (tiltX) * 0.6;
        const sqx = 1 + tiltX*0.25;
        const sqy = 1 - tiltY*0.25;

        // composite on dark/light appropriately
        const darkBg = getComputedStyle(root).getPropertyValue('--ink').trim().startsWith('#e') || root.getAttribute('data-scene')==='midnight' || root.getAttribute('data-scene')==='dusk';
        ctx.globalCompositeOperation = darkBg ? 'lighter' : 'multiply';

        rings.forEach((ring, i)=>{
          const col = hexToRgb(getComputedStyle(root).getPropertyValue(scenes[root.getAttribute('data-scene')][ring.hue]).trim());
          const steps = ring.dots;
          const R = ring.radius;
          const base = ring.base + t * ring.speed;
          const glow = darkBg ? 18*dpr : 0;

          for(let s=0; s<steps; s++){
            const a = base + (s/steps)*Math.PI*2;
            // 2D rotation
            const cos = Math.cos(a+rot), sin = Math.sin(a+rot);
            const x = cx + cos * R * sqx;
            const y = cy + sin * R * sqy;

            ctx.beginPath();
            ctx.shadowBlur = glow;
            ctx.shadowColor = rgba(col, darkBg ? 0.35 : 0.0);
            ctx.fillStyle = rgba(col, darkBg ? 0.65 : 0.45);
            const size = ring.size * (1.0 + Math.sin(a*4 + t*2)*0.15);
            ctx.arc(x, y, size, 0, Math.PI*2);
            ctx.fill();
          }
        });

        // center iris
        const irisC = hexToRgb(getComputedStyle(root).getPropertyValue('--p3').trim());
        ctx.shadowBlur = darkBg ? 26*dpr : 0;
        ctx.shadowColor = rgba(irisC, darkBg ? 0.35 : 0);
        ctx.fillStyle = rgba(irisC, darkBg ? 0.2 : 0.08);
        ctx.beginPath();
        ctx.arc(cx, cy, Math.min(w,h)*0.06, 0, Math.PI*2);
        ctx.fill();

        t += (reduce ? 0.002 : 0.006);
      }

      function loop(){
        if(!running) return;
        draw();
        requestAnimationFrame(loop);
      }

      // Init
      recolor();
      randomize();
      requestAnimationFrame(loop);
    }());
  </script>
</div>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


