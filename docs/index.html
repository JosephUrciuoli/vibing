<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<section id="orbit2245" data-theme="dark" aria-label="Orbit Studio — Edition 2245">
  <style>
    /* Tokens */
    #orbit2245{
      --h: 220;
      --h2: calc(var(--h) + 60);
      --h3: calc(var(--h) + 200);
      --ink: #eaf3ff;
      --muted: color-mix(in lch, var(--ink) 65%, transparent);
      --paper: #0a0f19;
      --ring: rgba(255,255,255,0.14);
      --glass: rgba(255,255,255,0.06);
      --r: 30px;

      position: relative;
      isolation: isolate;
      border-radius: var(--r);
      padding: clamp(22px, 4.6vw, 50px);
      color: var(--ink);
      background:
        radial-gradient(1200px 800px at 8% 10%, hsl(var(--h) 70% 30% / 0.25), transparent 60%),
        radial-gradient(1000px 900px at 92% 88%, hsl(var(--h2) 70% 30% / 0.22), transparent 68%),
        linear-gradient(180deg, #070b14, var(--paper));
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,0.06),
        0 30px 90px rgba(0,0,0,0.45);
      overflow: hidden;
      font-family: ui-sans-serif, -apple-system, Segoe UI, Roboto, Helvetica, Arial, system-ui, Apple Color Emoji, Segoe UI Emoji, Segoe UI Symbol;
      color-scheme: dark;
    }
    #orbit2245::before{
      /* faint stars */
      content:"";
      position:absolute; inset:-20%;
      background:
        radial-gradient(circle at 20% 25%, #fff 1px, transparent 1.2px) 0 0/180px 180px,
        radial-gradient(circle at 70% 60%, #fff 1px, transparent 1.3px) 0 0/220px 220px,
        radial-gradient(circle at 45% 80%, #fff 0.7px, transparent 1.1px) 0 0/160px 160px;
      opacity:.18; pointer-events:none; z-index:0;
      animation: twinkle2245 16s ease-in-out infinite;
      filter: saturate(120%);
    }
    @keyframes twinkle2245{ 50%{ transform: scale(1.02) rotate(0.5deg); opacity:.22; } }

    #orbit2245[data-theme="light"]{
      --ink: #0b1322;
      --muted: color-mix(in lch, var(--ink) 50%, transparent);
      --paper: #f7fbff;
      --glass: rgba(255,255,255,0.6);
      --ring: rgba(10,16,30,0.14);
      background:
        radial-gradient(1200px 800px at 6% 8%, hsl(var(--h) 80% 65% / 0.16), transparent 60%),
        radial-gradient(1000px 900px at 94% 90%, hsl(var(--h2) 80% 65% / 0.14), transparent 68%),
        linear-gradient(180deg, #ffffff, var(--paper));
      color-scheme: light;
    }

    /* Top */
    #orbit2245 .top{
      display:flex; align-items:center; justify-content:space-between; gap:16px;
      position:relative; z-index:2; margin-bottom: clamp(14px, 2.6vw, 28px);
    }
    #orbit2245 .brand{
      display:inline-flex; align-items:center; gap:12px;
      padding: 8px 14px; border-radius:999px;
      background: var(--glass);
      box-shadow: inset 0 0 0 1px var(--ring), 0 10px 28px rgba(0,0,0,0.15);
      backdrop-filter: blur(8px) saturate(140%);
      color: var(--muted); font-size:12px; letter-spacing:.18em; text-transform:uppercase;
    }
    #orbit2245 .brand .glyph{
      width:10px; height:10px; border-radius:50%;
      background: conic-gradient(from 90deg, hsl(var(--h) 90% 55%), hsl(var(--h2) 90% 55%), hsl(var(--h3) 90% 55%), hsl(var(--h) 90% 55%));
      box-shadow: 0 0 0 8px color-mix(in lch, hsl(var(--h) 90% 55%) 30%, transparent);
      animation: ping2245 2.6s ease-in-out infinite;
    }
    @keyframes ping2245{ 50%{ box-shadow: 0 0 0 0 transparent; } }

    #orbit2245 .mode{
      appearance:none; border:0; cursor:pointer;
      padding: 10px 14px; border-radius:999px; font-weight:700; font-size:14px;
      color: var(--ink);
      background: radial-gradient(140% 180% at 20% 20%, #fff, color-mix(in lch, #fff 50%, hsl(var(--h) 80% 60%)));
      box-shadow: 0 14px 30px rgba(0,0,0,0.18), inset 0 0 0 1px rgba(0,0,0,0.12);
      transition: transform .18s ease, box-shadow .18s ease, background .3s ease;
    }
    #orbit2245[data-theme="dark"] .mode{
      background: color-mix(in lch, hsl(var(--h) 80% 60%) 28%, rgba(255,255,255,0.07));
      color: var(--ink);
      box-shadow: inset 0 0 0 1px var(--ring), 0 12px 26px rgba(0,0,0,0.45);
    }
    #orbit2245 .mode:hover{ transform: translateY(-1px); }
    #orbit2245 .mode:active{ transform: translateY(0); }

    /* Hero */
    #orbit2245 .hero{ text-align:center; position:relative; z-index:2; }
    #orbit2245 h1{
      margin:0 0 8px; line-height:.92;
      font-size: clamp(42px, 9vw, 112px);
      letter-spacing:-0.02em;
      background: linear-gradient(95deg,
        color-mix(in lch, hsl(var(--h) 90% 65%) 80%, #000 20%),
        color-mix(in lch, #fff 62%, hsl(var(--h2) 80% 60%) 38%),
        color-mix(in lch, hsl(var(--h3) 90% 65%) 78%, #000 22%));
      background-size: 240% 100%;
      -webkit-background-clip: text; background-clip:text; color:transparent;
      animation: titleflow2245 18s ease-in-out infinite;
      text-wrap: balance;
    }
    @keyframes titleflow2245 { 50% { background-position: 100% 50%; } }
    #orbit2245 .tag{
      margin:0 auto; max-width:70ch; color: var(--muted);
      font-size: clamp(14px, 2.1vw, 18px);
      text-wrap: pretty;
    }

    /* Stage */
    #orbit2245 .well{
      position:relative; z-index:1;
      margin: clamp(18px, 5vw, 48px) auto 8px;
      width: min(92vw, 980px);
      aspect-ratio: 1 / 1;
      border-radius: 28px;
      background:
        radial-gradient(120% 140% at 50% 50%, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
      box-shadow:
        0 28px 90px rgba(0,0,0,0.34),
        inset 0 0 0 1px var(--ring),
        inset 0 0 160px rgba(255,255,255,0.06);
      overflow:hidden;
      perspective: 1000px;
      transform-style: preserve-3d;
      transition: transform 300ms ease;
      backdrop-filter: blur(4px) saturate(120%);
    }
    #orbit2245 .well::after{
      /* vignette */
      content:"";
      position:absolute; inset:0; pointer-events:none;
      background: radial-gradient(70% 70% at 50% 50%, transparent 60%, rgba(0,0,0,0.35) 100%);
      mix-blend-mode: multiply;
    }
    #orbit2245 svg{ display:block; width:100%; height:100%; }

    /* Orbits + planets */
    #orbit2245 .orbit{
      fill:none;
      stroke: color-mix(in lch, hsl(var(--h3) 80% 60%) 18%, transparent);
      stroke-width: 1.2;
      vector-effect: non-scaling-stroke;
      opacity: .7;
      filter: url(#halo2245);
    }
    #orbit2245 .planet{
      vector-effect: non-scaling-stroke;
      stroke: none;
      filter: url(#glow2245);
    }
    #orbit2245 .planet.core{ filter: url(#coreglow2245); }

    /* Controls */
    #orbit2245 .controls{
      display:flex; flex-wrap:wrap; align-items:center; justify-content:center;
      gap: 12px 14px; margin: clamp(10px, 3vw, 18px) auto 0;
      position:relative; z-index:2;
    }
    #orbit2245 .group{
      display:inline-flex; align-items:center; gap:10px;
      padding: 8px 10px; border-radius:999px; font-weight:700; font-size:14px;
      color: var(--muted);
      background: var(--glass);
      box-shadow: inset 0 0 0 1px var(--ring);
      backdrop-filter: blur(6px) saturate(140%);
    }
    #orbit2245 .swatches{ display:inline-flex; gap:6px; }
    #orbit2245 .swatch{
      width:22px; height:22px; border-radius:50%; border:0; cursor:pointer;
      box-shadow: inset 0 0 0 2px rgba(255,255,255,0.8), 0 6px 12px rgba(0,0,0,0.2);
      transition: transform .16s ease, box-shadow .16s ease;
    }
    #orbit2245 .swatch[aria-pressed="true"]{ transform: translateY(-1px) scale(1.04); box-shadow: inset 0 0 0 2px #fff, 0 10px 18px rgba(0,0,0,0.24); }

    #orbit2245 input[type="range"]{
      -webkit-appearance:none; appearance:none;
      width:min(44vw, 280px); height:22px; background:transparent; cursor:pointer;
    }
    #orbit2245 input[type="range"]::-webkit-slider-runnable-track,
    #orbit2245 input[type="range"]::-moz-range-track{
      height:6px; border-radius:999px;
      background:
        linear-gradient(90deg,
          hsl(var(--h) 90% 55%), hsl(var(--h2) 90% 55%), hsl(var(--h3) 90% 55%));
      box-shadow: inset 0 0 0 1px rgba(0,0,0,0.12);
    }
    #orbit2245 input[type="range"]::-webkit-slider-thumb,
    #orbit2245 input[type="range"]::-moz-range-thumb{
      width:18px; height:18px; border-radius:50%;
      background: hsl(var(--h) 90% 55%); border:2px solid #fff;
      box-shadow: 0 4px 12px rgba(0,0,0,0.25);
      -webkit-appearance:none; appearance:none; margin-top:-6px;
    }

    #orbit2245 .btn{
      appearance:none; border:0; cursor:pointer;
      padding: 10px 14px; border-radius:999px; font-weight:700; font-size:14px;
      color: var(--ink);
      background: radial-gradient(120% 140% at 20% 20%, #fff, color-mix(in lch, #fff 55%, hsl(var(--h) 80% 60%)));
      box-shadow: 0 12px 24px rgba(0,0,0,0.14), inset 0 0 0 1px rgba(0,0,0,0.08);
      transition: transform .16s ease, box-shadow .16s ease, background .3s ease;
    }
    #orbit2245[data-theme="dark"] .btn{
      background: color-mix(in lch, hsl(var(--h) 80% 60%) 28%, rgba(255,255,255,0.08));
      color: var(--ink);
      box-shadow: inset 0 0 0 1px var(--ring), 0 12px 24px rgba(0,0,0,0.45);
    }
    #orbit2245 .btn:hover{ transform: translateY(-1px); }
    #orbit2245 .btn:active{ transform: translateY(0); }

    /* Footer */
    #orbit2245 .meta{
      display:flex; flex-wrap:wrap; align-items:center; justify-content:space-between; gap:12px;
      margin-top: clamp(14px, 3vw, 24px);
      padding-top: 14px; border-top: 1px solid var(--ring);
      color: var(--muted); font-size:12.5px; position:relative; z-index:2;
    }
    #orbit2245 .live{ display:inline-flex; align-items:center; gap:8px; }
    #orbit2245 .live .pulse{
      width:9px; height:9px; border-radius:50%; background: hsl(var(--h) 90% 55%);
      box-shadow: 0 0 0 0 color-mix(in lch, hsl(var(--h) 90% 55%) 60%, transparent);
      animation: pulse2245 2s ease-out infinite;
    }
    @keyframes pulse2245{
      0%{ box-shadow: 0 0 0 0 color-mix(in lch, hsl(var(--h) 90% 55%) 55%, transparent); }
      100%{ box-shadow: 0 0 0 14px transparent; }
    }

    /* Responsive */
    @media (max-width: 760px){
      #orbit2245 .group{ width:100%; justify-content:center; }
    }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      #orbit2245 h1, #orbit2245::before, #orbit2245 .well{ animation: none !important; transition: none !important; transform: none !important; }
    }
  </style>

  <div class="top">
    <div class="brand"><span class="glyph" aria-hidden="true"></span> Edition 2245 • Orbit Studio</div>
    <button id="mode2245" class="mode" aria-pressed="true">Light</button>
  </div>

  <div class="hero">
    <h1>Orbit Studio</h1>
    <p class="tag">A living orrery. Concentric harmonies glide in light—drag to tilt the cosmos, dial the tempo, choose a spectrum.</p>
  </div>

  <div class="well" id="well2245" aria-label="Interactive orrery">
    <svg id="orrery2245" viewBox="0 0 1000 1000" role="img" aria-label="Concentric orbits with planets circling a luminous core">
      <defs>
        <radialGradient id="coreGrad2245" cx="50%" cy="50%" r="60%">
          <stop offset="0%" style="stop-color: hsl(var(--h) 90% 70%); stop-opacity: 1"/>
          <stop offset="60%" style="stop-color: hsl(var(--h2) 80% 60%); stop-opacity: .8"/>
          <stop offset="100%" style="stop-color: hsl(var(--h3) 80% 55%); stop-opacity: .2"/>
        </radialGradient>
        <filter id="glow2245" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur in="SourceGraphic" stdDeviation="2" result="b1"/>
          <feMerge>
            <feMergeNode in="b1"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
        <filter id="halo2245" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="1.2"/>
        </filter>
        <filter id="coreglow2245" x="-70%" y="-70%" width="240%" height="240%">
          <feGaussianBlur in="SourceGraphic" stdDeviation="8" result="b2"/>
          <feColorMatrix type="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -8" result="b3"/>
          <feMerge>
            <feMergeNode in="b3"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
      </defs>

      <!-- Ambient aurora -->
      <g opacity="0.35">
        <radialGradient id="fog2245" cx="50%" cy="50%" r="50%">
          <stop offset="0%" style="stop-color: hsl(var(--h) 80% 60%); stop-opacity:.15"/>
          <stop offset="100%" style="stop-color: hsl(var(--h3) 80% 55%); stop-opacity:0"/>
        </radialGradient>
        <circle cx="500" cy="500" r="480" fill="url(#fog2245)"/>
      </g>

      <!-- Orbits + planets -->
      <g id="rings2245" aria-hidden="true"></g>
      <g id="planets2245"></g>

      <!-- Core -->
      <circle class="planet core" cx="500" cy="500" r="56" fill="url(#coreGrad2245)"/>
    </svg>
  </div>

  <div class="controls" aria-label="Controls">
    <div class="group" aria-label="Palette">
      Palette
      <div class="swatches" id="swatches2245" role="tablist" aria-label="Select color palette"></div>
    </div>
    <div class="group" aria-label="Tempo">
      Tempo
      <input id="speed2245" type="range" min="0" max="180" value="70" aria-valuemin="0" aria-valuemax="180" aria-valuenow="70" aria-label="Adjust orbital speed">
    </div>
    <button id="pulse2245" class="btn" aria-pressed="true">Pulse</button>
    <button id="random2245" class="btn">Randomize</button>
    <button id="play2245" class="btn" aria-pressed="true">Pause</button>
  </div>

  <div class="meta">
    <div class="live"><span class="pulse" aria-hidden="true"></span> System in motion</div>
    <span id="last-updated">Last updated: 2026-01-28 03:29:44 EST</span>
  </div>

  <script>
    (function(){
      const root = document.getElementById('orbit2245');
      const well = document.getElementById('well2245');
      const svg = document.getElementById('orrery2245');
      const ringsG = document.getElementById('rings2245');
      const planetsG = document.getElementById('planets2245');

      const modeBtn = document.getElementById('mode2245');
      const speedEl = document.getElementById('speed2245');
      const pulseBtn = document.getElementById('pulse2245');
      const randomBtn = document.getElementById('random2245');
      const playBtn = document.getElementById('play2245');
      const swatches = document.getElementById('swatches2245');
      const updated = document.getElementById('last-updated');

      // Updated timestamp
      try{
        const now = new Date();
        const tz = Intl.DateTimeFormat().resolvedOptions().timeZone || 'local';
        const opts = { year:'numeric', month:'short', day:'2-digit', hour:'2-digit', minute:'2-digit' };
        updated.textContent = `Updated ${now.toLocaleString(undefined, opts)} (${tz})`;
      }catch(e){
        updated.textContent = 'Updated just now';
      }

      // Palettes
      const palettes = [
        { name:'Lapis', hues:[220, 280, 40] },
        { name:'Citrine', hues:[45, 120, 200] },
        { name:'Coral', hues:[15, 160, 320] },
        { name:'Ultraviolet', hues:[265, 325, 50] },
        { name:'Glacier', hues:[190, 230, 310] },
        { name:'Solaris', hues:[20, 330, 260] },
      ];
      let paletteIndex = 0;
      function setPalette(i){
        const [h, h2, h3] = palettes[i].hues;
        root.style.setProperty('--h', h);
        root.style.setProperty('--h2', h2);
        root.style.setProperty('--h3', h3);
      }
      function renderSwatches(){
        swatches.innerHTML = '';
        palettes.forEach((p, i)=>{
          const b = document.createElement('button');
          b.className = 'swatch';
          b.setAttribute('role', 'tab');
          b.setAttribute('aria-pressed', i === paletteIndex ? 'true' : 'false');
          b.title = p.name;
          b.style.background = `conic-gradient(hsl(${p.hues[0]} 90% 55%), hsl(${p.hues[1]} 90% 55%), hsl(${p.hues[2]} 90% 55%), hsl(${p.hues[0]} 90% 55%))`;
          b.addEventListener('click', ()=>{
            paletteIndex = i;
            setPalette(i);
            Array.from(swatches.children).forEach(el=>el.setAttribute('aria-pressed','false'));
            b.setAttribute('aria-pressed','true');
            recolorPlanets();
          });
          swatches.appendChild(b);
        });
        setPalette(paletteIndex);
      }
      renderSwatches();

      // Build system
      const radii = [110, 178, 246, 314, 382, 450]; // in viewBox units
      const speeds = radii.map((r, i)=> (0.022 - i*0.0025)); // base degrees per ms-ish
      const planets = []; // {g, r, angle, speed, colorIndex, sz}
      function recolorPlanets(){
        planets.forEach((p, idx)=>{
          const hue = palettes[paletteIndex].hues[idx % 3];
          p.col = `hsl(${hue} 90% ${root.getAttribute('data-theme')==='dark'? '65%' : '50%'} )`;
          const c = p.g.querySelector('circle');
          c.setAttribute('fill', p.col);
        });
      }
      function build(){
        ringsG.innerHTML = '';
        planetsG.innerHTML = '';
        planets.length = 0;

        // rings
        radii.forEach((r, i)=>{
          const ring = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
          ring.setAttribute('class', 'orbit');
          ring.setAttribute('cx', '500');
          ring.setAttribute('cy', '500');
          ring.setAttribute('r', String(r));
          ring.setAttribute('opacity', String(0.55 + (i/radii.length)*0.35));
          ringsG.appendChild(ring);
        });

        // planets
        radii.forEach((r, i)=>{
          const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');
          const planet = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
          const size = 6 + (i*1.4); // base size
          const hue = palettes[paletteIndex].hues[i % 3];
          planet.setAttribute('class', 'planet');
          planet.setAttribute('cx', String(500 + r));
          planet.setAttribute('cy', '500');
          planet.setAttribute('r', String(size));
          planet.setAttribute('fill', `hsl(${hue} 90% 65%)`);
          g.appendChild(planet);
          planetsG.appendChild(g);
          planets.push({
            g, r, angle: Math.random()*360, speed: speeds[i],
            col: `hsl(${hue} 90% 65%)`, baseSize: size
          });
        });
      }
      build();

      // Motion
      const prefersReduce = matchMedia('(prefers-reduced-motion: reduce)').matches;
      let running = !prefersReduce;
      playBtn.textContent = running ? 'Pause' : 'Play';
      playBtn.setAttribute('aria-pressed', running ? 'true' : 'false');

      let speedScale = (parseInt(speedEl.value, 10) || 70) / 100; // 0..1.8
      let pulsing = true;
      let t0 = performance.now();
      function tick(now){
        if(!running){ return; }
        const dt = Math.min(48, now - t0); t0 = now;

        const beat = pulsing ? (0.5 + 0.5*Math.sin(now*0.0025)) : 0;
        planets.forEach((p, idx)=>{
          p.angle += dt * p.speed * (0.5 + speedScale*1.4) * (idx%2?1:-1);
          const a = p.angle % 360;
          p.g.setAttribute('transform', `rotate(${a} 500 500)`);

          // micro size pulse
          const circle = p.g.firstChild;
          const sz = p.baseSize * (1 + beat*0.25);
          circle.setAttribute('r', String(sz));
        });

        raf = requestAnimationFrame(tick);
      }

      // Tilt by pointer
      let rafTilt = null;
      function steer(e){
        const r = well.getBoundingClientRect();
        const x = Math.min(1, Math.max(0, (e.clientX - r.left) / r.width));
        const y = Math.min(1, Math.max(0, (e.clientY - r.top) / r.height));
        const tiltX = (x - 0.5) * 12;
        const tiltY = -(y - 0.5) * 10;
        well.style.transform = `rotateX(${tiltY}deg) rotateY(${tiltX}deg)`;
      }
      well.addEventListener('pointermove', (e)=>{
        if (rafTilt) cancelAnimationFrame(rafTilt);
        rafTilt = requestAnimationFrame(()=>steer(e));
      });
      well.addEventListener('pointerleave', ()=>{
        well.style.transform = `rotateX(0deg) rotateY(0deg)`;
      });

      // Controls wiring
      speedEl.addEventListener('input', (e)=>{
        const v = parseInt(e.target.value, 10) || 70;
        speedScale = v/100;
        speedEl.setAttribute('aria-valuenow', String(v));
      });

      pulseBtn.addEventListener('click', ()=>{
        pulsing = !pulsing;
        pulseBtn.textContent = pulsing ? 'Pulse' : 'Static';
        pulseBtn.setAttribute('aria-pressed', pulsing ? 'true' : 'false');
      });

      randomBtn.addEventListener('click', ()=>{
        paletteIndex = Math.floor(Math.random()*palettes.length);
        renderSwatches();
        recolorPlanets();
      });

      modeBtn.addEventListener('click', ()=>{
        const toDark = root.getAttribute('data-theme') !== 'dark';
        root.setAttribute('data-theme', toDark ? 'dark' : 'light');
        modeBtn.textContent = toDark ? 'Light' : 'Dark';
        modeBtn.setAttribute('aria-pressed', toDark ? 'true' : 'false');
        recolorPlanets();
      });

      playBtn.addEventListener('click', ()=>{
        running = !running;
        playBtn.textContent = running ? 'Pause' : 'Play';
        playBtn.setAttribute('aria-pressed', running ? 'true' : 'false');
        if (running && !raf && !prefersReduce){ t0 = performance.now(); raf = requestAnimationFrame(tick); }
      });

      // Start
      let raf = null;
      if (running && !prefersReduce){ raf = requestAnimationFrame(tick); }

      // Visibility resume
      document.addEventListener('visibilitychange', ()=>{
        if (!document.hidden && running && !raf && !prefersReduce){ t0 = performance.now(); raf = requestAnimationFrame(tick); }
      });
    })();
  </script>
</section>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


