<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<div id="vibe984" data-theme="zenith" role="region" aria-label="Chromatic Atlas — interactive tapestry">
  <style>
    /* Design tokens */
    #vibe984{
      --bg0: #0b1220;
      --bg1: #12243a;
      --ink: #e9f2ff;
      --muted: rgba(233,242,255,0.72);
      --a: #7de2ff;
      --b: #8a7bff;
      --c: #21ffc6;
      --edge: rgba(255,255,255,0.08);
      --glass: rgba(255,255,255,0.08);
      --mx: .5; --my: .5; --d: .90;
      --spd: 28s;
      --gridOpacity: 0;
      position: relative;
      isolation: isolate;
      border-radius: 28px;
      padding: clamp(18px, 4vw, 34px);
      min-height: 620px;
      color: var(--ink);
      font-family: ui-sans-serif, -apple-system, Segoe UI, Inter, Roboto, "SF Pro Display", "Noto Sans", Arial, sans-serif;
      background:
        radial-gradient(1000px 900px at calc(20% + (var(--mx) - .5) * 12%) calc(0% + (var(--my) - .5) * -8%), color-mix(in oklab, var(--b) 18%, transparent), transparent 60%),
        radial-gradient(1200px 900px at calc(90% + (var(--mx) - .5) * -8%) 110%, color-mix(in oklab, var(--c) 18%, transparent), transparent 60%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
      box-shadow:
        0 1px 0 rgba(255,255,255,0.07) inset,
        0 0 0 1px var(--edge) inset,
        0 28px 80px rgba(2,6,12,0.45);
      overflow: hidden;
    }

    /* Palettes */
    #vibe984[data-theme="glacier"]{
      --bg0: #0c1a16; --bg1: #0f241f;
      --ink: #e6fff7; --muted: rgba(230,255,247,0.74);
      --a: #89ffd7; --b: #2dd4bf; --c: #66e6ff;
      --edge: rgba(255,255,255,0.09);
      --glass: rgba(255,255,255,0.08);
    }
    #vibe984[data-theme="ember"]{
      --bg0: #1f0f0b; --bg1: #2a1611;
      --ink: #fff7ef; --muted: rgba(255,247,239,0.7);
      --a: #ffb27a; --b: #ff6d9b; --c: #ffd36e;
      --edge: rgba(255,255,255,0.08);
      --glass: rgba(255,255,255,0.08);
    }
    #vibe984[data-theme="ink"]{
      --bg0: #06080c; --bg1: #0a0f16;
      --ink: #f4f7fb; --muted: rgba(244,247,251,0.7);
      --a: #9ad1ff; --b: #8a7dff; --c: #5cf1d6;
      --edge: rgba(255,255,255,0.06);
      --glass: rgba(255,255,255,0.06);
    }

    /* Ambient layers */
    #vibe984 .fabric{
      position:absolute; inset:0; z-index:0;
      filter: saturate(110%) contrast(105%);
      mix-blend-mode: screen;
      opacity:.9;
      pointer-events:none;
    }
    #vibe984[data-theme="ember"] .fabric{ mix-blend-mode: lighten; }
    #vibe984 .glow{
      position:absolute; inset:-20%;
      background:
        radial-gradient(40% 40% at calc(var(--mx)*100%) calc(var(--my)*100%),
          color-mix(in oklab, var(--a) 16%, transparent),
          transparent 60%),
        radial-gradient(30% 30% at calc(100% - var(--mx)*100%) calc(100% - var(--my)*100%),
          color-mix(in oklab, var(--b) 12%, transparent), transparent 60%);
      filter: blur(60px) saturate(130%);
      animation: vibe984-slow var(--spd) linear infinite;
      pointer-events:none; z-index:0;
    }
    @keyframes vibe984-slow { to{ transform: rotate(360deg); } }

    #vibe984 .grain{
      position:absolute; inset:-40%;
      background-image:
        repeating-linear-gradient(0deg, rgba(255,255,255,0.03) 0 1px, transparent 1px 2px),
        repeating-linear-gradient(90deg, rgba(0,0,0,0.04) 0 1px, transparent 1px 2px);
      opacity:.35; mix-blend-mode: overlay;
      animation: vibe984-grain 1.6s steps(2) infinite;
      pointer-events:none; z-index:0;
    }
    @keyframes vibe984-grain{ to{ transform: translate3d(-1%,1%,0);} }

    #vibe984 .grid{
      position:absolute; inset:0; z-index:1; pointer-events:none;
      background-image:
        linear-gradient(var(--edge) 1px, transparent 1px),
        linear-gradient(90deg, var(--edge) 1px, transparent 1px);
      background-size: 56px 56px;
      opacity: var(--gridOpacity);
      transition: opacity .24s ease;
    }
    #vibe984.show-grid{ --gridOpacity: 1; }

    /* Shell */
    #vibe984 .shell{
      position:relative; z-index:2;
      display:grid; grid-template-columns: 1.2fr 1fr; gap: clamp(14px, 2.8vw, 28px);
      max-width: 1100px; margin: 6px auto;
      padding: clamp(14px, 2.4vw, 24px);
      background:
        linear-gradient(180deg, color-mix(in oklab, var(--glass) 70%, transparent), color-mix(in oklab, var(--glass) 30%, transparent));
      border: 1px solid var(--edge);
      border-radius: 22px;
      box-shadow: 0 12px 48px rgba(0,0,0,0.25);
      backdrop-filter: blur(12px) saturate(120%);
    }
    #vibe984 .top{
      grid-column: 1 / -1;
      display:flex; align-items:center; justify-content:space-between; gap: 10px; flex-wrap:wrap;
    }
    #vibe984 .brand{ display:flex; align-items:center; gap:10px; color:var(--muted); font-weight:800; letter-spacing:.16em; text-transform:uppercase; font-size:12px; }
    #vibe984 .brand .dot{
      width:10px; height:10px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #fff, var(--a));
      box-shadow: 0 0 12px color-mix(in oklab, var(--a) 70%, transparent);
      flex:none;
    }

    /* Controls */
    #vibe984 .controls{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
    #vibe984 button, #vibe984 .toggle, #vibe984 .slider{
      appearance:none; border:1px solid var(--edge);
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      color: var(--ink); padding:8px 12px; border-radius:12px; font-weight:700; cursor:pointer;
      box-shadow: 0 2px 0 rgba(0,0,0,0.06);
      transition: transform 140ms ease, box-shadow 220ms ease, background 240ms ease;
    }
    #vibe984 button:hover{ transform: translateY(-1px); box-shadow:0 8px 18px rgba(2,6,12,0.35); }
    #vibe984 .toggle{ display:inline-flex; align-items:center; gap:10px; color:var(--muted); }
    #vibe984 .toggle input{
      appearance:none; width:36px; height:20px; border-radius:20px; background: rgba(255,255,255,0.12); position:relative; outline:none;
    }
    #vibe984 .toggle input::after{
      content:""; position:absolute; top:3px; left:3px; width:14px; height:14px; border-radius:50%; background:#fff; box-shadow: 0 2px 6px rgba(0,0,0,0.25);
      transition: transform 180ms ease;
    }
    #vibe984 .toggle input:checked{ background: linear-gradient(90deg, var(--a), var(--b)); }
    #vibe984 .toggle input:checked::after{ transform: translateX(16px); }

    #vibe984 .slider{ display:inline-flex; align-items:center; gap:10px; color:var(--muted); }
    #vibe984 .slider input[type="range"]{ width:150px; height:18px; background:transparent; -webkit-appearance:none; }
    #vibe984 .slider input[type="range"]::-webkit-slider-runnable-track{
      height:6px; border-radius:999px; background: linear-gradient(90deg, var(--a), var(--b)); opacity:.7;
    }
    #vibe984 .slider input[type="range"]::-webkit-slider-thumb{
      -webkit-appearance:none; width:18px; height:18px; border-radius:50%; background:#fff; border:1px solid var(--edge); margin-top:-6px;
      box-shadow:0 2px 6px rgba(0,0,0,0.25);
    }
    #vibe984 .slider input[type="range"]::-moz-range-track{
      height:6px; border-radius:999px; background: linear-gradient(90deg, var(--a), var(--b)); opacity:.7;
    }
    #vibe984 .slider input[type="range"]::-moz-range-thumb{
      width:18px; height:18px; border-radius:50%; background:#fff; border:1px solid var(--edge); box-shadow:0 2px 6px rgba(0,0,0,0.25);
    }

    /* Hero */
    #vibe984 .hero{ position:relative; }
    #vibe984 h1{
      margin: 4px 0 6px;
      font-size: clamp(40px, 8.6vw, 110px);
      line-height: .9; letter-spacing: -0.02em; font-weight: 900;
      color: transparent;
      background: linear-gradient(90deg, var(--a), var(--b), var(--c));
      -webkit-background-clip: text; background-clip: text;
      transform: translate(
        calc((var(--mx) - .5) * 10px),
        calc((var(--my) - .5) * -6px)
      );
      transition: transform 120ms ease;
    }
    #vibe984 .lede{
      color: var(--muted); font-size: clamp(14px, 1.9vw, 18px);
      line-height: 1.7; max-width: 58ch; text-wrap: balance; margin: 6px 0 16px;
    }

    /* Clock ring */
    #vibe984 .clock{ width: 168px; height:168px; position:absolute; right: -6px; top: -6px; opacity:.9; }
    #vibe984 .clock circle.bg{ stroke: rgba(255,255,255,0.14); }
    #vibe984 .clock circle.fg{ stroke: url(#clock-grad); filter: drop-shadow(0 0 10px color-mix(in oklab, var(--a) 40%, transparent)); }

    /* Stack */
    #vibe984 .stack{
      grid-column: 2 / 3; align-self:center; justify-self:center;
      display:grid; place-items:center; gap: 20px;
      perspective: 1200px;
    }
    #vibe984 .card{
      width: clamp(240px, 34vw, 360px); height: clamp(150px, 22vw, 220px);
      border-radius: 20px; position:relative; overflow:hidden;
      background:
        linear-gradient(180deg, color-mix(in oklab, var(--glass) 80%, transparent), color-mix(in oklab, var(--glass) 40%, transparent));
      border: 1px solid var(--edge);
      box-shadow: 0 20px 60px rgba(0,0,0,0.35);
      transform-style: preserve-3d;
      transition: transform 160ms ease, box-shadow 200ms ease, background 240ms ease;
    }
    #vibe984 .card::after{
      content:"";
      position:absolute; inset:-20%;
      background:
        radial-gradient(50% 40% at calc(var(--mx)*100%) calc(var(--my)*100%), color-mix(in oklab, var(--a) 18%, transparent), transparent 62%),
        radial-gradient(40% 30% at calc(100% - var(--mx)*100%) calc(100% - var(--my)*100%), color-mix(in oklab, var(--b) 12%, transparent), transparent 62%);
      filter: blur(40px) saturate(120%);
      mix-blend-mode: soft-light;
      pointer-events:none;
    }

    #vibe984 .card:hover{ box-shadow: 0 28px 80px rgba(0,0,0,0.45); }
    #vibe984 .card .content{
      position:absolute; inset:14px;
      display:flex; flex-direction:column; justify-content:space-between;
    }
    #vibe984 .tag{
      align-self:flex-start;
      display:inline-flex; align-items:center; gap:8px;
      padding:6px 10px; border-radius:999px; font-weight:800; letter-spacing:.14em; text-transform:uppercase; font-size:11px;
      color: var(--muted);
      background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
      border:1px solid var(--edge);
    }
    #vibe984 .tag::before{
      content:""; width:8px; height:8px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #fff, var(--a));
      box-shadow: 0 0 10px color-mix(in oklab, var(--a) 70%, transparent);
    }
    #vibe984 .title{ font-weight:800; font-size: clamp(16px, 2vw, 20px); letter-spacing:.02em; }
    #vibe984 .mini{ color: var(--muted); font-size:12px; }

    /* Depthy transforms based on pointer and slider */
    #vibe984 .c1{
      transform:
        rotateX(calc((.5 - var(--my)) * 6deg))
        rotateY(calc((var(--mx) - .5) * 10deg))
        translate3d(calc((var(--mx) - .5) * -26px * var(--d)), calc((var(--my) - .5) * -24px * var(--d)), 70px);
    }
    #vibe984 .c2{
      transform:
        rotateX(calc((.5 - var(--my)) * 5deg))
        rotateY(calc((var(--mx) - .5) * 8deg))
        translate3d(calc((var(--mx) - .5) * 16px * var(--d)), calc((var(--my) - .5) * 14px * var(--d)), 40px);
    }
    #vibe984 .c3{
      transform:
        rotateX(calc((.5 - var(--my)) * 3deg))
        rotateY(calc((var(--mx) - .5) * 6deg))
        translate3d(calc((var(--mx) - .5) * -8px * var(--d)), calc((var(--my) - .5) * -8px * var(--d)), 10px);
    }

    /* Meta */
    #vibe984 .meta{
      grid-column: 1 / -1;
      display:flex; align-items:center; justify-content:space-between; gap:10px; color:var(--muted);
      font-size:12px; margin-top: 6px;
    }

    /* Motion handling */
    @media (prefers-reduced-motion: reduce){
      #vibe984 .glow, #vibe984 .grain, #vibe984 .fabric, #vibe984 .card { animation: none !important; transition: none !important; }
    }
    #vibe984.calm .glow{ animation-play-state: paused !important; }
    #vibe984.calm .fabric{ opacity:.6; }
    #vibe984.calm .card{ transition: none; }

    /* Small screens */
    @media (max-width: 900px){
      #vibe984 .shell{ grid-template-columns: 1fr; }
      #vibe984 .stack{ grid-column: 1 / -1; order: 3; }
      #vibe984 h1{ order: 1; }
      #vibe984 .lede{ order: 2; }
      #vibe984 .clock{ position:static; margin-top: 8px; }
    }
  </style>

  <canvas class="fabric" aria-hidden="true"></canvas>
  <div class="glow" aria-hidden="true"></div>
  <div class="grain" aria-hidden="true"></div>
  <div class="grid" aria-hidden="true"></div>

  <section class="shell" tabindex="0">
    <div class="top">
      <div class="brand">
        <span class="dot" aria-hidden="true"></span>
        <span class="word">Edition 984 • Chromatic Atlas</span>
      </div>
      <div class="controls">
        <button id="theme" title="Cycle theme (T)">Theme</button>
        <button id="gridBtn" title="Toggle grid (G)">Grid</button>
        <label class="toggle" title="Reduce motion (Space)">
          Motion
          <input type="checkbox" id="calm">
        </label>
        <label class="slider" title="Depth">
          Depth
          <input type="range" id="depth" min="0" max="1.4" step="0.01" value="0.90">
        </label>
      </div>
    </div>

    <div class="hero">
      <h1>Fold the light.</h1>
      <p class="lede">A parallax triptych that tilts with your intent. Nudge the air; layers respond in kind.</p>

      <svg class="clock" viewBox="0 0 100 100" aria-hidden="true">
        <defs>
          <linearGradient id="clock-grad" x1="0" y1="0" x2="1" y2="1">
            <stop offset="0%" stop-color="var(--a)"/>
            <stop offset="100%" stop-color="var(--b)"/>
          </linearGradient>
        </defs>
        <circle class="bg" cx="50" cy="50" r="44" fill="none" stroke-width="2"/>
        <circle class="fg" cx="50" cy="50" r="44" fill="none" stroke-width="4" stroke-linecap="round"
                stroke-dasharray="276.46" stroke-dashoffset="276.46"/>
      </svg>
    </div>

    <div class="stack" role="img" aria-label="Three glass cards shifting in depth with color light">
      <article class="card c1">
        <div class="content">
          <span class="tag">A—Phase</span>
          <div>
            <div class="title">Velocity of stillness</div>
            <div class="mini">Silence that moves, motion that rests.</div>
          </div>
        </div>
      </article>

      <article class="card c2">
        <div class="content">
          <span class="tag">B—Phase</span>
          <div>
            <div class="title">Parallax manners</div>
            <div class="mini">Layers behave when you ask them nicely.</div>
          </div>
        </div>
      </article>

      <article class="card c3">
        <div class="content">
          <span class="tag">C—Phase</span>
          <div>
            <div class="title">Light, folded</div>
            <div class="mini">A pocket atlas for wandering photons.</div>
          </div>
        </div>
      </article>
    </div>

    <div class="meta">
      <span id="last-updated">Last updated: 2025-11-30 15:19:32 EST</span>
      <span class="keys">Shortcuts: T theme • G grid • Space motion • +/- depth • Arrows tilt</span>
    </div>
  </section>

  <script>
    (function(){
      const root = document.getElementById('vibe984');
      const themeBtn = root.querySelector('#theme');
      const gridBtn = root.querySelector('#gridBtn');
      const calmToggle = root.querySelector('#calm');
      const depth = root.querySelector('#depth');
      const canvas = root.querySelector('.fabric');
      const clock = root.querySelector('.clock .fg');
      const last = root.querySelector('#last-updated');

      // Timestamp
      try{
        const d = new Date();
        const fmt = new Intl.DateTimeFormat([], { year:'numeric', month:'short', day:'2-digit', hour:'2-digit', minute:'2-digit' });
        last.textContent = 'Last updated: ' + fmt.format(d);
      }catch{ last.textContent = 'Last updated: just now'; }

      // Themes
      const themes = ['zenith','glacier','ember','ink'];
      function cycleTheme(){
        const cur = root.getAttribute('data-theme') || themes[0];
        const idx = themes.indexOf(cur);
        const nxt = themes[(idx + 1) % themes.length];
        root.setAttribute('data-theme', nxt);
        // nudge canvas palette
        seedColors();
      }
      themeBtn.addEventListener('click', cycleTheme);

      // Grid
      gridBtn.addEventListener('click', ()=> root.classList.toggle('show-grid'));

      // Motion
      let calm = false;
      function setCalm(state){
        calm = state;
        if(calm){
          root.classList.add('calm');
          calmToggle.checked = true;
        }else{
          root.classList.remove('calm');
          calmToggle.checked = false;
        }
      }
      calmToggle.addEventListener('change', e=> setCalm(e.target.checked));
      if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) setCalm(true);
      if ('ontouchstart' in window) setCalm(true);

      // Depth
      function setDepth(v){
        const val = Math.max(0, Math.min(1.4, Number(v) || 0.9));
        root.style.setProperty('--d', val.toFixed(2));
      }
      depth.addEventListener('input', e=> setDepth(e.target.value));
      setDepth(depth.value);

      // Parallax tracking
      let rect;
      function updateRect(){ rect = root.getBoundingClientRect(); }
      updateRect(); window.addEventListener('resize', updateRect, { passive:true });

      let mx=.5,my=.5, tx=.5, ty=.5, raf=null;
      function onMove(e){
        if(!rect) updateRect();
        tx = Math.max(0, Math.min(1, (e.clientX - rect.left)/rect.width));
        ty = Math.max(0, Math.min(1, (e.clientY - rect.top)/rect.height));
        if(!raf) raf = requestAnimationFrame(tick);
      }
      function tick(){
        const ease = .12;
        mx += (tx - mx) * ease;
        my += (ty - my) * ease;
        root.style.setProperty('--mx', mx.toFixed(4));
        root.style.setProperty('--my', my.toFixed(4));
        if (Math.abs(mx - tx) > 0.001 || Math.abs(my - ty) > 0.001) {
          raf = requestAnimationFrame(tick);
        } else {
          raf = null;
        }
      }
      root.addEventListener('pointermove', e=> { if(!calm) onMove(e); });
      root.addEventListener('pointerleave', ()=> { tx=.5; ty=.5; if(!raf) raf = requestAnimationFrame(tick); });

      // Keyboard
      root.querySelector('.shell').addEventListener('keydown', (e)=>{
        const k = e.key.toLowerCase();
        if (k === 't'){ e.preventDefault(); cycleTheme(); }
        if (k === 'g'){ e.preventDefault(); root.classList.toggle('show-grid'); }
        if (k === ' '){ e.preventDefault(); setCalm(!calm); }
        if (k === '+' || k === '='){ e.preventDefault(); depth.value = Math.min(1.4, Number(depth.value) + 0.05).toFixed(2); setDepth(depth.value); }
        if (k === '-' || k === '_'){ e.preventDefault(); depth.value = Math.max(0, Number(depth.value) - 0.05).toFixed(2); setDepth(depth.value); }
        if (['arrowup','arrowdown','arrowleft','arrowright'].includes(k)){
          e.preventDefault();
          if (k==='arrowup') ty -= .03;
          if (k==='arrowdown') ty += .03;
          if (k==='arrowleft') tx -= .03;
          if (k==='arrowright') tx += .03;
          tx = Math.max(0, Math.min(1, tx));
          ty = Math.max(0, Math.min(1, ty));
          if(!raf) raf = requestAnimationFrame(tick);
        }
      });

      // Clock ring progress (minute sweep)
      const circumference = 2 * Math.PI * 44;
      function updateClock(){
        const now = new Date();
        const sec = now.getSeconds() + now.getMilliseconds()/1000;
        const progress = sec / 60;
        clock.setAttribute('stroke-dasharray', circumference.toFixed(2));
        clock.setAttribute('stroke-dashoffset', (circumference * (1 - progress)).toFixed(2));
      }
      updateClock();
      setInterval(()=>{ if(!calm) updateClock(); }, 200);

      // Canvas "fabric" ribbons
      let ctx, W, H, DPR=window.devicePixelRatio||1, anim;
      let strands=[];
      function rand(min,max){ return Math.random()*(max-min)+min; }
      function seedColors(){
        // Pull CSS variables by drawing styles; fallback palette variants
        const styles = getComputedStyle(root);
        const a = styles.getPropertyValue('--a').trim() || '#7de2ff';
        const b = styles.getPropertyValue('--b').trim() || '#8a7bff';
        const c = styles.getPropertyValue('--c').trim() || '#21ffc6';
        palette = [a,b,c];
      }
      function initFabric(){
        cancelAnimationFrame(anim);
        DPR = window.devicePixelRatio || 1;
        W = canvas.width = Math.floor(canvas.offsetWidth * DPR);
        H = canvas.height = Math.floor(canvas.offsetHeight * DPR);
        ctx = canvas.getContext('2d');
        seedColors();
        strands = [];
        const count = Math.round(Math.min(10, Math.max(6, (W*H)/350000)));
        for(let i=0;i<count;i++){
          strands.push({
            hue: i % 3,
            base: rand(0, Math.PI*2),
            amp: rand(40, 140) * DPR,
            thick: rand(24, 60) * DPR,
            speed: rand(0.0008, 0.0018),
            offsetX: rand(-W*0.1, W*0.1),
            offsetY: rand(-H*0.1, H*0.1)
          });
        }
        drawFabric();
      }
      let palette = ['#7de2ff','#8a7bff','#21ffc6'];
      function drawRibbon(t, s){
        const cx = W* (0.25 + mx*0.5) + s.offsetX;
        const cy = H* (0.25 + my*0.5) + s.offsetY;
        const loops = 6;
        ctx.beginPath();
        for(let i=0;i<=loops;i++){
          const a = s.base + i*(Math.PI*2/loops) + t*s.speed*4000;
          const r = s.amp * (0.6 + 0.4*Math.sin(t*s.speed*2 + i));
          const x = cx + Math.cos(a) * r;
          const y = cy + Math.sin(a) * r*0.6;
          if (i===0) ctx.moveTo(x,y); else ctx.quadraticCurveTo(cx,cy,x,y);
        }
        const grad = ctx.createLinearGradient(0,0,W,H);
        grad.addColorStop(0, palette[s.hue % palette.length] + 'cc');
        grad.addColorStop(1, palette[(s.hue+1) % palette.length] + 'cc');
        ctx.strokeStyle = grad;
        ctx.lineWidth = s.thick;
        ctx.lineCap = 'round';
        ctx.globalAlpha = 0.18;
        ctx.stroke();
      }
      function drawFabric(){
        if(!ctx) return;
        const t = performance.now();
        ctx.clearRect(0,0,W,H);
        for(const s of strands){
          if(!calm) s.base += s.speed*0.6;
          drawRibbon(t, s);
        }
        anim = requestAnimationFrame(drawFabric);
      }
      initFabric();
      window.addEventListener('resize', initFabric, { passive:true });

      // Speed modulation by pointer distance
      function modSpeed(){
        const dx = tx - .5, dy = ty - .5;
        const d = Math.min(1, Math.hypot(dx, dy) * 2);
        const seconds = 34 - d * 20; // faster near edges
        root.style.setProperty('--spd', seconds.toFixed(2) + 's');
      }
      root.addEventListener('pointermove', ()=> { if(!calm) modSpeed(); });
      root.addEventListener('pointerleave', ()=> modSpeed());
      modSpeed();
    })();
  </script>
</div>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


