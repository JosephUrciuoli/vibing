<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<section class="vx597" data-paused="false" aria-label="Orbital Sketch">
  <style>
    .vx597{
      --bg1: #f6f7fb;
      --bg2: #eef2ff;
      --ink: #0e1320;
      --muted: #5b6277;
      --a1: #ff8a00;
      --a2: #a855f7;
      --a3: #00bcd4;
      --ring: rgba(8, 16, 46, 0.06);
      position: relative;
      border-radius: 26px;
      overflow: hidden;
      min-height: 600px;
      padding: 20px 20px 18px;
      color: var(--ink);
      background:
        radial-gradient(200% 120% at 0% 0%, var(--bg1) 0%, var(--bg2) 45%, var(--bg1) 100%);
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,0.8),
        0 24px 80px rgba(8,12,28,0.14);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans";
      isolation: isolate;
    }
    /* Soft texture + halo */
    .vx597::before{
      content:"";
      position:absolute; inset:-15%;
      background:
        radial-gradient(60vmax 60vmax at 80% 10%, rgba(255,255,255,0.65), transparent 60%),
        radial-gradient(80vmax 80vmax at 10% 90%, rgba(255,255,255,0.5), transparent 60%);
      mix-blend-mode: overlay;
      pointer-events:none;
    }
    .vx597::after{
      content:"";
      position:absolute; inset:0;
      background:
        repeating-radial-gradient(circle at 50% 50%, rgba(0,0,0,0.015) 0 1px, transparent 1px 3px),
        linear-gradient(180deg, transparent 0%, rgba(255,255,255,0.12) 40%, transparent 100%);
      pointer-events:none;
    }

    /* Layout */
    .vx597 .topbar{
      position: relative;
      z-index: 2;
      display:flex; align-items:center; gap:14px; flex-wrap:wrap;
      padding: 8px 12px;
      background: rgba(255,255,255,0.55);
      backdrop-filter: blur(10px) saturate(140%);
      -webkit-backdrop-filter: blur(10px) saturate(140%);
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,0.9);
      box-shadow: 0 8px 26px rgba(12,18,36,0.10), inset 0 1px 0 rgba(255,255,255,0.8);
    }
    .vx597 .chip{
      display:inline-flex; align-items:center; gap:8px;
      font-size:11px; letter-spacing:.16em; text-transform:uppercase; font-weight:700;
      color: var(--muted);
      padding:8px 12px; border-radius:999px;
      background:
        linear-gradient(#fff, #fff) padding-box,
        linear-gradient(135deg, var(--a1), var(--a2)) border-box;
      border:1px solid transparent;
      box-shadow: 0 4px 16px rgba(0,0,0,0.06);
    }
    .vx597 .dot{ width:8px; height:8px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #fff 0 40%, var(--a2) 60% 100%);
      box-shadow: 0 0 10px var(--a2);
    }
    .vx597 .swatches{ display:flex; gap:8px; margin-left: auto; }
    .vx597 .sw{
      width:26px; height:26px; border-radius:8px; border:1px solid rgba(0,0,0,0.08);
      background: var(--bg, #fff); cursor:pointer;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08), inset 0 1px 0 rgba(255,255,255,0.9);
      transition: transform 150ms ease, box-shadow 220ms ease, filter 220ms ease;
    }
    .vx597 .sw:hover{ transform: translateY(-2px); box-shadow: 0 8px 20px rgba(0,0,0,0.12) }
    .vx597 .speed{
      display:flex; align-items:center; gap:10px; margin-left: 8px; color: var(--muted); font-size:12px;
    }
    .vx597 input[type="range"]{
      -webkit-appearance: none; appearance: none;
      width: 160px; height: 8px; border-radius: 999px;
      background: linear-gradient(90deg, var(--a2), var(--a3));
      border: 1px solid rgba(0,0,0,0.08);
      outline: none;
    }
    .vx597 input[type="range"]::-webkit-slider-thumb{
      -webkit-appearance:none; appearance:none;
      width:18px; height:18px; border-radius:50%;
      background:#fff; border:2px solid var(--a2);
      box-shadow: 0 2px 8px rgba(0,0,0,0.25);
      cursor:pointer;
    }
    .vx597 input[type="range"]::-moz-range-thumb{
      width:18px; height:18px; border-radius:50%;
      background:#fff; border:2px solid var(--a2);
      box-shadow: 0 2px 8px rgba(0,0,0,0.25);
      cursor:pointer;
    }

    /* Title */
    .vx597 .title{
      position: relative; z-index:2;
      margin: 18px 6px 8px;
    }
    .vx597 h1{
      margin:0;
      font-size: clamp(30px, 6.6vw, 80px);
      line-height: .98; letter-spacing:-.02em;
      background: linear-gradient(90deg, var(--a1), var(--a2), var(--a3));
      -webkit-background-clip: text; background-clip: text; color: transparent;
      filter: drop-shadow(0 10px 30px rgba(90,100,255,0.18));
    }
    .vx597 p{
      margin:10px 0 0;
      color: var(--muted);
      font-size: clamp(14px, 1.6vw, 18px);
    }

    /* Canvas well */
    .vx597 .well{
      position: relative; z-index:1;
      margin-top: 16px; border-radius: 20px; overflow: hidden;
      background:
        radial-gradient(120% 120% at 50% 50%, rgba(255,255,255,0.65), transparent 60%),
        var(--ring);
      border: 1px solid rgba(0,0,0,0.06);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.8), 0 18px 60px rgba(10,18,38,0.12);
      min-height: 380px;
    }
    .vx597 canvas{ display:block; width:100%; height:46vh; min-height:360px; }

    /* Controls */
    .vx597 .controls{
      position: relative;
      z-index: 2;
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      margin: 14px 6px 4px;
    }
    .vx597 .btn{
      appearance:none; border:0; cursor:pointer; border-radius:999px;
      padding: 10px 14px; font-weight:700; font-size:14px;
      background: linear-gradient(90deg, var(--a2), var(--a3));
      color:#061022;
      box-shadow: 0 8px 20px rgba(16,24,56,0.18), inset 0 1px 0 rgba(255,255,255,0.7);
      transition: transform 160ms ease, box-shadow 220ms ease, filter 220ms ease, opacity 200ms ease;
    }
    .vx597 .btn:hover{ transform: translateY(-1px) }
    .vx597 .btn.ghost{
      background: linear-gradient(#ffffff, #ffffff) padding-box,
                  linear-gradient(135deg, var(--a1), var(--a2)) border-box;
      border:1px solid transparent;
      color: var(--ink);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.9), 0 4px 14px rgba(0,0,0,0.08);
    }

    /* Meta */
    .vx597 .meta{
      margin-top: 6px; color: var(--muted); font-size: 12px;
      display:flex; align-items:center; gap:10px;
    }
    .vx597 .meta::before, .vx597 .meta::after{
      content:""; flex:1; height:1px; background: linear-gradient(to right, transparent, rgba(0,0,0,0.12), transparent);
    }

    @media (max-width: 560px){
      .vx597{ padding:16px }
      .vx597 .topbar{ gap:10px }
      .vx597 .swatches{ order:3; width:100%; justify-content:flex-start; margin-left:0 }
      .vx597 .speed{ order:2; margin-left:0 }
      .vx597 canvas{ height:42vh; min-height:300px }
    }

    @media (prefers-color-scheme: dark){
      .vx597{
        --bg1:#0b1022; --bg2:#121a33; --ink:#e8eefc; --muted:#a2adcb;
        --ring: rgba(255,255,255,0.02);
      }
    }
  </style>

  <div class="topbar" role="toolbar" aria-label="Orbital controls">
    <span class="chip"><span class="dot" aria-hidden="true"></span> Iteration 597</span>
    <div class="speed">
      <label for="vx597-speed">Orbit</label>
      <input id="vx597-speed" type="range" min="0" max="2" step="0.1" value="1" aria-label="Orbit speed">
    </div>
    <div class="swatches" role="group" aria-label="Palettes">
      <button class="sw" data-theme="quartz" aria-label="Quartz" style="--bg: linear-gradient(135deg,#f6f7fb,#eef2ff)"></button>
      <button class="sw" data-theme="midnight" aria-label="Midnight" style="--bg: linear-gradient(135deg,#0b1022,#121a33)"></button>
      <button class="sw" data-theme="mint" aria-label="Mint" style="--bg: linear-gradient(135deg,#e8fff4,#f7fffb)"></button>
    </div>
  </div>

  <div class="title">
    <h1>Orbital Sketch</h1>
    <p>Concentric paths, drifting satellites. Nudge the cosmos; tune the drift.</p>
  </div>

  <div class="well" aria-hidden="true">
    <canvas id="vx597-canvas"></canvas>
  </div>

  <div class="controls">
    <button class="btn" id="vx597-toggle" aria-pressed="false" aria-label="Pause motion">Pause</button>
    <button class="btn ghost" id="vx597-reset" aria-label="Reseed orbits">Reseed</button>
  </div>

  <div class="meta">
    <span>Updated <span id="last-updated">Last updated: 2025-11-12 17:17:22 EST</span></span>
  </div>

  <script>
    (function(){
      const root = document.querySelector('.vx597');
      const canvas = root.querySelector('#vx597-canvas');
      const ctx = canvas.getContext('2d');
      const speedEl = root.querySelector('#vx597-speed');
      const toggleBtn = root.querySelector('#vx597-toggle');
      const resetBtn = root.querySelector('#vx597-reset');
      const swatches = [...root.querySelectorAll('.sw')];
      const last = root.querySelector('#last-updated');

      function fmt(d){
        try{
          return d.toLocaleString(undefined,{year:'numeric',month:'short',day:'2-digit',hour:'2-digit',minute:'2-digit'});
        }catch(e){ return d.toISOString(); }
      }
      last.textContent = fmt(new Date());

      const themes = {
        quartz:  { bg1:'#f6f7fb', bg2:'#eef2ff', ink:'#0e1320', a1:'#ff8a00', a2:'#a855f7', a3:'#00bcd4', trail:'rgba(246,247,251,0.10)' },
        midnight:{ bg1:'#0b1022', bg2:'#121a33', ink:'#e8eefc', a1:'#2cf5e0', a2:'#a78bfa', a3:'#60a5fa', trail:'rgba(0,0,0,0.18)' },
        mint:    { bg1:'#e8fff4', bg2:'#f7fffb', ink:'#072015', a1:'#00c58e', a2:'#3b82f6', a3:'#f59e0b', trail:'rgba(232,255,244,0.10)' }
      };
      let active = 'quartz';
      function applyTheme(key){
        const t = themes[key] || themes.quartz;
        active = key;
        root.style.setProperty('--bg1', t.bg1);
        root.style.setProperty('--bg2', t.bg2);
        root.style.setProperty('--ink', t.ink);
        root.style.setProperty('--a1', t.a1);
        root.style.setProperty('--a2', t.a2);
        root.style.setProperty('--a3', t.a3);
        palette.ring = [t.a1, t.a2, t.a3];
        palette.trail = t.trail;
      }

      // Seed theme by time-of-day
      const hr = new Date().getHours();
      applyTheme(hr >= 6 && hr < 12 ? 'mint' : hr >= 12 && hr < 19 ? 'quartz' : 'midnight');

      swatches.forEach(btn => btn.addEventListener('click', () => {
        applyTheme(btn.dataset.theme);
        pulse(btn);
      }));

      // Canvas sizing
      function resize(){
        const dpr = Math.max(1, window.devicePixelRatio || 1);
        const rect = canvas.getBoundingClientRect();
        canvas.width = Math.max(600, rect.width) * dpr;
        canvas.height = Math.max(360, rect.height) * dpr;
        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
      }
      resize();
      window.addEventListener('resize', resize);

      // Scene
      const palette = { ring: [themes[active].a1, themes[active].a2, themes[active].a3], trail: themes[active].trail };
      let t = 0, mx = 0, my = 0;
      const rings = [];
      function reseed(){
        rings.length = 0;
        const base = Math.min(canvas.getBoundingClientRect().width, canvas.getBoundingClientRect().height) * 0.9;
        const count = 5;
        for(let i=0;i<count;i++){
          const r = (base * 0.18) + i * (base * 0.10) + Math.random()*6;
          const dir = Math.random() > .5 ? 1 : -1;
          const speed = 0.002 + i * 0.0015 + Math.random()*0.001;
          const sats = 6 + i*2;
          const phase = Math.random() * Math.PI*2;
          rings.push({ r, dir, speed, sats, phase });
        }
      }
      reseed();

      // Motion controls
      function paused(){ return root.dataset.paused === 'true'; }
      function setPaused(v){
        root.dataset.paused = v ? 'true' : 'false';
        toggleBtn.textContent = v ? 'Resume' : 'Pause';
        toggleBtn.setAttribute('aria-pressed', String(v));
      }
      toggleBtn.addEventListener('click', () => setPaused(!paused()));
      resetBtn.addEventListener('click', () => { reseed(); pulse(resetBtn); });

      // Pointer influence
      const track = (e) => {
        const r = canvas.getBoundingClientRect();
        const x = (e.clientX - r.left)/r.width * 2 - 1;
        const y = (e.clientY - r.top)/r.height * 2 - 1;
        mx = x; my = y;
      };
      root.addEventListener('pointermove', track);
      root.addEventListener('pointerleave', ()=>{ mx=0; my=0; });

      // Reduced motion preference
      if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
        setPaused(true);
      }

      function draw(){
        const rect = canvas.getBoundingClientRect();
        const w = rect.width, h = rect.height;
        const cx = w/2 + mx * 28;
        const cy = h/2 + my * 18;

        // Trails
        ctx.globalCompositeOperation = 'source-over';
        ctx.fillStyle = palette.trail;
        ctx.fillRect(0, 0, w, h);

        // Rings and satellites
        const spd = parseFloat(speedEl.value || '1');
        if (!paused()) t += 1 * spd;

        for(let i=0;i<rings.length;i++){
          const R = rings[i];
          const ang = R.phase + t * R.speed * 60 * R.dir;
          // ring stroke
          ctx.save();
          ctx.translate(cx, cy);
          ctx.rotate(ang*0.02);
          ctx.lineWidth = 1.2 + i * 0.6;
          const col = palette.ring[i % palette.ring.length];
          ctx.strokeStyle = col;
          ctx.globalAlpha = 0.75;
          ctx.shadowColor = col;
          ctx.shadowBlur = 14 + i*6;

          ctx.beginPath();
          ctx.ellipse(0, 0, R.r + i*2, R.r * 0.82, ang*0.25, 0, Math.PI*2);
          ctx.stroke();
          ctx.restore();

          // satellites
          for(let s=0; s<R.sats; s++){
            const a = ang + (Math.PI*2 * s/R.sats);
            const x = cx + Math.cos(a) * (R.r + i*2);
            const y = cy + Math.sin(a) * (R.r * 0.82);
            const size = 2 + (i%3);
            const c = palette.ring[(i+s) % palette.ring.length];

            ctx.beginPath();
            ctx.fillStyle = c;
            ctx.globalAlpha = 0.9;
            ctx.shadowColor = c;
            ctx.shadowBlur = 16 + i*3;
            ctx.arc(x, y, size, 0, Math.PI*2);
            ctx.fill();

            // tether
            ctx.beginPath();
            ctx.globalAlpha = 0.25;
            ctx.lineWidth = 1;
            ctx.strokeStyle = c;
            ctx.moveTo(x, y);
            ctx.lineTo(cx, cy);
            ctx.stroke();
          }
        }

        // center pulse
        const pulseR = 6 + Math.sin(t*0.05)*2;
        const pulseCol = palette.ring[(Math.floor(t/120)) % palette.ring.length];
        ctx.beginPath();
        ctx.globalAlpha = 0.9;
        ctx.fillStyle = pulseCol;
        ctx.shadowColor = pulseCol;
        ctx.shadowBlur = 18;
        ctx.arc(cx, cy, pulseR, 0, Math.PI*2);
        ctx.fill();

        requestAnimationFrame(draw);
      }
      requestAnimationFrame(draw);

      function pulse(el){
        el.style.transform += ' scale(0.97)';
        el.style.opacity = '0.95';
        setTimeout(() => { el.style.transform = el.style.transform.replace(' scale(0.97)',''); el.style.opacity=''; }, 130);
      }
    })();
  </script>
</section>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


