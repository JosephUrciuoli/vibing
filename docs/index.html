<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<style>
  .vibe-1707 {
    --r: 28px;
    --ink: #eaf2ff;
    --muted: #9fb2d6;
    --bg0: #040813;
    --bg1: #0a1530;
    --line: rgba(255,255,255,.14);
    --veil: rgba(255,255,255,.06);
    --glass: rgba(255,255,255,.08);
    --ax1: #77e7ff;
    --ax2: #8b7bff;
    --ax3: #ffb86b;
    --shadow: 0 30px 120px -40px rgba(0,0,0,.65);
    position: relative;
    color: var(--ink);
    min-height: 760px;
    border-radius: var(--r);
    overflow: hidden;
    isolation: isolate;
    font: 500 16px/1.6 ui-sans-serif, -apple-system, system-ui, Inter, Segoe UI, Roboto, "Helvetica Neue", Arial, sans-serif;
    background:
      radial-gradient(1200px 900px at 120% -10%, rgba(119,231,255,.20), transparent 60%),
      radial-gradient(1100px 900px at -20% 120%, rgba(139,123,255,.22), transparent 60%),
      linear-gradient(180deg, var(--bg0), var(--bg1));
    box-shadow: var(--shadow), inset 0 1px 0 rgba(255,255,255,.06);
  }
  .vibe-1707[data-theme="day"]{
    --ink: #0b1224;
    --muted: #506084;
    --bg0: #fbfcff;
    --bg1: #eaf1ff;
    --line: rgba(20,30,60,.16);
    --veil: rgba(255,255,255,.62);
    --glass: rgba(255,255,255,.7);
    background:
      radial-gradient(1200px 900px at 120% -10%, rgba(139,123,255,.22), transparent 60%),
      radial-gradient(1100px 900px at -20% 120%, rgba(119,231,255,.20), transparent 60%),
      linear-gradient(180deg, var(--bg0), var(--bg1));
    box-shadow: 0 30px 120px -40px rgba(10,25,50,.22), inset 0 1px 0 rgba(255,255,255,.9);
  }

  .vibe-1707::before,
  .vibe-1707::after{
    content:"";
    position:absolute; inset:-30%;
    pointer-events:none; z-index:0;
    background:
      conic-gradient(from 130deg at var(--mx,60%) var(--my,40%), rgba(139,123,255,.12), rgba(255,184,107,.06), rgba(119,231,255,.12), rgba(139,123,255,.12));
    filter: blur(60px) saturate(120%);
    transform: rotate(6deg) scale(1.1);
    mask-image: radial-gradient(70% 70% at 50% 40%, black, transparent 70%);
    opacity:.5;
    transition: opacity .3s ease;
    mix-blend-mode: soft-light;
  }
  .vibe-1707::after{
    opacity:.35; transform: rotate(-6deg) scale(1.05);
    background:
      conic-gradient(from -20deg at calc(var(--mx,60%)*.9) calc(var(--my,40%)*1.1), rgba(255,184,107,.12), rgba(119,231,255,.16), rgba(139,123,255,.12), rgba(255,184,107,.12));
    mask-image: radial-gradient(60% 60% at 40% 60%, black, transparent 75%);
  }

  .vibe-1707[data-motion="off"] * { animation: none !important; transition: none !important; }
  .chrome-1707 { position: relative; z-index: 1; display: grid; grid-template-rows: auto 1fr auto; gap: clamp(18px, 3.5vw, 40px); padding: clamp(22px, 4vw, 48px); }

  /* Nav */
  .nav-1707 { display:flex; align-items:center; justify-content: space-between; gap: 16px; }
  .brand-1707 { display:flex; align-items:center; gap: 14px; }
  .mark-1707{
    position: relative; width: 44px; height: 44px; border-radius: 14px; overflow: hidden;
    background: radial-gradient(70% 70% at 30% 30%, rgba(255,255,255,.85), rgba(255,255,255,.25) 60%, transparent 70%),
                linear-gradient(135deg, var(--ax1), var(--ax2));
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.45), 0 18px 38px -18px rgba(0,0,0,.5);
  }
  .mark-1707::after{
    content:""; position:absolute; inset:8px; border-radius: 50%;
    background: conic-gradient(from 0deg, var(--ax1), var(--ax2), var(--ax3), var(--ax1));
    mask: radial-gradient(closest-side, transparent 62%, black 63% 100%);
    animation: spinOrb 12s linear infinite;
  }
  @keyframes spinOrb { to { transform: rotate(360deg); } }
  .name-1707 { font-weight: 1000; letter-spacing: .3px; font-size: 18px; }
  .controls-1707 { display:flex; gap: 8px; flex-wrap: wrap; }
  .btn-1707{
    appearance:none; border:1px solid var(--line); background: var(--veil);
    color: currentColor; padding:9px 14px; border-radius: 999px; cursor:pointer; font-weight: 900;
    backdrop-filter: blur(6px);
    transition: transform .18s ease, box-shadow .18s ease, background .18s ease, color .18s ease;
  }
  .btn-1707:hover { transform: translateY(-1px); box-shadow: 0 16px 30px -16px rgba(0,0,0,.45); }
  .btn-1707.primary { background: linear-gradient(90deg, var(--ax1), var(--ax2)); color: #0b1224; border-color: transparent; }
  .vibe-1707[data-theme="day"] .btn-1707.primary { color: #0b1224; }

  /* Hero */
  .hero-1707 { display:grid; grid-template-columns: 1.1fr 1fr; gap: clamp(18px, 4.6vw, 56px); align-items:center; }
  @media (max-width: 980px){ .hero-1707 { grid-template-columns: 1fr; } }

  .copy-1707 .eyebrow-1707{
    letter-spacing: .28em; text-transform: uppercase; font-size: 12px; color: var(--muted);
  }
  .copy-1707 h1{
    margin: 10px 0 10px; line-height: .93; font-weight: 1000; letter-spacing: -0.02em;
    font-size: clamp(46px, 9.2vw, 104px);
    background: linear-gradient(100deg, var(--ax1), var(--ax2), var(--ax3));
    -webkit-background-clip: text; background-clip: text; color: transparent;
    filter: drop-shadow(0 30px 90px rgba(139,123,255,.22));
    text-wrap: balance;
  }
  .copy-1707 .lede-1707{ max-width: 64ch; color: var(--muted); font-size: clamp(14px, 2.2vw, 18px); }
  .cta-row-1707{ display:flex; gap:10px; flex-wrap: wrap; margin-top: 18px; }
  .cta-1707{ text-decoration:none; display:inline-flex; align-items:center; gap:10px;
    padding: 12px 16px; border-radius: 14px; font-weight: 900; border:1px solid var(--line); }
  .cta-1707.ghost{ background: var(--veil); color: var(--ink); }
  .cta-1707.primary{ background: linear-gradient(90deg, var(--ax2), var(--ax3)); color: #0b1224; border-color: transparent; }

  /* Orbitarium */
  .orbitarium-1707{
    position: relative; border-radius: 22px; overflow: hidden;
    border: 1px solid var(--line);
    background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.04));
    box-shadow: inset 0 1px 0 rgba(255,255,255,.16), 0 24px 64px -30px rgba(0,0,0,.55);
    min-height: clamp(320px, 44vw, 560px);
  }
  .vibe-1707[data-theme="day"] .orbitarium-1707{
    background: linear-gradient(180deg, rgba(255,255,255,.76), rgba(255,255,255,.52));
    box-shadow: inset 0 1px 0 rgba(255,255,255,.92), 0 24px 64px -30px rgba(10,25,50,.25);
  }
  .sky-1707{ display:block; width:100%; height:100%; }

  /* Cards */
  .deck-1707{ display:grid; grid-template-columns: repeat(6, 1fr); gap: 12px; margin-top: 8px; }
  @media (max-width: 1100px){ .deck-1707{ grid-template-columns: repeat(4, 1fr);} }
  @media (max-width: 720px){ .deck-1707{ grid-template-columns: repeat(2, 1fr);} }

  .card-1707{
    position: relative; min-height: 148px; border-radius: 16px; padding: 14px;
    border:1px solid var(--line);
    background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
    box-shadow: inset 0 1px 0 rgba(255,255,255,.18), 0 18px 40px -24px rgba(0,0,0,.55);
    overflow: hidden; transform-style: preserve-3d;
    transition: transform .22s ease, box-shadow .22s ease, border-color .22s ease;
  }
  .vibe-1707[data-theme="day"] .card-1707{
    background: linear-gradient(180deg, rgba(255,255,255,.88), rgba(255,255,255,.6));
    box-shadow: inset 0 1px 0 rgba(255,255,255,.88), 0 18px 40px -24px rgba(0,0,0,.22);
  }
  .card-1707:hover, .card-1707:focus-within{ transform: translateY(-3px) rotateX(var(--rx,0deg)) rotateY(var(--ry,0deg)); border-color: rgba(255,255,255,.32); }
  .card-1707::after{
    content:""; position:absolute; inset:-2px; border-radius: inherit; pointer-events:none;
    background:
      radial-gradient(600px 260px at var(--mx, 50%) 120%, rgba(139,123,255,.18), transparent 60%),
      conic-gradient(from 180deg, rgba(119,231,255,.14), rgba(139,123,255,.14), rgba(255,184,107,.14), rgba(119,231,255,.14));
    opacity:0; transition: opacity .25s ease; mix-blend-mode: screen;
  }
  .card-1707:hover::after{ opacity:1; }
  .card-1707 h3 { margin: 2px 0 6px; font-size: 16px; letter-spacing:.2px; }
  .card-1707 p { margin: 0; color: var(--muted); font-size: 14px; }
  .card-1707.wide{ grid-column: span 3; }
  .card-1707.tall{ grid-row: span 2; min-height: 304px; }

  /* Meta */
  .meta-1707 { display:flex; align-items:center; justify-content: space-between; gap: 8px; flex-wrap: wrap; color: var(--muted); margin-top: 8px; }
  .chip-1707{
    display:inline-flex; align-items:center; gap: 8px; padding: 7px 12px;
    border-radius: 999px; border: 1px solid var(--line);
    background: var(--veil); color: currentColor; font-weight: 800;
    backdrop-filter: blur(4px);
  }
  .glowline-1707{
    height:1px; width:100%; background:
      linear-gradient(90deg, transparent, rgba(255,255,255,.4), transparent);
    opacity:.4; margin: 8px 0 -2px;
  }
</style>

<div class="vibe-1707" data-theme="night" data-motion="on" aria-label="Aurora Orbitarium">
  <div class="chrome-1707">
    <div class="nav-1707">
      <div class="brand-1707">
        <div class="mark-1707" aria-hidden="true"></div>
        <div class="name-1707">Aurora Atelier</div>
      </div>
      <div class="controls-1707">
        <button class="btn-1707 theme-toggle" aria-pressed="true" aria-label="Toggle theme">Theme</button>
        <button class="btn-1707 motion-toggle" aria-pressed="false" aria-label="Toggle motion">Motion</button>
        <button class="btn-1707 shuffle" aria-label="Shuffle palette">Shuffle</button>
        <button class="btn-1707 primary pulse" aria-label="Pulse the orbits">Pulse</button>
      </div>
    </div>

    <section class="hero-1707">
      <div class="copy-1707">
        <div class="eyebrow-1707">Iteration 1707 • Aurora Systems Lab</div>
        <h1>Design the Gravity</h1>
        <p class="lede-1707">Interfaces are little solar systems. Tune their orbits and everything feels inevitable.</p>
        <div class="cta-row-1707">
          <a href="#" class="cta-1707 primary tour-action">Take the Orbit Tour</a>
          <a href="#" class="cta-1707 ghost comet-action">Cast a Comet</a>
        </div>
      </div>

      <figure class="orbitarium-1707" aria-label="Interactive orbital canvas">
        <canvas class="sky-1707" role="img" aria-label="Concentric orbits with roaming particles that respond to your cursor"></canvas>
      </figure>
    </section>

    <span class="glowline-1707" aria-hidden="true"></span>

    <div class="deck-1707" aria-label="Design axioms">
      <div class="card-1707 wide" tabindex="0">
        <h3>1. Inertia with Intent</h3>
        <p>Everything moves for a reason. Ease maps to meaning; friction maps to focus.</p>
      </div>

      <div class="card-1707 tall" tabindex="0">
        <h3>2. Luminous Hierarchy</h3>
        <p>Contrast is light, not noise. Brighter is closer; dimmer is quieter.</p>
      </div>

      <div class="card-1707" tabindex="0">
        <h3>3. Elegant Escape</h3>
        <p>One tap from anywhere. Soft exits keep momentum intact.</p>
      </div>

      <div class="card-1707 wide" tabindex="0">
        <h3>4. Rhythm Before Detail</h3>
        <p>Flow first; pixels later. A good path needs fewer signs.</p>
      </div>

      <div class="card-1707" tabindex="0">
        <h3>5. Honest Materials</h3>
        <p>Glass should feel like glass. Shadows confess the light.</p>
      </div>
    </div>

    <div class="meta-1707">
      <span class="chip-1707">
        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-opacity=".6" stroke-width="1.4"/>
          <path d="M12 7v5l4 2" stroke="currentColor" stroke-opacity=".85" stroke-width="1.6" stroke-linecap="round"/>
        </svg>
        <span id="last-updated">Last updated: 2026-01-03 03:25:09 EST</span>
      </span>
      <span class="chip-1707" aria-hidden="true">Shape > Shine • Motion that listens</span>
    </div>
  </div>
</div>

<script>
(function(){
  const root = document.currentScript.previousElementSibling;
  const last = root.querySelector('#last-updated');

  // Timestamp
  try{
    const now = new Date();
    last.textContent = 'Last updated: ' + now.toLocaleString(undefined, {
      year:'numeric', month:'2-digit', day:'2-digit',
      hour:'2-digit', minute:'2-digit', second:'2-digit',
      hour12:false, timeZoneName:'short'
    });
  }catch(e){ last.textContent = 'Last updated: just now'; }

  // Theme + persistence
  const themeBtn = root.querySelector('.theme-toggle');
  const savedTheme = localStorage.getItem('vibe1707-theme');
  if (savedTheme) root.setAttribute('data-theme', savedTheme);
  const syncThemeAria = () => themeBtn.setAttribute('aria-pressed', String(root.getAttribute('data-theme') !== 'day'));
  syncThemeAria();
  themeBtn.addEventListener('click', ()=>{
    const next = root.getAttribute('data-theme') === 'day' ? 'night' : 'day';
    root.setAttribute('data-theme', next);
    localStorage.setItem('vibe1707-theme', next);
    syncThemeAria();
  });

  // Motion + persistence + prefers reduced motion
  const motionBtn = root.querySelector('.motion-toggle');
  const mediaReduce = matchMedia('(prefers-reduced-motion: reduce)');
  let rafId, then = 0;
  let sky, ctx, wrap;
  const setMotion = (on) => {
    root.setAttribute('data-motion', on ? 'on' : 'off');
    motionBtn.setAttribute('aria-pressed', String(!on));
    if (!on){ cancelAnimationFrame(rafId); }
    else { loop(); }
  };
  const savedMotion = localStorage.getItem('vibe1707-motion');
  if (savedMotion) setMotion(savedMotion === 'on');
  else if (mediaReduce.matches) setMotion(false);
  motionBtn.addEventListener('click', ()=>{
    const on = root.getAttribute('data-motion') === 'off';
    setMotion(on);
    localStorage.setItem('vibe1707-motion', on ? 'on' : 'off');
  });
  mediaReduce.addEventListener && mediaReduce.addEventListener('change', e => setMotion(!e.matches));

  // Pointer spotlight on background beams
  let rafGlow;
  function moveLight(e){
    if (root.getAttribute('data-motion') === 'off') return;
    const r = root.getBoundingClientRect();
    const x = ('touches' in e) ? e.touches[0].clientX : e.clientX;
    const y = ('touches' in e) ? e.touches[0].clientY : e.clientY;
    const px = ((x - r.left) / r.width) * 100;
    const py = ((y - r.top) / r.height) * 100;
    if (rafGlow) cancelAnimationFrame(rafGlow);
    rafGlow = requestAnimationFrame(()=>{
      root.style.setProperty('--mx', px + '%');
      root.style.setProperty('--my', py + '%');
    });
  }
  root.addEventListener('pointermove', moveLight, { passive: true });

  // Orbitarium setup
  sky = root.querySelector('.sky-1707');
  wrap = root.querySelector('.orbitarium-1707');
  ctx = sky.getContext('2d');

  const state = {
    orbits: [],
    bodies: [],
    comets: [],
    center: { x: 0, y: 0, lerpX: 0, lerpY: 0 },
    pulse: 0
  };

  function sizeCanvas(){
    const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
    const r = wrap.getBoundingClientRect();
    sky.width = Math.floor(r.width * dpr);
    sky.height = Math.floor(r.height * dpr);
    sky.style.width = r.width + 'px';
    sky.style.height = r.height + 'px';
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    configureScene();
  }

  function palette(){
    const night = root.getAttribute('data-theme') !== 'day';
    return night
      ? { bg:'rgba(10,20,45,.08)', arc:'rgba(170,200,255,', glow1: 'rgba(119,231,255,', glow2:'rgba(139,123,255,', dust:'rgba(255,184,107,' }
      : { bg:'rgba(255,255,255,.4)', arc:'rgba(60,90,140,', glow1: 'rgba(139,123,255,', glow2:'rgba(119,231,255,', dust:'rgba(255,170,90,' };
  }

  function configureScene(){
    const r = wrap.getBoundingClientRect();
    state.center.x = r.width/2; state.center.y = r.height/2;
    state.center.lerpX = state.center.x; state.center.lerpY = state.center.y;

    // Create orbits
    const maxR = Math.min(r.width, r.height) * 0.44;
    state.orbits = [];
    for(let i=0;i<6;i++){
      const radius = (i+1)/(6+1) * maxR + 20;
      state.orbits.push({
        r: radius,
        w: 1.2 + Math.pow(i/5,1.8)*1.6,
        dash: [8 + i*2, 12 + i*3],
        rot: Math.random()*Math.PI*2,
        speed: 0.0008 + i*0.00035
      });
    }

    // Bodies
    state.bodies = [];
    for(let i=0;i<28;i++){
      state.bodies.push({
        orbit: state.orbits[Math.floor(Math.random()*state.orbits.length)],
        ang: Math.random()*Math.PI*2,
        vel: (Math.random()*0.0008 + 0.0005) * (Math.random()>.5?1:-1),
        size: 1.6 + Math.random()*2.6,
        jitter: Math.random()*0.8 + 0.2
      });
    }
  }

  function clear(){
    const pal = palette();
    const r = wrap.getBoundingClientRect();
    ctx.clearRect(0,0,r.width,r.height);
    // Ambient glow
    const grad = ctx.createRadialGradient(r.width*0.8, r.height*0.15, 8, r.width*0.8, r.height*0.15, Math.max(r.width, r.height));
    grad.addColorStop(0, pal.glow1 + '0.28)');
    grad.addColorStop(1, 'transparent');
    ctx.fillStyle = grad; ctx.fillRect(0,0,r.width,r.height);
  }

  function draw(now=0){
    const r = wrap.getBoundingClientRect();
    clear();
    const pal = palette();

    // Lerp center to pointer
    state.center.lerpX += (state.center.x - state.center.lerpX) * 0.06;
    state.center.lerpY += (state.center.y - state.center.lerpY) * 0.06;

    // Orbits
    ctx.save();
    ctx.translate(state.center.lerpX, state.center.lerpY);
    state.orbits.forEach((o, i)=>{
      o.rot += o.speed * ((root.getAttribute('data-motion') === 'off') ? 0 : 1);
      ctx.save();
      ctx.rotate(o.rot);
      ctx.beginPath();
      ctx.strokeStyle = pal.arc + (0.28 + i*0.04) + ')';
      ctx.lineWidth = o.w + state.pulse*0.6;
      ctx.setLineDash(o.dash);
      ctx.arc(0,0, o.r + Math.sin(now*0.001 + i)*2, 0, Math.PI*2);
      ctx.stroke();
      ctx.restore();
    });

    // Bodies (planets)
    state.bodies.forEach(b=>{
      b.ang += b.vel;
      const rr = b.orbit.r + Math.sin(now*0.002 + b.ang*3)*b.jitter*3;
      const x = Math.cos(b.ang) * rr;
      const y = Math.sin(b.ang) * rr;

      // trail
      ctx.beginPath();
      ctx.strokeStyle = pal.glow2 + '0.22)';
      ctx.lineWidth = 1;
      ctx.moveTo(x, y);
      ctx.lineTo(x * 0.98, y * 0.98);
      ctx.stroke();

      // body
      const g = ctx.createRadialGradient(x, y, 0.5, x, y, b.size*2.6);
      g.addColorStop(0, pal.glow1 + '0.9)');
      g.addColorStop(1, pal.glow1 + '0)');
      ctx.fillStyle = g;
      ctx.beginPath();
      ctx.arc(x, y, b.size + state.pulse*0.25, 0, Math.PI*2);
      ctx.fill();
    });

    // Comets
    for(let i=state.comets.length-1;i>=0;i--){
      const c = state.comets[i];
      c.life -= 0.01;
      c.ang += c.vel;
      c.r += c.spread;
      if (c.life <= 0){ state.comets.splice(i,1); continue; }
      const x = Math.cos(c.ang)*c.r, y = Math.sin(c.ang)*c.r;
      const tail = 16;

      ctx.beginPath();
      for(let t=0;t<tail;t++){
        const k = t/tail;
        const xx = x*(1-k*0.14), yy = y*(1-k*0.14);
        ctx.fillStyle = pal.dust + (c.life*(0.6 - k*0.5)) + ')';
        ctx.fillRect(xx-0.6, yy-0.6, 1.2, 1.2);
      }
      // head
      ctx.fillStyle = pal.dust + (0.8*c.life) + ')';
      ctx.beginPath();
      ctx.arc(x, y, 2.2, 0, Math.PI*2);
      ctx.fill();
    }

    ctx.restore();

    // Calm pulse decay
    state.pulse *= 0.92;
  }

  function loop(now=0){
    if (root.getAttribute('data-motion') === 'off') return;
    const dt = now - then;
    if (dt > 16){
      draw(now);
      then = now;
    }
    rafId = requestAnimationFrame(loop);
  }

  // Interactions
  function pointerToCenter(e){
    const rect = wrap.getBoundingClientRect();
    const px = ('touches' in e) ? e.touches[0].clientX - rect.left : e.clientX - rect.left;
    const py = ('touches' in e) ? e.touches[0].clientY - rect.top : e.clientY - rect.top;
    state.center.x = px; state.center.y = py;
  }
  wrap.addEventListener('pointermove', pointerToCenter, { passive: true });
  wrap.addEventListener('pointerdown', (e)=>{
    pointerToCenter(e);
    // spawn comet
    const ang = Math.random()*Math.PI*2;
    state.comets.push({ ang, r: 8, vel: 0.05 + Math.random()*0.03, spread: 1.8 + Math.random()*1.2, life: 1.0 });
    state.pulse = 1;
  }, { passive: true });
  wrap.addEventListener('touchstart', pointerToCenter, { passive: true });

  // Tour: sweep a beam spawning comets
  root.querySelector('.tour-action').addEventListener('click', (e)=>{
    e.preventDefault();
    const r = wrap.getBoundingClientRect();
    let t = 0, steps = 42;
    const id = setInterval(()=>{
      state.center.x = r.width*0.2 + (r.width*0.6)*(t/steps);
      state.center.y = r.height*0.5 + Math.sin(t/4)*r.height*0.18;
      if (t % 3 === 0){
        const ang = Math.random()*Math.PI*2;
        state.comets.push({ ang, r: 6, vel: 0.05, spread: 1.6, life: 1.0 });
        state.pulse = Math.min(1, state.pulse + 0.5);
      }
      t++; if (t>steps) clearInterval(id);
    }, 40);
  });

  // Comet button
  root.querySelector('.comet-action').addEventListener('click', (e)=>{
    e.preventDefault();
    for(let i=0;i<8;i++){
      const ang = (Math.PI*2/8)*i + Math.random()*0.2;
      state.comets.push({ ang, r: 10, vel: 0.045 + Math.random()*0.02, spread: 1.4 + Math.random()*0.8, life: 1.0 });
    }
    state.pulse = 1;
  });

  // Pulse button
  root.querySelector('.pulse').addEventListener('click', ()=>{
    state.pulse = 1.4;
  });

  // Shuffle palette by tweaking CSS vars live
  const shuffle = root.querySelector('.shuffle');
  shuffle.addEventListener('click', ()=>{
    const hues = [Math.random()*360, Math.random()*360, Math.random()*360];
    const hsl = (h, s, l) => `hsl(${Math.round(h)}, ${s}%, ${l}%)`;
    root.style.setProperty('--ax1', hsl(hues[0], 86, root.getAttribute('data-theme')==='day'?48:62));
    root.style.setProperty('--ax2', hsl(hues[1], 84, root.getAttribute('data-theme')==='day'?54:60));
    root.style.setProperty('--ax3', hsl(hues[2], 80, root.getAttribute('data-theme')==='day'?56:64));
    state.pulse = 1;
  });

  // Tilt & spotlight on cards
  root.querySelectorAll('.card-1707').forEach(card=>{
    card.addEventListener('pointermove', (e)=>{
      const r = card.getBoundingClientRect();
      const mx = ((e.clientX - r.left) / r.width) * 100;
      const my = ((e.clientY - r.top) / r.height) * 100;
      card.style.setProperty('--mx', mx + '%');
      const dx = (mx - 50) / 50, dy = (my - 50) / 50;
      card.style.setProperty('--rx', (-dy * 4) + 'deg');
      card.style.setProperty('--ry', (dx * 6) + 'deg');
    });
    card.addEventListener('pointerleave', ()=>{
      card.style.removeProperty('--rx'); card.style.removeProperty('--ry'); card.style.removeProperty('--mx');
    });
  });

  // Bind + start
  window.addEventListener('resize', sizeCanvas, { passive: true });
  sizeCanvas();
  if (root.getAttribute('data-motion') !== 'off') { loop(); }

})();
</script>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


