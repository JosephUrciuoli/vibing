<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<section id="vibe868" aria-label="Luminarium">
  <style>
    /* Scoped to #vibe868 only */
    #vibe868 {
      --bg: hsl(48 80% 98%);
      --fg: hsl(220 25% 12%);
      --muted: hsl(220 12% 40%);
      --line: hsl(220 30% 86%);
      --ring: hsl(200 90% 50%);
      --accent-1: hsl(200 95% 45%);
      --accent-2: hsl(280 85% 50%);
      --accent-3: hsl(340 85% 55%);
      --blur: 12px;
      position: relative;
      isolation: isolate;
      border-radius: 28px;
      overflow: hidden;
      min-height: 560px;
      color: var(--fg);
      background:
        radial-gradient(1200px 700px at 110% -10%, hsl(200 90% 88% / .55), transparent 60%),
        radial-gradient(900px 600px at -10% 110%, hsl(320 90% 90% / .55), transparent 60%),
        radial-gradient(800px 500px at 50% -20%, hsl(50 95% 92% / .65), transparent 60%),
        var(--bg);
      box-shadow: 0 12px 40px rgba(0,0,0,.15), inset 0 1px 0 rgba(255,255,255,.6);
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }
    #vibe868[data-theme="night"] {
      --bg: hsl(230 35% 7%);
      --fg: hsl(220 20% 96%);
      --muted: hsl(220 10% 75%);
      --line: hsl(210 18% 26%);
      --ring: hsl(190 85% 65%);
      --accent-1: hsl(190 95% 65%);
      --accent-2: hsl(260 85% 70%);
      --accent-3: hsl(20 90% 65%);
      box-shadow: 0 18px 50px rgba(0,0,0,.45), inset 0 1px 0 rgba(255,255,255,.05);
      background:
        radial-gradient(1100px 680px at 110% -10%, hsl(200 85% 25% / .35), transparent 60%),
        radial-gradient(1000px 660px at -10% 110%, hsl(270 90% 20% / .35), transparent 60%),
        linear-gradient(180deg, hsl(230 35% 7%), hsl(230 32% 9%));
    }
    #vibe868::after {
      content: "";
      position: absolute; inset: 0;
      pointer-events: none;
      background:
        repeating-linear-gradient(90deg, transparent 0 7px, rgba(0,0,0,.03) 7px 8px),
        repeating-linear-gradient(0deg, transparent 0 7px, rgba(0,0,0,.03) 7px 8px);
      mix-blend-mode: multiply;
      opacity: .3;
      z-index: 1;
    }

    #vibe868 .wrap {
      position: relative;
      z-index: 2;
      display: grid;
      grid-template-columns: 1.05fr 1fr;
      gap: clamp(18px, 4vw, 28px);
      max-width: 1040px;
      margin: clamp(18px, 4vw, 28px) auto;
      padding: clamp(22px, 4vw, 38px);
    }
    @media (max-width: 880px) {
      #vibe868 .wrap { grid-template-columns: 1fr; }
    }

    #vibe868 .panel {
      background: linear-gradient(180deg, rgba(255,255,255,.7), rgba(255,255,255,.35));
      border: 1px solid var(--line);
      border-radius: 20px;
      padding: clamp(18px, 3vw, 28px);
      box-shadow:
        0 8px 28px rgba(0,0,0,.12),
        inset 0 1px 0 rgba(255,255,255,.65);
      backdrop-filter: blur(var(--blur)) saturate(120%);
      transform-style: preserve-3d;
    }
    #vibe868[data-theme="night"] .panel {
      background: linear-gradient(180deg, rgba(20,20,28,.55), rgba(20,20,28,.35));
      box-shadow:
        0 10px 34px rgba(0,0,0,.35),
        inset 0 1px 0 rgba(255,255,255,.06);
    }

    #vibe868 .eyebrow {
      display: inline-flex; align-items: center; gap: 10px;
      padding: 8px 12px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.8), rgba(255,255,255,.3));
      color: var(--muted);
      font-size: 12px; letter-spacing: .12em; text-transform: uppercase;
      backdrop-filter: blur(6px);
    }
    #vibe868[data-theme="night"] .eyebrow {
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
    }
    #vibe868 .dot {
      width: 8px; height: 8px; border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, var(--accent-1), var(--accent-3));
      box-shadow: 0 0 12px var(--accent-1);
    }

    #vibe868 .title {
      margin: 16px 0 6px 0;
      font-size: clamp(30px, 5.6vw, 60px);
      line-height: 1.02;
      letter-spacing: -0.02em;
      font-weight: 800;
    }
    #vibe868 .subtitle {
      margin: 0 0 16px;
      color: var(--muted);
      font-size: clamp(14px, 2vw, 18px);
      text-wrap: balance;
    }

    #vibe868 .controls {
      display: grid;
      grid-template-columns: 1fr 1fr auto;
      gap: 12px;
      align-items: end;
      margin: 18px 0;
    }
    @media (max-width: 640px) {
      #vibe868 .controls { grid-template-columns: 1fr; }
    }
    #vibe868 .field {
      display: grid; gap: 6px;
    }
    #vibe868 label {
      font-size: 12px; letter-spacing: .08em; text-transform: uppercase; color: var(--muted);
    }
    #vibe868 input[type="range"] {
      -webkit-appearance: none; appearance: none; width: 100%;
      height: 10px; border-radius: 999px;
      background:
        linear-gradient(90deg, var(--accent-1), var(--accent-2), var(--accent-3));
      border: 1px solid var(--line);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.6), 0 6px 16px rgba(0,0,0,.12);
      outline: none;
    }
    #vibe868 input[type="range"]::-webkit-slider-thumb,
    #vibe868 input[type="range"]::-moz-range-thumb {
      -webkit-appearance: none; appearance: none;
      width: 18px; height: 18px; border-radius: 50%;
      background: white;
      border: 1px solid rgba(0,0,0,.18);
      box-shadow: 0 0 0 6px color-mix(in oklab, var(--accent-1) 40%, transparent), 0 4px 10px rgba(0,0,0,.25);
      cursor: pointer;
    }

    #vibe868 .toggle {
      justify-self: end;
      display: inline-flex; align-items: center; gap: 10px;
      padding: 10px 14px; border-radius: 14px;
      border: 1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.9), rgba(255,255,255,.5));
      color: var(--fg); font-size: 14px; font-weight: 600;
      transition: transform .2s ease, background .2s ease, border-color .2s ease;
    }
    #vibe868 .toggle:hover { transform: translateY(-1px); }
    #vibe868[data-theme="night"] .toggle {
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      color: var(--fg);
    }
    #vibe868 .toggle svg { width: 18px; height: 18px; }

    #vibe868 .quote {
      margin: 14px 0 6px;
      padding-left: 14px; border-left: 3px solid var(--accent-1);
      color: color-mix(in oklab, var(--fg) 86%, var(--muted));
      font-size: clamp(16px, 2.2vw, 20px);
      line-height: 1.5;
    }

    #vibe868 .canvas-wrap {
      position: relative;
      border-radius: 20px;
      overflow: hidden;
      border: 1px solid var(--line);
      background:
        radial-gradient(600px 400px at 20% 20%, color-mix(in oklab, var(--accent-1) 14%, transparent), transparent 60%),
        radial-gradient(700px 460px at 80% 80%, color-mix(in oklab, var(--accent-2) 14%, transparent), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.7), rgba(255,255,255,.35));
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,.6),
        0 10px 28px rgba(0,0,0,.12);
      min-height: 320px;
      aspect-ratio: 4 / 3;
    }
    #vibe868[data-theme="night"] .canvas-wrap {
      background:
        radial-gradient(600px 400px at 20% 20%, color-mix(in oklab, var(--accent-1) 20%, transparent), transparent 60%),
        radial-gradient(700px 460px at 80% 80%, color-mix(in oklab, var(--accent-2) 20%, transparent), transparent 60%),
        linear-gradient(180deg, rgba(10,10,18,.7), rgba(10,10,18,.35));
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,.06),
        0 16px 34px rgba(0,0,0,.35);
    }
    #vibe868 canvas {
      position: absolute; inset: 0; width: 100%; height: 100%;
      display: block;
      filter: drop-shadow(0 4px 10px rgba(0,0,0,.15));
    }

    #vibe868 .meta {
      display: flex; justify-content: space-between; align-items: center;
      margin-top: 14px; padding-top: 12px;
      border-top: 1px dashed var(--line);
      color: var(--muted); font-size: 12px;
      gap: 10px; flex-wrap: wrap;
    }
    #vibe868 .badge {
      display: inline-flex; align-items: center; gap: 8px;
      padding: 6px 10px; border-radius: 999px;
      border: 1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.85), rgba(255,255,255,.45));
    }
    #vibe868[data-theme="night"] .badge {
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
    }

    /* Respect reduced motion */
    @media (prefers-reduced-motion: reduce) {
      #vibe868 { --blur: 2px; }
      #vibe868 canvas { filter: none; }
    }
  </style>

  <div class="wrap">
    <div class="panel">
      <span class="eyebrow"><span class="dot" aria-hidden="true"></span> Iteration 868 · Luminarium</span>
      <h2 class="title">Light sketches the air</h2>
      <p class="subtitle">A living field of particles that lean toward your touch. Toggle day or night. Tune the flow. Let it breathe.</p>

      <div class="controls" role="group" aria-label="Scene controls">
        <div class="field">
          <label for="vibe868-density">Intensity</label>
          <input id="vibe868-density" type="range" min="12" max="96" step="1" value="48" aria-valuemin="12" aria-valuemax="96" aria-valuenow="48" />
        </div>
        <div class="field">
          <label for="vibe868-link">Connect radius</label>
          <input id="vibe868-link" type="range" min="20" max="150" step="1" value="90" aria-valuemin="20" aria-valuemax="150" aria-valuenow="90" />
        </div>
        <button id="vibe868-theme" class="toggle" type="button" aria-pressed="false" title="Toggle Day/Night">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.8" aria-hidden="true">
            <circle cx="12" cy="12" r="4" />
            <path d="M12 2v3M12 19v3M2 12h3M19 12h3M4.6 4.6l2.1 2.1M17.3 17.3l2.1 2.1M4.6 19.4l2.1-2.1M17.3 6.7l2.1-2.1"/>
          </svg>
          Day
        </button>
      </div>

      <p class="quote">“Simplicity is not the absence of energy. It is the discipline that lets it shine.”</p>

      <div class="meta">
        <span class="badge" aria-live="polite"><span style="width:8px;height:8px;border-radius:50%;background:var(--accent-1);box-shadow:0 0 8px var(--accent-1);display:inline-block" aria-hidden="true"></span> Scene: live</span>
        <span id="last-updated">Last updated: 2025-11-25 06:16:48 EST</span>
      </div>
    </div>

    <div class="canvas-wrap panel" aria-label="Generative canvas">
      <canvas id="vibe868-canvas"></canvas>
    </div>
  </div>

  <script>
    (function () {
      const root = document.getElementById('vibe868');
      const canvas = root.querySelector('#vibe868-canvas');
      const ctx = canvas.getContext('2d');
      const dens = root.querySelector('#vibe868-density');
      const link = root.querySelector('#vibe868-link');
      const themeBtn = root.querySelector('#vibe868-theme');
      const updated = root.querySelector('#last-updated');
      const reduce = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

      // Last updated timestamp
      const fmt = (d) => {
        try {
          return new Intl.DateTimeFormat([], { year:'numeric', month:'short', day:'2-digit', hour:'2-digit', minute:'2-digit' }).format(d);
        } catch { return d.toLocaleString(); }
      };
      updated.textContent = 'Updated ' + fmt(new Date());

      // Theme toggle
      let night = false;
      themeBtn.addEventListener('click', () => {
        night = !night;
        root.setAttribute('data-theme', night ? 'night' : '');
        themeBtn.setAttribute('aria-pressed', night ? 'true' : 'false');
        themeBtn.lastChild.nodeValue = night ? ' Night' : ' Day';
        // recolor particles softly
        recolor();
      });

      // Canvas sizing
      let dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
      const resize = () => {
        const rect = canvas.getBoundingClientRect();
        canvas.width = Math.floor(rect.width * dpr);
        canvas.height = Math.floor(rect.height * dpr);
      };
      resize();
      window.addEventListener('resize', resize);

      // Particles
      let particles = [];
      let mouse = { x: null, y: null, active: false };
      let linkRadius = Number(link.value);
      const rand = (a, b) => a + Math.random() * (b - a);

      function getCSSVar(name) {
        return getComputedStyle(root).getPropertyValue(name).trim();
      }
      let hues = [];

      function makeParticle() {
        const angle = Math.random() * Math.PI * 2;
        const speed = rand(0.08, 0.45) * (reduce ? 0 : 1);
        const hue = hues[Math.floor(Math.random() * hues.length)];
        return {
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          vx: Math.cos(angle) * speed,
          vy: Math.sin(angle) * speed,
          r: rand(1.2, 2.2) * dpr,
          hue,
          life: rand(0.6, 1.0),
        };
      }

      function setDensity(n) {
        const target = Math.max(8, Math.min(140, n));
        if (particles.length > target) {
          particles.length = target;
        } else {
          while (particles.length < target) particles.push(makeParticle());
        }
      }

      function recolor() {
        // derive hues from CSS variables
        const c1 = getCSSVar('--accent-1');
        const c2 = getCSSVar('--accent-2');
        const c3 = getCSSVar('--accent-3');
        hues = [c1, c2, c3];
        particles.forEach(p => p.hue = hues[Math.floor(Math.random() * hues.length)]);
      }

      recolor();
      setDensity(Number(dens.value));

      // Interactions
      const wrap = canvas.parentElement;
      wrap.addEventListener('pointermove', (e) => {
        const rect = canvas.getBoundingClientRect();
        mouse.x = (e.clientX - rect.left) * dpr;
        mouse.y = (e.clientY - rect.top) * dpr;
        mouse.active = true;
      }, { passive: true });
      const leave = () => { mouse.active = false; };
      wrap.addEventListener('pointerleave', leave);
      wrap.addEventListener('pointercancel', leave);

      dens.addEventListener('input', (e) => {
        const val = Number(e.target.value);
        dens.setAttribute('aria-valuenow', String(val));
        setDensity(val);
      });
      link.addEventListener('input', (e) => {
        const val = Number(e.target.value);
        link.setAttribute('aria-valuenow', String(val));
        linkRadius = val;
      });

      // Render
      function draw() {
        const w = canvas.width, h = canvas.height;
        // fade trail
        ctx.fillStyle = night ? 'rgba(7,10,18,0.25)' : 'rgba(255,255,255,0.28)';
        ctx.fillRect(0, 0, w, h);

        // connections
        ctx.globalCompositeOperation = 'lighter';

        // update particles
        for (let i = 0; i < particles.length; i++) {
          const p = particles[i];

          // gentle mouse force
          if (mouse.active && !reduce) {
            const dx = mouse.x - p.x, dy = mouse.y - p.y;
            const dist = Math.hypot(dx, dy) || 1;
            const pull = Math.min(0.12, 20 / (dist + 80));
            p.vx += dx / dist * pull * 0.12;
            p.vy += dy / dist * pull * 0.12;
          }

          // slight drift and damping
          p.vx *= 0.985;
          p.vy *= 0.985;
          p.x += p.vx;
          p.y += p.vy;

          // wrap edges
          if (p.x < -10) p.x = w + 10;
          if (p.x > w + 10) p.x = -10;
          if (p.y < -10) p.y = h + 10;
          if (p.y > h + 10) p.y = -10;
        }

        // draw links (sparse for perf)
        const maxLink = linkRadius * dpr;
        for (let i = 0; i < particles.length; i++) {
          for (let j = i + 1; j < particles.length; j++) {
            const a = particles[i], b = particles[j];
            const dx = a.x - b.x, dy = a.y - b.y;
            const d = Math.hypot(dx, dy);
            if (d < maxLink) {
              const alpha = (1 - d / maxLink) * 0.5;
              ctx.strokeStyle = a.hue.replace('hsl', 'hsla').replace(')', ` / ${alpha})`);
              ctx.lineWidth = Math.max(0.6 * dpr, 0.6);
              ctx.beginPath();
              ctx.moveTo(a.x, a.y);
              ctx.lineTo(b.x, b.y);
              ctx.stroke();
            }
          }
        }

        // particles on top
        for (let i = 0; i < particles.length; i++) {
          const p = particles[i];
          const g = ctx.createRadialGradient(p.x, p.y, 0, p.x, p.y, p.r * 3);
          g.addColorStop(0, p.hue.replace('hsl', 'hsla').replace(')', ' / 1)'));
          g.addColorStop(1, p.hue.replace('hsl', 'hsla').replace(')', ' / 0)'));
          ctx.fillStyle = g;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.r * 3, 0, Math.PI * 2);
          ctx.fill();
        }

        ctx.globalCompositeOperation = 'source-over';
      }

      let rafId = null;
      function loop() {
        draw();
        rafId = requestAnimationFrame(loop);
      }

      if (!reduce) {
        loop();
      } else {
        // Reduced motion: draw once, then on interaction
        draw();
        wrap.addEventListener('pointermove', draw, { passive: true });
        dens.addEventListener('input', draw);
        link.addEventListener('input', draw);
        themeBtn.addEventListener('click', draw);
      }

      // Clean up if this snippet is ever removed dynamically
      document.addEventListener('visibilitychange', () => {
        if (document.hidden && rafId) cancelAnimationFrame(rafId);
        else if (!reduce && !rafId) loop();
      });
    })();
  </script>
</section>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


