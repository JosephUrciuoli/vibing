<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<section class="vibe1813" aria-label="Aurora Loom">
  <style>
    .vibe1813 {
      --radius: 26px;
      --ink: #e8f0ff;
      --muted: #9fb0d1;
      --ring: 0 0 0 2px rgba(120,172,255,.55), 0 0 0 6px rgba(120,172,255,.2);
      --chrome: rgba(12,18,36,.55);
      --glass: rgba(255,255,255,.04);
      --line: rgba(255,255,255,.08);
      --shadow: 0 24px 80px rgba(0,0,0,.58);
      --fade: rgba(5,10,20,.08);
      --bg1: #070b18;
      --bg2: #0a0f22;
      --glow1: #5ac8ff;
      --glow2: #c58cff;
      --accent: #8bd2ff;
      color: var(--ink);
      font: 500 15px/1.55 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      position: relative;
      isolation: isolate;
      border-radius: var(--radius);
      overflow: clip;
      background:
        radial-gradient(1600px 900px at 120% -10%, rgba(197,140,255,.18), transparent 60%),
        radial-gradient(1200px 800px at -10% 110%, rgba(90,200,255,.14), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      box-shadow: inset 0 1px 0 rgba(255,255,255,.04), var(--shadow);
    }
    /* Themes */
    .vibe1813[data-theme="nocturne"] { /* default */ }
    .vibe1813[data-theme="glacier"] {
      --bg1:#031a1e; --bg2:#052429; --ink:#e9fbff; --muted:#9dd3dd;
      --chrome: rgba(6,29,32,.55); --fade: rgba(2,14,16,.08);
      --glow1:#4ad1c8; --glow2:#78b3ff; --accent:#7ce7d8;
    }
    .vibe1813[data-theme="citrine"] {
      --bg1:#1b1306; --bg2:#231705; --ink:#fff7e7; --muted:#f2d8a6;
      --chrome: rgba(34,23,9,.55); --fade: rgba(24,16,6,.1);
      --glow1:#ffb86b; --glow2:#ff7a7a; --accent:#ffd49a;
    }
    .vibe1813[data-theme="paper"] {
      --bg1:#f7f7f4; --bg2:#ecebe7; --ink:#151515; --muted:#5f666a;
      --chrome: rgba(255,255,255,.65); --glass: rgba(0,0,0,.06); --line: rgba(0,0,0,.08);
      --fade: rgba(255,255,255,.065); --shadow: 0 24px 80px rgba(0,0,0,.15);
      --glow1:#1b6cff; --glow2:#ff6c9a; --accent:#2b2b2b;
    }

    /* Ambient soft lights */
    .vibe1813::before,
    .vibe1813::after {
      content:"";
      position:absolute; inset:-30%;
      background:
        radial-gradient(38% 28% at 72% 32%, rgba(90,200,255,.16), transparent 60%),
        radial-gradient(36% 24% at 28% 72%, rgba(197,140,255,.16), transparent 60%);
      filter: blur(60px);
      opacity:.55;
      mix-blend-mode: screen;
      animation: v1813-ambient 26s ease-in-out infinite alternate;
      pointer-events:none;
    }
    .vibe1813::after { animation-duration: 32s; animation-direction: alternate-reverse; opacity:.40; }

    @keyframes v1813-ambient {
      from { transform: translate3d(-2%, 1%, 0) scale(1.04) rotate(0.3deg); }
      to   { transform: translate3d(3%, -2%, 0) scale(1.06) rotate(-0.3deg); }
    }

    /* Top chrome */
    .vibe1813 .chrome {
      position: relative; z-index: 3;
      width: min(100%, 1080px);
      margin: 14px auto 0;
      padding: 10px 12px;
      display: grid;
      grid-template-columns: 1fr auto auto;
      gap: 10px;
      align-items:center;
      background: linear-gradient(180deg, var(--chrome), transparent);
      border-radius: calc(var(--radius) - 10px);
      backdrop-filter: blur(10px) saturate(120%);
      border: 1px solid var(--line);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.06);
    }
    .vibe1813 .brand {
      display:flex; align-items:center; gap:10px;
      font-weight: 900; letter-spacing:.2px;
    }
    .vibe1813 .knot {
      width: 18px; height: 18px; border-radius: 50%;
      background: conic-gradient(from 0deg, var(--glow1), var(--glow2), var(--glow1));
      box-shadow: 0 0 0 2px rgba(255,255,255,.08), 0 0 26px var(--glow2), 0 0 38px rgba(90,200,255,.35);
      mask: radial-gradient(circle at 55% 45%, black 55%, transparent 60%);
    }
    .vibe1813 .controls { display:flex; gap:8px; flex-wrap:wrap; justify-self:end; }
    .vibe1813 .chip, .vibe1813 .btn {
      color: var(--ink); background: rgba(255,255,255,.06);
      border: 1px solid var(--line); border-radius: 999px;
      padding: 7px 12px; cursor:pointer; font-weight: 700;
      transition: background .25s ease, transform .15s ease, box-shadow .25s ease, color .25s ease;
    }
    .vibe1813 .chip:hover, .vibe1813 .btn:hover {
      background: rgba(255,255,255,.12);
      transform: translateY(-1px);
      box-shadow: 0 6px 18px rgba(0,0,0,.25);
    }
    .vibe1813 .chip:focus-visible, .vibe1813 .btn:focus-visible { outline: none; box-shadow: var(--ring); }

    .vibe1813 .tempo {
      display:flex; align-items:center; gap:8px; justify-self:end;
      background: rgba(255,255,255,.06);
      padding: 6px 10px; border-radius: 999px; border:1px solid var(--line);
    }
    .vibe1813 .tempo label { font-size: 12px; color: var(--muted); }
    .vibe1813 .tempo input[type="range"] {
      -webkit-appearance: none; width: 140px; height: 20px; background: transparent; cursor: pointer;
    }
    .vibe1813 .tempo input[type="range"]::-webkit-slider-runnable-track {
      height: 4px; background: linear-gradient(90deg, var(--glow1), var(--glow2)); border-radius: 999px; opacity:.55;
    }
    .vibe1813 .tempo input[type="range"]::-moz-range-track {
      height: 4px; background: linear-gradient(90deg, var(--glow1), var(--glow2)); border-radius: 999px; opacity:.55;
    }
    .vibe1813 .tempo input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none; width: 16px; height: 16px; border-radius: 50%;
      background: #fff; box-shadow: 0 0 0 2px rgba(0,0,0,.12), 0 2px 8px rgba(0,0,0,.35);
      margin-top: -6px;
    }
    .vibe1813 .tempo input[type="range"]::-moz-range-thumb {
      width: 16px; height: 16px; border: none; border-radius: 50%; background: #fff;
      box-shadow: 0 0 0 2px rgba(0,0,0,.12), 0 2px 8px rgba(0,0,0,.35);
    }

    /* Stage */
    .vibe1813 .stage {
      position: relative; z-index: 1;
      height: min(72vh, 760px);
      min-height: 420px;
      overflow: clip;
      display:grid; place-items:center;
      border-top: 1px solid var(--line);
      border-bottom: 1px solid var(--line);
      background:
        radial-gradient(120% 80% at 50% 100%, rgba(0,0,0,.25), transparent 65%);
    }
    .vibe1813 canvas { position:absolute; inset:0; width:100%; height:100%; display:block; filter: saturate(115%) contrast(105%); }
    .vibe1813 .grain {
      position:absolute; inset:0; pointer-events:none; mix-blend-mode: soft-light; opacity:.15;
      background-image: url("data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' width='160' height='160' viewBox='0 0 40 40'><filter id='n'><feTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='2' stitchTiles='stitch'/></filter><rect width='100%' height='100%' filter='url(%23n)' opacity='0.8'/></svg>");
      background-size: 320px 320px;
      animation: v1813-grain 8s steps(2,end) infinite;
    }
    @keyframes v1813-grain { to { transform: translate3d(2%, -2%, 0) } }

    /* Hero */
    .vibe1813 .hero {
      position: relative; z-index: 2; text-align: center;
      width: min(100%, 1080px); margin: 16px auto 20px; display:grid; gap: 12px;
    }
    .vibe1813 h1 {
      margin: 0; font-weight: 950; letter-spacing: -0.02em; line-height: 1.04;
      font-size: clamp(30px, 5.2vw, 62px);
      color: transparent;
      background: linear-gradient(98deg, var(--ink), #b9c7ff, var(--ink));
      -webkit-background-clip: text; background-clip: text;
      filter: drop-shadow(0 2px 0 rgba(255,255,255,.06));
      animation: v1813-sheen 8s ease-in-out infinite;
    }
    @keyframes v1813-sheen {
      0%, 100% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
    }
    .vibe1813 .lede {
      margin: 0 auto; max-width: 70ch; color: var(--muted); letter-spacing:.2px;
    }
    .vibe1813 .cta { display:flex; justify-content:center; gap:10px; flex-wrap:wrap; }
    .vibe1813 .btn.gradient {
      background: linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.04));
      border: 1px solid var(--line);
      box-shadow: inset 0 1px 0 rgba(255,255,255,.12), 0 10px 28px rgba(0,0,0,.25);
    }

    /* Footer meta */
    .vibe1813 .meta {
      position: relative; z-index:2; width: min(100%, 1080px);
      margin: 4px auto 14px; padding: 10px 12px 12px;
      display:flex; flex-wrap:wrap; gap:8px;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border: 1px solid var(--line); border-radius: calc(var(--radius) - 10px);
      backdrop-filter: blur(8px);
    }
    .vibe1813 .pill {
      border-radius: 999px; padding: 6px 10px;
      background: rgba(255,255,255,.06); border: 1px solid var(--line);
      color: var(--muted); font-size: 12.5px;
    }
    .vibe1813 .pill strong { color: var(--ink); }

    @media (prefers-reduced-motion: reduce) {
      .vibe1813 * { animation: none !important; transition: none !important; }
    }
  </style>

  <div class="chrome">
    <div class="brand">
      <span class="knot" aria-hidden="true"></span>
      Aurora Loom
    </div>
    <div class="tempo">
      <label for="tempo">Tempo</label>
      <input id="tempo" type="range" min="0" max="100" value="45" aria-label="Tempo">
    </div>
    <div class="controls">
      <button class="chip" id="theme" type="button" aria-pressed="false" title="Cycle theme">Nocturne</button>
      <button class="chip" id="pause" type="button" aria-pressed="false" title="Pause or play">Pause</button>
      <button class="chip" id="reseed" type="button" title="Reseed threads">Reseed</button>
      <button class="chip" id="save" type="button" title="Save snapshot">Save</button>
    </div>
  </div>

  <div class="stage" id="stage">
    <canvas id="loom" aria-hidden="true"></canvas>
    <div class="grain" aria-hidden="true"></div>
  </div>

  <div class="hero" aria-live="polite">
    <h1>Hold light. Let it weave.</h1>
    <p class="lede" id="lede">Iteration 1813 — a kinetic tapestry of curves and color.</p>
    <div class="cta">
      <button class="btn gradient" id="pulse" type="button">Pulse</button>
      <button class="btn" id="center" type="button">Center</button>
    </div>
  </div>

  <div class="meta">
    <span class="pill">Mode: <strong id="mode">Weave</strong></span>
    <span class="pill">Theme: <strong id="themeName">Nocturne</strong></span>
    <span class="pill">Updated <span id="last-updated">Last updated: 2026-01-08 00:23:05 EST</span></span>
  </div>

  <script>
    (function(){
      const root = document.querySelector('.vibe1813');
      const stage = document.getElementById('stage');
      const canvas = document.getElementById('loom');
      const ctx = canvas.getContext('2d');
      const tempoInput = document.getElementById('tempo');
      const pauseBtn = document.getElementById('pause');
      const themeBtn = document.getElementById('theme');
      const reseedBtn = document.getElementById('reseed');
      const saveBtn = document.getElementById('save');
      const pulseBtn = document.getElementById('pulse');
      const centerBtn = document.getElementById('center');
      const modeLbl = document.getElementById('mode');
      const themeLbl = document.getElementById('themeName');
      const lede = document.getElementById('lede');
      const last = document.getElementById('last-updated');

      // Timestamp
      try {
        const now = new Date();
        const fmt = new Intl.DateTimeFormat(undefined, {
          year: 'numeric', month: 'short', day: '2-digit',
          hour: '2-digit', minute: '2-digit'
        });
        last.textContent = fmt.format(now);
      } catch(e){ last.textContent = new Date().toLocaleString(); }

      // Themes
      const THEMES = [
        {
          key: 'nocturne',
          fade: 'rgba(5,10,20,0.08)',
          colors: ['#7dd3fc','#c084fc','#fdba74','#ffffff'],
          name: 'Nocturne'
        },
        {
          key: 'glacier',
          fade: 'rgba(2,14,16,0.08)',
          colors: ['#7ce7d8','#78b3ff','#bfe7ff','#ffffff'],
          name: 'Glacier'
        },
        {
          key: 'citrine',
          fade: 'rgba(24,16,6,0.10)',
          colors: ['#ffb86b','#ff7a7a','#ffd49a','#ffffff'],
          name: 'Citrine'
        },
        {
          key: 'paper',
          fade: 'rgba(255,255,255,0.065)',
          colors: ['#1b6cff','#ff6c9a','#2b2b2b','#111111'],
          name: 'Paper'
        }
      ];
      const STORE = 'vibe1813-theme';
      let themeIndex = 0;
      try {
        const saved = localStorage.getItem(STORE);
        if (saved) themeIndex = Math.max(0, THEMES.findIndex(t => t.key === saved));
      } catch(e){}

      function applyTheme(i){
        const th = THEMES[i];
        root.setAttribute('data-theme', th.key);
        themeBtn.textContent = th.name;
        themeLbl.textContent = th.name;
        try { localStorage.setItem(STORE, th.key); } catch(e){}
      }
      applyTheme(themeIndex);

      themeBtn.addEventListener('click', () => {
        themeIndex = (themeIndex + 1) % THEMES.length;
        applyTheme(themeIndex);
        softFade(true);
      });

      // Canvas sizing
      let dpr = Math.min(2, window.devicePixelRatio || 1);
      let W=0, H=0, CX=0, CY=0;
      function resize(){
        const r = stage.getBoundingClientRect();
        W = Math.floor(r.width); H = Math.floor(r.height);
        dpr = Math.min(2, window.devicePixelRatio || 1);
        canvas.width = W * dpr; canvas.height = H * dpr;
        canvas.style.width = W + 'px'; canvas.style.height = H + 'px';
        ctx.setTransform(dpr,0,0,dpr,0,0);
        ctx.lineCap = 'round';
        CX = W/2; CY = H/2;
      }
      resize();
      window.addEventListener('resize', resize);

      // Threads (Lissajous weave)
      const threads = [];
      let seed = Math.random()*1000;
      let running = true;
      let pulsing = false;
      let t = 0;
      let tempo = 0.6; // base speed

      function reseed(){
        threads.length = 0;
        const count = Math.floor(60 + Math.random()*50);
        for (let i=0;i<count;i++){
          threads.push({
            ax: 1 + Math.floor(Math.random()*5),   // freq x
            ay: 1 + Math.floor(Math.random()*5),   // freq y
            rx: Math.random()*0.42 + 0.28,         // radius x (ratio of min dimension)
            ry: Math.random()*0.42 + 0.28,         // radius y
            phi: Math.random()*Math.PI*2,          // phase
            speed: 0.4 + Math.random()*1.4,
            weight: Math.random()*1.2 + 0.4,
            huePick: Math.random(),                // select color
            warp: Math.random()*0.35 + 0.05,       // noise warp
          });
        }
        seed = Math.random()*1000;
        softFade(true);
      }
      reseedBtn.addEventListener('click', reseed);

      // Helpers
      function hs(v,a){ // clamp hex string or rgba string with alpha
        return v.replace(')',','+a+')').replace('rgb','rgba');
      }
      function lerp(a,b,t){ return a*(1-t)+b*t; }
      function noise(x,y){
        // simple pseudo noise using sin blends (fast enough)
        return (Math.sin(x*1.3 + seed) + Math.sin(y*1.7 - seed*0.7) + Math.sin((x+y)*0.5 + seed*0.3))*0.333;
      }
      function paletteColor(pick){
        const cols = THEMES[themeIndex].colors;
        const idx = Math.floor(pick*(cols.length-1));
        const next = Math.min(cols.length-1, idx+1);
        const mix = pick*(cols.length-1) - idx;
        // Convert hex to rgb
        function hexToRgb(h){
          const s = h.replace('#','');
          const n = s.length===3 ? s.split('').map(x=>x+x).join('') : s;
          return [parseInt(n.slice(0,2),16), parseInt(n.slice(2,4),16), parseInt(n.slice(4,6),16)];
        }
        const a = hexToRgb(cols[idx]), b = hexToRgb(cols[next]);
        const r = Math.round(lerp(a[0], b[0], mix));
        const g = Math.round(lerp(a[1], b[1], mix));
        const bl= Math.round(lerp(a[2], b[2], mix));
        return 'rgba('+r+','+g+','+bl+',';
      }

      // Interaction
      const pointer = {x:CX, y:CY, down:false, targetX:CX, targetY:CY};
      function toLocal(e){
        const r = canvas.getBoundingClientRect();
        const x = (e.touches ? e.touches[0].clientX : e.clientX) - r.left;
        const y = (e.touches ? e.touches[0].clientY : e.clientY) - r.top;
        return {x, y};
      }
      stage.addEventListener('pointerdown', (e)=>{ pointer.down=true; const p=toLocal(e); pointer.targetX=p.x; pointer.targetY=p.y; modeLbl.textContent='Steer'; });
      window.addEventListener('pointermove', (e)=>{ const p=toLocal(e); if (!isNaN(p.x)) { pointer.targetX=p.x; pointer.targetY=p.y; }});
      window.addEventListener('pointerup', ()=>{ pointer.down=false; modeLbl.textContent = running ? 'Weave' : 'Pause'; });
      stage.addEventListener('touchstart', (e)=>{ pointer.down=true; const p=toLocal(e); pointer.targetX=p.x; pointer.targetY=p.y; modeLbl.textContent='Steer'; }, {passive:true});
      window.addEventListener('touchmove', (e)=>{ const p=toLocal(e); if (!isNaN(p.x)) { pointer.targetX=p.x; pointer.targetY=p.y; } }, {passive:true});
      window.addEventListener('touchend', ()=>{ pointer.down=false; modeLbl.textContent = running ? 'Weave' : 'Pause'; });

      // Buttons
      pauseBtn.addEventListener('click', ()=>{
        running = !running;
        pauseBtn.textContent = running ? 'Pause' : 'Play';
        pauseBtn.setAttribute('aria-pressed', (!running).toString());
        modeLbl.textContent = running ? (pointer.down ? 'Steer' : 'Weave') : 'Pause';
      });
      pulseBtn.addEventListener('click', ()=>{
        pulsing = !pulsing;
        pulseBtn.textContent = pulsing ? 'Pulsing…' : 'Pulse';
        modeLbl.textContent = pulsing ? 'Pulse' : 'Weave';
        pulseBtn.style.transform = 'translateY(-1px) scale(1.02)';
        setTimeout(()=>{ pulseBtn.style.transform=''; }, 260);
      });
      centerBtn.addEventListener('click', ()=>{
        pointer.targetX = CX; pointer.targetY = CY;
      });
      saveBtn.addEventListener('click', ()=>{
        try {
          const link = document.createElement('a');
          link.download = 'aurora-loom.png';
          link.href = canvas.toDataURL('image/png');
          link.click();
        } catch(e){}
      });

      // Tempo control
      function setTempo(val){
        const v = Math.max(0, Math.min(100, val));
        tempo = 0.15 + (v/100) * 1.25;
      }
      setTempo(+tempoInput.value);
      tempoInput.addEventListener('input', (e)=> setTempo(+e.target.value));

      // Loop
      let fadeHold = 0;
      function softFade(hard){
        ctx.save();
        ctx.globalCompositeOperation = 'source-over';
        ctx.fillStyle = THEMES[themeIndex].fade;
        ctx.fillRect(0,0,W,H);
        ctx.restore();
        if (hard) { // a few extra clears for a mood switch
          fadeHold = 6;
        }
      }

      function tick(){
        if (!running) { requestAnimationFrame(tick); return; }

        // follow pointer smoothly
        pointer.x = lerp(pointer.x, pointer.targetX, 0.06);
        pointer.y = lerp(pointer.y, pointer.targetY, 0.06);

        if (fadeHold > 0) { softFade(); fadeHold--; }
        else {
          // subtle fade
          ctx.globalCompositeOperation = 'source-over';
          ctx.fillStyle = THEMES[themeIndex].fade;
          ctx.fillRect(0,0,W,H);
        }

        t += tempo;

        const centerX = lerp(CX, pointer.x, 0.12);
        const centerY = lerp(CY, pointer.y, 0.12);
        const baseScale = Math.min(W,H) * 0.46;

        // draw threads
        ctx.globalCompositeOperation = 'lighter';

        for (let i=0;i<threads.length;i++){
          const th = threads[i];
          const wobble = pulsing ? (Math.sin((t*0.01 + th.phi)*2) * 0.12 + 0.94) : 1;
          const rx = baseScale * th.rx * wobble;
          const ry = baseScale * th.ry * (1.06 - (wobble-1));

          // color + alpha
          const base = paletteColor(th.huePick);
          const alpha = 0.10 + (th.weight-0.4)*0.08;
          ctx.strokeStyle = base + alpha + ')';
          ctx.lineWidth = th.weight;

          let px = centerX + Math.sin(th.phi)*rx;
          let py = centerY + Math.cos(th.phi)*ry;

          ctx.beginPath();
          ctx.moveTo(px, py);

          const steps = 120;
          const A = th.ax, B = th.ay;
          for (let s=1; s<=steps; s++){
            const u = (s/steps) * Math.PI*2;
            const nx = Math.sin(u*A + (t*0.01*th.speed) + th.phi);
            const ny = Math.sin(u*B - (t*0.011*th.speed) - th.phi*0.7);
            // warp by light noise around pointer
            const wx = noise(nx*3 + pointer.x*0.004, ny*3 + pointer.y*0.004) * th.warp;
            const wy = noise(ny*3 - pointer.y*0.004, nx*3 - pointer.x*0.004) * th.warp;

            const x = centerX + (nx + wx) * rx;
            const y = centerY + (ny + wy) * ry;

            ctx.lineTo(x, y);
          }
          ctx.stroke();
        }

        requestAnimationFrame(tick);
      }
      requestAnimationFrame(tick);

      // On load a gentle burst
      (function intro() {
        lede.textContent = 'Iteration 1813 — threads waking up.';
        setTimeout(()=>{ lede.textContent = 'Iteration 1813 — a kinetic tapestry of curves and color.'; }, 1200);
      })();

      // Reduced motion
      const rm = window.matchMedia('(prefers-reduced-motion: reduce)');
      if (rm.matches) { running = false; modeLbl.textContent = 'Pause'; }

      // Initial
      pointer.x = CX; pointer.y = CY; pointer.targetX = CX; pointer.targetY = CY;

    })();
  </script>
</section>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


