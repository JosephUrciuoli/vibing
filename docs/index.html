<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<div class="loom" aria-label="Aurora Loom" role="region" aria-labelledby="loom-title">
  <style>
    .loom {
      --c1: hsl(200 90% 62%);
      --c2: hsl(265 80% 68%);
      --c3: hsl(25 95% 65%);
      --bg1: #060912;
      --bg2: #0a0f1f;
      --stroke: rgba(255,255,255,0.16);
      --text: #eef4ff;
      --muted: #b8c4db;
      --mx: 50%;
      --my: 50%;
      position: relative;
      border-radius: 26px;
      overflow: hidden;
      padding: clamp(22px, 5vw, 42px);
      color: var(--text);
      background:
        radial-gradient(1400px 900px at calc(var(--mx)) calc(var(--my)), rgba(255,255,255,0.06), transparent 40%),
        radial-gradient(900px 700px at 120% -10%, color-mix(in sRGB, var(--c2) 28%, transparent), transparent 60%),
        radial-gradient(1000px 800px at -20% 120%, color-mix(in sRGB, var(--c3) 22%, transparent), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      outline: 1px solid var(--stroke);
      box-shadow:
        0 20px 60px rgba(0,0,0,0.35),
        inset 0 1px 0 rgba(255,255,255,0.04);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial;
      min-height: clamp(320px, 46vh, 560px);
      isolation: isolate;
    }

    .loom .bg {
      position: absolute;
      inset: -8%;
      z-index: 0;
      pointer-events: none;
      filter: saturate(115%);
    }

    /* Aurora ribbons */
    .loom .aurora {
      position: absolute;
      inset: 0;
      opacity: 0.55;
      mix-blend-mode: screen;
      filter: blur(28px);
      transform: translateZ(0);
    }
    .loom .a1 {
      background:
        conic-gradient(from 180deg at 30% 60%, transparent 0 18%, color-mix(in sRGB, var(--c1) 65%, transparent) 35%, transparent 60%),
        radial-gradient(1200px 600px at 20% 70%, color-mix(in sRGB, var(--c2) 40%, transparent), transparent 70%);
      animation: spin1 22s linear infinite;
    }
    .loom .a2 {
      background:
        conic-gradient(from 0deg at 70% 30%, transparent 0 25%, color-mix(in sRGB, var(--c3) 55%, transparent) 45%, transparent 70%),
        radial-gradient(900px 600px at 80% 20%, color-mix(in sRGB, var(--c1) 35%, transparent), transparent 70%);
      animation: spin2 28s linear infinite reverse;
      opacity: 0.5;
    }
    @keyframes spin1 { to { transform: rotate(360deg) scale(1.02); } }
    @keyframes spin2 { to { transform: rotate(-360deg) scale(1.03); } }

    /* Wave grid */
    .loom .wave {
      position: absolute;
      left: -5%;
      bottom: -4%;
      width: 110%;
      height: 58%;
      opacity: 0.85;
      filter: drop-shadow(0 6px 18px rgba(0,0,0,0.3));
    }
    .loom .wave defs linearGradient stop:nth-child(1) { stop-color: color-mix(in sRGB, var(--c1) 75%, white); }
    .loom .wave defs linearGradient stop:nth-child(2) { stop-color: color-mix(in sRGB, var(--c2) 75%, white); }
    .loom .wave defs linearGradient stop:nth-child(3) { stop-color: color-mix(in sRGB, var(--c3) 75%, white); }
    .loom .wave .w1 {
      fill: none;
      stroke: url(#loomGradient);
      stroke-width: 2.2;
      vector-effect: non-scaling-stroke;
      opacity: 0.8;
    }
    .loom .wave .w2 {
      fill: none;
      stroke: url(#loomGradient);
      stroke-width: 1;
      opacity: 0.5;
    }

    /* Stars */
    .loom .stars {
      position: absolute;
      inset: 0;
    }
    .loom .stars .s {
      position: absolute;
      width: 2px;
      height: 2px;
      border-radius: 50%;
      background: #fff;
      opacity: 0.8;
      filter: drop-shadow(0 0 6px rgba(255,255,255,0.25));
      animation: twinkle var(--d, 6s) ease-in-out infinite;
    }
    @keyframes twinkle {
      0%, 100% { opacity: 0.3; transform: translateY(0px) scale(1); }
      50% { opacity: 0.9; transform: translateY(-4px) scale(1.3); }
    }

    /* Content */
    .loom .content {
      position: relative;
      z-index: 2;
      max-width: 980px;
      margin: 0 auto;
      display: grid;
      gap: 10px;
    }
    .loom .chip {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 999px;
      font-size: 12px;
      letter-spacing: 0.14em;
      text-transform: uppercase;
      color: #081022;
      background: linear-gradient(90deg, var(--c1), var(--c2));
      border: 1px solid rgba(255,255,255,0.28);
      box-shadow: 0 8px 20px rgba(0,0,0,0.25);
      user-select: none;
      width: fit-content;
    }
    .loom .chip .dot {
      width: 8px; height: 8px; border-radius: 50%;
      background: #081022;
      box-shadow: 0 0 0 3px rgba(8,16,34,0.15);
    }

    .loom h1 {
      margin: 10px 0 2px 0;
      font-weight: 900;
      line-height: 0.98;
      font-size: clamp(32px, 7.2vw, 68px);
      background: linear-gradient(90deg, #f7fbff 0%, color-mix(in sRGB, var(--c1) 50%, #ffffff) 45%, color-mix(in sRGB, var(--c3) 60%, #ffffff) 100%);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      letter-spacing: -0.02em;
      text-wrap: balance;
    }
    .loom .lede {
      margin: 4px 0 16px 0;
      font-size: clamp(14px, 2.1vw, 18px);
      color: var(--muted);
      line-height: 1.6;
      max-width: 70ch;
      text-wrap: pretty;
    }

    .loom .controls {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .loom .btn {
      position: relative;
      appearance: none;
      border: 1px solid rgba(255,255,255,0.22);
      border-radius: 14px;
      padding: 12px 16px;
      font-size: 14px;
      font-weight: 650;
      letter-spacing: 0.02em;
      cursor: pointer;
      transition: transform 150ms ease, box-shadow 150ms ease, background 150ms ease, border-color 150ms ease;
      outline: none;
      color: var(--text);
      background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03));
      overflow: hidden;
    }
    .loom .btn:active { transform: translateY(1px) scale(0.99); }
    .loom .btn.primary {
      color: #0a0f1e;
      background: linear-gradient(135deg, color-mix(in sRGB, var(--c1) 70%, #fff), color-mix(in sRGB, var(--c2) 70%, #fff));
      box-shadow: 0 10px 24px rgba(92, 137, 255, 0.30);
    }
    .loom .btn.primary:hover { transform: translateY(-1px); box-shadow: 0 14px 30px rgba(92, 137, 255, 0.38); }
    .loom .btn.ghost:hover { border-color: rgba(255,255,255,0.3); transform: translateY(-1px); box-shadow: 0 8px 18px rgba(0,0,0,0.25); }
    .loom .btn[aria-pressed="true"] { border-color: rgba(255,255,255,0.42); }

    .loom .meta {
      display: flex;
      align-items: center;
      gap: 10px;
      color: var(--muted);
      font-size: 12px;
      margin-top: 14px;
      opacity: 0.95;
    }
    .loom .meta .pulse {
      width: 8px; height: 8px; border-radius: 50%;
      background: var(--c1);
      box-shadow: 0 0 0 0 rgba(123,210,255,0.45);
      animation: pulse 2.8s infinite;
    }
    @keyframes pulse { 0%{box-shadow:0 0 0 0 rgba(123,210,255,0.45)} 70%{box-shadow:0 0 0 12px rgba(123,210,255,0)} 100%{box-shadow:0 0 0 0 rgba(123,210,255,0)} }

    /* Grain */
    .loom::after {
      content: "";
      position: absolute; inset: 0;
      pointer-events: none;
      background: repeating-linear-gradient(90deg, rgba(255,255,255,0.02) 0 2px, transparent 2px 4px),
                  repeating-linear-gradient(0deg, rgba(0,0,0,0.02) 0 2px, transparent 2px 4px);
      mix-blend-mode: overlay;
      opacity: 0.35;
      z-index: 1;
    }

    /* Calm Mode reduces motion */
    .loom.calm .aurora { animation: none !important; }
    .loom.calm .stars .s { animation: none !important; opacity: 0.35; }
    .loom.calm .meta .pulse { animation: none !important; }
    .loom.calm .wave { opacity: 0.7; }

    @media (prefers-reduced-motion: reduce) {
      .loom .aurora, .loom .stars .s, .loom .meta .pulse { animation: none !important; }
      .loom .wave { opacity: 0.75; }
    }
  </style>

  <div class="bg" aria-hidden="true">
    <div class="aurora a1"></div>
    <div class="aurora a2"></div>

    <svg class="wave" viewBox="0 0 1000 400" preserveAspectRatio="none" aria-hidden="true">
      <defs>
        <linearGradient id="loomGradient" x1="0%" y1="0%" x2="100%" y2="0%">
          <stop offset="0%"></stop>
          <stop offset="50%"></stop>
          <stop offset="100%"></stop>
        </linearGradient>
      </defs>
      <path class="w1" d=""></path>
      <path class="w2" d=""></path>
    </svg>

    <div class="stars"></div>
  </div>

  <div class="content">
    <div class="chip" aria-label="Edition number">
      <span class="dot" aria-hidden="true"></span>
      Edition 2211
    </div>

    <h1 id="loom-title">Loom of Light</h1>
    <p class="lede">Threads of color drift in quiet motion. Touch the canvas to nudge the weave.</p>

    <div class="controls">
      <button class="btn primary" id="shift">Shift Hue</button>
      <button class="btn ghost" id="calm" aria-pressed="false">Calm Mode</button>
    </div>

    <div class="meta">
      <span class="pulse" aria-hidden="true"></span>
      <span>Generative, responsive, respectful.</span>
      <span aria-hidden="true">•</span>
      <span id="last-updated">Last updated: 2026-01-26 13:33:09 EST</span>
    </div>
  </div>

  <script>
    (function () {
      const root = document.currentScript.closest('.loom');
      const last = root.querySelector('#last-updated');
      const shift = root.querySelector('#shift');
      const calmBtn = root.querySelector('#calm');
      const stars = root.querySelector('.stars');
      const wave = root.querySelector('.wave');
      const w1 = root.querySelector('.w1');
      const w2 = root.querySelector('.w2');

      // Timestamp
      const fmt = new Intl.DateTimeFormat(undefined, { dateStyle: 'medium', timeStyle: 'short' });
      last.textContent = "Updated " + fmt.format(new Date());

      // Starfield
      const STAR_COUNT = 48;
      for (let i = 0; i < STAR_COUNT; i++) {
        const s = document.createElement('span');
        s.className = 's';
        const x = Math.random() * 100;
        const y = Math.random() * 100;
        const d = (5 + Math.random() * 6).toFixed(2) + 's';
        s.style.left = x + '%';
        s.style.top = y + '%';
        s.style.setProperty('--d', d);
        s.style.transform = `scale(${0.6 + Math.random() * 1.2})`;
        s.style.opacity = (0.3 + Math.random() * 0.7).toFixed(2);
        stars.appendChild(s);
      }

      // Wave generator
      const state = {
        t: 0,
        base: 260,
        amp1: 28,
        amp2: 18,
        freq1: 2.2,
        freq2: 3.6,
        speed: 0.012,
        pointer: { x: 0.5, y: 0.5 }
      };

      function pathData(ampA, ampB, phaseShift) {
        const width = 1000;
        const height = 400;
        const pts = [];
        const m = (state.pointer.x - 0.5) * 2; // -1 .. 1
        const ybase = state.base + (state.pointer.y - 0.5) * 40;
        for (let x = 0; x <= width; x += 16) {
          const p = (x / width);
          const y =
            ybase +
            ampA * Math.sin(p * Math.PI * state.freq1 + state.t + phaseShift) +
            ampB * Math.sin(p * Math.PI * state.freq2 + state.t * 1.3 - phaseShift) +
            m * 18 * Math.sin(p * Math.PI * 1.4 + state.t * 0.5);
          pts.push([x, y]);
        }
        // Build smooth path
        let d = `M ${pts[0][0]} ${pts[0][1]}`;
        for (let i = 1; i < pts.length - 2; i++) {
          const [x0, y0] = pts[i];
          const [x1, y1] = pts[i + 1];
          const cx = (x0 + x1) / 2;
          const cy = (y0 + y1) / 2;
          d += ` Q ${x0} ${y0} ${cx} ${cy}`;
        }
        d += ` T ${pts[pts.length - 1][0]} ${pts[pts.length - 1][1]}`;
        return d;
      }

      let raf;
      const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      function loop() {
        state.t += state.speed;
        w1.setAttribute('d', pathData(state.amp1, state.amp2, 0.0));
        w2.setAttribute('d', pathData(state.amp1 * 0.6, state.amp2 * 0.5, 1.2));
        raf = requestAnimationFrame(loop);
      }

      function start() {
        if (!raf) raf = requestAnimationFrame(loop);
      }
      function stop() {
        cancelAnimationFrame(raf);
        raf = null;
      }
      if (!prefersReduced) start(); else root.classList.add('calm');

      // Pointer light + parallax
      root.addEventListener('pointermove', (e) => {
        const r = root.getBoundingClientRect();
        const mx = ((e.clientX - r.left) / r.width);
        const my = ((e.clientY - r.top) / r.height);
        state.pointer.x = mx;
        state.pointer.y = my;
        root.style.setProperty('--mx', (mx * 100) + '%');
        root.style.setProperty('--my', (my * 100) + '%');
        const dx = (mx - 0.5) * 6;
        const dy = (my - 0.5) * 6;
        wave.style.transform = `translate(${dx * 2}px, ${dy * 2}px)`;
      });
      root.addEventListener('pointerleave', () => {
        state.pointer.x = 0.5; state.pointer.y = 0.5;
        root.style.setProperty('--mx', '50%');
        root.style.setProperty('--my', '50%');
        wave.style.transform = 'translate(0,0)';
      });

      // Hue shifter
      function randHue() { return Math.floor(Math.random() * 360); }
      function hsl(h, s, l) { return `hsl(${h} ${s}% ${l}%)`; }
      function setPalette(h) {
        const c1 = hsl(h, 85, 64);
        const c2 = hsl((h + 60) % 360, 78, 66);
        const c3 = hsl((h + 200) % 360, 90, 64);
        root.style.setProperty('--c1', c1);
        root.style.setProperty('--c2', c2);
        root.style.setProperty('--c3', c3);
        last.textContent = "Palette refreshed • " + fmt.format(new Date());
        // gentle flash
        root.animate([{filter:'brightness(1)'},{filter:'brightness(1.12)'},{filter:'brightness(1)'}], {duration: 520, easing:'ease-out'});
      }
      shift.addEventListener('click', () => setPalette(randHue()));

      // Calm mode toggle
      calmBtn.addEventListener('click', () => {
        const pressed = calmBtn.getAttribute('aria-pressed') === 'true';
        calmBtn.setAttribute('aria-pressed', String(!pressed));
        root.classList.toggle('calm', !pressed);
        if (!pressed) { stop(); } else if (!prefersReduced) { start(); }
        last.textContent = (pressed ? "Motion resumed • " : "Calm mode • ") + fmt.format(new Date());
      });

      // Time-of-day nudge
      const hour = new Date().getHours();
      if (hour >= 6 && hour < 12) {
        setPalette(210); // morning cool
      } else if (hour >= 18 || hour < 6) {
        setPalette(22);  // evening warm
      }

      // Initial wave path to avoid flash of empty SVG
      w1.setAttribute('d', 'M 0 260 T 1000 260');
      w2.setAttribute('d', 'M 0 270 T 1000 270');
    })();
  </script>
</div>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


