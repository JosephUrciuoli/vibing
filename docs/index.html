<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<section id="aurora2253" data-theme="dark" aria-label="Aurora Observatory â€” Edition 2253">
  <style>
    /* Tokens */
    #aurora2253{
      --bg-1: #05070d;
      --bg-2: #0b1324;
      --ink: #e7f0ff;
      --muted: color-mix(in lch, var(--ink) 58%, transparent);
      --edge: rgba(255,255,255,0.16);
      --glass: rgba(255,255,255,0.06);
      --glow: 0.6;
      --h: 220;
      --r: 28px;
      color: var(--ink);
      background:
        radial-gradient(1200px 700px at 10% 10%, hsl(210 90% 60% / .12), transparent 60%),
        radial-gradient(1100px 800px at 85% 90%, hsl(300 85% 60% / .10), transparent 60%),
        linear-gradient(180deg, var(--bg-1), var(--bg-2));
      border-radius: var(--r);
      padding: clamp(18px, 5vw, 60px);
      font-family: ui-sans-serif, -apple-system, Segoe UI, Roboto, Helvetica, Arial, system-ui;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.06), 0 48px 140px rgba(0,0,0,.55);
      position: relative; isolation: isolate; overflow: clip;
      color-scheme: dark;
    }
    #aurora2253[data-theme="light"]{
      --bg-1: #fbfcff;
      --bg-2: #eef3ff;
      --ink: #0b1020;
      --muted: color-mix(in lch, var(--ink) 55%, transparent);
      --glass: rgba(255,255,255,0.72);
      --edge: rgba(12, 18, 38, 0.16);
      background:
        radial-gradient(1200px 700px at 10% 10%, hsl(210 90% 60% / .12), transparent 60%),
        radial-gradient(1100px 800px at 85% 90%, hsl(300 85% 60% / .08), transparent 60%),
        linear-gradient(180deg, var(--bg-1), var(--bg-2));
      box-shadow: inset 0 1px 0 rgba(0,0,0,0.04), 0 40px 120px rgba(0,0,0,.18);
      color-scheme: light;
    }

    /* Star dust */
    #aurora2253::before{
      content:"";
      position:absolute; inset:-20%;
      background:
        radial-gradient(circle at 12% 20%, #fff 0.7px, transparent 1.1px) 0 0/220px 220px,
        radial-gradient(circle at 84% 62%, #fff 0.7px, transparent 1.1px) 0 0/260px 260px,
        radial-gradient(circle at 36% 78%, #fff 0.7px, transparent 1.1px) 0 0/300px 300px;
      filter: drop-shadow(0 0 1px rgba(255,255,255,.12));
      mix-blend-mode: soft-light;
      opacity:.08; pointer-events:none;
      animation: drift2253 40s ease-in-out infinite;
    }
    @keyframes drift2253{ 50%{ transform: translate3d(0,-12px,0) scale(1.02) rotate(.3deg); } }

    /* Top bar */
    #aurora2253 .top{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
      margin-bottom: clamp(14px, 3.6vw, 30px);
      position:relative; z-index:2;
    }
    #aurora2253 .mark{
      display:flex; align-items:center; gap:12px;
      padding:10px 14px; border-radius:999px;
      background: var(--glass);
      backdrop-filter: blur(10px) saturate(160%);
      box-shadow: inset 0 0 0 1px var(--edge), 0 12px 30px rgba(0,0,0,0.18);
      font-weight:800; letter-spacing:.02em;
      color: var(--muted);
    }
    #aurora2253 .mark .spark{
      width:16px; height:16px; border-radius:6px;
      background: conic-gradient(from 0deg, hsl(var(--h) 92% 62%), hsl(calc(var(--h)+80) 90% 60%), hsl(calc(var(--h)+160) 92% 60%), hsl(var(--h) 92% 62%));
      box-shadow: 0 0 0 8px color-mix(in lch, hsl(var(--h) 90% 60%) 22%, transparent);
      animation: sparkPulse2253 3s ease-in-out infinite;
    }
    @keyframes sparkPulse2253 { 50%{ box-shadow: 0 0 0 0 transparent; transform: rotate(12deg); } }
    #aurora2253 .mark .ed{ opacity:.7; font-weight:700; font-size:12px; letter-spacing:.16em; text-transform:uppercase; margin-left:6px; }
    #aurora2253 .actions{ display:flex; gap:10px; align-items:center; }
    #aurora2253 .chip, #aurora2253 .btn{
      appearance:none; border:0; cursor:pointer; font-weight:800; font-size:14px;
      padding:10px 14px; border-radius:999px;
      background: var(--glass); color: var(--ink);
      box-shadow: inset 0 0 0 1px var(--edge), 0 10px 24px rgba(0,0,0,0.16);
      backdrop-filter: blur(8px) saturate(160%);
      transition: transform .14s ease, filter .2s ease, background .3s ease;
    }
    #aurora2253 .chip:hover, #aurora2253 .btn:hover { transform: translateY(-1px); }

    /* Hero */
    #aurora2253 .hero{ display:grid; gap:10px; position:relative; z-index:2; margin-bottom: clamp(16px, 4vw, 28px); }
    #aurora2253 h1{
      margin:0; line-height:.92; font-weight:900;
      font-size: clamp(42px, 9vw, 112px); letter-spacing:-0.02em;
      color: transparent;
      background: conic-gradient(from 220deg, hsl(var(--h) 90% 65%), hsl(calc(var(--h)+100) 88% 62%), hsl(calc(var(--h)+180) 90% 64%), hsl(var(--h) 90% 65%));
      background-size: 200% 200%;
      -webkit-background-clip:text; background-clip:text;
      filter: drop-shadow(0 6px 26px rgba(0,0,0,0.28));
      animation: sheen2253 16s ease-in-out infinite;
      text-wrap: balance;
    }
    @keyframes sheen2253 { 50%{ background-position: 100% 40%; } }
    #aurora2253 .lede{ margin:0; color: var(--muted); font-size: clamp(14px, 2vw, 18px); text-wrap: pretty; }

    /* Orb stage */
    #aurora2253 .orb-wrap{
      position:relative; aspect-ratio: 1/1; width: min(90vw, 880px);
      margin: clamp(10px, 3vw, 20px) auto 0; border-radius: 50%;
      overflow:hidden; display:grid; place-items:center;
      background:
        radial-gradient(140% 140% at 70% 30%, rgba(255,255,255,.18), transparent 60%) border-box,
        radial-gradient(140% 140% at 30% 70%, rgba(255,255,255,.10), transparent 60%) border-box;
      box-shadow:
        0 60px 140px rgba(0,0,0,0.45),
        inset 0 0 0 1px var(--edge),
        inset 0 0 160px rgba(255,255,255,0.14);
      transform-style: preserve-3d;
      transition: transform 240ms ease;
    }
    #aurora2253 canvas{
      width:100%; height:100%; display:block;
    }
    #aurora2253 .ring{
      position:absolute; inset:0; pointer-events:none; border-radius:50%;
      box-shadow:
        inset 0 0 0 1px color-mix(in lch, hsl(var(--h) 80% 60%) 60%, transparent),
        inset 0 0 60px color-mix(in lch, hsl(var(--h) 90% 62%) 28%, transparent);
      opacity:.6; mix-blend-mode: screen;
    }
    #aurora2253 .shine{
      position:absolute; top:-10%; left:-10%; width:60%; height:60%; border-radius:50%;
      background: radial-gradient(60% 60% at 50% 50%, rgba(255,255,255,.35), transparent 60%);
      filter: blur(8px); pointer-events:none; mix-blend-mode: screen;
      transform: translateZ(20px);
      animation: floatShine2253 12s ease-in-out infinite;
    }
    @keyframes floatShine2253 { 50%{ transform: translate(6px, -6px) translateZ(20px) scale(1.02); } }

    /* Controls */
    #aurora2253 .controls{
      display:flex; flex-wrap:wrap; align-items:center; justify-content:center;
      gap: 12px 14px; margin: clamp(14px, 3vw, 22px) auto 0; position:relative; z-index:2;
    }
    #aurora2253 .seg{
      display:inline-flex; padding:4px; border-radius:999px; background: var(--glass);
      box-shadow: inset 0 0 0 1px var(--edge); backdrop-filter: blur(8px) saturate(160%);
    }
    #aurora2253 .seg button{
      border:0; background:transparent; color: var(--ink); font-weight:800; font-size:13px; padding:8px 12px; border-radius:999px; cursor:pointer;
      transition: background .2s ease, transform .16s ease;
    }
    #aurora2253 .seg button[aria-pressed="true"]{
      background: color-mix(in lch, hsl(var(--h) 90% 58%) 26%, transparent);
      box-shadow: inset 0 0 0 1px var(--edge);
    }
    #aurora2253 .group{
      display:inline-flex; align-items:center; gap:10px;
      padding: 8px 10px; border-radius:999px; font-weight:700; font-size:14px;
      color: var(--muted); background: var(--glass);
      box-shadow: inset 0 0 0 1px var(--edge); backdrop-filter: blur(8px) saturate(160%);
    }
    #aurora2253 input[type="range"]{
      -webkit-appearance:none; appearance:none;
      width:min(44vw, 320px); height:22px; background:transparent; cursor:pointer;
    }
    #aurora2253 input[type="range"]::-webkit-slider-runnable-track,
    #aurora2253 input[type="range"]::-moz-range-track{
      height:6px; border-radius:999px;
      background: linear-gradient(90deg, hsl(var(--h) 90% 55%), hsl(calc(var(--h)+100) 90% 55%), hsl(calc(var(--h)+200) 90% 55%));
      box-shadow: inset 0 0 0 1px rgba(0,0,0,0.18);
    }
    #aurora2253 input[type="range"]::-webkit-slider-thumb,
    #aurora2253 input[type="range"]::-moz-range-thumb{
      width:18px; height:18px; border-radius:50%;
      background: #fff; border:2px solid hsl(var(--h) 90% 55%);
      box-shadow: 0 4px 12px rgba(0,0,0,0.25);
      -webkit-appearance:none; appearance:none; margin-top:-6px;
    }

    /* Footer */
    #aurora2253 .meta{
      display:flex; flex-wrap:wrap; align-items:center; justify-content:space-between; gap:12px;
      margin-top: clamp(18px, 3.6vw, 26px);
      padding-top: 14px; border-top: 1px solid var(--edge);
      color: var(--muted); font-size:12.5px; position:relative; z-index:2;
    }
    #aurora2253 .live{ display:inline-flex; align-items:center; gap:8px; }
    #aurora2253 .pulse{
      width:9px; height:9px; border-radius:50%;
      background: hsl(var(--h) 90% 55%);
      box-shadow: 0 0 0 0 color-mix(in lch, hsl(var(--h) 90% 55%) 60%, transparent);
      animation: pulseLive2253 2s ease-out infinite;
    }
    @keyframes pulseLive2253{ 0%{ box-shadow: 0 0 0 0 color-mix(in lch, hsl(var(--h) 90% 55%) 55%, transparent);} 100%{ box-shadow: 0 0 0 14px transparent;} }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      #aurora2253 *{ animation: none !important; transition: none !important; }
    }
  </style>

  <div class="top">
    <div class="mark">
      <span class="spark" aria-hidden="true"></span>
      Aurora Observatory
      <span class="ed">Edition 2253</span>
    </div>
    <div class="actions">
      <button id="theme2253" class="chip" aria-pressed="true" title="Toggle theme">Dark</button>
      <button id="save2253" class="chip" title="Save still">Save</button>
    </div>
  </div>

  <div class="hero">
    <h1>Halo of Quiet Orbits</h1>
    <p class="lede">A pocket planetarium. Touch to bend gravity; the sky yields softly.</p>
  </div>

  <div class="orb-wrap" id="wrap2253" aria-label="Interactive celestial sphere">
    <canvas id="orb2253" role="img" aria-label="A living aurora inside a glass sphere"></canvas>
    <div class="ring" aria-hidden="true"></div>
    <div class="shine" aria-hidden="true"></div>
  </div>

  <div class="controls" aria-label="Controls">
    <div class="seg" role="tablist" aria-label="Scene">
      <button id="sNebula" role="tab" aria-pressed="true">Nebula</button>
      <button id="sConst" role="tab" aria-pressed="false">Constellation</button>
      <button id="sOrbit" role="tab" aria-pressed="false">Orbits</button>
    </div>
    <div class="group" aria-label="Glow">
      Glow
      <input id="glow2253" type="range" min="0" max="100" value="60" aria-valuemin="0" aria-valuemax="100" aria-valuenow="60" aria-label="Glow amount">
    </div>
    <div class="group" aria-label="Hue">
      Hue
      <input id="hue2253" type="range" min="0" max="360" value="220" aria-valuemin="0" aria-valuemax="360" aria-valuenow="220" aria-label="Color hue">
    </div>
    <button id="pause2253" class="btn" aria-pressed="false">Pause</button>
    <button id="reset2253" class="btn">Center</button>
  </div>

  <div class="meta">
    <div class="live"><span class="pulse" aria-hidden="true"></span> Celestial clock, gently ticking</div>
    <span id="last-updated">Last updated: 2026-01-28 11:34:59 EST</span>
  </div>

  <script>
    (function(){
      const root = document.getElementById('aurora2253');
      const wrap = document.getElementById('wrap2253');
      const canvas = document.getElementById('orb2253');
      const ctx = canvas.getContext('2d', { alpha: true });

      const themeBtn = document.getElementById('theme2253');
      const saveBtn = document.getElementById('save2253');
      const pauseBtn = document.getElementById('pause2253');
      const resetBtn = document.getElementById('reset2253');

      const glowEl = document.getElementById('glow2253');
      const hueEl = document.getElementById('hue2253');

      const sNeb = document.getElementById('sNebula');
      const sCon = document.getElementById('sConst');
      const sOrb = document.getElementById('sOrbit');

      // Last updated
      const updated = document.getElementById('last-updated');
      try{
        const now = new Date();
        const tz = Intl.DateTimeFormat().resolvedOptions().timeZone || 'local';
        const fmt = { year:'numeric', month:'short', day:'2-digit', hour:'2-digit', minute:'2-digit' };
        updated.textContent = `Updated ${now.toLocaleString(undefined, fmt)} (${tz})`;
      }catch(_){ updated.textContent = 'Updated just now'; }

      // State
      let dpr = Math.min(2, window.devicePixelRatio || 1);
      function resize(){
        const r = wrap.getBoundingClientRect();
        canvas.width = Math.max(2, Math.floor(r.width * dpr));
        canvas.height = Math.max(2, Math.floor(r.height * dpr));
        canvas.style.width = r.width + 'px';
        canvas.style.height = r.height + 'px';
        ctx.setTransform(1,0,0,1,0,0);
        ctx.scale(dpr, dpr);
        clearCanvas();
      }
      function clearCanvas(){
        const r = wrap.getBoundingClientRect();
        const isDark = root.getAttribute('data-theme')!=='light';
        ctx.globalCompositeOperation = 'source-over';
        ctx.fillStyle = isDark ? '#070a10' : '#fbfbfe';
        ctx.fillRect(0,0,r.width,r.height);
      }
      resize();
      addEventListener('resize', ()=>{ dpr = Math.min(2, window.devicePixelRatio || 1); resize(); });

      let mode = 'nebula';
      function setMode(m){
        mode = m;
        sNeb.setAttribute('aria-pressed', m==='nebula' ? 'true':'false');
        sCon.setAttribute('aria-pressed', m==='const' ? 'true':'false');
        sOrb.setAttribute('aria-pressed', m==='orbit' ? 'true':'false');
        initMode();
      }
      sNeb.addEventListener('click', ()=>setMode('nebula'));
      sCon.addEventListener('click', ()=>setMode('const'));
      sOrb.addEventListener('click', ()=>setMode('orbit'));

      // Theme
      themeBtn.addEventListener('click', ()=>{
        const isDark = root.getAttribute('data-theme')!=='light';
        const next = isDark ? 'light' : 'dark';
        root.setAttribute('data-theme', next);
        themeBtn.textContent = next.charAt(0).toUpperCase() + next.slice(1);
        themeBtn.setAttribute('aria-pressed', next==='dark' ? 'true' : 'false');
        clearCanvas();
      });

      // Sliders
      let glow = parseInt(glowEl.value, 10)/100; root.style.setProperty('--glow', glow.toFixed(2));
      let hue = parseInt(hueEl.value, 10); root.style.setProperty('--h', hue);
      glowEl.addEventListener('input', e=>{ glow = Math.max(0, Math.min(1, (parseInt(e.target.value,10)||0)/100)); root.style.setProperty('--glow', glow.toFixed(2)); glowEl.setAttribute('aria-valuenow', String(parseInt(e.target.value,10)||0)); });
      hueEl.addEventListener('input', e=>{ hue = parseInt(e.target.value,10)||0; root.style.setProperty('--h', hue); hueEl.setAttribute('aria-valuenow', String(hue)); });

      // Pointer + tilt
      let px=.5, py=.5, active=false;
      wrap.addEventListener('pointermove', (e)=>{
        const r = wrap.getBoundingClientRect();
        px = Math.min(1, Math.max(0, (e.clientX - r.left)/r.width));
        py = Math.min(1, Math.max(0, (e.clientY - r.top)/r.height));
        active = true;
        wrap.style.transform = `rotateX(${-(py - 0.5)*8}deg) rotateY(${(px - 0.5)*10}deg)`;
      }, {passive:true});
      wrap.addEventListener('pointerleave', ()=>{ active=false; wrap.style.transform = 'rotateX(0deg) rotateY(0deg)'; });

      resetBtn.addEventListener('click', ()=>{ px=.5; py=.5; wrap.style.transform = 'rotateX(0deg) rotateY(0deg)'; });

      // Save still
      saveBtn.addEventListener('click', ()=>{
        try{
          const rect = wrap.getBoundingClientRect();
          const tmp = document.createElement('canvas');
          const tctx = tmp.getContext('2d');
          const scale = Math.min(2, window.devicePixelRatio || 1);
          tmp.width = Math.floor(rect.width * scale);
          tmp.height = Math.floor(rect.height * scale);
          tctx.scale(scale, scale);
          const isDark = root.getAttribute('data-theme')!=='light';
          tctx.fillStyle = isDark ? '#070a10' : '#fbfbfe';
          tctx.fillRect(0,0,rect.width,rect.height);
          tctx.drawImage(canvas, 0, 0, rect.width, rect.height);
          const a = document.createElement('a');
          a.href = tmp.toDataURL('image/png');
          a.download = `aurora-observatory-2253-${mode}.png`;
          document.body.appendChild(a); a.click(); a.remove();
        }catch(_){}
      });

      // Keyboard
      window.addEventListener('keydown', (e)=>{
        if(e.code==='Space'){ e.preventDefault(); pauseBtn.click(); }
        if(e.key==='1') setMode('nebula');
        if(e.key==='2') setMode('const');
        if(e.key==='3') setMode('orbit');
        if(e.key.toLowerCase()==='t') themeBtn.click();
        if(e.key.toLowerCase()==='s') saveBtn.click();
      });

      // Animation engines
      let clouds=[], stars=[], rings=[];
      function initMode(){
        const w = canvas.clientWidth, h = canvas.clientHeight;
        clearCanvas();
        if(mode==='nebula'){
          clouds = [];
          const n = Math.floor(70);
          for(let i=0;i<n;i++){
            const r = Math.random()*120 + 40;
            clouds.push({
              x: Math.random()*w, y: Math.random()*h, r,
              dx: (Math.random()*2-1)*0.06, dy: (Math.random()*2-1)*0.06,
              hue: (hue + (i%60)*3 + Math.random()*40)%360,
              a: Math.random()*Math.PI*2
            });
          }
        }else if(mode==='const'){
          stars=[];
          const n = 100;
          for(let i=0;i<n;i++){
            stars.push({
              x: Math.random()*w, y: Math.random()*h,
              vx: (Math.random()*2-1)*0.04, vy: (Math.random()*2-1)*0.04,
              t: Math.random()*Math.PI*2, s: Math.random()*1.2+0.4
            });
          }
        }else if(mode==='orbit'){
          rings=[];
          const cx = w/2, cy = h/2;
          const maxR = Math.min(w,h)*0.42;
          const ringCount = 5;
          for(let i=0;i<ringCount;i++){
            const r = (i+1)/(ringCount+1) * maxR + 30;
            const speed = (i%2?1:-1) * (0.0006 + i*0.00025);
            const bodies = 4 + i;
            const base = Math.random()*Math.PI*2;
            const hueOff = (hue + i*28) % 360;
            rings.push({ cx, cy, r, speed, a: base, bodies, hue: hueOff });
          }
        }
      }
      initMode();

      // Render loop
      const prefersReduce = matchMedia('(prefers-reduced-motion: reduce)').matches;
      let paused = false; pauseBtn.addEventListener('click', ()=>{ paused=!paused; pauseBtn.textContent = paused?'Resume':'Pause'; pauseBtn.setAttribute('aria-pressed', paused?'true':'false'); if(!paused){ t0=performance.now(); requestAnimationFrame(draw);} });
      let t0 = performance.now();
      function draw(now){
        if(paused || prefersReduce) return;
        const dt = Math.min(60, now - t0); t0 = now;
        const w = canvas.clientWidth, h = canvas.clientHeight;

        if(mode==='nebula'){
          // gentle fade
          ctx.globalCompositeOperation = 'source-over';
          const isDark = root.getAttribute('data-theme')!=='light';
          ctx.fillStyle = isDark ? 'rgba(7,10,16,0.10)' : 'rgba(251,251,254,0.14)';
          ctx.fillRect(0,0,w,h);

          ctx.globalCompositeOperation = 'lighter';
          for(let i=0;i<clouds.length;i++){
            const c = clouds[i];
            const mx = px*w, my = py*h;
            const dx = c.x - mx, dy = c.y - my;
            const d = Math.hypot(dx,dy)+1;
            const pull = active ? Math.min(0.18, 40/d)*0.08 : 0;
            c.dx += (-dx/d) * pull;
            c.dy += (-dy/d) * pull;

            c.x += c.dx * dt;
            c.y += c.dy * dt;
            c.a += 0.0015*dt;

            // wrap
            if(c.x < -150) c.x = w+150;
            if(c.x > w+150) c.x = -150;
            if(c.y < -150) c.y = h+150;
            if(c.y > h+150) c.y = -150;

            const r = c.r * (0.9 + Math.sin(c.a)*0.08);
            const g = ctx.createRadialGradient(c.x, c.y, r*0.1, c.x, c.y, r);
            const glowA = 0.08 + glow*0.22;
            g.addColorStop(0, `hsl(${(c.hue)%360} 92% 64% / ${0.20 + glow*0.4})`);
            g.addColorStop(1, `hsl(${(c.hue+80)%360} 92% 60% / ${glowA})`);
            ctx.fillStyle = g;
            ctx.beginPath();
            ctx.arc(c.x, c.y, r, 0, Math.PI*2);
            ctx.fill();
          }
        }else if(mode==='const'){
          // fade
          ctx.globalCompositeOperation = 'source-over';
          const isDark = root.getAttribute('data-theme')!=='light';
          ctx.fillStyle = isDark ? 'rgba(7,10,16,0.12)' : 'rgba(251,251,254,0.16)';
          ctx.fillRect(0,0,w,h);

          // connect
          ctx.globalCompositeOperation = 'screen';
          const thresh = Math.min(w,h)*0.14;
          for(let i=0;i<stars.length;i++){
            const a = stars[i];
            a.x += a.vx * dt; a.y += a.vy * dt; a.t += 0.002*dt;
            if(a.x < -5) a.x = w+5; if(a.x > w+5) a.x = -5;
            if(a.y < -5) a.y = h+5; if(a.y > h+5) a.y = -5;

            // pointer gravity
            const mx = px*w, my = py*h;
            const dx = a.x - mx, dy = a.y - my; const d = Math.hypot(dx,dy)+1;
            const pull = active ? Math.min(0.2, 60/d)*0.06 : 0.0;
            a.vx += (-dx/d) * pull; a.vy += (-dy/d) * pull;
            a.vx*=0.998; a.vy*=0.998;
          }
          // lines
          ctx.lineWidth = 0.9;
          for(let i=0;i<stars.length;i++){
            for(let j=i+1;j<stars.length;j++){
              const dx = stars[i].x - stars[j].x, dy = stars[i].y - stars[j].y;
              const d = Math.hypot(dx,dy);
              if(d < thresh){
                const a = (1 - d/thresh) * (0.25 + glow*0.4);
                ctx.strokeStyle = `hsl(${(hue + (d/thresh)*120)%360} 92% 62% / ${a})`;
                ctx.beginPath();
                ctx.moveTo(stars[i].x, stars[i].y);
                ctx.lineTo(stars[j].x, stars[j].y);
                ctx.stroke();
              }
            }
          }
          // stars
          for(let i=0;i<stars.length;i++){
            const s = stars[i];
            const tw = (Math.sin(s.t)+1)/2;
            const r = (s.s + tw*0.7) * (1.1 + glow*0.8);
            const grad = ctx.createRadialGradient(s.x, s.y, 0, s.x, s.y, r*3);
            grad.addColorStop(0, `hsl(${hue} 90% 70% / ${0.6})`);
            grad.addColorStop(1, `hsl(${(hue+80)%360} 80% 60% / 0)`);
            ctx.fillStyle = grad;
            ctx.beginPath();
            ctx.arc(s.x, s.y, r, 0, Math.PI*2);
            ctx.fill();
          }
        }else if(mode==='orbit'){
          ctx.globalCompositeOperation = 'source-over';
          const isDark = root.getAttribute('data-theme')!=='light';
          ctx.fillStyle = isDark ? 'rgba(7,10,16,0.10)' : 'rgba(251,251,254,0.14)';
          ctx.fillRect(0,0,w,h);

          ctx.globalCompositeOperation = 'screen';
          for(let i=0;i<rings.length;i++){
            const R = rings[i];
            const speedMod = 1 + ((px-0.5)*0.8 + (0.5-py)*0.6);
            R.a += R.speed * speedMod * dt;

            // ring glow
            ctx.lineWidth = 1.2;
            ctx.strokeStyle = `hsl(${R.hue} 90% 60% / ${0.24 + glow*0.18})`;
            ctx.beginPath(); ctx.arc(R.cx, R.cy, R.r, 0, Math.PI*2); ctx.stroke();

            // bodies
            for(let b=0;b<R.bodies;b++){
              const ang = R.a + (Math.PI*2)*(b/R.bodies);
              const bx = R.cx + Math.cos(ang) * R.r;
              const by = R.cy + Math.sin(ang) * R.r;
              const pr = 4 + b*0.4;
              const g = ctx.createRadialGradient(bx,by,0,bx,by, pr*4);
              g.addColorStop(0, `hsl(${(R.hue+40)%360} 92% 65% / ${0.7})`);
              g.addColorStop(1, `hsl(${(R.hue+140)%360} 90% 60% / 0)`);
              ctx.fillStyle = g;
              ctx.beginPath(); ctx.arc(bx,by, pr*(0.8+glow*0.6), 0, Math.PI*2); ctx.fill();
            }
          }

          // central star
          const cx = w/2, cy = h/2;
          const core = 16 + glow*18;
          const cg = ctx.createRadialGradient(cx, cy, 0, cx, cy, core*6);
          cg.addColorStop(0, `hsl(${hue} 92% 70% / ${0.9})`);
          cg.addColorStop(1, `hsl(${(hue+100)%360} 90% 62% / 0)`);
          ctx.fillStyle = cg;
          ctx.beginPath(); ctx.arc(cx, cy, core, 0, Math.PI*2); ctx.fill();
        }

        requestAnimationFrame(draw);
      }
      if(!prefersReduce){ requestAnimationFrame(draw); }

      document.addEventListener('visibilitychange', ()=>{
        if (!document.hidden && !paused && !prefersReduce){ t0 = performance.now(); requestAnimationFrame(draw); }
      });

      // Pause/resume initial text state
      pauseBtn.textContent = 'Pause';

      // Start with Nebula
      setMode('nebula');
    })();
  </script>
</section>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


