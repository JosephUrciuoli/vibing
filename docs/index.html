<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<style>
  /* Orbital Garden — Iteration 54 (scoped to #solstice-lab) */
  #solstice-lab {
    --bg: #07151d;
    --ink: #eaf7ff;
    --muted: #a6c2ce;
    --line: rgba(255,255,255,0.14);
    --p1: #57ffd5; /* aqua mint */
    --p2: #7aa6ff; /* sky */
    --p3: #ff88c8; /* blossom */
    --rx: 0deg;
    --ry: 0deg;
    --pause: running;
    --speed: 1;
    color: var(--ink);
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial;
  }
  #solstice-lab[data-theme="midnight"] {
    --bg: #0a0f25;
    --ink: #eef1ff;
    --muted: #b6c0dc;
    --line: rgba(255,255,255,0.16);
    --p1: #7af0ff;
    --p2: #9b7bff;
    --p3: #ffd36a;
  }
  #solstice-lab[data-theme="paper"] {
    --bg: #f7f8fb;
    --ink: #12131a;
    --muted: #5b6172;
    --line: rgba(20,30,60,0.14);
    --p1: #2f87ff;
    --p2: #ff5a9a;
    --p3: #ffb84a;
  }

  #solstice-lab .frame {
    position: relative;
    border-radius: 28px;
    overflow: hidden;
    border: 1px solid var(--line);
    padding: clamp(18px, 3vw, 28px);
    background:
      radial-gradient(140% 120% at 20% 0%, color-mix(in oklab, var(--p2) 14%, transparent), transparent 60%),
      radial-gradient(140% 120% at 100% 80%, color-mix(in oklab, var(--p3) 12%, transparent), transparent 60%),
      linear-gradient(180deg, color-mix(in oklab, var(--bg) 96%, #fff 4%), var(--bg));
    box-shadow:
      0 40px 100px rgba(0,0,0,0.35),
      inset 0 1px 0 rgba(255,255,255,0.08);
    transform-style: preserve-3d;
  }

  /* drifting aurora veil */
  #solstice-lab .veil {
    pointer-events: none;
    position: absolute;
    inset: -40%;
    background: conic-gradient(from 0deg,
      rgba(255,255,255,0.06),
      transparent 30% 70%,
      rgba(255,255,255,0.05));
    filter: blur(30px) saturate(120%);
    mix-blend-mode: soft-light;
    animation: drift 36s linear infinite;
    animation-play-state: var(--pause);
  }
  @keyframes drift { to { transform: rotate(360deg); } }

  /* header */
  #solstice-lab .topbar {
    position: relative; z-index: 2;
    display: flex; align-items: center; justify-content: space-between; gap: 12px;
    margin-bottom: clamp(6px, 2vw, 16px);
  }
  #solstice-lab .brand {
    display: inline-flex; gap: 12px; align-items: center;
    padding: 10px 14px; border-radius: 999px;
    border: 1px solid var(--line);
    background: linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.03));
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.08);
    user-select: none; backdrop-filter: blur(6px);
  }
  #solstice-lab .glyph {
    width: 20px; height: 20px; position: relative;
  }
  #solstice-lab .glyph::before,
  #solstice-lab .glyph::after {
    content: ""; position: absolute; inset: 0; border-radius: 50%;
  }
  #solstice-lab .glyph::before {
    border: 2px solid color-mix(in oklab, var(--p1) 60%, transparent);
    box-shadow: 0 0 20px color-mix(in oklab, var(--p1) 35%, transparent);
  }
  #solstice-lab .glyph::after {
    width: 7px; height: 7px; border-radius: 50%; background: #fff;
    left: 50%; top: 50%; transform-origin: -10px 0;
    filter: drop-shadow(0 0 10px color-mix(in oklab, var(--p2) 70%, transparent));
    animation: mini 6s linear infinite;
    animation-play-state: var(--pause);
  }
  @keyframes mini { to { transform: translate(-50%,-50%) rotate(360deg) translate(10px); } }
  #solstice-lab .brand span {
    font-size: 11px; letter-spacing: .24em; text-transform: uppercase; color: var(--muted);
  }

  /* controls */
  #solstice-lab .controls { display: flex; flex-wrap: wrap; gap: 10px; align-items: center; }
  #solstice-lab .pill {
    display: inline-flex; gap: 8px; padding: 6px; border-radius: 999px;
    border: 1px solid var(--line);
    background: linear-gradient(180deg, rgba(255,255,255,0.10), rgba(255,255,255,0.03));
    box-shadow: inset 0 1px 0 rgba(255,255,255,0.08);
  }
  #solstice-lab .chip, #solstice-lab .slider {
    appearance: none; border: 1px solid var(--line); background: transparent; color: var(--ink);
    padding: 10px 14px; border-radius: 999px; font-weight: 700; font-size: 13px;
    cursor: pointer; transition: transform .15s ease, background .25s ease, box-shadow .2s ease;
  }
  #solstice-lab .chip:hover { transform: translateY(-1px); }
  #solstice-lab .chip[aria-pressed="true"] {
    background: linear-gradient(135deg,
      color-mix(in oklab, var(--p1) 26%, transparent),
      color-mix(in oklab, var(--p3) 22%, transparent));
    box-shadow: 0 10px 26px rgba(0,0,0,0.22), 0 6px 18px color-mix(in oklab, var(--p1) 30%, transparent);
  }
  #solstice-lab .slider { display: inline-flex; gap: 8px; align-items: center; padding: 8px 12px; }
  #solstice-lab .slider label { opacity: .8; font-weight: 600; }
  #solstice-lab .slider input[type="range"] {
    -webkit-appearance: none; appearance: none; width: 120px; background: transparent;
  }
  #solstice-lab .slider input[type="range"]::-webkit-slider-runnable-track {
    height: 6px; border-radius: 8px; background: linear-gradient(90deg, var(--p1), var(--p2), var(--p3));
    box-shadow: inset 0 0 0 1px var(--line);
  }
  #solstice-lab .slider input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none; appearance: none; width: 18px; height: 18px; border-radius: 50%;
    background: #fff; border: 1px solid var(--line);
    margin-top: -6px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); cursor: grab;
  }
  #solstice-lab .slider input[type="range"]::-moz-range-track {
    height: 6px; border-radius: 8px; background: linear-gradient(90deg, var(--p1), var(--p2), var(--p3));
    box-shadow: inset 0 0 0 1px var(--line);
  }
  #solstice-lab .slider input[type="range"]::-moz-range-thumb {
    width: 18px; height: 18px; border: none; border-radius: 50%; background: #fff;
    box-shadow: 0 4px 12px rgba(0,0,0,0.2); cursor: grab;
  }

  /* hero */
  #solstice-lab .hero { position: relative; z-index: 2; margin: clamp(8px, 1.6vw, 14px) 0 clamp(10px, 2vw, 18px); }
  #solstice-lab .hero h1 {
    margin: 0 0 6px;
    font-size: clamp(28px, 5.4vw, 64px);
    letter-spacing: -0.02em; line-height: 1.04; font-weight: 900;
    background: linear-gradient(90deg, var(--p1), var(--p2), var(--p3));
    -webkit-background-clip: text; background-clip: text; color: transparent;
    filter: drop-shadow(0 10px 24px color-mix(in oklab, var(--p2) 28%, transparent));
  }
  #solstice-lab .hero p { margin: 0; color: var(--muted); font-size: clamp(13px, 1.5vw, 16px); max-width: 68ch; }

  /* orbital stage */
  #solstice-lab .stage {
    position: relative; z-index: 1;
    margin: clamp(16px, 4vw, 34px) 0;
  }
  #solstice-lab .sky {
    position: absolute; inset: 0; border-radius: 22px; overflow: hidden; pointer-events: none;
  }
  #solstice-lab .star {
    position: absolute; width: 2px; height: 2px; border-radius: 50%;
    background: #fff; opacity: .7;
    filter: drop-shadow(0 0 6px color-mix(in oklab, var(--p2) 70%, transparent));
    animation: twinkle 4s ease-in-out infinite alternate;
    animation-play-state: var(--pause);
  }
  @keyframes twinkle { to { opacity: .25; transform: scale(0.8); } }

  #solstice-lab .orrery-wrap { display: grid; place-items: center; perspective: 1200px; }
  #solstice-lab .orrery {
    --size: clamp(220px, 48vw, 460px);
    width: var(--size); aspect-ratio: 1;
    position: relative; border-radius: 50%;
    transform: rotateX(var(--rx)) rotateY(var(--ry));
    box-shadow: 0 28px 90px rgba(0,0,0,0.28), 0 0 0 1px var(--line);
    background: radial-gradient(circle at 50% 50%, color-mix(in oklab, var(--p1) 12%, transparent), transparent 56%),
                linear-gradient(180deg, color-mix(in oklab, var(--bg) 94%, #fff 6%), var(--bg));
    overflow: hidden;
  }
  /* rings */
  #solstice-lab .ring {
    position: absolute; inset: 12%; border-radius: 50%;
    box-shadow: inset 0 0 0 1px var(--line);
    filter: saturate(120%);
  }
  #solstice-lab .ring.r2 { inset: 22%; }
  #solstice-lab .ring.r3 { inset: 34%; }
  #solstice-lab .track {
    position: absolute; inset: 0; border-radius: 50%;
    background:
      radial-gradient(circle at 50% 50%, transparent 58%, rgba(255,255,255,0.06) 58.2% 58.6%, transparent 58.8%),
      radial-gradient(circle at 50% 50%, transparent 72%, rgba(255,255,255,0.05) 72.2% 72.6%, transparent 72.8%),
      repeating-conic-gradient(from var(--tick, 0deg),
        rgba(255,255,255,0.18) 0 1deg, transparent 1deg 6deg);
    mask: radial-gradient(circle, transparent 56%, #000 56.2% 74%, transparent 74.2%);
    opacity: .7; mix-blend-mode: overlay;
  }
  #solstice-lab .planet {
    position: absolute; left: 50%; top: 50%; width: 12px; height: 12px; border-radius: 50%;
    transform: translate(-50%,-50%) translateX(var(--dist, 120px));
    background: radial-gradient(circle at 35% 35%, #fff, color-mix(in oklab, var(--p1) 70%, transparent));
    box-shadow: 0 0 0 10px color-mix(in oklab, var(--p1) 12%, transparent),
                0 18px 40px color-mix(in oklab, var(--p1) 24%, transparent);
  }
  #solstice-lab .planet.p2 {
    background: radial-gradient(circle at 35% 35%, #fff, color-mix(in oklab, var(--p2) 70%, transparent));
    box-shadow: 0 0 0 10px color-mix(in oklab, var(--p2) 12%, transparent),
                0 18px 40px color-mix(in oklab, var(--p2) 24%, transparent);
  }
  #solstice-lab .planet.p3 {
    background: radial-gradient(circle at 35% 35%, #fff, color-mix(in oklab, var(--p3) 70%, transparent));
    box-shadow: 0 0 0 10px color-mix(in oklab, var(--p3) 12%, transparent),
                0 18px 40px color-mix(in oklab, var(--p3) 24%, transparent);
  }
  #solstice-lab .core {
    position: absolute; left: 50%; top: 50%; transform: translate(-50%,-50%);
    width: 34%; aspect-ratio: 1; border-radius: 50%;
    background: radial-gradient(circle at 35% 30%, #fff, color-mix(in oklab, var(--p1) 70%, transparent) 60%);
    box-shadow: 0 0 0 18px color-mix(in oklab, var(--p1) 10%, transparent),
                0 20px 60px color-mix(in oklab, var(--p1) 24%, transparent);
    cursor: pointer; outline: none; border: 1px solid var(--line);
  }

  /* meta */
  #solstice-lab .meta {
    position: relative; z-index: 2;
    display: flex; align-items: center; justify-content: space-between; gap: 12px;
    margin-top: clamp(10px, 2vw, 18px); color: var(--muted); font-size: 12px;
  }
  #solstice-lab .meta .right { display: inline-flex; gap: 10px; align-items: center; white-space: nowrap; }
  #solstice-lab .meta .spark {
    width: 7px; height: 7px; border-radius: 50%;
    background: var(--p1);
    box-shadow: 0 0 14px color-mix(in oklab, var(--p1) 65%, transparent);
  }

  /* reduced motion */
  @media (prefers-reduced-motion: reduce) {
    #solstice-lab { --pause: paused; }
  }
</style>

<div class="frame" role="region" aria-label="Orbital Garden kinetic orrery">
  <div class="veil" aria-hidden="true"></div>
  <div class="topbar">
    <div class="brand" aria-label="Orbital Garden, edition 54">
      <span class="glyph" aria-hidden="true"></span>
      <span>orbital garden — edition 54</span>
    </div>
    <div class="controls" aria-label="Controls">
      <div class="pill" role="group" aria-label="Theme">
        <button class="chip" data-theme="aurora" aria-pressed="true">Aurora</button>
        <button class="chip" data-theme="midnight" aria-pressed="false">Midnight</button>
        <button class="chip" data-theme="paper" aria-pressed="false">Paper</button>
      </div>
      <div class="pill" role="group" aria-label="Motion">
        <button class="chip" id="play" aria-pressed="true">Play</button>
        <button class="chip" id="pause" aria-pressed="false">Pause</button>
      </div>
      <div class="pill slider" aria-label="Speed">
        <label for="speed">Speed</label>
        <input id="speed" type="range" min="0" max="200" value="100" />
      </div>
      <div class="pill slider" aria-label="Stars">
        <label for="density">Stars</label>
        <input id="density" type="range" min="0" max="80" value="42" />
      </div>
    </div>
  </div>

  <div class="hero">
    <h1>Plant light. Grow motion.</h1>
    <p>An orrery of color and calm. Tilt the space, set the speed, choose your sky.</p>
  </div>

  <div class="stage">
    <div class="sky" aria-hidden="true"></div>
    <div class="orrery-wrap">
      <div class="orrery">
        <div class="ring r1" style="--a:0deg;">
          <div class="track" aria-hidden="true"></div>
          <div class="planet p1" style="--dist: 44%;" aria-hidden="true"></div>
        </div>
        <div class="ring r2" style="--a:0deg;">
          <div class="track" aria-hidden="true"></div>
          <div class="planet p2" style="--dist: 36%;" aria-hidden="true"></div>
        </div>
        <div class="ring r3" style="--a:0deg;">
          <div class="track" aria-hidden="true"></div>
          <div class="planet p3" style="--dist: 28%;" aria-hidden="true"></div>
        </div>
        <button class="core" aria-label="Pulse the core"></button>
      </div>
    </div>
  </div>

  <div class="meta">
    <span class="quote">“Quiet orbits, bright minds.”</span>
    <span class="right"><span class="spark" aria-hidden="true"></span> Updated <span id="last-updated">Last updated: 2025-10-19 02:24:39 EST</span></span>
  </div>
</div>

<script>
  (function () {
    const root = document.getElementById('solstice-lab');
    const frame = root.querySelector('.frame');
    const sky = root.querySelector('.sky');
    const rings = Array.from(root.querySelectorAll('.ring'));
    const core = root.querySelector('.core');
    const playBtn = root.querySelector('#play');
    const pauseBtn = root.querySelector('#pause');
    const speed = root.querySelector('#speed');
    const density = root.querySelector('#density');
    const themeBtns = root.querySelectorAll('.chip[data-theme]');
    const stamp = root.querySelector('#last-updated');

    // Theme persistence
    const THEME_KEY = 'orbital-garden-54-theme';
    const SPEED_KEY = 'orbital-garden-54-speed';
    const DENSITY_KEY = 'orbital-garden-54-density';

    const savedTheme = localStorage.getItem(THEME_KEY) || 'aurora';
    applyTheme(savedTheme);
    themeBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        themeBtns.forEach(b => b.setAttribute('aria-pressed', 'false'));
        btn.setAttribute('aria-pressed', 'true');
        applyTheme(btn.dataset.theme);
        pulse(frame);
      });
      btn.addEventListener('keydown', e => {
        if (e.key === 'Enter' || e.key === ' ') { e.preventDefault(); btn.click(); }
      });
    });
    function applyTheme(name) {
      if (!name || name === 'aurora') root.removeAttribute('data-theme');
      else root.setAttribute('data-theme', name);
      localStorage.setItem(THEME_KEY, name);
    }

    // Time stamp
    try {
      const now = new Date();
      const fmt = new Intl.DateTimeFormat(undefined, { dateStyle: 'medium', timeStyle: 'short' });
      stamp.textContent = fmt.format(now);
    } catch {
      stamp.textContent = new Date().toLocaleString();
    }

    // Controls state
    const savedSpeed = Number(localStorage.getItem(SPEED_KEY) || speed.value);
    speed.value = savedSpeed;
    setSpeed(savedSpeed);

    const savedDensity = Number(localStorage.getItem(DENSITY_KEY) || density.value);
    density.value = savedDensity;

    speed.addEventListener('input', e => {
      const v = Number(e.target.value);
      setSpeed(v);
      localStorage.setItem(SPEED_KEY, String(v));
    });
    function setSpeed(v) {
      // map 0–200 to 0–2
      const s = Math.max(0, Math.min(200, v)) / 100;
      root.style.setProperty('--speed', String(s));
    }

    // Stars
    const MAX_STARS = 80;
    const stars = [];
    for (let i = 0; i < MAX_STARS; i++) {
      const d = document.createElement('div');
      d.className = 'star';
      d.style.opacity = (0.35 + Math.random() * 0.65).toFixed(2);
      d.style.animationDuration = (3 + Math.random() * 4).toFixed(2) + 's';
      d.style.animationDelay = (Math.random() * 4).toFixed(2) + 's';
      sky.appendChild(d);
      stars.push(d);
    }
    function layoutStars() {
      const r = sky.getBoundingClientRect();
      stars.forEach((s, i) => {
        const x = Math.random() * r.width;
        const y = Math.random() * r.height;
        const sc = 0.7 + Math.random() * 1.8;
        s.style.transform = `translate(${x}px, ${y}px) scale(${sc.toFixed(2)})`;
      });
    }
    function showStars(n) {
      for (let i = 0; i < MAX_STARS; i++) {
        stars[i].style.display = i < n ? 'block' : 'none';
      }
    }
    layoutStars();
    showStars(savedDensity);
    window.addEventListener('resize', layoutStars);
    density.addEventListener('input', e => {
      const n = Number(e.target.value);
      showStars(n);
      localStorage.setItem(DENSITY_KEY, String(n));
    });

    // Motion
    let frozen = false;
    const mq = window.matchMedia('(prefers-reduced-motion: reduce)');
    let prefersReduced = mq.matches;
    mq.addEventListener ? mq.addEventListener('change', applyPref) : mq.addListener(applyPref);

    playBtn.addEventListener('click', () => {
      frozen = false;
      playBtn.setAttribute('aria-pressed', 'true');
      pauseBtn.setAttribute('aria-pressed', 'false');
      root.style.setProperty('--pause', 'running');
      if (!prefersReduced) loop();
    });
    pauseBtn.addEventListener('click', () => {
      frozen = true;
      playBtn.setAttribute('aria-pressed', 'false');
      pauseBtn.setAttribute('aria-pressed', 'true');
      root.style.setProperty('--pause', 'paused');
      if (raf) cancelAnimationFrame(raf);
    });

    // Tilt
    function handleMove(e) {
      const r = frame.getBoundingClientRect();
      const x = (e.clientX - r.left) / r.width;
      const y = (e.clientY - r.top) / r.height;
      const ry = (x - 0.5) * 12;
      const rx = (0.5 - y) * 10;
      root.style.setProperty('--ry', ry.toFixed(2) + 'deg');
      root.style.setProperty('--rx', rx.toFixed(2) + 'deg');
    }
    frame.addEventListener('pointermove', handleMove, { passive: true });

    // Core pulse
    core.addEventListener('click', () => {
      core.animate(
        [
          { transform: 'translate(-50%,-50%) scale(1)', filter: 'brightness(1.12)' },
          { transform: 'translate(-50%,-50%) scale(1.06)', filter: 'brightness(1.2)' },
          { transform: 'translate(-50%,-50%) scale(1)', filter: 'brightness(1.0)' }
        ],
        { duration: 380, easing: 'ease-out' }
      );
      pulse(frame);
    });

    // Ring rotation loop
    let raf = null;
    let a1 = 0, a2 = 120, a3 = 240;
    function applyPref() {
      prefersReduced = mq.matches;
      root.style.setProperty('--pause', prefersReduced || frozen ? 'paused' : 'running');
      if (prefersReduced || frozen) { if (raf) cancelAnimationFrame(raf); }
      else { loop(); }
    }
    function loop() {
      if (prefersReduced || frozen) return;
      tick();
      raf = requestAnimationFrame(loop);
    }
    function tick() {
      const s = Number(getComputedStyle(root).getPropertyValue('--speed')) || 1;
      a1 = (a1 + 0.3 * s) % 360;
      a2 = (a2 - 0.2 * s + 360) % 360;
      a3 = (a3 + 0.45 * s) % 360;

      rings[0].style.transform = `rotate(${a1}deg)`;
      rings[1].style.transform = `rotate(${a2}deg)`;
      rings[2].style.transform = `rotate(${a3}deg)`;

      // subtle tick drift on tracks
      rings.forEach((r, i) => r.querySelector('.track').style.setProperty('--tick', ((i === 0 ? a1 : i === 1 ? a2 : a3) / 8) + 'deg'));
    }

    function pulse(el) {
      el.animate(
        [{ filter: 'brightness(1.1)' }, { filter: 'brightness(1)' }],
        { duration: 360, easing: 'ease-out' }
      );
    }

    applyPref();
    if (!prefersReduced && !frozen) loop();

    // Micro press animation for buttons
    root.querySelectorAll('.chip').forEach(b => {
      b.addEventListener('click', () => {
        b.animate([{ transform: 'translateY(0)' }, { transform: 'translateY(1px)' }, { transform: 'translateY(0)' }], { duration: 140, easing: 'ease-out' });
      });
    });
  })();
</script>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


