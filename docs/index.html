<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<section class="vibe2133">
  <style>
    .vibe2133 {
      --ink: #eaf3ff;
      --muted: #a7b6cc;
      --bg-a: #070a10;
      --bg-b: #0b1220;
      --line: rgba(255,255,255,0.08);
      --p1: 198 98% 62%;
      --p2: 268 88% 62%;
      --p3: 332 88% 62%;
      --radius: 20px;
      font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      color: var(--ink);
      position: relative;
      border-radius: var(--radius);
      overflow: hidden;
      isolation: isolate;
      padding: clamp(18px, 3.2vw, 34px);
      background:
        radial-gradient(1200px 700px at -20% -10%, rgba(110,160,255,0.12), transparent 55%),
        radial-gradient(1000px 800px at 120% 110%, rgba(255,120,180,0.10), transparent 60%),
        linear-gradient(180deg, var(--bg-a), var(--bg-b));
      box-shadow:
        inset 0 1px 0 rgba(255,255,255,0.05),
        0 40px 120px rgba(0,0,0,0.45);
    }

    /* Grid shimmer background */
    .vibe2133 .fabric {
      position: absolute; inset: 0; pointer-events: none; z-index: 0; opacity: 0.35;
      background-image:
        linear-gradient(0deg, var(--line) 1px, transparent 1px),
        linear-gradient(90deg, var(--line) 1px, transparent 1px);
      background-size: 30px 30px, 30px 30px;
      mask-image: radial-gradient(120% 120% at 50% 40%, #000 60%, transparent 100%);
      animation: v2133-grid 24s linear infinite;
    }
    @keyframes v2133-grid {
      0% { background-position: 0 0, 0 0; }
      100% { background-position: 30px 30px, 30px 30px; }
    }

    /* Layout */
    .vibe2133 .frame {
      position: relative; z-index: 2;
      display: grid;
      grid-template-columns: 1fr;
      gap: clamp(16px, 3vw, 28px);
      max-width: 1120px;
      margin: 0 auto;
    }

    .vibe2133 .mast {
      display: grid; grid-template-columns: 1fr auto; gap: 18px; align-items: end;
    }
    @media (max-width: 820px) {
      .vibe2133 .mast { grid-template-columns: 1fr; align-items: start; }
    }

    .vibe2133 h1 {
      margin: 0;
      font-weight: 900;
      letter-spacing: -0.02em;
      font-size: clamp(42px, 8.6vw, 108px);
      line-height: 0.88;
      background: linear-gradient(92deg,
        #fff 0%,
        hsl(var(--p1)) 26%,
        hsl(var(--p2)) 58%,
        hsl(var(--p3)) 92%);
      -webkit-background-clip: text; background-clip: text; color: transparent;
      filter: drop-shadow(0 8px 28px rgba(64,130,255,0.18));
      text-wrap: balance;
    }
    .vibe2133 .subtitle {
      margin: 6px 0 0;
      color: var(--muted);
      font-size: clamp(14px, 2.2vw, 18px);
      text-wrap: balance;
    }

    /* Chips / buttons */
    .vibe2133 .chips {
      display: flex; flex-wrap: wrap; gap: 10px; justify-content: flex-end;
    }
    .vibe2133 .chip {
      appearance: none; cursor: pointer;
      border-radius: 999px; border: 1px solid var(--line);
      padding: 10px 14px;
      background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
      color: var(--ink); font-weight: 800; letter-spacing: 0.01em; font-size: 12px;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.12), 0 10px 26px rgba(0,0,0,0.25);
      transition: transform 160ms ease, box-shadow 200ms ease, background 200ms ease;
    }
    .vibe2133 .chip:hover { transform: translateY(-2px); box-shadow: inset 0 1px 0 rgba(255,255,255,0.18), 0 16px 46px rgba(0,0,0,0.36); }
    .vibe2133 .chip.primary {
      background: linear-gradient(180deg, hsl(var(--p1)/0.25), hsl(var(--p2)/0.25));
      color: #08101e;
      text-shadow: 0 1px 0 rgba(255,255,255,0.35);
      border-color: hsl(var(--p1)/0.55);
      box-shadow: 0 18px 46px hsl(var(--p1)/0.35), inset 0 1px 0 rgba(255,255,255,0.3);
    }
    .vibe2133 .chip:focus-visible { outline: none; box-shadow: 0 0 0 3px hsl(var(--p2)/0.5), 0 14px 34px hsl(var(--p2)/0.25); }

    /* Poster */
    .vibe2133 .poster-wrap {
      position: relative;
      border-radius: calc(var(--radius) + 6px);
      overflow: hidden;
      border: 1px solid var(--line);
      background:
        radial-gradient(140% 100% at 50% 0%, rgba(255,255,255,0.05), transparent 50%),
        linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0));
      min-height: clamp(360px, 58vh, 720px);
      display: grid;
      place-items: center;
      transform-style: preserve-3d;
      perspective: 1000px;
    }
    .vibe2133 .poster {
      width: 100%; height: 100%; display: block; filter: saturate(115%) contrast(115%);
    }
    .vibe2133 .bezel {
      position: absolute; inset: 0; pointer-events: none;
      background:
        linear-gradient(0deg, rgba(255,255,255,0.08), transparent 20%),
        linear-gradient(180deg, rgba(0,0,0,0.14), transparent 35%),
        radial-gradient(120% 70% at 50% 100%, rgba(0,0,0,0.28), transparent 70%);
      mix-blend-mode: soft-light;
    }
    .vibe2133 .glow {
      --gx: 50%;
      --gy: 50%;
      position: absolute; inset: 0; pointer-events: none; opacity: 0.7;
      background:
        radial-gradient(380px 260px at var(--gx) var(--gy),
          hsl(var(--p2)/0.30), transparent 60%);
      mix-blend-mode: screen;
      transition: background-position 0.2s ease;
    }
    .vibe2133 .grain {
      position: absolute; inset: -40%; pointer-events: none; opacity: 0.08; z-index: 3;
      background-image:
        radial-gradient(2px 2px at 20% 30%, #fff 20%, transparent 21%),
        radial-gradient(2px 2px at 80% 60%, #fff 20%, transparent 21%),
        radial-gradient(1px 1px at 40% 80%, #fff 20%, transparent 21%),
        radial-gradient(1px 1px at 70% 20%, #fff 20%, transparent 21%);
      background-repeat: repeat;
      background-size: 200px 200px, 180px 180px, 160px 160px, 140px 140px;
      animation: v2133-grain 6s steps(60) infinite;
      mix-blend-mode: screen;
    }
    @keyframes v2133-grain {
      0% { transform: translate3d(0,0,0); }
      100% { transform: translate3d(10px,-10px,0); }
    }

    /* Controls */
    .vibe2133 .panel {
      display: grid; gap: 14px;
      border-top: 1px dashed var(--line);
      padding-top: 14px;
    }
    .vibe2133 .sliders {
      display: grid;
      grid-template-columns: repeat(3, minmax(160px,1fr));
      gap: 12px;
    }
    @media (max-width: 780px){ .vibe2133 .sliders { grid-template-columns: 1fr; } }
    .vibe2133 .slider {
      display: grid; grid-template-columns: 84px 1fr 44px; align-items: center; gap: 10px;
      color: var(--muted); font-size: 12px;
    }
    .vibe2133 .slider output { text-align: right; color: var(--ink); font-variant-numeric: tabular-nums; }

    .vibe2133 input[type="range"] {
      -webkit-appearance: none; appearance: none;
      height: 12px; border-radius: 999px; outline: none;
      background: linear-gradient(90deg, hsl(var(--p1)/0.25), hsl(var(--p3)/0.25));
      border: 1px solid var(--line);
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.18);
    }
    .vibe2133 input[type="range"]::-webkit-slider-thumb,
    .vibe2133 input[type="range"]::-moz-range-thumb {
      -webkit-appearance: none; appearance: none;
      width: 20px; height: 20px; border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff, #cfd9ee);
      border: 1px solid rgba(255,255,255,0.25);
      box-shadow: 0 8px 18px rgba(0,0,0,0.35);
      cursor: pointer;
    }

    .vibe2133 .meta {
      display: flex; flex-wrap: wrap; align-items: center; gap: 12px 18px; justify-content: space-between;
      color: var(--muted);
      font-size: 12px;
    }
    .vibe2133 .ticker {
      position: relative; overflow: hidden; flex: 1 1 auto; min-width: 200px;
      border-radius: 999px; border: 1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,0.05), rgba(255,255,255,0.02));
    }
    .vibe2133 .ticker .track {
      display: inline-block; white-space: nowrap; padding: 8px 14px;
      animation: v2133-marquee 28s linear infinite;
      color: #dbe8ff;
    }
    @keyframes v2133-marquee {
      from { transform: translateX(0); }
      to { transform: translateX(-50%); }
    }

    /* Motion preference */
    .vibe2133.paused .fabric { animation-play-state: paused; }
    @media (prefers-reduced-motion: reduce) {
      .vibe2133 * { animation-duration: 0.01ms !important; animation-iteration-count: 1 !important; transition: none !important; }
    }
  </style>

  <div class="fabric" aria-hidden="true"></div>

  <div class="frame">
    <div class="mast">
      <div>
        <h1>ATLAS</h1>
        <p class="subtitle">A kinetic line poster — quiet electricity, drawn by time and touch.</p>
      </div>
      <div class="chips">
        <button class="chip primary" id="modeBtn" aria-pressed="true">Mode: Prism</button>
        <button class="chip" id="pauseBtn" aria-pressed="false">Pause</button>
        <button class="chip" id="saveBtn">Save Still</button>
      </div>
    </div>

    <div class="poster-wrap" id="posterWrap" aria-label="Kinetic poster canvas">
      <canvas class="poster" id="poster" aria-hidden="true"></canvas>
      <div class="bezel" aria-hidden="true"></div>
      <div class="glow" id="glow" aria-hidden="true"></div>
      <div class="grain" aria-hidden="true"></div>
    </div>

    <div class="panel">
      <div class="sliders">
        <label class="slider">
          <span>Density</span>
          <input id="density" type="range" min="8" max="72" step="1" value="28" />
          <output id="densityOut">28</output>
        </label>
        <label class="slider">
          <span>Flux</span>
          <input id="flux" type="range" min="0.30" max="2.5" step="0.05" value="1.25" />
          <output id="fluxOut">1.25×</output>
        </label>
        <label class="slider">
          <span>Glow</span>
          <input id="glowAmt" type="range" min="0" max="28" step="1" value="14" />
          <output id="glowOut">14</output>
        </label>
      </div>

      <div class="meta">
        <div class="ticker" aria-hidden="true">
          <div class="track">
            “Make the invisible felt.”  •  Lines, like breath, return.  •  Drag to bend light.  •  Press M for mode, Space to pause.  •  
            “Make the invisible felt.”  •  Lines, like breath, return.  •  Drag to bend light.  •  Press M for mode, Space to pause.  •  
          </div>
        </div>
        <span id="last-updated">Last updated: 2026-01-23 00:25:51 EST</span>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const root = document.currentScript.closest('.vibe2133');
      const canvas = root.querySelector('#poster');
      const wrap = root.querySelector('#posterWrap');
      const ctx = canvas.getContext('2d');

      const glowEl = root.querySelector('#glow');
      const last = root.querySelector('#last-updated');

      // Controls
      const modeBtn = root.querySelector('#modeBtn');
      const pauseBtn = root.querySelector('#pauseBtn');
      const saveBtn = root.querySelector('#saveBtn');

      const density = root.querySelector('#density');
      const densityOut = root.querySelector('#densityOut');
      const flux = root.querySelector('#flux');
      const fluxOut = root.querySelector('#fluxOut');
      const glowAmt = root.querySelector('#glowAmt');
      const glowOut = root.querySelector('#glowOut');

      function setUpdated(){
        const now = new Date();
        const opts = { dateStyle: 'medium', timeStyle: 'short' };
        last.textContent = 'Last updated: ' + now.toLocaleString(undefined, opts);
      }
      setUpdated();

      // Size canvas
      let w=0,h=0,dpr=Math.min(2, window.devicePixelRatio||1);
      function size(){
        const r = wrap.getBoundingClientRect();
        w = Math.max(1, Math.floor(r.width));
        h = Math.max(1, Math.floor(r.height));
        canvas.width = Math.floor(w*dpr);
        canvas.height = Math.floor(h*dpr);
        canvas.style.width = w + 'px';
        canvas.style.height = h + 'px';
        ctx.setTransform(dpr,0,0,dpr,0,0);
      }
      size();
      const ro = new ResizeObserver(size);
      ro.observe(wrap);

      // Motion state
      let paused = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      root.classList.toggle('paused', paused);
      pauseBtn.setAttribute('aria-pressed', String(paused));
      pauseBtn.textContent = paused ? 'Resume' : 'Pause';

      // Mode
      let prism = true;

      // Pointer
      let tx = 0, ty = 0, mx = 0, my = 0;
      wrap.addEventListener('pointermove', (e)=>{
        const r = wrap.getBoundingClientRect();
        tx = e.clientX - r.left;
        ty = e.clientY - r.top;

        const px = (tx / r.width) * 100;
        const py = (ty / r.height) * 100;
        glowEl.style.setProperty('--gx', px + '%');
        glowEl.style.setProperty('--gy', py + '%');

        // Subtle poster tilt
        const rx = ((ty/r.height)-0.5) * -8;
        const ry = ((tx/r.width)-0.5) * 10;
        wrap.style.transform = `rotateX(${rx}deg) rotateY(${ry}deg) translateZ(0)`;
      });
      wrap.addEventListener('pointerleave', ()=>{
        tx=0; ty=0;
        wrap.style.transform = 'none';
      });

      // Palette from CSS
      function getPalette(){
        const s = getComputedStyle(root);
        const p1 = s.getPropertyValue('--p1').trim().split(' ').map(parseFloat);
        const p2 = s.getPropertyValue('--p2').trim().split(' ').map(parseFloat);
        const p3 = s.getPropertyValue('--p3').trim().split(' ').map(parseFloat);
        return {p1,p2,p3};
      }
      function hsl(h,s,l,a=1){ return `hsla(${h} ${s}% ${l}% / ${a})`; }
      function mix(a,b,t){ return a + (b-a)*t; }
      function lerp3(c1,c2,c3,t){
        if(t<0.5){ const k=t/0.5; return [mix(c1[0],c2[0],k), mix(c1[1],c2[1],k), mix(c1[2],c2[2],k)]; }
        const k=(t-0.5)/0.5; return [mix(c2[0],c3[0],k), mix(c2[1],c3[1],k), mix(c2[2],c3[2],k)];
      }

      // Light-weight pseudo-noise
      function nseed(x){ return Math.sin(x*127.1 + 311.7)*43758.5453 % 1; }
      function noise1D(x){
        const i = Math.floor(x), f = x - i;
        const a = nseed(i), b = nseed(i+1);
        const u = f*f*(3-2*f);
        return a*(1-u)+b*u;
      }

      // Animation
      let t = 0;
      function draw(){
        if(!paused){
          t += 0.012 * parseFloat(flux.value);
          // ease pointer
          mx += (tx - mx)*0.08;
          my += (ty - my)*0.08;

          // clear
          ctx.globalCompositeOperation = 'source-over';
          ctx.fillStyle = '#070a10';
          ctx.fillRect(0,0,w,h);

          // vignette
          const grd = ctx.createRadialGradient(w*0.5, h*0.55, Math.min(w,h)*0.15, w*0.5, h*0.6, Math.max(w,h)*0.9);
          grd.addColorStop(0, 'rgba(255,255,255,0.02)');
          grd.addColorStop(1, 'rgba(0,0,0,0.35)');
          ctx.fillStyle = grd;
          ctx.fillRect(0,0,w,h);

          const N = parseInt(density.value,10);
          const margin = Math.max(18, h*0.08);
          const usable = h - margin*2;
          const ampBase = Math.max(10, usable*0.06);
          const pal = getPalette();
          const glow = parseInt(glowAmt.value,10);

          ctx.globalCompositeOperation = 'lighter';

          for(let i=0;i<N;i++){
            const y0 = margin + (i/(N-1||1))*usable;
            const thickness = 0.8 + 1.2*Math.sin((i/N)*Math.PI);
            const step = 6;

            ctx.beginPath();
            for(let x=0;x<=w;x+=step){
              const k1 = 0.0042, k2 = 0.0095;
              const s1 = Math.sin(x*k1 + t*1.3 + i*0.22);
              const s2 = Math.sin(x*k2*1.7 - t*0.9 + i*0.12);
              const n = (noise1D(x*0.02 + i*3.1 + t*0.5) - 0.5)*2;

              const lensX = mx, lensY = my;
              const dx = (x - lensX), dy = (y0 - lensY);
              const dist2 = dx*dx + dy*dy;
              const sigma = (Math.min(w,h)*0.28);
              const lens = Math.exp(-dist2/(2*sigma*sigma));

              const amp = ampBase*(0.5 + 0.6*lens + 0.35*(i/N));
              const y = y0 + s1*amp*0.8 + s2*amp*0.5 + n*amp*0.35;

              if(x===0) ctx.moveTo(x,y);
              else ctx.lineTo(x,y);
            }

            // Color
            let col;
            if(prism){
              const tt = i/(N-1||1);
              const c = lerp3(pal.p1, pal.p2, pal.p3, tt);
              col = hsl(c[0], c[1], c[2], 0.92);
              ctx.shadowColor = hsl(c[0], c[1], c[2], 0.85);
            } else {
              col = 'rgba(235,245,255,0.9)';
              ctx.shadowColor = 'rgba(200,220,255,0.75)';
            }
            ctx.lineWidth = thickness;
            ctx.strokeStyle = col;
            ctx.shadowBlur = glow;
            ctx.stroke();
          }
        }
        requestAnimationFrame(draw);
      }
      draw();

      // UI bindings
      density.addEventListener('input', ()=> densityOut.textContent = density.value);
      flux.addEventListener('input', ()=> fluxOut.textContent = parseFloat(flux.value).toFixed(2) + '×');
      glowAmt.addEventListener('input', ()=> glowOut.textContent = String(parseInt(glowAmt.value,10)));

      modeBtn.addEventListener('click', ()=>{
        prism = !prism;
        modeBtn.setAttribute('aria-pressed', String(prism));
        modeBtn.textContent = 'Mode: ' + (prism ? 'Prism' : 'Mono');
      });

      pauseBtn.addEventListener('click', ()=>{
        paused = !paused;
        root.classList.toggle('paused', paused);
        pauseBtn.setAttribute('aria-pressed', String(paused));
        pauseBtn.textContent = paused ? 'Resume' : 'Pause';
      });

      saveBtn.addEventListener('click', ()=>{
        try {
          const url = canvas.toDataURL('image/png');
          const win = window.open();
          if (win) {
            win.document.write('<title>ATLAS — Still</title>');
            win.document.write('<img alt="ATLAS Still" style="width:100%;height:auto;display:block;background:#070a10" src="'+url+'">');
          }
        } catch(e) {
          alert('Popup blocked. Please allow popups to save the image.');
        }
      });

      // Shortcuts
      window.addEventListener('keydown', (e)=>{
        if(e.code==='Space'){ e.preventDefault(); pauseBtn.click(); }
        if(e.key==='m' || e.key==='M'){ modeBtn.click(); }
        if(e.key==='s' || e.key==='S'){ saveBtn.click(); }
      });
    })();
  </script>
</section>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


