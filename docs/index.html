<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<section class="v763" role="region" aria-label="Chroma Drift">
  <style>
    .v763{
      --h: 210;
      --ink: hsl(230 25% 14%);
      --muted: hsl(230 10% 42%);
      --bg-0: hsl(210 33% 98%);
      --bg-1: hsl(210 30% 94%);
      --accent: hsl(var(--h) 85% 56%);
      --accent-2: hsl(calc(var(--h) + 38) 82% 58%);
      --mx: .5;
      --my: .3;

      position: relative;
      display: grid;
      gap: clamp(20px, 4vw, 36px);
      grid-template-columns: 1.05fr 1.2fr;
      align-items: center;
      padding: clamp(22px, 5vw, 56px);
      border-radius: 28px;
      color: var(--ink);
      background:
        radial-gradient(900px 600px at calc(var(--mx)*100%) calc(var(--my)*100%),
          color-mix(in oklab, var(--accent) 14%, transparent),
          transparent 60%),
        radial-gradient(700px 400px at 85% 10%,
          color-mix(in oklab, var(--accent-2) 12%, transparent),
          transparent 70%),
        linear-gradient(180deg, var(--bg-0), var(--bg-1));
      box-shadow:
        0 30px 80px rgba(0,0,0,.10),
        inset 0 1px 0 rgba(255,255,255,.5);
      overflow: hidden;
      isolation: isolate;
      font: 500 16px/1.6 ui-sans-serif, -apple-system, system-ui, Segoe UI, Inter, Roboto, "Helvetica Neue", Arial;
    }
    @media (max-width: 980px){
      .v763{ grid-template-columns: 1fr; }
    }
    .v763.night{
      --ink: hsl(0 0% 96%);
      --muted: hsl(220 8% 75%);
      --bg-0: hsl(228 28% 10%);
      --bg-1: hsl(228 28% 7%);
    }

    /* Grain + soft glare */
    .v763 .grain{
      position:absolute; inset:-18%; z-index:0; pointer-events:none;
      background:
        radial-gradient(220px 160px at 12% 18%, rgba(255,255,255,.24), transparent 60%),
        radial-gradient(320px 220px at 88% 14%, rgba(255,255,255,.16), transparent 70%);
      mix-blend-mode: soft-light; opacity:.7;
    }
    .v763 .grain::after{
      content:""; position:absolute; inset:0;
      background-image:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="140" height="140" viewBox="0 0 140 140"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.7" numOctaves="2" stitchTiles="stitch"/></filter><rect width="100%" height="100%" filter="url(%23n)" opacity="0.035"/></svg>');
      background-size: 180px 180px;
      mix-blend-mode:multiply;
    }

    /* Copy */
    .v763 .kicker{
      display:inline-flex; align-items:center; gap:8px;
      color: var(--muted);
      background: linear-gradient(180deg, rgba(0,0,0,.04), rgba(0,0,0,0));
      border: 1px solid rgba(0,0,0,.06);
      padding: 6px 10px; border-radius: 999px; font-size:12px; letter-spacing:.28px;
      backdrop-filter: blur(2px);
    }
    .v763.night .kicker{ background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,0)); border-color: rgba(255,255,255,.14); }

    .v763 .title{
      margin: 10px 0 8px;
      font-weight: 900;
      font-size: clamp(40px, 7.2vw, 96px);
      line-height: .9;
      letter-spacing: -0.02em;
      background: linear-gradient(92deg, #111 0%, color-mix(in oklab, var(--accent) 70%, #0000) 40%, color-mix(in oklab, var(--accent-2) 60%, #0000) 100%);
      -webkit-background-clip: text; background-clip: text; color: transparent;
    }
    .v763.night .title{ background: linear-gradient(92deg, #fff 0%, color-mix(in oklab, var(--accent) 75%, #fff) 50%, #fff 100%); -webkit-background-clip:text; background-clip:text; }

    .v763 .sub{ margin: 0 0 16px; color: var(--muted); font-size: clamp(14px, 1.6vw, 18px); max-width: 60ch; }

    /* Controls */
    .v763 .controls{ display:flex; flex-wrap:wrap; gap:10px; align-items:center; }
    .v763 .btn{
      appearance:none; border:none; cursor:pointer; border-radius:14px; padding:12px 16px;
      font-weight:700; letter-spacing:.2px; color: #0b0e15;
      background: linear-gradient(180deg, var(--accent), var(--accent-2));
      box-shadow: 0 12px 28px color-mix(in oklab, var(--accent) 30%, transparent);
      transition: transform .15s ease, box-shadow .3s ease, filter .3s ease;
      will-change: transform, filter;
    }
    .v763 .btn:hover{ transform: translateY(-2px); box-shadow: 0 18px 36px color-mix(in oklab, var(--accent) 45%, transparent); }
    .v763 .btn.ghost{
      background: linear-gradient(180deg, rgba(0,0,0,.04), rgba(0,0,0,0));
      color: var(--ink);
      border: 1px solid rgba(0,0,0,.08);
      box-shadow: none;
    }
    .v763.night .btn.ghost{ background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)); color: var(--ink); border-color: rgba(255,255,255,.14); }

    .v763 .knob{
      display:flex; align-items:center; gap:10px; padding:10px 12px;
      border-radius:12px; background: linear-gradient(180deg, rgba(0,0,0,.04), rgba(0,0,0,0));
      border:1px solid rgba(0,0,0,.08);
    }
    .v763.night .knob{ background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)); border-color: rgba(255,255,255,.14); }
    .v763 .lab{ font-size:12px; color: var(--muted); }
    .v763 .range{
      -webkit-appearance:none; appearance:none; width: min(360px, 64vw); height:8px; border-radius:999px; background: rgba(0,0,0,.08);
    }
    .v763.night .range{ background: rgba(255,255,255,.16); }
    .v763 .range::-webkit-slider-thumb{
      -webkit-appearance:none; appearance:none; width:22px; height:22px; border-radius:50%;
      background: conic-gradient(from 0deg, var(--accent), var(--accent-2), var(--accent));
      border: 2px solid #fff9; box-shadow: 0 4px 16px color-mix(in oklab, var(--accent) 45%, transparent);
    }
    .v763 .range::-moz-range-track{ height:8px; background: rgba(0,0,0,.08); border-radius:999px; }
    .v763 .range::-moz-range-thumb{ width:22px; height:22px; border-radius:50%; border:2px solid #fff9; background: conic-gradient(from 0deg, var(--accent), var(--accent-2), var(--accent)); }

    /* Scene (Canvas) */
    .v763 .scene{
      position: relative;
      border-radius: 22px;
      overflow: hidden;
      aspect-ratio: 4 / 3;
      min-height: 280px;
      background:
        radial-gradient(50% 50% at 50% 50%, color-mix(in oklab, var(--accent) 10%, transparent), transparent 70%),
        linear-gradient(180deg, rgba(255,255,255,.5), rgba(255,255,255,0));
      box-shadow:
        inset 0 0 0 1px rgba(0,0,0,.06),
        0 18px 48px rgba(0,0,0,.12);
    }
    .v763.night .scene{
      background:
        radial-gradient(50% 50% at 50% 50%, color-mix(in oklab, var(--accent-2) 14%, transparent), transparent 70%),
        linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,0));
      box-shadow:
        inset 0 0 0 1px rgba(255,255,255,.08),
        0 18px 48px rgba(0,0,0,.3);
    }
    .v763 canvas{ width:100%; height:100%; display:block; }

    .v763 .gloss{
      position:absolute; inset:0; pointer-events:none; z-index:2;
      background:
        linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,0) 35%),
        radial-gradient(70% 40% at 10% 0%, rgba(255,255,255,.28), transparent 60%);
      mix-blend-mode: soft-light;
    }

    /* Footer */
    .v763 .foot{ display:flex; justify-content:space-between; align-items:center; margin-top:6px; flex-wrap:wrap; gap:10px; color: var(--muted); }
    .v763 .badge{
      padding:6px 10px; border-radius:999px; font-size:12px; letter-spacing:.3px;
      background: linear-gradient(180deg, rgba(0,0,0,.04), rgba(0,0,0,0));
      border: 1px solid rgba(0,0,0,.08);
    }
    .v763.night .badge{ background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02)); border-color: rgba(255,255,255,.14); }

    /* Reduced motion: freeze animation but keep visuals */
    @media (prefers-reduced-motion: reduce){
      .v763 .btn#pulse{ display:none; }
    }
  </style>

  <div class="grain" aria-hidden="true"></div>

  <div class="intro">
    <span class="kicker" aria-hidden="true">Chroma Drift • generative calm</span>
    <h1 class="title">A moving print.</h1>
    <p class="sub">A living canvas of light. Drag to stir the field. Tune the hue. Pulse to bloom.</p>

    <div class="controls" role="group" aria-label="Primary actions">
      <button class="btn" id="pulse">Pulse</button>
      <button class="btn ghost" id="theme">Night</button>
      <button class="btn ghost" id="seed">New Seed</button>
    </div>

    <div class="controls" style="margin-top:12px;" role="group" aria-label="Hue control">
      <div class="knob">
        <span class="lab">Hue</span>
        <label for="hue" class="lab sr-only">Adjust hue</label>
        <input id="hue" class="range" type="range" min="0" max="360" value="210" />
        <span class="lab" id="hue-name">Tide</span>
      </div>
    </div>
  </div>

  <div class="scene" aria-hidden="true">
    <canvas id="sky"></canvas>
    <div class="gloss"></div>
  </div>

  <div class="foot">
    <span class="badge">v763 • Chroma Drift</span>
    <span class="badge"><span id="last-updated">Last updated: 2025-11-20 09:18:25 EST</span></span>
  </div>

  <script>
    (function(){
      const root = document.currentScript.closest('.v763');
      const canvas = root.querySelector('#sky');
      const ctx = canvas.getContext('2d');
      const btnTheme = root.querySelector('#theme');
      const btnSeed = root.querySelector('#seed');
      const btnPulse = root.querySelector('#pulse');
      const hue = root.querySelector('#hue');
      const hueName = root.querySelector('#hue-name');
      const updated = root.querySelector('#last-updated');

      // Timestamp
      try{
        const fmt = new Intl.DateTimeFormat(undefined, { dateStyle: 'medium', timeStyle: 'short' });
        updated.textContent = 'Last updated: ' + fmt.format(new Date());
      }catch(e){
        updated.textContent = 'Last updated: ' + new Date().toLocaleString();
      }

      // Hue naming
      const stops = [
        {t: 20, n: 'Ember'},
        {t: 70, n: 'Dawn'},
        {t: 140, n: 'Spring'},
        {t: 200, n: 'Tide'},
        {t: 260, n: 'Aether'},
        {t: 320, n: 'Bloom'},
        {t: 360, n: 'Solstice'}
      ];
      function nameForHue(v){
        const h = Number(v)%360;
        for (let i=0;i<stops.length;i++) if (h < stops[i].t) return stops[i].n;
        return 'Solstice';
      }
      function setHue(v){
        root.style.setProperty('--h', v);
        hueName.textContent = nameForHue(v);
        recolor();
      }

      // Theme
      let night = false;
      btnTheme.addEventListener('click', () => {
        night = !night;
        root.classList.toggle('night', night);
        btnTheme.textContent = night ? 'Day' : 'Night';
      });

      // Canvas sizing
      let dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
      function fit(){
        const r = canvas.getBoundingClientRect();
        canvas.width = Math.max(1, Math.floor(r.width * dpr));
        canvas.height = Math.max(1, Math.floor(r.height * dpr));
        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
      }
      new ResizeObserver(fit).observe(canvas);
      fit();

      // Particles
      let seed = Math.random() * 1000;
      const mobile = matchMedia('(max-width: 768px)').matches;
      const prefersReduce = matchMedia('(prefers-reduced-motion: reduce)').matches;
      let COUNT = prefersReduce ? (mobile ? 40 : 70) : (mobile ? 120 : 200);
      let particles = [];
      let pulse = false;
      let t0 = performance.now();
      let mouse = null;

      function rand(n=1){ return Math.random() * n; }

      function makeParticle(i){
        const r = canvas.getBoundingClientRect();
        return {
          x: rand(r.width),
          y: rand(r.height),
          vx: (rand(2)-1) * 0.3,
          vy: (rand(2)-1) * 0.3,
          s: rand(1.2) + 0.6,
          hOff: rand(60) - 30,
          a: 0.6 + rand(0.35)
        };
      }

      function rebuild(){
        particles = Array.from({length: COUNT}, (_,i)=>makeParticle(i));
      }

      function recolor(){
        // no-op placeholder; particles color computed per draw from current hue
      }

      // Interactions
      hue.addEventListener('input', e => setHue(e.target.value));
      setHue(hue.value);

      btnSeed.addEventListener('click', () => {
        seed = Math.random() * 1000;
        // shift hue a bit for fun
        const next = (parseFloat(getComputedStyle(root).getPropertyValue('--h')) + Math.floor(rand(300))) % 360;
        hue.value = next;
        setHue(next);
        rebuild();
        burst();
      });

      btnPulse.addEventListener('click', () => {
        pulse = !pulse;
        btnPulse.textContent = pulse ? 'Pause' : 'Pulse';
        if (pulse) burst();
      });

      function burst(){
        // brief amplitude kick
        ampKick = 1.0;
      }

      // Pointer
      root.addEventListener('pointermove', e => {
        const rect = canvas.getBoundingClientRect();
        mouse = { x: e.clientX - rect.left, y: e.clientY - rect.top };
        const x = (e.clientX - rect.left) / rect.width;
        const y = (e.clientY - rect.top) / rect.height;
        root.style.setProperty('--mx', x.toFixed(4));
        root.style.setProperty('--my', y.toFixed(4));
      }, { passive: true });
      root.addEventListener('pointerleave', () => { mouse = null; });

      rebuild();

      // Flow field helpers
      function field(x, y, t){
        const s = 0.0018;
        const v =
          Math.sin((x + seed) * s + t * 0.8) +
          Math.cos((y - seed) * s * 1.2 - t * 0.6);
        return v;
      }

      // Animation
      let ampKick = 0;
      function tick(now){
        const dt = Math.min(0.05, (now - t0) / 1000);
        t0 = now;

        if (prefersReduce){
          drawStatic();
          return;
        }

        // gentle fade
        ctx.globalCompositeOperation = 'source-over';
        const bg = getComputedStyle(root).getPropertyValue('--bg-1').trim() || '#fff';
        ctx.fillStyle = bg;
        ctx.globalAlpha = 0.08;
        ctx.fillRect(0,0,canvas.width,canvas.height);
        ctx.globalAlpha = 1;

        const baseHue = parseFloat(getComputedStyle(root).getPropertyValue('--h')) || 210;

        // draw particles
        ctx.globalCompositeOperation = 'lighter';
        const r = canvas.getBoundingClientRect();

        particles.forEach(p => {
          const tt = now * 0.001;
          const ang = field(p.x, p.y, tt);
          const pulseBoost = pulse ? (Math.sin(tt*3) * 0.5 + 0.5) : 0;
          const kick = ampKick * 1.5;

          p.vx += Math.cos(ang) * (0.04 + pulseBoost*0.06 + kick*0.06);
          p.vy += Math.sin(ang) * (0.04 + pulseBoost*0.06 + kick*0.06);

          // pointer attraction
          if (mouse){
            const dx = mouse.x - p.x;
            const dy = mouse.y - p.y;
            const d2 = Math.max(36, dx*dx + dy*dy);
            const f = 22 / d2;
            p.vx += dx * f * 0.25;
            p.vy += dy * f * 0.25;
          }

          // damping
          p.vx *= 0.96;
          p.vy *= 0.96;

          p.x += p.vx;
          p.y += p.vy;

          // wrap
          if (p.x < -8) p.x = r.width + 8;
          if (p.x > r.width + 8) p.x = -8;
          if (p.y < -8) p.y = r.height + 8;
          if (p.y > r.height + 8) p.y = -8;

          const h = (baseHue + p.hOff) % 360;
          const l = 60 + Math.sin((p.x + p.y + seed)*0.004) * 10;
          ctx.fillStyle = `hsla(${h}, 85%, ${l}%, ${p.a})`;

          ctx.beginPath();
          ctx.arc(p.x, p.y, p.s * (1 + pulseBoost*0.8 + ampKick), 0, Math.PI*2);
          ctx.fill();
        });

        ampKick = Math.max(0, ampKick - dt * 1.6);
        requestAnimationFrame(tick);
      }

      function drawStatic(){
        // One-shot pleasant scatter for reduced motion
        ctx.clearRect(0,0,canvas.width,canvas.height);
        ctx.globalCompositeOperation = 'lighter';
        const baseHue = parseFloat(getComputedStyle(root).getPropertyValue('--h')) || 210;
        for (let i=0; i<Math.min(90, COUNT); i++){
          const x = Math.random()*canvas.width;
          const y = Math.random()*canvas.height;
          const s = Math.random()*2 + 0.6;
          const h = (baseHue + Math.random()*60 - 30) % 360;
          ctx.fillStyle = `hsla(${h}, 85%, ${60 + Math.random()*18}%, ${0.6 + Math.random()*0.35})`;
          ctx.beginPath();
          ctx.arc(x/dpr, y/dpr, s, 0, Math.PI*2);
          ctx.fill();
        }
      }

      requestAnimationFrame(tick);
    })();
  </script>
</section>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


