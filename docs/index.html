<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<div id="atelier2103" aria-label="Gradient Atelier 2103" data-scheme="dark" data-play="true">
  <style>
    #atelier2103 {
      --h1: 210;
      --h2: 320;
      --h3: 36;
      --fg: #eaf1ff;
      --fg-soft: #b7c4e6;
      --bg-0: #070b16;
      --bg-1: #0e1526;
      --panel: rgba(255,255,255,0.06);
      --stroke: rgba(255,255,255,0.12);
      --glow: hsla(var(--h1), 90%, 60%, 0.35);
      position: relative;
      border-radius: 28px;
      padding: clamp(22px, 4.5vw, 48px);
      color: var(--fg);
      background:
        radial-gradient(1200px 700px at 10% -10%, hsla(var(--h1), 90%, 60%, 0.18), transparent 60%),
        radial-gradient(1200px 700px at 120% 110%, hsla(var(--h2), 90%, 60%, 0.14), transparent 60%),
        linear-gradient(180deg, var(--bg-0), var(--bg-1));
      box-shadow: 0 30px 90px rgba(0,0,0,0.45), inset 0 1px 0 rgba(255,255,255,0.06);
      font: 500 16px/1.6 ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, sans-serif;
      overflow: hidden;
      isolation: isolate;
    }
    #atelier2103[data-scheme="light"] {
      --fg: #0c1222;
      --fg-soft: #455074;
      --bg-0: #f8fbff;
      --bg-1: #eef4ff;
      --panel: rgba(255,255,255,0.8);
      --stroke: rgba(12,18,32,0.12);
      background:
        radial-gradient(1000px 600px at -10% -10%, hsla(var(--h1), 90%, 62%, 0.30), transparent 55%),
        radial-gradient(1000px 600px at 120% 110%, hsla(var(--h3), 90%, 60%, 0.22), transparent 55%),
        linear-gradient(180deg, var(--bg-0), var(--bg-1));
      box-shadow: 0 30px 90px rgba(10,40,120,0.16), inset 0 1px 0 rgba(255,255,255,0.8);
    }
    #atelier2103 * { box-sizing: border-box; }

    /* Canvas layers */
    #atelier2103 .weave {
      position: absolute; inset: 0; z-index: 0;
      filter: saturate(1.05) contrast(1.02);
    }
    #atelier2103 .grain {
      position: absolute; inset: 0; pointer-events: none; z-index: 1;
      background:
        radial-gradient(1200px 1200px at -20% -10%, rgba(255,255,255,0.06), transparent 60%),
        radial-gradient(1200px 1200px at 120% 110%, rgba(255,255,255,0.05), transparent 60%);
      mix-blend-mode: soft-light;
      opacity: .6;
    }

    /* Overlay content */
    #atelier2103 .overlay {
      position: relative; z-index: 2;
    }
    #atelier2103 .badge {
      display: inline-flex; align-items: center; gap: 10px;
      padding: 8px 14px;
      border: 1px solid var(--stroke);
      background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
      backdrop-filter: blur(8px);
      border-radius: 999px;
      text-transform: uppercase;
      letter-spacing: .14em;
      font-size: 12px;
      color: var(--fg-soft);
      box-shadow: 0 10px 30px rgba(0,0,0,0.18), inset 0 1px 0 rgba(255,255,255,0.08);
    }
    #atelier2103 .badge .bead {
      width: 10px; height: 10px; border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, hsl(var(--h1), 90%, 60%), rgba(255,255,255,0.25));
      box-shadow: 0 0 14px var(--glow);
    }
    #atelier2103 h1 {
      margin: 16px 0 10px;
      font-size: clamp(42px, 7.6vw, 92px);
      line-height: 1;
      letter-spacing: -0.02em;
      font-weight: 850;
      background: linear-gradient(90deg,
        hsl(var(--h1), 90%, 88%),
        hsl(var(--h2), 90%, 70%),
        hsl(var(--h3), 90%, 72%));
      -webkit-background-clip: text; background-clip: text; color: transparent;
      text-shadow: 0 16px 50px var(--glow);
    }
    #atelier2103 .lede {
      margin: 0 0 24px 0;
      max-width: 70ch;
      color: var(--fg-soft);
      font-size: clamp(14px, 1.8vw, 18px);
      line-height: 1.7;
    }

    /* Palette chips */
    #atelier2103 .palette {
      display: flex; flex-wrap: wrap; gap: 10px;
      margin: 8px 0 16px;
    }
    #atelier2103 .chip {
      display: inline-flex; align-items: center; gap: 10px;
      padding: 10px 12px; border-radius: 999px; border: 1px solid var(--stroke);
      background: linear-gradient(180deg, var(--panel), rgba(255,255,255,0.02));
      cursor: pointer; user-select: none; font-size: 12px; letter-spacing: .08em; text-transform: uppercase;
      box-shadow: 0 8px 24px rgba(0,0,0,0.24), inset 0 1px 0 rgba(255,255,255,0.06);
      transition: transform .2s ease, box-shadow .2s ease;
    }
    #atelier2103 .chip:hover { transform: translateY(-1px); box-shadow: 0 16px 34px rgba(0,0,0,0.28); }
    #atelier2103 .chip[aria-selected="true"] { outline: 2px solid hsl(var(--h1), 90%, 60%); outline-offset: 2px; }
    #atelier2103 .swatch {
      width: 24px; height: 24px; border-radius: 7px; border: 1px solid var(--stroke);
      box-shadow: inset 0 0 0 4px rgba(255,255,255,0.06);
    }
    #atelier2103 .chip.dawn .swatch { background: linear-gradient(135deg, hsl(28,90%,68%), hsl(350,85%,70%)); }
    #atelier2103 .chip.noon .swatch { background: linear-gradient(135deg, hsl(196,90%,62%), hsl(140,80%,55%)); }
    #atelier2103 .chip.dusk .swatch { background: linear-gradient(135deg, hsl(265,90%,68%), hsl(320,85%,70%)); }
    #atelier2103 .chip.night .swatch { background: linear-gradient(135deg, hsl(220,90%,65%), hsl(260,80%,70%)); }

    /* Controls */
    #atelier2103 .controls {
      margin-top: clamp(12px, 2.8vw, 28px);
      display: grid; grid-template-columns: 1fr auto auto auto auto; gap: 12px; align-items: center;
    }
    #atelier2103 .sliderWrap {
      display: grid; grid-template-columns: 70px 1fr; gap: 10px;
      padding: 12px; border-radius: 16px; border: 1px solid var(--stroke);
      background: linear-gradient(180deg, var(--panel), rgba(255,255,255,0.02));
      box-shadow: 0 10px 24px rgba(0,0,0,0.24), inset 0 1px 0 rgba(255,255,255,0.06);
      color: var(--fg-soft);
    }
    #atelier2103 .slider {
      appearance: none; width: 100%; height: 14px; border-radius: 999px;
      background: linear-gradient(90deg,
        hsl(var(--h1), 90%, 60%),
        hsl(var(--h2), 90%, 60%),
        hsl(var(--h3), 90%, 60%));
      border: 1px solid var(--stroke);
      outline: none;
      box-shadow: inset 0 1px 0 rgba(255,255,255,0.08);
    }
    #atelier2103 .slider::-webkit-slider-thumb {
      appearance: none; width: 22px; height: 22px; border-radius: 50%;
      background: radial-gradient(circle at 35% 35%, #fff, hsl(var(--h2), 90%, 60%));
      border: 1px solid rgba(255,255,255,0.7);
      box-shadow: 0 10px 24px hsla(var(--h2),90%,50%,0.45), inset 0 0 0 3px rgba(255,255,255,0.4);
      cursor: pointer;
    }
    #atelier2103 .btn {
      display: inline-flex; align-items: center; gap: 10px;
      padding: 10px 14px; border-radius: 14px; font-weight: 600;
      color: var(--fg);
      background: linear-gradient(180deg, var(--panel), rgba(255,255,255,0.02));
      border: 1px solid var(--stroke);
      box-shadow: 0 8px 22px rgba(0,0,0,0.22), inset 0 1px 0 rgba(255,255,255,0.06);
      transition: transform .2s ease, box-shadow .2s ease;
      cursor: pointer; user-select: none;
    }
    #atelier2103 .btn:hover { transform: translateY(-1px); box-shadow: 0 16px 34px rgba(0,0,0,0.28); }
    #atelier2103 .btn .pulse {
      width: 9px; height: 9px; border-radius: 50%;
      background: radial-gradient(circle at 35% 35%, hsl(var(--h1),90%,60%), hsla(var(--h1), 90%, 50%, 0.7));
      box-shadow: 0 0 10px var(--glow);
      animation: pulse2103 3s ease-in-out infinite;
    }
    @keyframes pulse2103 {
      0%,100% { transform: scale(1); box-shadow: 0 0 10px var(--glow); }
      50% { transform: scale(1.22); box-shadow: 0 0 20px hsla(var(--h2),95%,60%,.9); }
    }

    /* Footer */
    #atelier2103 .foot {
      display: flex; justify-content: space-between; align-items: center; gap: 12px;
      margin-top: 22px; padding-top: 16px; border-top: 1px dashed var(--stroke);
      color: var(--fg-soft); font-size: 13px;
    }
    #atelier2103 .stamp {
      display: inline-flex; align-items: center; gap: 10px;
      padding: 8px 12px; border-radius: 12px;
      border: 1px solid var(--stroke);
      background: linear-gradient(180deg, var(--panel), rgba(255,255,255,0.02));
      box-shadow: 0 6px 18px rgba(0,0,0,0.2);
    }

    /* Ripples */
    #atelier2103 .ripple {
      position: absolute; width: 12px; height: 12px; border-radius: 50%;
      pointer-events: none;
      background: radial-gradient(circle, hsl(var(--h2), 90%, 60%) 0%, transparent 70%);
      mix-blend-mode: screen; opacity: 0.7; transform: translate(-50%, -50%) scale(0.6);
      animation: ripple2103 900ms ease-out forwards;
      z-index: 3;
    }
    @keyframes ripple2103 { to { transform: translate(-50%, -50%) scale(7); opacity: 0; } }

    /* Motion pause */
    #atelier2103[data-play="false"] .btn .pulse { animation-play-state: paused; }

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce) {
      #atelier2103 .btn .pulse { animation: none !important; }
    }
  </style>

  <canvas class="weave" aria-hidden="true"></canvas>
  <div class="grain" aria-hidden="true"></div>

  <div class="overlay" role="region" aria-label="Gradient Atelier controls and description">
    <div class="badge"><span class="bead" aria-hidden="true"></span> Gradient Atelier • 2103</div>
    <h1>Weave the light.</h1>
    <p class="lede">Threads of color drift and respond to your touch. Remix the loom, set the tempo, and let the canvas breathe.</p>

    <div class="palette" role="tablist" aria-label="Palettes">
      <button class="chip dawn" role="tab" aria-selected="false" data-palette="dawn">
        <span class="swatch" aria-hidden="true"></span> Dawn
      </button>
      <button class="chip noon" role="tab" aria-selected="true" data-palette="noon">
        <span class="swatch" aria-hidden="true"></span> Noon
      </button>
      <button class="chip dusk" role="tab" aria-selected="false" data-palette="dusk">
        <span class="swatch" aria-hidden="true"></span> Dusk
      </button>
      <button class="chip night" role="tab" aria-selected="false" data-palette="night">
        <span class="swatch" aria-hidden="true"></span> Night
      </button>
    </div>

    <div class="controls" role="group" aria-label="Controls">
      <div class="sliderWrap" role="region" aria-label="Tempo">
        <div>Tempo</div>
        <input id="tempo2103" class="slider" type="range" min="0" max="100" value="55" aria-label="Tempo slider">
      </div>
      <button id="theme2103" class="btn" type="button" aria-pressed="true" title="Toggle light/dark theme">
        <span class="pulse" aria-hidden="true"></span> Theme
      </button>
      <button id="motion2103" class="btn" type="button" aria-pressed="true" title="Pause or play motion">
        <span class="pulse" aria-hidden="true"></span> Pause
      </button>
      <button id="remix2103" class="btn" type="button" title="Remix colors">
        <span class="pulse" aria-hidden="true"></span> Remix
      </button>
      <button id="snap2103" class="btn" type="button" title="Save a snapshot">
        <span class="pulse" aria-hidden="true"></span> Snapshot
      </button>
    </div>

    <div class="foot">
      <div class="stamp">Edition 2103 • <span id="last-updated">Last updated: 2026-01-21 12:52:53 EST</span></div>
      <div class="hint" aria-hidden="true">Tip: click and drag to bend the threads; try switching palettes.</div>
    </div>
  </div>

  <script>
    (function(){
      const root = document.getElementById('atelier2103');
      const canvas = root.querySelector('.weave');
      const ctx = canvas.getContext('2d', { alpha: true });
      const tempo = root.querySelector('#tempo2103');
      const themeBtn = root.querySelector('#theme2103');
      const motionBtn = root.querySelector('#motion2103');
      const remixBtn = root.querySelector('#remix2103');
      const snapBtn = root.querySelector('#snap2103');
      const chips = Array.from(root.querySelectorAll('.chip'));
      const updated = root.querySelector('#last-updated');

      // Timestamp
      try {
        const now = new Date();
        const opts = { year:'numeric', month:'short', day:'2-digit', hour:'2-digit', minute:'2-digit' };
        updated.textContent = new Intl.DateTimeFormat(undefined, opts).format(now);
      } catch { updated.textContent = new Date().toLocaleString(); }

      // Palettes
      const palettes = {
        dawn:  { h1: 28,  h2: 350, h3: 12,  scheme: 'light' },
        noon:  { h1: 196, h2: 140, h3: 36,  scheme: 'light' },
        dusk:  { h1: 265, h2: 320, h3: 14,  scheme: 'dark'  },
        night: { h1: 220, h2: 260, h3: 180, scheme: 'dark'  }
      };
      const applyPalette = ({h1,h2,h3,scheme}) => {
        root.style.setProperty('--h1', h1);
        root.style.setProperty('--h2', h2);
        root.style.setProperty('--h3', h3);
        root.setAttribute('data-scheme', scheme);
        themeBtn.setAttribute('aria-pressed', scheme === 'dark' ? 'true' : 'false');
      };
      chips.forEach(chip => {
        chip.addEventListener('click', () => {
          chips.forEach(c => c.setAttribute('aria-selected','false'));
          chip.setAttribute('aria-selected','true');
          const data = palettes[chip.dataset.palette];
          applyPalette(data);
          randomizeThreads();
        });
      });

      // Theme toggle
      themeBtn.addEventListener('click', () => {
        const isDark = root.getAttribute('data-scheme') === 'dark';
        root.setAttribute('data-scheme', isDark ? 'light' : 'dark');
        themeBtn.setAttribute('aria-pressed', (!isDark).toString());
      });

      // Motion toggle
      const setPlay = (play) => {
        root.setAttribute('data-play', play ? 'true' : 'false');
        motionBtn.setAttribute('aria-pressed', play ? 'true' : 'false');
        motionBtn.lastChild.nodeValue = play ? ' Pause' : ' Play';
      };
      motionBtn.addEventListener('click', () => {
        const now = root.getAttribute('data-play') !== 'true';
        setPlay(now);
      });

      // Ripple
      root.addEventListener('pointerdown', (e) => {
        const r = document.createElement('span');
        r.className = 'ripple';
        r.style.left = e.clientX + 'px';
        r.style.top = e.clientY + 'px';
        root.appendChild(r);
        setTimeout(() => r.remove(), 900);
      });

      // Weave engine
      let width = 1, height = 1, ratio = 1;
      let raf = null, lastT = 0;
      const pointer = { x: 0, y: 0, down: false };
      const strands = [];
      const STRAND_COUNT = 12;
      const PTS = 48;

      const resize = () => {
        const rect = root.getBoundingClientRect();
        ratio = Math.min(window.devicePixelRatio || 1, 2);
        width = Math.max(1, Math.floor(rect.width));
        height = Math.max(1, Math.floor(rect.height));
        canvas.width = Math.floor(width * ratio);
        canvas.height = Math.floor(height * ratio);
        canvas.style.width = width + 'px';
        canvas.style.height = height + 'px';
        ctx.setTransform(ratio, 0, 0, ratio, 0, 0);
      };

      const lerp = (a,b,t)=>a+(b-a)*t;
      const rand = (a,b)=>a+Math.random()*(b-a);
      const TAU = Math.PI*2;

      const makeStrand = (i) => {
        const yBase = (height * 0.2) + (i/(STRAND_COUNT-1)) * (height * 0.6);
        return {
          amp: rand(18, 58),
          scale: rand(250, 520),
          phase: rand(0, TAU),
          weight: rand(1.2, 3.2),
          yBase,
          hueShift: rand(-20, 20),
          alpha: rand(0.25, 0.65)
        };
      };

      const initStrands = () => {
        strands.length = 0;
        for (let i=0;i<STRAND_COUNT;i++) strands.push(makeStrand(i));
      };

      const randomizeThreads = () => {
        for (let i=0;i<STRAND_COUNT;i++) {
          strands[i].amp = rand(18, 58);
          strands[i].scale = rand(220, 540);
          strands[i].phase = rand(0, TAU);
          strands[i].weight = rand(1.1, 3.4);
          strands[i].hueShift = rand(-30, 30);
          strands[i].alpha = rand(0.22, 0.7);
        }
      };

      // Draw a single strand path
      const drawStrand = (s, t) => {
        const speed = (parseFloat(tempo.value) / 100) * 1.8 + 0.2;
        const pwr = (parseFloat(tempo.value) / 100);
        const px = pointer.x || width/2;
        const py = pointer.y || height/2;

        ctx.beginPath();
        let prevX = 0, prevY = s.yBase;
        for (let i=0;i<=PTS;i++) {
          const x = (i/PTS) * width;
          const wave = Math.sin((x / s.scale) + s.phase + t*0.0008*speed) * s.amp;
          // attraction
          const dx = x - px;
          const dy = (s.yBase + wave) - py;
          const dist = Math.max(1, Math.hypot(dx, dy));
          const pull = pointer.down ? Math.min(40, 600 / dist) : Math.min(18, 360 / dist);
          const y = s.yBase + wave - (dy / dist) * pull * (0.6 + pwr*0.5);

          const cx = lerp(prevX, x, 0.5);
          const cy = lerp(prevY, y, 0.5);
          if (i === 0) {
            ctx.moveTo(x, y);
          } else {
            ctx.quadraticCurveTo(prevX, prevY, cx, cy);
          }
          prevX = x; prevY = y;
        }

        const h1 = parseFloat(getComputedStyle(root).getPropertyValue('--h1')) || 210;
        const h2 = parseFloat(getComputedStyle(root).getPropertyValue('--h2')) || 320;
        const h3 = parseFloat(getComputedStyle(root).getPropertyValue('--h3')) || 36;

        const g = ctx.createLinearGradient(0, s.yBase-50, width, s.yBase+50);
        g.addColorStop(0, `hsla(${(h1 + s.hueShift + 360)%360}, 90%, 60%, ${s.alpha})`);
        g.addColorStop(0.5, `hsla(${(h2 + s.hueShift + 360)%360}, 90%, 60%, ${s.alpha*0.9})`);
        g.addColorStop(1, `hsla(${(h3 + s.hueShift + 360)%360}, 90%, 60%, ${s.alpha})`);

        ctx.strokeStyle = g;
        ctx.lineWidth = s.weight + (pointer.down ? 0.8 : 0);
        ctx.lineCap = 'round';
        ctx.lineJoin = 'round';
        ctx.shadowColor = `hsla(${h2}, 90%, 60%, 0.25)`;
        ctx.shadowBlur = 18;
        ctx.globalCompositeOperation = 'lighter';
        ctx.stroke();
        ctx.shadowBlur = 0;
      };

      const draw = (t) => {
        // Clear with soft veil for trails
        ctx.globalCompositeOperation = 'source-over';
        const veil = root.getAttribute('data-scheme') === 'dark' ? 'rgba(10,15,28,0.10)' : 'rgba(250,252,255,0.10)';
        ctx.fillStyle = veil;
        ctx.fillRect(0,0,width,height);
        // Strands
        for (let i=0;i<strands.length;i++) drawStrand(strands[i], t);
      };

      const loop = (ts) => {
        raf = requestAnimationFrame(loop);
        if (root.getAttribute('data-play') !== 'true') { lastT = ts; return; }
        const dt = lastT ? ts - lastT : 16;
        lastT = ts;
        draw(ts);
      };

      // Pointer
      const toLocal = (e) => {
        const r = canvas.getBoundingClientRect();
        pointer.x = e.clientX - r.left;
        pointer.y = e.clientY - r.top;
      };
      canvas.addEventListener('pointermove', (e) => { toLocal(e); });
      canvas.addEventListener('pointerdown', (e) => { pointer.down = true; toLocal(e); });
      window.addEventListener('pointerup', () => { pointer.down = false; });

      // Controls
      remixBtn.addEventListener('click', () => randomizeThreads());
      snapBtn.addEventListener('click', () => {
        const url = canvas.toDataURL('image/png');
        const a = document.createElement('a');
        a.href = url; a.download = 'gradient-atelier-2103.png';
        document.body.appendChild(a); a.click(); a.remove();
      });

      // Init
      const reduce = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (reduce) setPlay(false);
      resize();
      initStrands();
      applyPalette(palettes.noon);

      // Resize
      let rTO; 
      const onResize = () => { clearTimeout(rTO); rTO = setTimeout(()=>{ resize(); initStrands(); }, 120); };
      window.addEventListener('resize', onResize, { passive: true });

      // Start
      raf = requestAnimationFrame(loop);

      // Visibility
      const stop = () => { if (raf) cancelAnimationFrame(raf); raf = null; };
      document.addEventListener('visibilitychange', () => {
        if (document.hidden) stop(); else raf = requestAnimationFrame(loop);
      });
    })();
  </script>
</div>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


