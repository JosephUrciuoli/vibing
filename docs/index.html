<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<section class="loom483" data-theme="ember" data-motion="on" aria-label="Aurora Loom — Iteration 483">
  <style>
    .loom483 {
      --ink:#eaf2ff;
      --muted:#b5c0d0;
      --line: rgba(255,255,255,.12);

      /* palettes shift by [data-theme] */
      --p1:#ff7a59; --p2:#ff4d8d; --p3:#ffd36e;   /* ember */
      --bg-a:#0b1020; --bg-b:#1a0f28; --bg-c:#28121d;

      --glass: rgba(255,255,255,.06);
      --blur: 14px;
      --tempo: 1;

      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color: var(--ink);
      position: relative;
      border-radius: 28px;
      padding: 26px;
      overflow: clip;
      isolation: isolate;
      background:
        radial-gradient(1200px 700px at var(--glow-x,60%) var(--glow-y,30%), color-mix(in srgb, var(--p2) 18%, transparent), transparent 60%),
        conic-gradient(from 120deg at 85% 20%, color-mix(in srgb, var(--bg-b) 84%, black) 0 25%, var(--bg-c) 25% 55%, var(--bg-b) 55% 100%),
        linear-gradient(180deg, var(--bg-a), var(--bg-b));
      box-shadow: inset 0 0 0 1px var(--line), 0 40px 100px rgba(0,0,0,.35);
    }
    .loom483::after{
      /* film grain */
      content:""; position:absolute; inset:-1px; pointer-events:none; mix-blend-mode:overlay; opacity:.3;
      background-image:
        radial-gradient(1px 1px at 30% 20%, rgba(255,255,255,.08) 50%, transparent 51%),
        radial-gradient(1px 1px at 70% 60%, rgba(255,255,255,.06) 50%, transparent 51%),
        radial-gradient(1px 1px at 40% 80%, rgba(255,255,255,.04) 50%, transparent 51%);
      background-size: 180px 180px, 220px 220px, 260px 260px;
    }

    /* themes */
    .loom483[data-theme="polar"] { --p1:#6ae1ff; --p2:#86f2c0; --p3:#7aa5ff; --bg-a:#07131d; --bg-b:#0b1f2b; --bg-c:#0f2435; }
    .loom483[data-theme="tropic"]{ --p1:#19c5b0; --p2:#9dfc87; --p3:#4ec5ff; --bg-a:#081c18; --bg-b:#0d241e; --bg-c:#0f1a24; }
    .loom483[data-theme="ember"] { --p1:#ff7a59; --p2:#ff4d8d; --p3:#ffd36e; --bg-a:#0b1020; --bg-b:#1a0f28; --bg-c:#28121d; }
    .loom483[data-theme="mist"]  { --p1:#cab8ff; --p2:#88aaff; --p3:#ffd0e6; --bg-a:#0e1220; --bg-b:#121530; --bg-c:#1a1d3e; }

    /* chrome */
    .loom483 .chrome{
      position:relative; z-index:2; display:flex; align-items:center; justify-content:space-between; gap:16px;
      padding:12px; border-radius:20px; border:1px solid var(--line);
      background: linear-gradient(180deg, color-mix(in srgb, var(--glass) 92%, transparent), color-mix(in srgb, var(--glass) 70%, transparent));
      backdrop-filter: blur(var(--blur)) saturate(140%);
      box-shadow: 0 18px 60px rgba(0,0,0,.35);
    }
    .loom483 .brand{ display:flex; align-items:center; gap:10px; font-weight:900; letter-spacing:.08em; text-transform:uppercase; font-size:12px; color:#eaf2ff; }
    .loom483 .brand svg{ width:24px; height:24px; }
    .loom483 .controls{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
    .loom483 .chip{
      appearance:none; border:1px solid var(--line); border-radius:999px; padding:8px 12px; font-size:12px; cursor:pointer;
      color: var(--ink);
      background: linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      transition: transform .16s ease, border-color .18s ease, background .18s ease, box-shadow .18s ease, color .2s ease;
      box-shadow: 0 8px 24px rgba(0,0,0,.25);
    }
    .loom483 .chip:hover{ transform: translateY(-1px); border-color: color-mix(in srgb, var(--p2) 40%, transparent); }
    .loom483 .chip[aria-pressed="true"]{
      box-shadow: 0 10px 28px rgba(0,0,0,.35), inset 0 0 0 2px color-mix(in srgb, var(--p2) 40%, transparent);
      color: color-mix(in srgb, var(--ink) 60%, white);
    }
    .loom483 .chip svg{ width:14px; height:14px; vertical-align:-2px; margin-right:6px; }

    /* layout */
    .loom483 .hero{
      position:relative; z-index:1;
      display:grid; grid-template-columns: 0.9fr 1.1fr; gap:20px; align-items:stretch;
      margin:20px 0 10px;
    }
    @media (max-width: 900px){ .loom483 .hero{ grid-template-columns: 1fr; } }

    .loom483 .eyebrow{ color: var(--muted); font-size:12px; letter-spacing:.14em; text-transform:uppercase; display:flex; gap:10px; align-items:center; }
    .loom483 .eyebrow::before{
      content:""; width:8px; height:8px; border-radius:50%;
      background: radial-gradient(circle at 35% 35%, var(--p1), var(--p2));
      box-shadow: 0 0 16px color-mix(in srgb, var(--p3) 45%, transparent);
    }
    .loom483 .title{
      margin:8px 0 10px; line-height:1.02; font-size: clamp(40px, 7.5vw, 90px); letter-spacing:-.02em; font-weight:900;
      background: linear-gradient(90deg, #e6f0ff, color-mix(in srgb, #b9c7ff 60%, var(--p2) 40%) 50%, var(--p3) 85%);
      -webkit-background-clip:text; background-clip:text; color: transparent;
      filter: drop-shadow(0 8px 30px color-mix(in srgb, var(--p2) 20%, transparent));
    }
    .loom483 .sub{ margin:0; color: var(--muted); font-size: clamp(14px, 2vw, 18px); line-height:1.7; max-width: 64ch; }
    .loom483 .actions{ margin-top:14px; display:flex; gap:10px; flex-wrap:wrap; }
    .loom483 .btn{
      border:1px solid var(--line); border-radius:14px; padding:10px 14px; font-size:14px; cursor:pointer; font-weight:800; color:#0b1020;
      background: linear-gradient(90deg, color-mix(in srgb, var(--p1) 22%, #ffffff 78%), color-mix(in srgb, var(--p2) 22%, #ffffff 78%));
      box-shadow: 0 16px 40px rgba(0,0,0,.35);
      transition: transform .16s ease, border-color .18s ease, background .18s ease;
    }
    .loom483 .btn:hover{ transform: translateY(-1px); border-color: color-mix(in srgb, var(--p2) 20%, transparent); }

    /* stage */
    .loom483 .stage{
      position:relative; border-radius:24px; padding:0; border:1px solid var(--line); overflow:hidden;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: 0 30px 80px rgba(0,0,0,.5);
      backdrop-filter: blur(10px) saturate(140%);
      min-height: 340px;
    }
    .loom483 canvas.weave{ position:absolute; inset:0; display:block; }
    .loom483 .gridfx{
      position:absolute; inset:0; pointer-events:none; opacity:.26;
      background-image:
        linear-gradient(to right, rgba(255,255,255,.06) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(255,255,255,.06) 1px, transparent 1px);
      background-size: 48px 48px, 48px 48px;
      mask-image: radial-gradient(120% 120% at 50% 50%, #000, transparent 80%);
    }
    .loom483 .stage .hint{
      position:absolute; left:12px; bottom:12px; z-index:2; color: var(--muted); font-size:12px;
      background: rgba(0,0,0,.25); border:1px solid var(--line); border-radius:12px; padding:6px 8px; backdrop-filter: blur(6px);
    }
    .loom483 .legend{
      position:absolute; right:12px; top:12px; z-index:2; display:flex; gap:6px;
    }
    .loom483 .dot{
      width:10px; height:10px; border-radius:50%;
      box-shadow: 0 0 16px color-mix(in srgb, var(--p2) 50%, transparent);
    }
    .loom483 .dot.p1{ background: var(--p1); }
    .loom483 .dot.p2{ background: var(--p2); }
    .loom483 .dot.p3{ background: var(--p3); }

    /* manifesto cards */
    .loom483 .grid{
      position:relative; z-index:2; margin-top:16px; display:grid; gap:12px; grid-template-columns: repeat(12, 1fr);
    }
    .loom483 .card{
      grid-column: span 4; min-height: 120px; border-radius:18px; padding:16px; overflow:hidden;
      border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
      box-shadow: 0 20px 50px rgba(0,0,0,.4); position:relative;
      transition: border-color .18s ease, transform .18s ease, box-shadow .18s ease;
    }
    @media (max-width: 960px){ .loom483 .card{ grid-column: span 6; } }
    @media (max-width: 700px){ .loom483 .card{ grid-column: span 12; } }
    .loom483 .card:hover{ border-color: color-mix(in srgb, var(--p2) 30%, transparent); transform: translateY(-2px); box-shadow: 0 26px 66px rgba(0,0,0,.5); }
    .loom483 .card h3{ margin:4px 0 6px; font-size:18px; letter-spacing:-.01em; color:#f1f5ff; }
    .loom483 .card p{ margin:0; color: var(--muted); font-size:14px; line-height:1.55; }
    .loom483 .badge{
      position:absolute; top:10px; right:10px; font-size:11px; letter-spacing:.06em; text-transform:uppercase;
      padding:6px 8px; border-radius:999px; border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.12), rgba(255,255,255,.06));
      color: var(--muted);
    }

    /* foot */
    .loom483 .foot{
      position:relative; z-index:2; display:flex; align-items:center; justify-content:space-between; gap:12px;
      margin-top:12px; padding:10px 12px; border-radius:16px; border:1px solid var(--line);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
      backdrop-filter: blur(8px);
      color: var(--muted);
    }

    /* motion */
    .loom483[data-motion="off"]{ --tempo:.0001; }
    @media (prefers-reduced-motion: reduce){
      .loom483{ --tempo:.0001; }
      .loom483 *{ animation: none !important; transition: none !important; }
    }
  </style>

  <!-- Header -->
  <div class="chrome">
    <div class="brand">
      <svg viewBox="0 0 24 24" fill="none" aria-hidden="true">
        <defs>
          <radialGradient id="orb483" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(12 12) scale(9)">
            <stop offset="0" stop-color="var(--p3)"/>
            <stop offset="1" stop-color="var(--p2)"/>
          </radialGradient>
        </defs>
        <circle cx="12" cy="12" r="9" fill="url(#orb483)"/>
        <path d="M3.5 12c0-4.7 3.8-8.5 8.5-8.5" stroke="var(--p1)" stroke-width="1.2" stroke-linecap="round"/>
      </svg>
      Aurora Loom
    </div>
    <div class="controls" role="group" aria-label="Theme & Motion">
      <button class="chip" data-theme="polar" aria-pressed="false">Polar</button>
      <button class="chip" data-theme="tropic" aria-pressed="false">Tropic</button>
      <button class="chip" data-theme="ember" aria-pressed="true">Ember</button>
      <button class="chip" data-theme="mist" aria-pressed="false">Mist</button>
      <button class="chip" data-motion="toggle" aria-pressed="true">Motion: On</button>
    </div>
  </div>

  <!-- Hero -->
  <div class="hero">
    <div class="copy">
      <div class="eyebrow">Iteration 483 · Aurora Loom</div>
      <h1 class="title">Design the breath between beats.</h1>
      <p class="sub">Weave light into motion. Drag to steer the current; click to ripple the fabric. Composure is a curve, not a pause.</p>
      <div class="actions">
        <button class="btn" data-action="compose">Compose anew</button>
        <button class="btn" data-action="ripple">Send a ripple</button>
      </div>
    </div>

    <div class="stage" aria-label="Generative ribbon field">
      <canvas class="weave" aria-hidden="true"></canvas>
      <div class="gridfx" aria-hidden="true"></div>
      <div class="legend" aria-hidden="true">
        <div class="dot p1"></div><div class="dot p2"></div><div class="dot p3"></div>
      </div>
      <div class="hint">Tip: Drag to guide · Click to ripple · Space toggles motion</div>
    </div>
  </div>

  <!-- Manifesto -->
  <div class="grid" aria-label="Kinetic Interface Principles">
    <article class="card">
      <span class="badge">Quiet</span>
      <h3>Make clarity feel inevitable</h3>
      <p>Reduce until the answer appears. Remove ornament until expression breathes.</p>
    </article>
    <article class="card">
      <span class="badge">Tactile</span>
      <h3>Motion is a sentence</h3>
      <p>Acceleration is grammar; easing is tone. Let curves say what words cannot.</p>
    </article>
    <article class="card">
      <span class="badge">Human</span>
      <h3>Polish the pauses</h3>
      <p>Transitions are micro-rests. A gentle linger turns interaction into music.</p>
    </article>
  </div>

  <!-- Footer -->
  <div class="foot">
    <small>Press ← → to rotate the weave, R to ripple, and C to compose.</small>
    <small><span id="last-updated">Last updated: 2025-11-07 11:18:51 EST</span></small>
  </div>

  <script>
    (function(){
      const root = document.currentScript.closest('.loom483');

      // Last updated
      const lu = root.querySelector('#last-updated');
      try {
        const now = new Date();
        const fmt = new Intl.DateTimeFormat(navigator.language || 'en-US', {
          year:'numeric', month:'short', day:'2-digit',
          hour:'2-digit', minute:'2-digit', hour12:true
        });
        lu.textContent = 'Updated ' + fmt.format(now);
      } catch(e) {
        lu.textContent = 'Updated ' + new Date().toLocaleString();
      }

      // Theme + Motion
      const themeBtns = root.querySelectorAll('.chip[data-theme]');
      const motionBtn = root.querySelector('.chip[data-motion]');
      function setTheme(t){
        root.setAttribute('data-theme', t);
        themeBtns.forEach(b => b.setAttribute('aria-pressed', String(b.dataset.theme===t)));
        pulseBG();
      }
      function setMotion(on){
        root.setAttribute('data-motion', on ? 'on' : 'off');
        motionBtn.setAttribute('aria-pressed', String(on));
        motionBtn.textContent = 'Motion: ' + (on ? 'On' : 'Off');
        running = on;
        if (on && !raf) loop(0);
      }
      themeBtns.forEach(b => b.addEventListener('click', ()=> setTheme(b.dataset.theme)));
      motionBtn.addEventListener('click', ()=> setMotion(root.getAttribute('data-motion')!=='on'));

      // Glow follows pointer
      root.addEventListener('pointermove', (e)=>{
        const r = root.getBoundingClientRect();
        const x = ((e.clientX - r.left)/r.width)*100;
        const y = ((e.clientY - r.top)/r.height)*100;
        root.style.setProperty('--glow-x', x.toFixed(2)+'%');
        root.style.setProperty('--glow-y', y.toFixed(2)+'%');
      });

      // Stage + Canvas
      const canvas = root.querySelector('canvas.weave');
      const ctx = canvas.getContext('2d', { alpha:true });
      const dpr = Math.max(1, Math.min(2, window.devicePixelRatio || 1));
      const stage = root.querySelector('.stage');

      const state = {
        w: 0, h: 0, t: 0, running: true,
        center: {x: 0, y: 0}, target: {x: 0, y: 0},
        spin: 0, pulses: [], strands: []
      };

      function sizeCanvas(){
        const r = stage.getBoundingClientRect();
        state.w = Math.max(300, Math.floor(r.width));
        state.h = Math.max(260, Math.floor(r.height));
        canvas.width = Math.floor(state.w * dpr);
        canvas.height = Math.floor(state.h * dpr);
        canvas.style.width = state.w + 'px';
        canvas.style.height = state.h + 'px';
        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
        state.center.x = state.w/2;
        state.center.y = state.h/2;
        state.target.x = state.center.x;
        state.target.y = state.center.y;
      }
      sizeCanvas();
      new ResizeObserver(sizeCanvas).observe(stage);

      function palette(){
        const m = root.getAttribute('data-theme');
        if (m==='polar') return ['#6ae1ff','#86f2c0','#7aa5ff'];
        if (m==='tropic') return ['#19c5b0','#9dfc87','#4ec5ff'];
        if (m==='mist')   return ['#cab8ff','#88aaff','#ffd0e6'];
        return ['#ff7a59','#ff4d8d','#ffd36e']; // ember
      }

      function compose(count=22){
        const cols = palette();
        state.strands = Array.from({length: count}, (_,i)=>({
          color: cols[i % cols.length],
          phase: Math.random()*Math.PI*2,
          speed: 0.4 + Math.random()*1.2,
          amp: 40 + Math.random()*120,
          thick: 0.8 + Math.random()*2.6,
          freq: 1 + Math.random()*2.2,
          wobble: Math.random()*6.28
        }));
        state.pulses = [];
      }
      compose();

      function lerp(a,b,t){ return a + (b-a)*t; }
      function ease(t){ return 1 - Math.pow(1-t, 3); } // fast→slow

      function drawGrid(){
        ctx.save();
        ctx.globalAlpha = 0.10;
        ctx.strokeStyle = 'rgba(255,255,255,0.08)';
        ctx.lineWidth = 1;
        const step = 48;
        for (let x=0; x<=state.w; x+=step){ ctx.beginPath(); ctx.moveTo(x,0); ctx.lineTo(x,state.h); ctx.stroke(); }
        for (let y=0; y<=state.h; y+=step){ ctx.beginPath(); ctx.moveTo(0,y); ctx.lineTo(state.w,y); ctx.stroke(); }
        ctx.restore();
      }

      function draw(ts){
        const cols = palette();
        ctx.clearRect(0,0,state.w,state.h);

        // subtle vignette
        const g = ctx.createRadialGradient(state.center.x, state.center.y, Math.min(state.w,state.h)*0.1, state.center.x, state.center.y, Math.max(state.w,state.h)*0.8);
        g.addColorStop(0, 'rgba(255,255,255,0.02)');
        g.addColorStop(1, 'rgba(0,0,0,0.18)');
        ctx.fillStyle = g; ctx.fillRect(0,0,state.w,state.h);

        drawGrid();

        // pulses expand
        for (let i=state.pulses.length-1; i>=0; i--){
          const p = state.pulses[i];
          p.r += 2.2;
          p.life -= 0.012 * (root.getAttribute('data-motion')==='on' ? 1 : 0);
          if (p.life <= 0) state.pulses.splice(i,1);
        }

        ctx.save();
        ctx.globalCompositeOperation = 'lighter';
        const time = state.t;

        for (let s=0; s<state.strands.length; s++){
          const str = state.strands[s];
          const hue = str.color;
          ctx.lineWidth = str.thick;
          ctx.strokeStyle = hue;
          ctx.globalAlpha = 0.10 + 0.24*Math.sin(time*0.001*str.speed + str.wobble);

          ctx.beginPath();
          const samples = 140;
          for (let i=0; i<=samples; i++){
            const tt = i/samples;
            const ang = tt*Math.PI*2*str.freq + str.phase + state.spin;
            const a2  = tt*6.283 + Math.sin(time*0.0006*str.speed + str.wobble)*0.7;

            const rBase = str.amp * (0.6 + 0.4*Math.sin(time*0.0012*str.speed + tt*3));
            let x = state.center.x + Math.cos(ang)*rBase + Math.cos(a2)*12;
            let y = state.center.y + Math.sin(ang)*rBase + Math.sin(a2*1.2)*12;

            // displace by pulses
            for (let p=0; p<state.pulses.length; p++){
              const P = state.pulses[p];
              const dx = x - P.x, dy = y - P.y;
              const dist = Math.hypot(dx, dy) + 0.0001;
              const fall = Math.max(0, 1 - dist/(P.r+40));
              const push = 12 * P.life * fall;
              x += (dx/dist) * push;
              y += (dy/dist) * push;
            }

            // first point/move
            if (i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
          }
          ctx.stroke();
        }
        ctx.restore();
      }

      function loop(ts){
        if (!running) return;
        state.t = ts || state.t + 16;

        // center follow
        state.center.x = lerp(state.center.x, state.target.x, 0.06);
        state.center.y = lerp(state.center.y, state.target.y, 0.06);

        draw(ts);
        raf = requestAnimationFrame(loop);
      }

      function ripple(x, y){
        state.pulses.push({ x, y, r: 0, life: 1 });
      }

      // pointer interactions
      let dragging = false;
      const pointerPos = (e)=>{
        const r = canvas.getBoundingClientRect();
        const x = (e.clientX ?? (e.touches?.[0]?.clientX||0)) - r.left;
        const y = (e.clientY ?? (e.touches?.[0]?.clientY||0)) - r.top;
        return {x,y};
      };
      stage.addEventListener('pointerdown', (e)=>{ dragging = true; const p=pointerPos(e); state.target = p; ripple(p.x,p.y); e.preventDefault(); });
      window.addEventListener('pointermove', (e)=>{ if (!dragging) return; state.target = pointerPos(e); });
      window.addEventListener('pointerup', ()=> dragging=false);
      stage.addEventListener('click', (e)=>{ const p=pointerPos(e); ripple(p.x,p.y); });

      // actions
      root.querySelector('[data-action="compose"]')?.addEventListener('click', ()=>{ compose(18 + Math.floor(Math.random()*14)); pulseBG(); });
      root.querySelector('[data-action="ripple"]')?.addEventListener('click', ()=>{ ripple(state.center.x, state.center.y); });

      // keyboard
      root.addEventListener('keydown', (e)=>{
        if (e.key==='ArrowRight'){ state.spin += 0.08; e.preventDefault(); }
        if (e.key==='ArrowLeft'){ state.spin -= 0.08; e.preventDefault(); }
        if (e.key===' ' || e.code==='Space'){ setMotion(root.getAttribute('data-motion')!=='on'); e.preventDefault(); }
        if (e.key==='r' || e.key==='R'){ ripple(state.center.x, state.center.y); }
        if (e.key==='c' || e.key==='C'){ compose(); }
      });
      stage.setAttribute('tabindex','0');

      // BG pulse
      function pulseBG(){
        root.animate(
          [{filter:'brightness(1.0)'},{filter:'brightness(1.14)'},{filter:'brightness(1.0)'}],
          {duration:700, easing:'ease-out'}
        );
      }

      // Motion runtime
      let raf = null;
      let running = true;

      // Respect reduced motion
      const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      if (prefersReduced) { setMotion(false); draw(0); } else { loop(0); }
    })();
  </script>
</section>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


