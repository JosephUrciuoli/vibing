<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<div id="vibe2352" aria-live="polite">
  <style>
    /* ——— Daydream Machine v2352 ——— */
    #vibe2352{
      --bg0:#0b1020;
      --bg1:#1a2347;
      --ink:#eef3ff;
      --muted:#9fb2ca;
      --ring:rgba(255,255,255,0.08);
      --p1:#6ee7ff; /* horizon */
      --p2:#b388ff; /* velvet */
      --p3:#ffd56b; /* glow */
      --mx:50%;
      --my:50%;
      border-radius:28px;
      padding:clamp(24px,5vw,48px);
      color:var(--ink);
      font-family:ui-sans-serif,system-ui,-apple-system,"SF Pro",Inter,Segoe UI,Roboto,"Helvetica Neue",Arial;
      background:
        radial-gradient(900px 900px at var(--mx) var(--my),rgba(255,255,255,0.08),transparent 60%),
        conic-gradient(from 200deg at 80% 20%, rgba(255,255,255,0.05), transparent 35%, rgba(255,255,255,0.05) 60%, transparent 70%),
        linear-gradient(160deg,var(--bg0),var(--bg1));
      box-shadow:inset 0 0 0 1px var(--ring), 0 22px 56px rgba(0,0,0,0.45);
      position:relative;
      overflow:hidden;
      isolation:isolate;
      transition:background 240ms ease, color 240ms ease, box-shadow 240ms ease;
    }
    #vibe2352.dawn{
      --bg0:#fff8f0;
      --bg1:#e9f3ff;
      --ink:#0b0f1a;
      --muted:#475268;
      --ring:rgba(12,18,32,0.12);
      box-shadow:inset 0 0 0 1px var(--ring), 0 18px 44px rgba(12,18,32,0.18);
    }
    /* Ambient layers */
    #vibe2352 .halo{
      position:absolute; inset:-15%;
      background:
        radial-gradient(closest-side at 20% 30%, rgba(110,231,255,0.18), transparent 70%),
        radial-gradient(closest-side at 80% 70%, rgba(179,136,255,0.16), transparent 65%),
        radial-gradient(closest-side at 50% 50%, rgba(255,213,107,0.10), transparent 75%);
      filter:blur(22px) saturate(120%);
      mix-blend-mode:screen;
      opacity:.35;
      pointer-events:none;
      transition:opacity .18s ease, filter .18s ease;
      z-index:0;
    }
    #vibe2352.dawn .halo{ mix-blend-mode:multiply; opacity:.48; filter:blur(18px) saturate(140%); }
    #vibe2352 .grain{
      position:absolute; inset:0; pointer-events:none; z-index:1; opacity:.09;
      background-image:
        repeating-linear-gradient(0deg, rgba(0,0,0,.6) 0, rgba(0,0,0,.6) 1px, transparent 1px, transparent 2px),
        repeating-linear-gradient(90deg, rgba(0,0,0,.6) 0, rgba(0,0,0,.6) 1px, transparent 1px, transparent 2px);
      mix-blend-mode:overlay;
    }
    /* Chrome */
    #vibe2352 .bar{
      position:relative; z-index:2;
      display:grid; grid-template-columns:1fr auto; gap:12px; align-items:center; margin-bottom:clamp(10px,2vw,16px);
    }
    #vibe2352 .brand{
      display:inline-flex; align-items:center; gap:10px;
      font-weight:900; font-size:12px; letter-spacing:.35px;
      color:var(--ink);
      background:rgba(255,255,255,0.06);
      border:1px solid var(--ring);
      padding:8px 12px; border-radius:999px;
      backdrop-filter:blur(8px);
      box-shadow:0 8px 24px rgba(0,0,0,0.28);
    }
    #vibe2352.dawn .brand{ background:rgba(255,255,255,0.88); }
    #vibe2352 .controls{
      display:inline-flex; gap:10px; align-items:center;
      background:rgba(255,255,255,0.06);
      border:1px solid var(--ring); border-radius:14px; padding:6px; backdrop-filter:blur(8px);
    }
    #vibe2352.dawn .controls{ background:rgba(255,255,255,0.9); }
    #vibe2352 .btn{
      -webkit-tap-highlight-color:transparent;
      appearance:none; cursor:pointer; user-select:none;
      border:0; border-radius:10px; padding:8px 12px;
      font-size:12px; font-weight:900; letter-spacing:.32px;
      color:var(--ink); background:transparent;
      transition:transform 140ms ease, box-shadow 180ms ease, background 140ms ease, color 140ms ease, opacity 120ms ease;
    }
    #vibe2352 .btn:hover{ transform:translateY(-1px); }
    #vibe2352 .btn.primary{
      background:linear-gradient(90deg,var(--p3),var(--p2)); color:#0b0f1a;
      box-shadow:0 10px 24px rgba(0,0,0,0.25), 0 10px 24px rgba(255,213,107,0.25);
    }
    /* Layout */
    #vibe2352 .grid{
      position:relative; z-index:2;
      display:grid; gap:clamp(18px,4vw,36px);
      grid-template-columns:minmax(260px, 1fr) 1.15fr; align-items:center;
    }
    @media (max-width:980px){ #vibe2352 .grid{ grid-template-columns:1fr; } }
    /* Copy */
    #vibe2352 .panel{
      border:1px solid var(--ring); border-radius:22px;
      background:linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.04));
      padding:clamp(18px,3vw,28px);
      box-shadow:0 18px 44px rgba(0,0,0,0.28), inset 0 1px 0 rgba(255,255,255,0.14);
    }
    #vibe2352.dawn .panel{
      background:linear-gradient(180deg, rgba(255,255,255,0.92), rgba(255,255,255,0.65));
      box-shadow:0 16px 40px rgba(15,23,38,0.12), inset 0 1px 0 rgba(255,255,255,0.7);
    }
    #vibe2352 h1{
      margin:0 0 8px; font-size:clamp(44px,7.6vw,96px);
      line-height:.95; font-weight:1000; letter-spacing:-.02em;
      background:linear-gradient(90deg,var(--p3),var(--p2),var(--p1));
      background-size:220% 100%;
      -webkit-background-clip:text; background-clip:text; color:transparent;
      animation:sweep2352 8s ease-in-out infinite;
    }
    @keyframes sweep2352{ 0%,100%{background-position:0% 50%} 50%{background-position:100% 50%} }
    #vibe2352 .lede{
      color:var(--muted); font-size:clamp(16px,2vw,20px);
      line-height:1.65; margin-bottom:14px; min-height:3lh;
    }
    /* Palette chips */
    #vibe2352 .chips{ display:flex; flex-wrap:wrap; gap:10px; margin:10px 0 16px; }
    #vibe2352 .chip{
      appearance:none; border:1px solid var(--ring); background:rgba(255,255,255,0.06);
      color:var(--ink); border-radius:999px; padding:8px 12px;
      font-size:12px; font-weight:800; letter-spacing:.3px; cursor:pointer;
      transition:transform 140ms ease, box-shadow 180ms ease, background 140ms ease, color 140ms ease;
      backdrop-filter:blur(8px);
    }
    #vibe2352 .chip[aria-pressed="true"]{
      background:linear-gradient(90deg,var(--p3),var(--p2));
      color:#0b0f1a; border-color:transparent; box-shadow:0 12px 26px rgba(255,213,107,0.25);
    }
    #vibe2352.dawn .chip{ background:rgba(255,255,255,0.9); }
    /* Poster stage */
    #vibe2352 .poster{
      position:relative;
      border-radius:24px; overflow:hidden;
      border:1px solid var(--ring);
      aspect-ratio: 4/3;
      background:
        radial-gradient(120% 120% at 60% 30%, rgba(255,255,255,0.08), transparent 50%),
        linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      box-shadow:inset 0 1px 0 rgba(255,255,255,0.12), 0 20px 50px rgba(0,0,0,0.35);
      display:grid; place-items:center;
    }
    #vibe2352.dawn .poster{
      background:
        radial-gradient(120% 120% at 40% 0%, rgba(255,255,255,0.85), transparent 55%),
        linear-gradient(180deg, rgba(255,255,255,0.8), rgba(255,255,255,0.5));
      box-shadow:inset 0 1px 0 rgba(0,0,0,0.04), 0 18px 44px rgba(15,23,38,0.15);
    }
    #vibe2352 canvas.bloom{ width:100%; height:100%; display:block; }
    #vibe2352 .mesh{
      position:absolute; inset:0; pointer-events:none;
      background:
        linear-gradient(transparent 49%, rgba(255,255,255,0.05) 50%, transparent 51%) 0 0 / 100% 22px,
        linear-gradient(90deg, transparent 49%, rgba(255,255,255,0.04) 50%, transparent 51%) 0 0 / 22px 100%;
      mix-blend-mode:soft-light; opacity:.35;
    }
    #vibe2352.dawn .mesh{ mix-blend-mode:multiply; opacity:.25; }
    /* Footer */
    #vibe2352 .foot{
      margin-top:14px; display:flex; align-items:center; justify-content:space-between; gap:12px;
      color:var(--muted); font-size:12px;
    }
    /* Motion preferences */
    @media (prefers-reduced-motion: reduce){
      #vibe2352 h1{ animation:none !important; }
      #vibe2352 .btn, #vibe2352 .chip{ transition:none !important; }
      #vibe2352 .halo{ transition:none !important; }
    }
  </style>

  <div class="halo" aria-hidden="true"></div>
  <div class="grain" aria-hidden="true"></div>

  <div class="bar" role="toolbar" aria-label="Daydream controls">
    <span class="brand">Iteration 2352 • Daydream Machine</span>
    <div class="controls">
      <button class="btn" type="button" data-action="theme" aria-pressed="false" title="Switch Dawn/Dusk">Dawn</button>
      <button class="btn" type="button" data-action="motion" aria-pressed="true" title="Toggle motion feel">Pulse</button>
      <button class="btn primary" type="button" data-action="snap" title="Export poster">Snap PNG</button>
    </div>
  </div>

  <section class="grid" aria-label="Kinetic Poster Studio">
    <article class="panel">
      <h1>Daydream Machine</h1>
      <p class="lede" data-default="A kinetic poster that blooms with your cursor and the passing of time.">A kinetic poster that blooms with your cursor and the passing of time.</p>

      <div class="chips" role="group" aria-label="Hues">
        <button class="chip" type="button" aria-pressed="true" data-p1="#6ee7ff" data-p2="#b388ff" data-p3="#ffd56b" data-msg="Horizon blue, velvet lilac, warm glow.">Horizon</button>
        <button class="chip" type="button" aria-pressed="false" data-p1="#7cfcc6" data-p2="#a5b4ff" data-p3="#ffe29a" data-msg="Mint breeze, lavender haze, amber hush.">Breeze</button>
        <button class="chip" type="button" aria-pressed="false" data-p1="#ff9b71" data-p2="#ff6f61" data-p3="#ffd1a1" data-msg="Cinder peach, ember coral, apricot veil.">Ember</button>
        <button class="chip" type="button" aria-pressed="false" data-p1="#8ab4ff" data-p2="#64ffd2" data-p3="#ffe27a" data-msg="Nocturne blue, neon jade, lantern gold.">Neon Night</button>
      </div>

      <div class="foot">
        <span>Make something quietly electric.</span>
        <span id="last-updated">Last updated: 2026-02-02 09:02:15 EST</span>
      </div>
    </article>

    <div class="poster" aria-label="Generative harmonic bloom">
      <canvas class="bloom" role="img" aria-label="Animated flower-like harmonics drawn by time"></canvas>
      <div class="mesh" aria-hidden="true"></div>
    </div>
  </section>

  <script>
    (function(){
      const root = document.getElementById('vibe2352');
      const canvas = root.querySelector('canvas.bloom');
      const ctx = canvas.getContext('2d');
      const updated = root.querySelector('#last-updated');
      const themeBtn = root.querySelector('[data-action="theme"]');
      const motionBtn = root.querySelector('[data-action="motion"]');
      const snapBtn = root.querySelector('[data-action="snap"]');
      const chips = Array.from(root.querySelectorAll('.chip'));
      const lede = root.querySelector('.lede');
      const halo = root.querySelector('.halo');

      // Timestamp
      try{
        const dt = new Date();
        const opts = {year:'numeric', month:'short', day:'2-digit', hour:'2-digit', minute:'2-digit', second:'2-digit'};
        const tz = Intl.DateTimeFormat().resolvedOptions().timeZone || '';
        updated.textContent = `Last updated: ${dt.toLocaleString(undefined, opts)}${tz ? ' ('+tz+')' : ''}`;
      }catch{
        updated.textContent = 'Last updated: ' + new Date().toString();
      }

      // DPR sizing
      let W=0, H=0, DPR = Math.min(Math.max(window.devicePixelRatio || 1, 1), 2);
      function resize(){
        const r = canvas.getBoundingClientRect();
        canvas.width = Math.floor(r.width * DPR);
        canvas.height = Math.floor(r.height * DPR);
        W = canvas.width; H = canvas.height;
        ctx.setTransform(DPR,0,0,DPR,0,0);
      }
      window.addEventListener('resize', resize, {passive:true});
      resize();

      function getPal(){
        const cs = getComputedStyle(root);
        return {
          p1: cs.getPropertyValue('--p1').trim(),
          p2: cs.getPropertyValue('--p2').trim(),
          p3: cs.getPropertyValue('--p3').trim(),
          ink: cs.getPropertyValue('--ink').trim()
        };
      }
      function hexToRGB(hex){
        const h = hex.replace('#','').trim();
        const v = parseInt(h.length===3 ? h.split('').map(x=>x+x).join('') : h, 16);
        return [(v>>16)&255, (v>>8)&255, v&255];
      }

      // State
      const prefersReduce = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
      let pulse = !prefersReduce;
      motionBtn.setAttribute('aria-pressed', pulse ? 'true' : 'false');
      motionBtn.textContent = pulse ? 'Pulse' : 'Calm';

      let t = 0;
      const ptr = {x:0.5, y:0.5};

      function onMove(e){
        const r = root.getBoundingClientRect();
        const x = Math.min(Math.max(e.clientX - r.left, 0), r.width);
        const y = Math.min(Math.max(e.clientY - r.top, 0), r.height);
        ptr.x = x / r.width; ptr.y = y / r.height;
        root.style.setProperty('--mx', (ptr.x*100).toFixed(2)+'%');
        root.style.setProperty('--my', (ptr.y*100).toFixed(2)+'%');
        halo.style.opacity = root.classList.contains('dawn') ? '0.52' : '0.40';
      }
      root.addEventListener('pointermove', onMove);
      root.addEventListener('pointerleave', ()=>{ halo.style.opacity = root.classList.contains('dawn') ? '0.48' : '0.35'; });

      // Bloom drawing
      function strokeCurve(k, phase, rad, color, thickness, opacity){
        const cx = W/(2*DPR), cy = H/(2*DPR);
        ctx.save();
        ctx.translate(cx, cy);
        const grad = ctx.createLinearGradient(-rad, -rad, rad, rad);
        grad.addColorStop(0, color.a);
        grad.addColorStop(1, color.b);
        ctx.strokeStyle = grad;
        ctx.globalAlpha = opacity;
        ctx.lineWidth = thickness;
        ctx.lineJoin = 'round';
        ctx.lineCap = 'round';
        ctx.beginPath();
        const loops = 2;
        for(let i=0;i<=Math.PI*2*loops;i+=0.008){
          const wave = 0.6 + 0.4*Math.sin(k*i + phase);
          const r = rad * wave;
          const x = Math.cos(i)*r;
          const y = Math.sin(i)*r;
          if(i===0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
        }
        ctx.stroke();
        ctx.restore();
      }

      function glowDot(x, y, size, c){
        ctx.save();
        const g = ctx.createRadialGradient(x, y, 0, x, y, size*4);
        g.addColorStop(0, c);
        g.addColorStop(1, 'transparent');
        ctx.fillStyle = g;
        ctx.globalAlpha = 0.8;
        ctx.beginPath(); ctx.arc(x, y, size, 0, Math.PI*2); ctx.fill();
        ctx.restore();
      }

      // Loop
      let raf = null;
      function draw(){
        const pal = getPal();
        const [r1,g1,b1] = hexToRGB(pal.p1);
        const [r2,g2,b2] = hexToRGB(pal.p2);
        const [r3,g3,b3] = hexToRGB(pal.p3);
        const cx = W/(2*DPR), cy = H/(2*DPR);
        const R = Math.min(W,H)/(2.6*DPR);

        const speed = (pulse ? 1 : 0.5) * (prefersReduce ? 0.5 : 1.0);
        t += 0.008 * speed;

        ctx.clearRect(0,0,W,H);

        // Backdrop subtle vignette
        const vg = ctx.createRadialGradient(cx, cy, 0, cx, cy, Math.min(W,H)/(1.8*DPR));
        vg.addColorStop(0, `rgba(${r3},${g3},${b3},0.12)`);
        vg.addColorStop(1, 'transparent');
        ctx.fillStyle = vg;
        ctx.fillRect(0,0,W,H);

        // Parallax offset
        const ox = (ptr.x - 0.5) * 24;
        const oy = (ptr.y - 0.5) * 24;

        // Layered harmonics
        strokeCurve(4 + Math.floor(ptr.x*4), t*1.2, R*1.00, {a:`rgba(${r1},${g1},${b1},0.85)`, b:`rgba(${r2},${g2},${b2},0.85)`}, 2.2, 0.9);
        strokeCurve(7, t*0.9 + 1.2, R*0.76, {a:`rgba(${r2},${g2},${b2},0.85)`, b:`rgba(${r3},${g3},${b3},0.85)`}, 2.0, 0.8);
        strokeCurve(10, t*0.7 + 2.4, R*0.55, {a:`rgba(${r3},${g3},${b3},0.85)`, b:`rgba(${r1},${g1},${b1},0.85)`}, 1.8, 0.7);

        // Central core + satellites
        const coreSize = 6 + 4*Math.sin(t*2);
        glowDot(cx+ox*0.15, cy+oy*0.15, coreSize, `rgba(${r3},${g3},${b3},0.9)`);
        const satCount = 6;
        for(let i=0;i<satCount;i++){
          const ang = t*1.2 + i*(Math.PI*2/satCount);
          const rr = R*0.92;
          glowDot(cx + Math.cos(ang)*rr*0.62 + ox*0.08, cy + Math.sin(ang)*rr*0.62 + oy*0.08, 3.2, `rgba(${r1},${g1},${b1},0.7)`);
        }

        raf = requestAnimationFrame(draw);
      }
      function start(){ if(!raf){ raf = requestAnimationFrame(draw); } }
      function stop(){ if(raf){ cancelAnimationFrame(raf); raf = null; } }

      start();

      // Theme
      themeBtn.addEventListener('click', ()=>{
        const on = !root.classList.contains('dawn');
        root.classList.toggle('dawn', on);
        themeBtn.setAttribute('aria-pressed', on ? 'true' : 'false');
        themeBtn.textContent = on ? 'Dusk' : 'Dawn';
      });

      // Motion
      motionBtn.addEventListener('click', ()=>{
        pulse = !pulse;
        motionBtn.setAttribute('aria-pressed', pulse ? 'true' : 'false');
        motionBtn.textContent = pulse ? 'Pulse' : 'Calm';
      });

      // Snap export
      snapBtn.addEventListener('click', ()=>{
        try{
          const a = document.createElement('a');
          a.href = canvas.toDataURL('image/png');
          const stamp = new Date().toISOString().replace(/[:.]/g,'-');
          a.download = `daydream-${stamp}.png`;
          document.body.appendChild(a);
          a.click();
          a.remove();
          snapBtn.animate([{transform:'scale(1)'},{transform:'scale(0.96)'},{transform:'scale(1)'}], {duration:180, easing:'ease-out'});
        }catch(e){
          console.warn('Snapshot failed', e);
        }
      });

      // Palette chips
      chips.forEach(chip=>{
        chip.addEventListener('click', ()=>{
          chips.forEach(c=>c.setAttribute('aria-pressed','false'));
          chip.setAttribute('aria-pressed','true');
          root.style.setProperty('--p1', chip.getAttribute('data-p1'));
          root.style.setProperty('--p2', chip.getAttribute('data-p2'));
          root.style.setProperty('--p3', chip.getAttribute('data-p3'));
          const msg = chip.getAttribute('data-msg') || lede.getAttribute('data-default');
          lede.textContent = msg;
          chip.animate(
            [{ transform:'translateY(-2px) scale(1)' },
             { transform:'translateY(0) scale(0.98)' },
             { transform:'translateY(-1px) scale(1)' }],
            { duration:220, easing:'ease-out' }
          );
        });
      });

      // Initial pointer center and resize observer
      const rr = root.getBoundingClientRect();
      onMove({clientX: rr.left + rr.width*0.5, clientY: rr.top + rr.height*0.5});
      new ResizeObserver(()=>{ resize(); }).observe(canvas);

      // Pause when tab hidden
      document.addEventListener('visibilitychange', ()=>{
        if(document.hidden){ stop(); motionBtn.textContent = 'Calm'; }
        else { start(); motionBtn.textContent = pulse ? 'Pulse' : 'Calm'; }
      });
    })();
  </script>
</div>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


