<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vibing</title>
    <style>
      :root {
        --bg: #0f1221;
        --fg: #e6e8f0;
        --muted: #9aa3b2;
        --accent: #8b5cf6;
      }
      html, body {
        height: 100%;
      }
      body {
        margin: 0;
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        color: var(--fg);
        background: radial-gradient(1200px 800px at 70% 10%, #1b1f3a, var(--bg));
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .card {
        width: min(720px, 92vw);
        background: rgba(255,255,255,0.04);
        border: 1px solid rgba(255,255,255,0.08);
        border-radius: 16px;
        padding: 28px 24px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        backdrop-filter: blur(6px);
      }
      h1 {
        margin: 0 0 10px 0;
        font-size: 28px;
        letter-spacing: 0.3px;
      }
      .muted {
        color: var(--muted);
        font-size: 14px;
        margin-bottom: 18px;
      }
      #content {
        font-size: 18px;
        line-height: 1.6;
        background: rgba(255,255,255,0.04);
        border: 1px dashed rgba(255,255,255,0.12);
        border-radius: 12px;
        padding: 16px;
      }
      .footer {
        margin-top: 18px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        font-size: 14px;
        color: var(--muted);
      }
      .badge {
        display: inline-block;
        background: rgba(139, 92, 246, 0.18);
        color: #d4c2ff;
        padding: 4px 10px;
        border-radius: 999px;
        font-size: 12px;
        border: 1px solid rgba(139, 92, 246, 0.35);
        letter-spacing: 0.2px;
      }
    </style>
  </head>
  <body>
    <!-- BEGIN_EDITABLE -->
      <section id="content">
<div class="vibe-1866" data-mood="noir" aria-label="The Kinetic Garden — a living typographic sculpture">
  <style>
    .vibe-1866 {
      --r: 28px;
      --ink: #f2f6ff;
      --muted: #a8b2c8;
      --bg1: #070910;
      --bg2: #0e1524;
      --edge: rgba(255,255,255,0.10);
      --acc1: #79ffe1;
      --acc2: #7aa8ff;
      --fade-rgb: 7, 9, 16;
      --mx: 50%;
      --my: 50%;
      color: var(--ink);
      font-family: ui-sans-serif, system-ui, -apple-system, Inter, Segoe UI, Roboto, Helvetica, Arial;
      letter-spacing: 0.1px;
      position: relative; isolation: isolate;
    }
    .vibe-1866[data-mood="dawn"]{
      --ink: #12131a;
      --muted: #5c6680;
      --bg1: #fff7eb;
      --bg2: #e8fff2;
      --edge: rgba(10, 12, 20, 0.12);
      --acc1: #ff9e6e;
      --acc2: #ffd56b;
      --fade-rgb: 252, 248, 236;
    }
    .vibe-1866[data-mood="iridescent"]{
      --ink: #eef2ff;
      --muted: #b9c3df;
      --bg1: #10081a;
      --bg2: #101a2a;
      --edge: rgba(255,255,255,0.14);
      --acc1: #a77cff;
      --acc2: #69ffe7;
      --fade-rgb: 14, 8, 24;
    }

    .vibe-1866 .frame {
      position: relative;
      min-height: clamp(560px, 72vmin, 860px);
      border-radius: var(--r);
      overflow: hidden;
      background:
        radial-gradient(120% 140% at -10% 120%, color-mix(in oklab, var(--acc2) 16%, transparent) 0 44%, transparent 70%),
        radial-gradient(120% 140% at 110% -20%, color-mix(in oklab, var(--acc1) 16%, transparent) 0 44%, transparent 70%),
        linear-gradient(160deg, var(--bg1), var(--bg2));
      border: 1px solid color-mix(in oklab, var(--edge), transparent 40%);
      box-shadow: 0 30px 80px rgba(0,0,0,0.45), 0 1px 0 rgba(255,255,255,0.06) inset;
    }

    /* Ambient fabric + gloss */
    .vibe-1866 .fabric,
    .vibe-1866 .gloss { position:absolute; inset:0; pointer-events:none; }
    .vibe-1866 .fabric {
      background:
        conic-gradient(from 0deg at 50% 50%, rgba(255,255,255,0.03), transparent 30deg, rgba(255,255,255,0.03) 60deg, transparent 90deg) 0/200% 200%,
        repeating-linear-gradient(115deg, rgba(255,255,255,0.05) 0 1px, transparent 1px 10px);
      mix-blend-mode: overlay;
      opacity: 0.4;
      animation: fabric-shift-1866 22s linear infinite;
    }
    @keyframes fabric-shift-1866 {
      0% { background-position: 0% 0%, 0% 0%; }
      50% { background-position: 100% 100%, 50% 50%; }
      100% { background-position: 0% 0%, 0% 0%; }
    }
    .vibe-1866 .gloss {
      background:
        radial-gradient(500px 360px at var(--mx) var(--my), color-mix(in oklab, var(--acc1) 30%, transparent) 0 50%, transparent 70%),
        radial-gradient(900px 600px at 50% 120%, rgba(255,255,255,0.06), transparent 60%);
      mix-blend-mode: screen;
      filter: saturate(1.1) blur(0.2px);
      opacity: 0.45;
      transition: opacity 300ms ease;
    }

    .vibe-1866 .ribbons {
      position:absolute; inset:0; display:block;
      filter: saturate(1.05) contrast(1.02);
    }

    /* Floating pebbles */
    .vibe-1866 .pebbles { position:absolute; inset:0; pointer-events:none; }
    .vibe-1866 .peb {
      position:absolute; width: 8px; height: 8px; border-radius: 50%;
      background: radial-gradient(circle at 30% 30%, #fff, rgba(255,255,255,0)) ;
      opacity: 0.45; filter: blur(0.2px);
      animation: float-1866 9s ease-in-out infinite;
      mix-blend-mode: screen;
    }
    .vibe-1866 .peb:nth-child(odd){ width:10px; height:10px; opacity: 0.35; animation-duration: 11s; }
    .vibe-1866 .peb:nth-child(3n){ width:12px; height:12px; opacity: 0.28; animation-duration: 13s; }
    @keyframes float-1866 {
      0%   { transform: translateY(0) translateX(0) scale(1); }
      50%  { transform: translateY(-18px) translateX(6px) scale(1.06); }
      100% { transform: translateY(0) translateX(0) scale(1); }
    }

    /* Panel */
    .vibe-1866 .panel {
      position: relative; z-index: 2;
      max-width: 980px;
      margin: clamp(16px, 3.2vw, 28px);
      padding: clamp(18px, 3.6vw, 36px);
      border-radius: calc(var(--r) - 10px);
      background: color-mix(in oklab, rgba(0,0,0,0.25), transparent 40%);
      backdrop-filter: blur(10px) saturate(1.15);
      border: 1px solid color-mix(in oklab, var(--edge), transparent 15%);
      box-shadow: 0 18px 60px rgba(0,0,0,0.35);
    }
    .vibe-1866 .eyebrow {
      display: inline-flex; align-items: center; gap: 10px;
      font-size: 11px; letter-spacing: 0.22em; text-transform: uppercase;
      color: var(--muted);
    }
    .vibe-1866 .eyebrow::before {
      content: ""; width: 38px; height: 1px;
      background: linear-gradient(90deg, transparent, var(--muted));
      border-radius: 2px;
    }
    .vibe-1866 .title {
      margin: 4px 0 6px;
      font-weight: 900;
      letter-spacing: -0.02em;
      line-height: 1.02;
      font-size: clamp(34px, 6.8vw, 82px);
    }
    .vibe-1866 .accent {
      background: linear-gradient(90deg, var(--acc1), var(--acc2));
      -webkit-background-clip: text; background-clip: text; color: transparent;
      text-shadow: 0 0 26px color-mix(in oklab, var(--acc2), transparent 60%);
    }
    .vibe-1866 .sub {
      color: color-mix(in oklab, var(--muted) 95%, transparent);
      font-size: clamp(14px, 2.2vw, 18px);
      line-height: 1.7; max-width: 74ch;
      margin: 6px 0 10px;
    }

    .vibe-1866 .controls {
      display: flex; flex-wrap: wrap; align-items: center; gap: 10px;
      margin-top: 10px;
    }
    .vibe-1866 .cta {
      appearance: none; border: 0; cursor: pointer; user-select: none;
      border-radius: 999px;
      padding: 12px 18px;
      font-weight: 900; font-size: 14px; letter-spacing: 0.02em;
      color: #071019;
      background: linear-gradient(90deg, var(--acc1), var(--acc2));
      box-shadow: 0 12px 28px color-mix(in oklab, var(--acc2), transparent 60%);
      transition: transform 140ms ease, filter 180ms ease, box-shadow 180ms ease;
    }
    .vibe-1866 .cta:hover { transform: translateY(-1px); filter: saturate(1.05); box-shadow: 0 16px 36px color-mix(in oklab, var(--acc1), transparent 50%); }

    .vibe-1866 .seg {
      display: inline-flex; gap: 4px; padding: 6px;
      border-radius: 999px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.12);
    }
    .vibe-1866[data-mood="dawn"] .seg { background: rgba(10,15,30,0.06); border-color: rgba(10,15,30,0.12); }
    .vibe-1866 .seg button {
      appearance: none; border: 0; cursor: pointer;
      padding: 8px 10px; border-radius: 999px;
      background: transparent; color: var(--muted);
      font-size: 12px; font-weight: 800; letter-spacing: 0.06em;
      transition: color 150ms ease, background 150ms ease;
    }
    .vibe-1866 .seg button.active,
    .vibe-1866 .seg button:hover { color: var(--ink); background: rgba(255,255,255,0.12); }

    .vibe-1866 .slider {
      display: inline-flex; align-items: center; gap: 10px;
      padding: 8px 12px; border-radius: 999px;
      background: rgba(255,255,255,0.06);
      border: 1px solid rgba(255,255,255,0.12);
      color: var(--muted);
      font-size: 12px; font-weight: 800; letter-spacing: 0.04em;
    }
    .vibe-1866 input[type="range"] {
      -webkit-appearance: none; appearance: none;
      width: 160px; height: 28px; background: transparent;
    }
    .vibe-1866 input[type="range"]::-webkit-slider-runnable-track,
    .vibe-1866 input[type="range"]::-moz-range-track {
      height: 6px; border-radius: 999px;
      background: linear-gradient(90deg, var(--acc1), var(--acc2));
      opacity: 0.75;
    }
    .vibe-1866 input[type="range"]::-webkit-slider-thumb,
    .vibe-1866 input[type="range"]::-moz-range-thumb {
      -webkit-appearance: none; appearance: none;
      width: 16px; height: 16px; border-radius: 50%;
      background: #fff; border: 2px solid color-mix(in oklab, var(--acc2), var(--acc1) 50%);
      margin-top: -5px; box-shadow: 0 3px 10px rgba(0,0,0,0.25);
    }

    .vibe-1866 .meta {
      margin-top: 12px; display: flex; gap: 12px; flex-wrap: wrap; align-items: center;
      color: var(--muted); font-size: 12px; opacity: 0.95;
    }
    .vibe-1866 .live { display: inline-flex; align-items: center; gap: 8px; }
    .vibe-1866 .dot {
      width: 8px; height: 8px; border-radius: 50%;
      background: radial-gradient(circle at 50% 50%, var(--acc1), var(--acc2));
      box-shadow: 0 0 0 0 color-mix(in oklab, var(--acc1), transparent 45%);
      animation: pulse-dot-1866 2000ms ease-out infinite;
    }
    @keyframes pulse-dot-1866 {
      0% { box-shadow: 0 0 0 0 color-mix(in oklab, var(--acc1), transparent 45%); }
      70% { box-shadow: 0 0 0 11px transparent; }
      100% { box-shadow: 0 0 0 0 transparent; }
    }

    .vibe-1866.paused .fabric { animation-play-state: paused !important; }
    .vibe-1866.paused .peb { animation-play-state: paused !important; }

    @media (max-width: 860px) {
      .vibe-1866 .panel { padding: 18px; margin: 14px; }
      .vibe-1866 input[type="range"] { width: 120px; }
      .vibe-1866 .title { letter-spacing: -0.01em; }
    }
  </style>

  <section class="frame" role="region" aria-labelledby="kg-title">
    <canvas class="ribbons" aria-hidden="true"></canvas>
    <div class="fabric" aria-hidden="true"></div>
    <div class="gloss" aria-hidden="true"></div>

    <div class="pebbles" aria-hidden="true">
      <span class="peb" style="left:8%; top:76%"></span>
      <span class="peb" style="left:18%; top:24%"></span>
      <span class="peb" style="left:32%; top:62%"></span>
      <span class="peb" style="left:46%; top:18%"></span>
      <span class="peb" style="left:62%; top:72%"></span>
      <span class="peb" style="left:74%; top:34%"></span>
      <span class="peb" style="left:84%; top:58%"></span>
      <span class="peb" style="left:52%; top:84%"></span>
    </div>

    <div class="panel">
      <div class="eyebrow">Vibe Studio · Iteration 1866</div>
      <h1 class="title" id="kg-title">
        The Kinetic Garden — <span class="accent">letters grown from motion</span>
      </h1>
      <p class="sub">
        Ribbons lace the air, weaving a wordless sculpture. Drift your cursor to guide the stems. Hold Shift to slow; press Space to pause.
      </p>

      <div class="controls">
        <button class="cta" type="button" aria-label="Bloom the ribbons">Bloom ✷</button>

        <div class="seg" role="tablist" aria-label="Mood">
          <button role="tab" aria-selected="true" class="active" data-mood="noir">Noir</button>
          <button role="tab" aria-selected="false" data-mood="dawn">Dawn</button>
          <button role="tab" aria-selected="false" data-mood="iridescent">Iridescent</button>
        </div>

        <label class="slider" for="weave">
          Weave
          <input id="weave" type="range" min="12" max="120" value="48" aria-label="Weave density">
        </label>
      </div>

      <div class="meta">
        <span class="live"><span class="dot" aria-hidden="true"></span> Live</span>
        <span id="last-updated">Last updated: 2026-01-10 09:17:30 EST</span>
      </div>
    </div>
  </section>

  <script>
    (function(){
      const root = document.currentScript.closest('.vibe-1866');
      const canvas = root.querySelector('.ribbons');
      const ctx = canvas.getContext('2d', { alpha: true });
      const frame = root.querySelector('.frame');
      const gloss = root.querySelector('.gloss');
      const moodButtons = root.querySelectorAll('.seg [data-mood]');
      const weave = root.querySelector('#weave');
      const cta = root.querySelector('.cta');
      const updated = root.querySelector('#last-updated');

      // Last updated
      try {
        const now = new Date();
        const fmt = new Intl.DateTimeFormat(undefined, {
          year: 'numeric', month: 'short', day: '2-digit',
          hour: '2-digit', minute: '2-digit', second: '2-digit',
          hour12: false, timeZoneName: 'short'
        });
        updated.textContent = 'Last updated: ' + fmt.format(now);
      } catch {
        updated.textContent = 'Last updated: ' + new Date().toLocaleString();
      }

      // Size / DPR
      let dpr = Math.max(1, window.devicePixelRatio || 1);
      function resize(){
        const r = frame.getBoundingClientRect();
        dpr = Math.max(1, window.devicePixelRatio || 1);
        canvas.width = Math.max(1, Math.floor(r.width * dpr));
        canvas.height = Math.max(1, Math.floor(r.height * dpr));
        canvas.style.width = r.width + 'px';
        canvas.style.height = r.height + 'px';
        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
        W = r.width; H = r.height; CX = W/2; CY = H/2;
      }
      let W=0, H=0, CX=0, CY=0;
      resize();
      new ResizeObserver(resize).observe(frame);
      window.addEventListener('resize', resize);

      // CSS palette access
      let colors = { acc1:'#79ffe1', acc2:'#7aa8ff', fadeRGB:'7,9,16', ink:'#f2f6ff' };
      function readVars(){
        const cs = getComputedStyle(root);
        colors = {
          acc1: cs.getPropertyValue('--acc1').trim(),
          acc2: cs.getPropertyValue('--acc2').trim(),
          fadeRGB: cs.getPropertyValue('--fade-rgb').trim(),
          ink: cs.getPropertyValue('--ink').trim()
        };
      }
      readVars();

      // Mood toggling
      function setMood(m){
        root.setAttribute('data-mood', m);
        moodButtons.forEach(b => {
          const active = b.getAttribute('data-mood') === m;
          b.classList.toggle('active', active);
          b.setAttribute('aria-selected', active ? 'true' : 'false');
        });
        readVars();
        clearSoft();
      }
      moodButtons.forEach(b => b.addEventListener('click', () => setMood(b.getAttribute('data-mood'))));
      window.addEventListener('keydown', (e) => {
        const k = e.key.toLowerCase();
        if (k === '1') setMood('noir');
        if (k === '2') setMood('dawn');
        if (k === '3') setMood('iridescent');
      });

      // Pointer influence
      const pointer = { x: CX, y: CY, over: false, slow: false };
      function setGlow(x, y){
        root.style.setProperty('--mx', x + 'px');
        root.style.setProperty('--my', y + 'px');
      }
      frame.addEventListener('pointermove', (e) => {
        const r = frame.getBoundingClientRect();
        pointer.x = e.clientX - r.left;
        pointer.y = e.clientY - r.top;
        pointer.over = true;
        setGlow(pointer.x, pointer.y);
      });
      frame.addEventListener('pointerleave', () => { pointer.over = false; setGlow(CX, CY); });
      window.addEventListener('keydown', (e)=>{ if (e.key === 'Shift') pointer.slow = true; });
      window.addEventListener('keyup',   (e)=>{ if (e.key === 'Shift') pointer.slow = false; });

      // Threads configuration
      const threads = [];
      const THREAD_COUNT = 4;
      function resetThreads(){
        threads.length = 0;
        for (let i = 0; i < THREAD_COUNT; i++){
          threads.push({
            t: Math.random()*Math.PI*2,
            hueBias: i / (THREAD_COUNT-1),
            amp: Math.min(W,H) * (0.16 + i*0.06),
            a: 2 + i, b: 3 + (THREAD_COUNT - i),
            width: 1.6 + i*0.6,
            phase: Math.random()*Math.PI*2
          });
        }
      }
      resetThreads();

      // Controls
      let density = Number(weave.value); // samples per curve
      weave.addEventListener('input', () => { density = Number(weave.value); });

      // Bloom impulse
      let bloom = 0;
      function triggerBloom(){
        bloom = 1;
      }
      cta.addEventListener('click', triggerBloom);

      // Animation system
      let paused = false, raf = null;
      function setPaused(p){
        paused = p;
        root.classList.toggle('paused', p);
        if (p && raf){ cancelAnimationFrame(raf); raf = null; }
        if (!p && !raf){ raf = requestAnimationFrame(tick); }
      }
      window.addEventListener('keydown', (e) => {
        if (e.code === 'Space'){ e.preventDefault(); setPaused(!paused); }
        if (e.key.toLowerCase() === 'b') triggerBloom();
        if (e.key.toLowerCase() === 'r'){ resetThreads(); clearSoft(); }
      });

      // Utilities
      function mix(a, b, t){
        const pa = a.replace('#','');
        const pb = b.replace('#','');
        const ar = parseInt(pa.substring(0,2),16), ag = parseInt(pa.substring(2,4),16), ab = parseInt(pa.substring(4,6),16);
        const br = parseInt(pb.substring(0,2),16), bg = parseInt(pb.substring(2,4),16), bb = parseInt(pb.substring(4,6),16);
        const r = Math.round(ar + (br - ar)*t);
        const g = Math.round(ag + (bg - ag)*t);
        const b2 = Math.round(ab + (bb - ab)*t);
        return `rgb(${r},${g},${b2})`;
      }
      const clearSoft = () => { ctx.clearRect(0,0,W,H); };

      let tPrev = performance.now();
      function tick(now){
        const dt = Math.min(40, now - tPrev);
        tPrev = now;

        // Fade layer
        ctx.globalCompositeOperation = 'source-over';
        ctx.fillStyle = `rgba(${colors.fadeRGB}, ${0.08})`;
        ctx.fillRect(0,0,W,H);

        // Gentle center attractor toward pointer
        const lerp = pointer.over ? (pointer.slow ? 0.03 : 0.09) : 0.03;
        const attractX = CX + (pointer.x - CX) * lerp;
        const attractY = CY + (pointer.y - CY) * lerp;

        // Bloom decays
        if (bloom > 0){ bloom = Math.max(0, bloom - 0.02 * (dt/16.6)); }

        // Draw threads
        const baseSpeed = (pointer.slow ? 0.0012 : 0.0022);
        for (let i = 0; i < threads.length; i++){
          const th = threads[i];
          th.t += baseSpeed * (1 + i*0.12) * (dt / 16.6);
          const A = th.amp * (1 + bloom*0.35);
          const B = th.amp * (0.68 + 0.08*i) * (1 + bloom*0.25);
          const samples = Math.max(18, Math.round(density * (1 + i*0.1)));
          const col = mix(colors.acc1, colors.acc2, th.hueBias);
          ctx.lineWidth = th.width * (1 + bloom*0.35);
          ctx.lineCap = 'round';
          ctx.lineJoin = 'round';

          // Ribbon body (gradient stroke by layering)
          for (let layer = 0; layer < 3; layer++){
            const alpha = [0.15, 0.35, 0.8][layer];
            const lw = ctx.lineWidth * [2.4, 1.6, 1][layer];
            ctx.beginPath();
            for (let s = 0; s <= samples; s++){
              const tt = th.t + (s/samples) * Math.PI*2;
              const x = attractX + Math.sin(th.a*tt + th.phase) * A + Math.cos(tt*0.5 + i)*6;
              const y = attractY + Math.sin(th.b*tt) * B + Math.sin(tt*0.6 + i)*6;
              if (s === 0) ctx.moveTo(x,y); else ctx.lineTo(x,y);
            }
            ctx.strokeStyle = `rgba(${hexToRGB(col)}, ${alpha})`;
            ctx.lineWidth = lw;
            ctx.shadowColor = col;
            ctx.shadowBlur = layer === 0 ? 18 : (layer === 1 ? 10 : 6);
            ctx.stroke();
            ctx.shadowBlur = 0;
          }

          // Glints
          const gX = attractX + Math.sin(th.a*th.t + th.phase) * A;
          const gY = attractY + Math.sin(th.b*th.t) * B;
          ctx.beginPath();
          ctx.fillStyle = 'rgba(255,255,255,0.6)';
          ctx.arc(gX, gY, 1.6 + i*0.3, 0, Math.PI*2);
          ctx.fill();
        }

        raf = requestAnimationFrame(tick);
      }

      function hexToRGB(h){
        const p = h.replace('#','');
        const r = parseInt(p.substring(0,2),16);
        const g = parseInt(p.substring(2,4),16);
        const b = parseInt(p.substring(4,6),16);
        return `${r},${g},${b}`;
      }

      // Respect reduced motion
      const m = window.matchMedia('(prefers-reduced-motion: reduce)');
      function applyReduced(){ if (m.matches) setPaused(true); }
      m.addEventListener?.('change', applyReduced);
      applyReduced();

      // Kick off
      setPaused(false);

      // Keep glow centered on resize
      window.addEventListener('resize', () => { setGlow(CX, CY); resetThreads(); });

    })();
  </script>
</div>
      </section>
      <!-- END_EDITABLE -->
    <script>
      // Only show a local placeholder if the agent hasn't written a timestamp yet
      const el = document.getElementById('last-updated');
      if (el && (!el.textContent || el.textContent.includes('not yet'))) {
        const now = new Date();
        el.textContent = `Last updated: ${now.toLocaleString(undefined, { hour12: false })}`;
      }
    </script>
  </body>
  </html>


